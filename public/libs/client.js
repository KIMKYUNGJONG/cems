/*
 * client.js - v0.3.8
 * Compiled Thu Feb 18 2021 17:03:46 GMT+0800 (中国标准时间)
 * Copyright (c) 2021 www.hightopo.com
 */

var hteditor=function(){"use strict";function w(w,t,G){G.style.cursor="ew-resize";var A=G.innerHTML.charAt(0),I=t.querySelector("input.color_"+A),R=function(t){t.preventDefault();var G=("A"===A?parseFloat(I.value):parseInt(I.value))||0,R=ht.Default.getClientPoint(t).x,_=function(t){t.preventDefault();var _=ht.Default.getClientPoint(t).x-R,r=void 0;"A"===A?(r=G+.01*_,r>1&&(r=1),r<0&&(r=0),I.value=r.toFixed(2)):(r=G+1*_,r>255&&(r=255),r<0&&(r=0),I.value=r),w.updateInputChange()};window.addEventListener("mousemove",_,!1),window.addEventListener("touchmove",_,!1);var r=function(w){w.preventDefault(),window.removeEventListener("mousemove",_,!1),window.removeEventListener("touchmove",_,!1),window.removeEventListener("mouseup",r,!1),window.removeEventListener("touchend",r,!1)};window.addEventListener("mouseup",r,!1),window.addEventListener("touchend",r,!1)};G.addEventListener("mousedown",R,!1),G.addEventListener("touchstart",R,!1)}function t(w){if(w){return new Function("return "+w.trim())()}}function G(w){var t=new RegExp("(^|&)"+w+"=([^&]*)(&|$)"),G=window.location.search.substr(1).match(t);return null!=G?decodeURIComponent(G[2]):null}function A(w){return ht.Default.clone(w)}function I(w){return parseFloat(w.toFixed(ht.Default.numberDigits))}function R(w,t){if(null!=w)return t||!kG.config.traceMissingI18n||kG.customStrings[w]||kG.strings[w]||console.log("i18n missing:["+w+"]"),t?kG.customStrings[w]||kG.strings[w]:kG.customStrings[w]||kG.strings[w]||w}function _(w,t){return w&&w.rowHeight?w.rowHeight:t&&t.rowHeight?t.rowHeight:void 0}function r(w,t){return w&&w.widths?w.widths:t&&t.widths?t.widths:void 0}function y(w,t){return t?t.map(function(w){return R(w)}):w}function l(w,t){var G=w.indexOf(t);G>=0&&w.splice(G,1)}function C(w){return ht.Default.isEmptyObject(w)}function V(w){return w?fw(w)?w:w.__ht__||w.toString():""}function q(w){var t=V(w),G=t.indexOf("{")+1,A=t.lastIndexOf("}");for(t=t.substring(G,A);t.startsWith("\n");)t=t.substr(1);for(;t.endsWith("\n");)t=t.substring(0,t.length-1);return t}function k(w){var t=w.indexOf("function");if(w&&!(t<0)){var G=void 0,A=w.indexOf("{")+1,I=w.lastIndexOf("}"),R=w.indexOf("(")+1,_=w.indexOf(")");return A&&I&&R&&_&&(G=new Function(w.substring(R,_),w.substring(A,I)),G.__ht__=w.substr(t)),G}}function Z(w,t,G){if(G)return G;if("s"===w)return function(w){return w.s(t)};if("a"===w)return function(w){return w.a(t)};if("p"===w){var A=ht.Default.getter(t);return function(w){if(w[A])return w[A]()}}}function z(w,t,G){if(void 0!==G)return G;if("s"===w)return function(w,G){return w.s(t,G)};if("a"===w)return function(w,G){return w.a(t,G)};if("p"===w){var A=ht.Default.setter(t);return function(w,t){if(w[A])return w[A](t)}}}function x(w){return 37===w.keyCode}function L(w){return 38===w.keyCode}function Q(w){return 39===w.keyCode}function J(w){return 40===w.keyCode}function B(w){return 13===w.keyCode}function n(w){return 27===w.keyCode}function f(w){return ht.Default.isDelete(w)}function i(w){return ht.Default.isLeftButton(w)}function F(w){return ht.Default.isDoubleClick(w)}function S(w,t){ht.Default.startDragging(w,t)}function N(w){return ht.Default.getClientPoint(w)}function T(w){return ht.Default.getTargetElement(w)}function m(w){return ht.Default.getPagePoint(w)}function U(){return ht.Default.getWindowInfo()}function c(w,t){return ht.Default.getDistance.apply(this,arguments)}function v(){return ht.Default.unionPoint.apply(this,arguments)}function E(w){return ht.Default.getImageMap()[w]?(delete ht.Default.getImageMap()[w],!0):ht.Default.getCompTypeMap()[w]?(delete ht.Default.getCompTypeMap()[w],!0):!!ht.Default.getShape3dModelMap()[w]&&(delete ht.Default.getShape3dModelMap()[w],!0)}function O(w,t,G){return ht.Default.getPosition(w,t,G)}function H(w,t,G){return ht.Default.stringify(w,t,G)}function X(w,t){return ht.Default.parse(w,t)}function b(w){if(!w)return"";var t=w.lastIndexOf(".");return-1===t?w:w.substr(0,t)}function p(w){return w=w.replace(/^.*[\\\/]/,""),b(w)}function M(w){if(!w)return"";var t=w.lastIndexOf(".");return-1===t?"":w.substr(t,w.length)}function u(w,t,G,A,I){ht.Default.layout(w,t,G,A,I)}function a(w,t,G,A){ht.Default.setCanvas(w,t,G,A)}function h(w){ht.Default.removeHTML(w)}function D(w,t,G){ht.Default.xhrLoad(w,t,G)}function g(w){return ht.Default.isShiftDown(w)}function W(w){return ht.Default.isCtrlDown(w)}function e(w,t){return ht.Default.createView(w,t)}function o(w){return ht.Default.createCanvas(w)}function K(w,t){return ht.Default.createDiv(t,w)}function P(w,t){return ht.Default.unionRect(w,t)}function j(w,t,G,A,I,R,_,r,y,l){return ht.Default.drawText(w,t,G,A,I,R,_,r,y,l)}function d(w,t,G,A,I,R,_,r,y,l){ht.Default.drawStretchImage(w,t,G,A,I,R,_,r,y,l)}function s(w,t,G,A,I,R,_){ht.Default.drawBorder(w,t,G,A,I,R,_)}function Y(w,t,G,A,I,R){var _=w.getContext("2d");return _.save(),t=t||0,G=G||0,A=A||1,R=R||ht.Default.devicePixelRatio,_.translate(t*R,G*R),A*=R,1!==A&&_.scale(A,A),I&&(_.beginPath(),_.rect(I.x,I.y,I.width,I.height),_.clip(),_.clearRect(I.x,I.y,I.width,I.height)),_}function ww(w,t){ht.Default.extendClass(w,t)}function tw(w,t){t[w._id]=w,w.eachChild(function(w){t[w._id]=w,tw(w,t)})}function Gw(w){ht.Default.preventDefault(w)}function Aw(w){return/^displays/.test(w)}function Iw(w){return/^symbols/.test(w)}function Rw(w){return/^components/.test(w)}function _w(w){return/^scenes/.test(w)}function rw(w){return/^models/.test(w)}function yw(w){return/^uis/.test(w)}function lw(w){return/^assets/.test(w)}function Cw(w){return/\.(png|jpg|gif|jpeg|bmp|svg)$/i.test(w)}function Vw(w){return/\.json$/i.test(w)}function qw(w){return/\.mp3$/i.test(w)}function kw(w){return/\.mp4$/i.test(w)}function Zw(w){return/\.svg$/i.test(w)}function zw(w){return/\.dxf$/i.test(w)}function xw(w){return/\.obj$/i.test(w)}function Lw(w){return/\.mtl$/i.test(w)}function Qw(w){return/\.ttf$/i.test(w)}function Jw(w){return/\.otf$/i.test(w)}function Bw(w){return/\.js$/i.test(w)}function nw(w){return w.substring(0,w.length-5)+".png"}function fw(w){return"string"==typeof w||w instanceof String}function iw(w){return"number"==typeof w}function Fw(w){return w&&"object"==typeof w}function Sw(w){return"function"==typeof w}function Nw(w){return w instanceof Array}function Tw(w,t){var G=w.getPosition().x,A=w.getPosition().y,I=w.getWidth(),R=w.getHeight(),_=[G-I*w.getAnchor().x,A-R*w.getAnchor().y,I,R];bw(t,"rect",w.a("rect"),_,void 0)}function mw(w,t){var G=w.getRotation();bw(t,"rotation",w.a("rotation"),G,0)}function Uw(w,t){var G=w.getAnchor().x,A=w.a("anchorX");bw(t,"anchorX",A,G,.5),G=w.getAnchor().y,A=w.a("anchorY"),bw(t,"anchorY",A,G,.5)}function cw(w,t){var G=w.getScale().x,A=w.a("scaleX");bw(t,"scaleX",A,G,1),G=w.getScale().y,A=w.a("scaleY"),bw(t,"scaleY",A,G,1)}function vw(w,t){var G=w.isClosePath();bw(t,"closePath",w.a("closePath"),G,!1)}function Ew(w,t,G,I,R){4===arguments.length&&(R=ht.Style[G]);var _=A(w.s(G));bw(t,I,w.a(G),_,R)}function Ow(w,t){var G=w.getDisplayName();bw(t,"displayName",w.a("displayName"),G,void 0)}function Hw(w,t){if(Nw(w)&&Nw(t)){if(w.length===t.length){for(var G=0;G<w.length;G++)if(!Hw(w[G],t[G]))return!1;return!0}return!1}if(Fw(w)&&Fw(t)){var A=Object.keys(w);if(A.length===Object.keys(t).length){for(var I=0;I<A.length;I++){var R=A[I];if(!Hw(w[R],t[R]))return!1}return!0}return!1}return w===t}function Xw(w){return w instanceof ht.DataModel?mG+w.serialize(0):w}function bw(w,t,G,A,I){var R=Hw(A,I);if(G){var _=w[t]={func:G};R||(_.value=Xw(A))}else R||void 0===A||(w[t]=Xw(A))}function pw(w,t,G,A){Mw(w,"2d.visible",t.visible),Mw(w,"2d.selectable",t.selectable),Mw(w,"2d.movable",t.movable),Mw(w,"2d.editable",t.editable),Mw(w,"pixelPerfect",t.pixelPerfect,!1),Mw(w,"opacity",t.opacity,1),Mw(w,"clip.percentage",t.clipPercentage,1),Mw(w,"clip.direction",t.clipDirection,"top"),Mw(w,"layout.h",t.layoutH),Mw(w,"layout.v",t.layoutV),Mw(w,"prefix",t.prefix),Mw(w,"state",t.state),w instanceof ht.Text||(Mw(w,"shadow",t.shadow,!1),Mw(w,"select.color",t.shadowColor,ht.Color.highlight),Mw(w,"shadow.blur",t.shadowBlur,6),Mw(w,"shadow.offset.x",t.shadowOffsetX,3),Mw(w,"shadow.offset.y",t.shadowOffsetY,3)),uw(w,t),hw(w,t),Dw(w,t),aw(w,t),w instanceof ht.Shape&&!t.rect||Ww(w,t,G,A);var I=dt.customProperties.comp;I&&I.length&&I.forEach(function(G){Mw(w,G.property,t[G.property],G.defaultValue)}),ZG.forEach(function(G){w.a(G,t[G])}),w.a("renderHTML",t.renderHTML)}function $w(w,t){Ew(w,t,"2d.visible","visible"),Ew(w,t,"2d.selectable","selectable"),Ew(w,t,"2d.movable","movable"),Ew(w,t,"2d.editable","editable"),Ew(w,t,"pixelPerfect","pixelPerfect",!1),Ew(w,t,"opacity","opacity",1),Ew(w,t,"clip.percentage","clipPercentage",1),Ew(w,t,"clip.direction","clipDirection","top"),Ew(w,t,"layout.h","layoutH"),Ew(w,t,"layout.v","layoutV"),Ew(w,t,"prefix","prefix"),Ew(w,t,"state","state"),w instanceof ht.Text||(Ew(w,t,"shadow","shadow",!1),Ew(w,t,"select.color","shadowColor",ht.Color.highlight),Ew(w,t,"shadow.blur","shadowBlur",6),Ew(w,t,"shadow.offset.x","shadowOffsetX",3),Ew(w,t,"shadow.offset.y","shadowOffsetY",3)),Ow(w,t),Uw(w,t),cw(w,t),mw(w,t),w instanceof ht.Shape&&!w.a("rect")||Tw(w,t);var G=dt.customProperties.comp,A=!!dt.saveCompCustomPropertyDefaultValue;G&&G.length&&G.forEach(function(G){A?Ew(w,t,G.property,G.property):Ew(w,t,G.property,G.property,G.defaultValue)}),ZG.forEach(function(G){w.a(G)&&(t[G]=w.a(G))}),w.a("renderHTML")&&(t.renderHTML=w.a("renderHTML"))}function Mw(w,t,G,I){3===arguments.length&&(I=ht.Style[t]);var R=ew(G,I);if(fw(R)&&R.substring(0,15)===mG){var _=new ht.DataModel;_.deserialize(X(R.substr(15))),R=_}w.s(t,A(R)),w.a(t,ow(G))}function uw(w,t){w.setDisplayName(ew(t.displayName),void 0),w.a("displayName",ow(t.displayName))}function aw(w,t){w.setRotation(ew(t.rotation,0)),w.a("rotation",ow(t.rotation))}function hw(w,t){var G=ew(t.anchorX,.5),A=ew(t.anchorY,.5);.5===G&&.5===A||w.setAnchor(G,A),w.a("anchorX",ow(t.anchorX)),w.a("anchorY",ow(t.anchorY))}function Dw(w,t){var G=ew(t.scaleX,1),A=ew(t.scaleY,1);w.setScale(G,A),w.a("scaleX",ow(t.scaleX)),w.a("scaleY",ow(t.scaleY))}function gw(w,t){w.setClosePath(ew(t.closePath,!1)),w.a("closePath",ow(t.closePath))}function Ww(w,t,G,A){var I=ew(t.rect),R=ew(t.relative);I||(I=[0,0,G,A],R=!1);var _=I.length;if(4===_)I={x:I[0],y:I[1],width:I[2],height:I[3]},R&&(I.x*=G,I.y*=A,I.width*=G,I.height*=A);else if(3===_){var r=I[0];I={width:I[1],height:I[2]},R&&(I.width*=G,I.height*=A),"object"==typeof r?r.length&&(r={x:r[0],y:r[1]}):r=O(r,{x:0,y:0,width:G,height:A},I),I.x=r.x-I.width*w.getAnchor().x,I.y=r.y-I.height*w.getAnchor().y}var y=ew(t.offsetX);y&&(I.x+=y),y=ew(t.offsetY),y&&(I.y+=y),I.width<0||I.height<0?w.p(I.x,I.y):w.setRect(I),w.a("rect",ow(t.rect))}function ew(w,t){var G=void 0;return G=Fw(w)&&w.func?w.value:w,void 0===G&&(G=t),G}function ow(w){if(Fw(w)&&w.func)return w.func}function Kw(w){if(Nw(w)){for(var t=new ht.List,G=w.length,A=0;A<G;A+=2)t.add({x:w[A],y:w[A+1]});w=t}return w}function Pw(w){if(w instanceof ht.List&&(w=w.toArray()),Nw(w)){for(var t=[],G=0;G<w.length;G++){var A=w[G];t.push(A.x,A.y)}w=t}return w}function jw(w){return{width:16,height:16,comps:[{type:function(t,G,A,I,R){var _=ht.Default.getImage(w.graphView.getImage(I));if(_&&_.snapshotURL)(_=ht.Default.getImage(_.snapshotURL))&&d(t,_,"uniform",G.x,G.y,G.width,G.height,I,R);else{var r=_&&_.boundExtend?I.getRect():w.graphView.getDataUIBounds(I);if(r&&r.width&&r.height){t.save();var y=Math.min(1,16/Math.max(r.width,r.height));t.translate(-r.x*y+(16-r.width*y)/2,-r.y*y+(16-r.height*y)/2),t.scale(y,y),w.graphView.drawData(t,I),t.restore()}}}}]}}function dw(w,t){var G=w.graphView.getEdgeInfo(t);if(!G)return OG;var A=G.edgeTypeInfo,I=void 0,R=void 0;if(!G.type||G.points){G.sourcePoint.x,G.sourcePoint.y,G.targetPoint.x,G.targetPoint.y;G.type?(I=new ht.List(G.sourcePoint),I.addAll(G.points),I.add(G.targetPoint),R=G.segments):G.looped?(I=XG,R=bG):I=G.center?[G.c1,G.sourcePoint,G.targetPoint,G.c2]:[G.sourcePoint,G.targetPoint]}else A&&(I=A.points,R=A.segments);var _=v(I);if(_&&(_.width||_.height)){var r=Math.max(1,Math.max(_.width,_.height)/16),y=[],l=(16-_.width/r)/2,C=(16-_.height/r)/2;I instanceof ht.List&&(I=I.toArray()),I.forEach(function(w){y.push((w.x-_.x)/r+l,(w.y-_.y)/r+C)});var V=R?R.toArray():null;return{width:16,height:16,comps:[{type:"shape",points:y,segments:V,borderWidth:1,borderColor:G.color,borderCap:G.cap,borderJoin:G.join}]}}return OG}function sw(w){var t=v(w.getPoints());if(t&&(t.width||t.height)){var G=Math.max(1,Math.max(t.width,t.height)/16),A=[],I=(16-t.width/G)/2,R=(16-t.height/G)/2;w.getPoints().each(function(w){A.push((w.x-t.x)/G+I,(w.y-t.y)/G+R)});var _=w.getSegments()?w.getSegments().toArray():null;return{width:16,height:16,comps:[{type:"shape",points:A,segments:_,rotation:w.getRotation(),background:w.s("shape.background"),repeatImage:w.s("shape.repeat.image"),borderWidth:w.s("shape.border.width")?1:0,borderColor:w.s("shape.border.color"),borderCap:w.s("shape.border.cap"),borderJoin:w.s("shape.border.join"),gradient:w.s("shape.gradient"),gradientColor:w.s("shape.gradient.color"),closePath:w.isClosePath()}]}}return OG}function Yw(w){return ht.Default.isInput(w)}function wt(w,t){var G=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},A=G.nullable,I=void 0===A||A,_=G.trim,r=void 0!==_&&_,y=G.cancellable,l=void 0===y||y,C=G.width,V=void 0===C?300:C,q=G.height,k=void 0===q?120:q,Z=G.maxLength,z=void 0===Z?-1:Z,x=G.checkFunc,L=void 0===x?void 0:x,Q=G.$38$,J=void 0===Q?void 0:Q,B=arguments[3],n=new VG;n.addRow([{id:"input",textField:{text:t}}],[.1]);var f=new CG,i=[],F=null,S=null;F=function(){var w=n.v("input");return r&&w&&w.trim(),!1!==I||w?z>0&&w&&w.length>z?void tt(null,R("editor.inputmax"),function(){}):L&&!(w=L(w))?void tt(null,R("editor.invalidinput"),function(){}):(B(w,"ok"),void f.hide()):void tt(null,R("editor.inputempty"),function(){})},i.push({label:R("editor.ok"),action:F}),l&&(S=function(){B(t,"cancel"),f.hide()},i.push({label:R("editor.cancel"),action:S})),f.setConfig({title:w,draggable:!0,width:V,height:k,contentPadding:10,content:n,buttons:i,buttonsAlign:"right"}),f.$48$=S,f.$47$=F,f.show(J),n.getViewById("input").getElement()._ignore=!0,n.getViewById("input").setFocus()}function tt(w,t,G,A){var I=arguments.length>4&&void 0!==arguments[4]?arguments[4]:300,_=[],r=void 0,y=void 0;G&&(r=function(){C.hide(),G()},_.push({label:R("editor.ok"),action:r})),A&&(y=function(){C.hide(),A()},_.push({label:R("editor.cancel"),action:y}));var l=document.createElement("p");l.style.color=ht.Default.labelColor,l.innerText=t;var C=new CG({title:w||R("editor.prompt"),contentPadding:20,width:I,draggable:!0,content:l,buttons:_});C.$48$=y||r,C.$47$=r,C.setModal(!0),C.show()}function Gt(w,t,G,A){var I={unfocusable:!0,id:w,toolTip:t},R=ht.Default.getImage(G),_=R?R.width:16,r=R?R.height:16;return I.icon={width:_+8,height:r+8,fitSize:!!R&&R.fitSize,comps:[{type:"rect",background:{func:function(w,t){return t.getCurrentItem()===I?kG.config.color_hover:null}},rect:[0,0,_+8,r+8]},{type:"image",name:G,color:{func:function(w,t){return A&&A()?kG.config.color_select:kG.config.color_dark}},rect:[4,4,_,r]}]},I}function At(w,t){var G=ht.Default.createDiv(!0);return G.style.font=ht.Default.labelFont,G.style.color=ht.Default.labelColor,G.style.paddingLeft="4px",G.style.whiteSpace="nowrap",G.style.verticalAlign="middle",G.innerHTML=w,t&&(G.style.textAlign=t),G.onLayouted=function(w,t,A,I){G.style.lineHeight=I+"px"},G}function It(w,t,G,A){var I=new ht.widget.Button;return I.setLabel(w),I.setLabelColor(ht.Default.labelColor),I.setLabelSelectColor(kG.config.color_select),I.setIcon(G),I.setBackground(null),I.setBorderColor(null),A&&(I.onClicked=A),t&&(I.setToolTip(t),I.enableToolTip()),I.getCurrentBackground=function(){return this._hover||this.isPressed()?kG.config.color_hover:null},I.getCurrentBorderColor=function(){return this.isSelected()?kG.config.color_select:null},I.getView().addEventListener("mouseenter",function(){I.isDisabled()||(I._hover=!0,I.iv())},!1),I.getView().addEventListener("mouseleave",function(){I.isDisabled()||(I._hover=!1,I.iv())},!1),I}function Rt(w,t){var G=ht.Default.getImage(w);if(!G)throw w;var A={width:G.width,height:G.height,fitSize:G.fitSize,comps:[{type:"image",name:w,color:{func:function(){return t&&t()?kG.config.color_select:kG.config.color_dark}}}]},I=w+".state";return ht.Default.setImage(I,A),I}function _t(w,t,G){var A=new FileReader;A.onloadend=function(w){t(w.target.result)},G?A.readAsDataURL(w):A.readAsText(w)}function rt(w,t){if(t){t===document.body&&(document.title=R("editor.title"),document.body.style.overflow="hidden"),t.appendChild(w.getView());var G=w.getView().style;G.left="0px",G.top="0px",setInterval(function(){if(w.getView()!==(document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement)){var A=void 0,I=void 0;t===document.body?(A=document.documentElement.clientWidth,window.innerWidth&&window.innerWidth<A&&(A=window.innerWidth),I=document.documentElement.clientHeight,window.innerHeight&&window.innerHeight<I&&(I=window.innerHeight)):(A=t.clientWidth,I=t.clientHeight),A===w._oldWidth&&I===w._oldHeight||(w._oldWidth=A,w._oldHeight=I,G.width=A+"px",G.height=I+"px",w.iv())}},500)}}function yt(w){if(w)for(var t=0;t<w.length;t++)null==w[t]&&(w[t]=0)}function lt(w){if(w)for(var t=ht.Color.chart,G=0;G<w.length;G++)null==w[G]&&(w[G]=t[G%t.length])}function Ct(w,t){t=void 0===t?w?w.length:0:t;for(var G=new Array(t),A=0;A<t;A++)G[A]=w?w[A]:void 0;return G}function Vt(w){if(w instanceof ht.graph.GraphView){var t=w.getContentRect(),G=Math.max(t.width,t.height),A=Math.min(t.width,t.height),I=Math.max(1/A,kG.config.imageSize/G);return w.toDataURL(void 0,void 0,I)}if(w instanceof ht.graph3d.Graph3dView){var R=w.getWidth(),_=w.getHeight(),r=Math.max(R,_),y=Math.min(1,kG.config.imageSize/r);r<3&&(y=kG.config.imageSize/r),R=Math.floor(R*y),_=Math.floor(_*y);return w.toCanvas(w.dm().getBackground(),R,_).toDataURL("image/png",1)}if(ht.ui&&w instanceof ht.ui.View){var l=w.getWidth(),C=w.getHeight(),V=l,q=C,k=Math.max(V,q),Z=Math.min(1,kG.config.imageSize/k);k<3&&(Z=kG.config.imageSize/k),V=Math.floor(V*Z),q=Math.floor(q*Z);var z=w.getRootCanvas(),x=(z||w.getView()).getBoundingClientRect(),L=document.createElement("canvas");L.width=V,L.height=q;var Q=L.getContext("2d"),J=function(t){for(var G=0;G<t.size();G++){var A=t.get(G);if(A===w)z&&Q.drawImage(z,0,0,l,C,0,0,V,q);else{var I=A.getRootCanvas();if(I){var R=I.getBoundingClientRect();Q.drawImage(I,0,0,I.width,I.height,(R.left-x.left)/l*V,(R.top-x.top)/C*q,I.width/l*V,I.height/C*q)}}if(A instanceof ht.ui.UIGraphView||A instanceof ht.ui.UIGraph3dView){var _=A.getContent(),r=_.toCanvas();if(r){var y=_._canvas.getBoundingClientRect();Q.drawImage(r,0,0,r.width,r.height,(y.left-x.left)/l*V,(y.top-x.top)/C*q,r.width/l*V,r.height/C*q)}}A.getChildren&&A.getChildren().size()>0&&J(A.getChildren())}},B=new ht.List;return B.add(w),J(B),L.toDataURL("image/png",1)}var n=ht.Default.getImage(w),f=Math.max(n.width,n.height),i=Math.min(1,kG.config.imageSize/f);return ht.Default.toCanvas(w,n.width*i,n.height*i).toDataURL("image/png",1)}function qt(w,t,G){if(w instanceof Array)for(var A=0,I=w.length;A<I;A++)qt(w[A],t,G);else if(w instanceof Object&&!(w instanceof ht.DataModel))for(var R in w)if(w.hasOwnProperty(R)){var _=w[R];if(!Fw(_))continue;if(fw(_.func)&&UG.test(_.func)){var r=_.func.slice(5);t&&void 0===t[r]&&(t[r]=R),G&&void 0===G[r]&&(G[r]=_.value)}else qt(_,t,G)}}function kt(w){return new(ht.Default.getClass(kG.config.codeEditorClass)||qG)(w)}function Zt(){var w=arguments[0];if(!w)return"";for(var t=1;t<arguments.length;t++)w=w.replace("{"+(t-1)+"}",arguments[t]);return w}function zt(w,t,G){var A=new ht.Math.Matrix2d,I=w.getPosition(),R=w.getScale(),_=w.getRotation();return A.translate(-I.x,-I.y).scale(R.x,R.y).rotate(_).translate(I.x,I.y),A.apply({x:t,y:G})}function xt(w){w.forEach(function(w){w.getPoints().reverse();var t=w.getSegments();if(t){var G=t.size(),A=t.get(G-1);5===A&&t.pop(),t.shift(),t.reverse(),t.unshift(1),5===A&&t.push(A)}})}function Lt(w){var t=void 0,G=void 0,I=void 0,R=void 0,_=void 0,r=void 0,y=[],l=[],C=void 0;if(w.forEach(function(w){C||(C=w.getClass());var V=w.getPoints().toArray().map(function(t){return zt(w,t.x,t.y)});y=y.concat(V);var q=w.getSegments();if(q)q=q.toArray();else{q=[1];for(var k=1,Z=w.getPoints().size();k<Z;k++)q.push(2)}w.isClosePath()&&q.push(5),l.push.apply(l,q),t||(t=w.dm(),G=w.getThickness(),I=w.getElevation(),R=w.getTall(),_=A(w.getStyleMap()),r=A(w.getAnchor3d())),w.removeFromDataModel()}),C){var V=new C;V.setPoints(y),V.setSegments(l),V.setThickness(G),V.setElevation(I),V.setTall(R),V.setAnchor3d(r),V.s(_),t.add(V),t.sm().ss(V)}}function Qt(w){var t=w.dm(),G=w.getSegments();if(G){var I=[],R=w.getPoints(),_=void 0,r=void 0,y=0;G.forEach(function(w){switch(w){case 1:_=[w],r=[A(R.get(y++))],I.push({segments:_,points:r});break;case 2:_.push(w),r.push(A(R.get(y++)));break;case 3:_.push(w),r.push(A(R.get(y++))),r.push(A(R.get(y++)));break;case 4:_.push(w),r.push(A(R.get(y++))),r.push(A(R.get(y++))),r.push(A(R.get(y++)));break;case 5:_.push(w)}});var l=w.getThickness(),C=w.getElevation(),V=w.getTall(),q=A(w.getStyleMap()),k=A(w.getAnchor3d()),Z=[];I.forEach(function(G){var A=new(w.getClass());A.setPoints(G.points),A.setSegments(G.segments),A.setThickness(l),A.setElevation(C),A.setTall(V),A.setAnchor3d(k),A.s(q),t.add(A),Z.push(A)}),t.sm().ss(Z),w.removeFromDataModel()}}function Jt(w,t){for(var G=0,A=w.length;G<A;G++){var I=w.get(G);if(!(I instanceof ht.Shape))return!1;if(!t&&I instanceof ht.CSGShape)return!1}return!0}function Bt(w,t,G,A){var I=w.getRowIndex(t),R=w.tx(),_=w.ty(),r=w.getRowHeight(),y={x:R,y:r*I+_,width:G.getWidth(),height:r};w.beginEditing({column:G,data:t,view:w,editorRect:y,value:A})}function nt(w,t){w.vectorDataBindingDisabled=!0,w.enableToolTip(),w.getToolTip=function(){var w=ht.Default.getImage(this.getIcon()),t=ht.Default.getInternal().getImageWidth(w),G=ht.Default.getInternal().getImageHeight(w);return t&&G?t+", "+G:void 0},w.setExtraInfo=function(t){var G=t&&t.url||t;w.actionURL=t&&t.actionURL||t,w.setIconColor(t&&t.iconColor||void 0);var A=ht.Default.getImage(G);A&&A.snapshotURL?w.setIcon(A.snapshotURL):w.setIcon(G)};var G=w.getView();G.style.cursor="pointer";var A=function(G){G.preventDefault(),F(G)?t.open(w.actionURL):t.selectFileNode(w.actionURL)};G.addEventListener("mousedown",A,!1),G.addEventListener("touchstart",A,!1)}function ft(w,t,G){var A=w.getElement?w.getElement():w.getView?w.getView():w,I=void 0;w.isDroppable=t,w.handleCrossDrag=function(t,R,_){"enter"===R?(I=A.style.border,A.style.border="solid "+kG.config.color_select_dark+" 2px"):"exit"===R||"cancel"===R?A.style.border=I:"over"===R||"drop"===R&&(G(_.view.draggingData),A.style.border=I,w.setFocus&&w.setFocus())}}function it(w,t){for(var G=t.getParent();G;)t=G,G=t.getParent();return w.getRoots().indexOf(t)}function Ft(w){var t={clazz:this.getClass(),name:this.getName(),displayName:this.getDisplayName(),toolTip:this.getToolTip(),tag:this.getTag(),icon:this.getIcon(),layer:this.getLayer(),parent:w.$57$(this.getParent()),a:{},s:{},dataBindings:this.getDataBindings()?H(this.getDataBindings(),null,!1):null},G=this.getStyleMap();for(var I in G)t.s[I]=A(this.s(I));var R=this.getAttrObject();for(var _ in R)t.a[_]=A(this.a(_));return t}function St(w,t){var G=new w.clazz,I=t.dm();if(kG.config.cloneName&&G.setName(w.name),kG.config.cloneDisplayName&&G.setDisplayName(w.displayName),kG.config.cloneToolTip&&G.setToolTip(w.toolTip),kG.config.cloneTag&&!I.getDataByTag(w.tag)&&G.setTag(w.tag),kG.config.cloneIcon&&G.setIcon(w.icon),kG.config.cloneLayer&&G.setLayer(w.layer),kG.config.cloneStyle)for(var R in w.s)G.s(R,A(w.s[R]));if(kG.config.cloneAttr)for(var _ in w.a)G.a(_,A(w.a[_]));return kG.config.cloneDataBindings&&w.dataBindings&&G.setDataBindings(X(w.dataBindings)),G}function Nt(w,t,G){var A=kG.config.cloneParent?t.$49$(w.parent,G):void 0;this.setParent(A||t.getCurrentSubGraph())}function Tt(w){var t=Ft.call(this,w);return t.r3=this.r3(),t.rotationMode=this.getRotationMode(),t.p3=this.p3(),t.s3=this.s3(),t.scale3d=this.getScale3d(),t.anchor3d=this.getAnchor3d(),t.image=this.getImage(),t.host=w.$57$(this.getHost()),t}function mt(w,t){var G=St(w,t);return kG.config.cloneRotation&&(G.r3(w.r3),G.setRotationMode(w.rotationMode)),kG.config.clonePosition&&G.p3(w.p3),kG.config.cloneSize&&G.s3(w.s3),kG.config.cloneScale&&G.setScale3d(w.scale3d),kG.config.cloneAnchor&&G.setAnchor3d(w.anchor3d),kG.config.cloneImage&&G.setImage(w.image),G}function Ut(w,t,G){Nt.call(this,w,t,G),kG.config.cloneHost&&this.setHost(t.$49$(w.host,G))}function ct(w){var t=Ft.call(this,w);return t.source=w.$57$(this.getSource()),t.target=w.$57$(this.getTarget()),t}function vt(w,t){return St(w,t)}function Et(w,t,G){Nt.call(this,w,t,G),kG.config.cloneSource&&this.setSource(t.$49$(w.source,G)),kG.config.cloneTarget&&this.setTarget(t.$49$(w.target,G))}function Ot(w){var t=Tt.call(this,w);return t.expanded=this.isExpanded(),t}function Ht(w,t){var G=mt(w,t);return kG.config.cloneExpanded&&G.setExpanded(w.expanded),G}function Xt(w){var t=Tt.call(this,w);return t.points=A(this.getPoints()),t.segments=A(this.getSegments()),t.thickness=this.getThickness(),t.closePath=this.isClosePath(),t}function bt(w,t){var G=mt(w,t);return kG.config.clonePoints&&G.setPoints(A(w.points)),kG.config.cloneSegments&&G.setSegments(A(w.segments)),kG.config.cloneThickness&&G.setThickness(w.thickness),kG.config.cloneClosePath&&G.setClosePath(w.closePath),G}function pt(w){var t=Tt.call(this,w);return t.clickThroughEnabled=this.isClickThroughEnabled(),t.syncSize=this.isSyncSize(),t}function $t(w,t){var G=mt(w,t);return kG.config.cloneClickThroughEnabled&&G.setClickThroughEnabled(w.clickThroughEnabled),kG.config.cloneSyncSize&&G.setSyncSize(w.syncSize),G}function Mt(w){var t=pt.call(this,w);return t.ref=this.getRef(),t}function ut(w,t){var G=$t(w,t);return kG.config.cloneRef&&G.setRef(w.ref),G}function at(w){if(!(w instanceof ht.Node))return null;if(w instanceof ht.Group||w instanceof ht.Grid||w instanceof ht.Block)return null;var t=void 0;if(w instanceof hG)t={type:"clip",points:A(w.getPoints()),segments:A(w.getSegments()),closePath:w.isClosePath()};else if(w instanceof DG)t={type:"restore"};else if(w instanceof ht.Shape)t={type:"shape",points:A(w.getPoints()),segments:A(w.getSegments()),closePath:w.isClosePath()};else if(w instanceof ht.Text)t={type:"text",text:w.s("text"),align:w.s("text.align"),vAlign:w.s("text.vAlign"),color:w.s("text.color"),gradientPack:w.s("text.gradient.pack"),font:w.s("text.font"),shadow:w.s("text.shadow"),shadowColor:w.s("text.shadow.color"),shadowBlur:w.s("text.shadow.blur"),shadowOffsetX:w.s("text.shadow.offset.x"),shadowOffsetY:w.s("text.shadow.offset.y")};else if(w instanceof ht.Node){var G=w.s("shape");G?(t={type:"node_shape",shape:w.s("shape")},"rect"===G?t.depth=w.s("shape.depth"):"roundRect"===G?t.polygonSide=w.s("shape.corner.radius"):"polygon"===G?t.polygonSide=w.s("shape.polygon.side"):"arc"===G&&(t.arcFrom=w.s("shape.arc.from"),t.arcTo=w.s("shape.arc.to"),t.arcClose=w.s("shape.arc.close"),t.arcOval=w.s("shape.arc.oval"))):w.getImage()&&(t={type:"node_image",image:w.getImage(),stretch:w.s("image.stretch"),color:w.s("body.color")})}return t&&(t.visible=w.s("2d.visible"),t.displayName=w.getDisplayName(),t.x=w.getPosition().x,t.y=w.getPosition().y,t.anchorX=w.getAnchor().x,t.anchorY=w.getAnchor().y,t.scaleX=w.getScale().x,t.scaleY=w.getScale().y,t.rotation=w.getRotation(),t.width=w._width,t.height=w._height,t.opacity=w.s("opacity"),"shape"!==t.type&&"node_shape"!==t.type||(t.background=w.s("shape.background"),t.repeatImage=w.s("shape.repeat.image"),t.borderWidth=w.s("shape.border.width"),t.borderColor=w.s("shape.border.color"),t.border3d=w.s("shape.border.3d"),t.border3dColor=w.s("shape.border.3d.color"),t.border3dAccuracy=w.s("shape.border.3d.accuracy"),t.borderCap=w.s("shape.border.cap"),t.borderJoin=w.s("shape.border.join"),t.borderPattern=w.s("shape.border.pattern"),t.gradient=w.s("shape.gradient"),t.gradientColor=w.s("shape.gradient.color"),t.dash=w.s("shape.dash"),t.dashPattern=w.s("shape.dash.pattern"),t.dashOffset=w.s("shape.dash.offset"),t.dashColor=w.s("shape.dash.color"),t.dashWidth=w.s("shape.dash.width"),t.dash3d=w.s("shape.dash.3d"),t.dash3dColor=w.s("shape.dash.3d.color"),t.dash3dAccuracy=w.s("shape.dash.3d.accuracy"),t.fillRule=w.s("shape.fill.rule"),t.fillClipDirection=w.s("shape.fill.clip.direction"),t.fillClipPercentage=w.s("shape.fill.clip.percentage"),t.gradientPack=A(w.s("shape.gradient.pack")),t.borderWidthAbsolute=w.s("shape.border.width.absolute"))),t}function Dt(w,t){var G=void 0;if("clip"===w.type)t&&(G=new hG,G.s("type","clip"),G.setPoints(w.points),G.setSegments(w.segments));else if("restore"===w.type)t&&(G=new DG,G.s("type","restore"));else if("shape"===w.type)G=t?new MG:new ht.Shape,G.s("type","shape"),G.setPoints(w.points),G.setSegments(w.segments),G.setClosePath(w.closePath);else if("node_shape"===w.type){G=t?new $G:new ht.Node;var I=w.shape;G.s("shape",I),"rect"===I?G.s("shape.depth",w.depth):"roundRect"===I?G.s("shape.corner.radius",w.polygonSide):"polygon"===I?G.s("shape.polygon.side",w.polygonSide):"arc"===I&&(G.s("shape.arc.from",w.arcFrom),G.s("shape.arc.to",w.arcTo),G.s("shape.arc.close",w.arcClose),G.s("shape.arc.oval",w.arcOval))}else"node_image"===w.type?(t?(G=new uG,G.s("type","image"),G.s("image",w.image)):(G=new ht.Node,G.setImage(w.image)),G.s("body.color",w.color)):"text"===w.type&&(G=t?new aG:new ht.Text,G.s("type","text"),G.s("text",w.text),G.s("text.align",w.align),G.s("text.vAlign",w.vAlign),G.s("text.color",w.color),G.s("text.gradient.pack",w.gradientPack),G.s("text.font",w.font),G.s("text.shadow",w.shadow),G.s("text.shadow.color",w.shadowColor),G.s("text.shadow.blur",w.shadowBlur),G.s("text.shadow.offset.x",w.shadowOffsetX),G.s("text.shadow.offset.y",w.shadowOffsetY));return G?(G.s("2d.visible",w.visible),G.setDisplayName(w.displayName),G.setPosition(w.x,w.y),.5===w.anchorX&&.5===w.anchorY||G.setAnchor(w.anchorX,w.anchorY),G.setScale(w.scaleX,w.scaleY),G.setRotation(w.rotation),G.setSize(w.width,w.height),G.s("opacity",w.opacity),"shape"!==w.type&&"node_shape"!==w.type||(G.s("shape.background",w.background),G.s("shape.repeat.image",w.repeatImage),G.s("shape.border.width",w.borderWidth),G.s("shape.border.color",w.borderColor),G.s("shape.border.3d",w.border3d),G.s("shape.border.3d.color",w.border3dColor),G.s("shape.border.3d.accuracy",w.border3dAccuracy),G.s("shape.border.cap",w.borderCap),G.s("shape.border.join",w.borderJoin),G.s("shape.border.pattern",w.borderPattern),G.s("shape.gradient",w.gradient),G.s("shape.gradient.color",w.gradientColor),G.s("shape.dash",w.dash),G.s("shape.dash.pattern",w.dashPattern),G.s("shape.dash.offset",w.dashOffset),G.s("shape.dash.color",w.dashColor),G.s("shape.dash.width",w.dashWidth),G.s("shape.dash.3d",w.dash3d),G.s("shape.dash.3d.color",w.dash3dColor),G.s("shape.dash.3d.accuracy",w.dash3dAccuracy),G.s("shape.fill.rule",w.fillRule),G.s("shape.fill.clip.direction",w.fillClipDirection),G.s("shape.fill.clip.percentage",w.fillClipPercentage),G.s("shape.gradient.pack",A(w.gradientPack)),G.s("shape.border.width.absolute",w.borderWidthAbsolute)),G):null}function gt(w,t){var G=void 0,A=t?t.dm:null,I=A?A.a("width"):100,R=A?A.a("height"):100,_=ew(w.type);if(fw(_)){var r=hA[_];r?G=new r(w,I,R):Vw(_)&&(G=new pA(w,I,R))}else G=new bA(w,I,R);return G&&t&&t.addData(G,!0),G}function Wt(w,t){w.s("chart.series")||w.s("chart.series",[]);var G=w.s("chart.series");G[0]||(G[0]={});var A=G[0];return A.values||(A.values=[]),A.colors||(A.colors=[]),A[t]}function et(w,t){return ew(Wt(w,t))}function ot(w,t){return ow(Wt(w,t))}function Kt(){var w=kG.config.customProperties.display;w&&w.length&&w.forEach(function(w){var t=(w.accessType||"a")+":"+w.property;HG.display[t]=!0}),w=kG.config.customProperties.data,w&&w.length&&w.forEach(function(w){var t=(w.accessType||"a")+":"+w.property;HG.data[t]=!0}),w=kG.config.customProperties.symbol,w&&w.length&&w.forEach(function(w){
HG.symbol[w.property]=!0}),w=kG.config.customProperties.comp,w&&w.length&&w.forEach(function(w){HG.comp[w.property]=!0}),w=kG.config.customProperties.scene,w&&w.length&&w.forEach(function(w){var t=(w.accessType||"a")+":"+w.property;HG.scene[t]=!0}),(w=kG.config.customProperties.data3d)&&w.length&&w.forEach(function(w){var t=(w.accessType||"a")+":"+w.property;HG.data3d[t]=!0})}function Pt(){var w=kG.config,t=kG.consts,G=function(t,G){void 0===w.valueTypes[t]&&(G.name="editor.valuetype."+t.toLowerCase(),w.valueTypes[t]=G)};G("String",{type:"string"}),G("Image",{type:"image"}),G("URL",{type:"url"}),G("Multiline",{type:"multiline"}),G("Font",{type:"font"}),G("Angle",{type:"number",angle:!0}),G("Int",{type:"int",step:1}),G("PositiveNumber",{type:"number",step:1,min:0}),G("Number",{type:"number",step:1}),G("Color",{type:"color"}),G("Boolean",{type:"boolean"}),G("Function",{type:"function"}),G("Object",{type:"object"}),G("ObjectArray",{type:"objectArray",rowHeight:60}),G("StringArray",{type:"stringArray",rowHeight:60}),G("NumberArray",{type:"numberArray",rowHeight:60}),G("ColorArray",{type:"colorArray",rowHeight:60}),G("Opacity",{type:"number",min:0,max:1,step:.01}),G("Percentage",{type:"number",min:0,max:1,step:.01}),G("Gradient",{type:"enum",values:w.gradients,icons:w.gradientIcons,dropDownWidth:140}),G("FillRule",{type:"enum",values:t.fillRules,labels:t.fillRuleLabels}),G("ClipDirection",{type:"enum",values:t.clipDirections,labels:t.clipDirectionLabels}),G("CapStyle",{type:"enum",values:t.caps,labels:t.capLabels}),G("JoinStyle",{type:"enum",values:t.joins,labels:t.joinLabels}),G("Align",{type:"enum",values:t.aligns,labels:t.alignLabels}),G("VAlign",{type:"enum",values:t.vAligns,labels:t.vAlignLabels}),G("Stretch",{type:"enum",values:t.stretchs,labels:t.stretchLabels}),G("Direction",{type:"enum",values:t.directions,labels:t.directionLabels}),G("Orientation",{type:"enum",values:t.orientations,labels:t.orientationLabels}),G("ColumnChart",{type:"enum",values:t.columnChartTypes,labels:t.columnChartTypeLabels}),G("DataModel",{type:"dataModel"}),t.valueTypes=[],t.valueTypeLabels=[];for(var A in kG.config.valueTypes)!function(w){var G=kG.config.valueTypes[w];G.type&&(t.valueTypes.push(w),t.valueTypeLabels.push(R(G.name)||R(w)),"enum"===G.type&&G.i18nLabels&&!G.labels&&(G.labels=[],G.i18nLabels.forEach(function(w){G.labels.push(R(w))})))}(A)}function jt(){var w=kG.consts={};w.edgeTypes=kG.config.edgeTypes,w.edgeTypeLabels=kG.config.edgeTypes.map(function(w){var t=R("edgeType."+w,!0);return t||w}),w.aligns=["left","center","right"],w.alignLabels=[R("editor.align.left"),R("editor.align.center"),R("editor.align.right")],w.vAligns=["top","middle","bottom"],w.vAlignLabels=[R("editor.valign.top"),R("editor.valign.middle"),R("editor.valign.bottom")],w.stretchs=["fill","uniform","centerUniform"],w.stretchLabels=[R("editor.stretch.fill"),R("editor.stretch.uniform"),R("editor.stretch.centeruniform")],w.fillRules=["nonzero","evenodd"],w.fillRuleLabels=[R("editor.nonzero"),R("editor.evenodd")],w.clipDirections=["top","bottom","left","right"],w.clipDirectionLabels=[R("editor.clipdirection.top"),R("editor.clipdirection.bottom"),R("editor.clipdirection.left"),R("editor.clipdirection.right")],w.caps=["butt","round","square"],w.capLabels=[R("editor.cap.butt"),R("editor.cap.round"),R("editor.cap.square")],w.joins=["bevel","round","miter"],w.joinLabels=[R("editor.join.bevel"),R("editor.join.round"),R("editor.join.miter")],w.directions=["h","v"],w.directionLabels=[R("editor.direction.h"),R("editor.direction.v")],w.orientations=["top","right","bottom","left"],w.orientationLabels=[R("editor.orientation.top"),R("editor.orientation.right"),R("editor.orientation.bottom"),R("editor.orientation.left")],w.columnChartTypes=["columnChart","stackedColumnChart","percentageColumnChart"],w.columnChartTypeLabels=[R("editor.columncharttype.columnchart"),R("editor.columncharttype.stackedcolumnchart"),R("editor.columncharttype.percentagecolumnchart")],w.gradients=kG.config.gradients,w.shapes=[void 0,"rect","circle","oval","roundRect","star","pentagram","triangle","hexagon","pentagon","diamond","rightTriangle","parallelogram","trapezoid","polygon","arc"],w.shapeLabels=[],w.shapeIcons=[],w.shapes.forEach(function(t){t?(w.shapeLabels.push(R("editor.comptype."+t.toLowerCase())),w.shapeIcons.push({width:16,height:16,comps:[{type:t,rect:[2,4,12,8],borderWidth:1,borderColor:kG.config.color_dark}]})):(w.shapeLabels.push(""),w.shapeIcons.push({width:16,height:16,comps:[]}))}),w.selectTypes=["shadow","rect","circle","oval","roundRect"],w.selectTypeLabels=[],w.selectTypeIcons=[],w.selectTypes.forEach(function(t){"shadow"===t?(w.selectTypeLabels.push(R("editor.shadow")),w.selectTypeIcons.push({width:16,height:16,comps:[]})):(w.selectTypeLabels.push(R("editor.comptype."+t.toLowerCase())),w.selectTypeIcons.push({width:16,height:16,comps:[{type:t,rect:[2,4,12,8],borderWidth:1,borderColor:kG.config.color_dark}]}))}),w.displayConnectActionTypes=kG.config.displayConnectActionTypes,w.displayConnectActionTypeLabels=[],w.displayConnectActionTypes.forEach(function(t){var G=t?t.toLowerCase():"none";w.displayConnectActionTypeLabels.push(R("editor.connectactiontype."+G,!0)||R(t))}),w.symbolConnectActionTypes=kG.config.symbolConnectActionTypes,w.symbolConnectActionTypeLabels=[],w.symbolConnectActionTypes.forEach(function(t){var G=t?t.toLowerCase():"none";w.symbolConnectActionTypeLabels.push(R("editor.connectactiontype."+G,!0)||R(t))}),w.vLayoutValues=[void 0,"top","bottom","topbottom","center","scale"],w.vLayoutLabels=[R("editor.layout.none"),R("editor.layout.top"),R("editor.layout.bottom"),R("editor.layout.topbottom"),R("editor.layout.center"),R("editor.layout.scale")],w.hLayoutValues=[void 0,"left","right","leftright","center","scale"],w.hLayoutLabels=[R("editor.layout.none"),R("editor.layout.left"),R("editor.layout.right"),R("editor.layout.leftright"),R("editor.layout.center"),R("editor.layout.scale")],w.fullscreenValues=[void 0,"fill","uniform"],w.fullscreenLabels=[R("editor.layout.none"),R("editor.stretch.fill"),R("editor.stretch.uniform")],w.fullscreenLockValues=[!1,"h","v"],w.fullscreenLockLabels=[R("editor.layout.none"),R("editor.direction.h"),R("editor.direction.v")]}String.prototype.startsWith||(String.prototype.startsWith=function(w,t){return t=t||0,this.substr(t,w.length)===w}),String.prototype.endsWith||(String.prototype.endsWith=function(w,t){var G=this.toString();("number"!=typeof t||!isFinite(t)||Math.floor(t)!==t||t>G.length)&&(t=G.length),t-=w.length;var A=G.lastIndexOf(w,t);return-1!==A&&A===t});var dt=window.hteditor_config||{},st=function(w,t){void 0===dt[w]&&(dt[w]=t)};st("color_select","#45C4F9"),st("color_select_dark","#39B0E4"),st("color_pane","#FFFFFF"),st("color_pane_dark","#F7F7F7"),st("color_line","#E4E4E4"),st("color_dark","#2C2C2C"),st("color_light","white"),st("color_data_border","#979797"),st("color_data_background","#D8D8D8"),st("color_transparent","rgba(156,156,156,0.4)"),st("color_disabled","#8C8C8C"),st("color_guide","red"),st("color_hover","rgba(184,184,184,0.18)"),st("color_mask","rgba(84,110,125,0.30)");var Yt=function(){var w=navigator.userAgent;return w.indexOf("compatible")>-1&&w.indexOf("MSIE")>-1||w.indexOf("Trident")>-1&&w.indexOf("rv:11.0")>-1}();if(st("logEditorInfo",!0),st("host",window.location.hostname),st("port",window.location.port),st("locale","en"),st("serviceClass",void 0),st("maxUndoRedoSteps",200),st("inspectorTitleHeight",void 0),st("inspectorTitleBackground",void 0),st("smallFont","10px arial, sans-serif"),st("boldFont","bold 12px arial, sans-serif"),st("leftSplitViewPosition",240),st("rightSplitViewPosition",-300),st("mainSplitViewPosition",-360),st("explorerSplitViewPosition",.4),st("requestDelay",100),st("imageSize",256),st("fileSize",50),st("maxFileSize",200),st("dragImageSize",50),st("dragImageOpacity",.7),st("animate",!0),st("fitPadding",20),st("fitContentForDisplayView",!0),st("fitContentForSymbolView",!0),st("rulerSize",16),st("edgeLoop",!0),st("pasteOffset",0),st("pasteToLastSelectedIndex",!1),st("continuousLayout",!0),st("maxZoom",50),st("minZoom",.01),st("detailFilter",{}),st("compactFilter",{}),st("customProperties",{}),st("displayRulerEnabled",!0),st("displayGridEnabled",!1),st("displayGridBlockSize",40),st("displayGridThickLinesEvery",10),st("displayGridThickColor","rgb(191, 191, 191)"),st("displayGridLightColor","rgba(191, 191, 191, 0.4)"),st("displayGridAngle",Math.PI/2),st("displayGridRotation",0),st("displayGridZoomThreshold",.25),st("displayGridAlignmentGuideColor",dt.color_guide),st("displayGridAlignmentGuideEnabled",!0),st("displayAnchorEnabled",!0),st("displayGuideLineEnabled",!0),st("displayHighlightEnabled",!0),st("displayHighlightColor",dt.color_select),st("displayHighlightBorderWidth",1),st("displayHighlightBorderPattern",[1,4]),st("symbolRulerEnabled",!0),st("symbolGridEnabled",!1),st("symbolGridBlockSize",1),st("symbolGridThickLinesEvery",20),st("symbolGridThickColor","rgb(191, 191, 191)"),st("symbolGridLightColor","rgba(191, 191, 191, 0.2)"),st("symbolGridAngle",Math.PI/2),st("symbolGridRotation",0),st("symbolGridZoomThreshold",.25),st("symbolGridAlignmentGuideColor",dt.color_guide),st("symbolGridAlignmentGuideEnabled",!0),st("symbolAnchorEnabled",!0),st("symbolGuideLineEnabled",!0),st("symbolHighlightEnabled",!0),st("symbolHighlightColor",dt.color_select),st("symbolHighlightBorderWidth",1),st("symbolHighlightBorderPattern",[1,4]),st("maxStringLength",1e6),st("maxFileNameLength",100),st("traceMissingI18n",!1),st("container",void 0),st("continuousCreating",!1),st("valueTypes",{}),st("indent",94),st("indent2",68),st("clearDataBindingsBeforeImporting",!0),st("insertDisplayViewAsRefGraph",!1),st("displayPreviewURL","display.html"),st("symbolPreviewURL","symbol.html"),st("removeFileByKeyboardEnabled",!1),st("locateFileEnabled",!0),st("promptBeforeClosing",!0),st("displaysVisible",!0),st("symbolsVisible",!0),st("componentsVisible",!0),st("scenesVisible",!1),st("modelsVisible",!1),st("uisVisible",!1),st("assetsVisible",!0),st("displaysEditable",!0),st("symbolsEditable",!0),st("componentsEditable",!0),st("scenesEditable",!0),st("modelsEditable",!0),st("assetsEditable",!0),st("settingDefaultValueBeforeSaving",!1),st("svgSegments",20),st("svgMinimumFontSize",12),st("svgWaitingTime",600),st("importConfirm",!0),st("newIfFailToOpen",!0),st("dataBindings",{}),st("dataBindingsForSymbol",{}),st("useCodeEditor",!Yt),st("codeEditorClass",void 0),st("convertCodeEditorOption",void 0),st("fontPreview","Hightopo"),st("checkForFileChanges",!0),st("checkForFileChangesInterval",3e3),st("cloneAttr",!0),st("cloneStyle",!0),st("cloneName",!0),st("cloneDisplayName",!0),st("cloneToolTip",!0),st("cloneTag",!0),st("cloneIcon",!0),st("cloneLayer",!0),st("cloneParent",!0),st("cloneDataBindings",!0),st("cloneSource",!0),st("cloneTarget",!0),st("cloneExpanded",!0),st("cloneClickThroughEnabled",!0),st("cloneSyncSize",!0),st("cloneRef",!0),st("clonePoints",!0),st("cloneSegments",!0),st("cloneThickness",!0),st("cloneClosePath",!0),st("cloneRotation",!0),st("clonePosition",!0),st("cloneSize",!0),st("cloneScale",!0),st("cloneAnchor",!0),st("cloneImage",!0),st("cloneHost",!0),st("isOpenable",null),st("dialogTitleBackground",null),st("componentViewSize",{width:700,height:500}),st("eventViewSize",{width:600,height:400}),st("fontViewSize",{width:500,height:400}),st("functionViewSize",{width:500,height:400}),st("objectViewSize",{width:500,height:400}),st("textViewSize",{width:500,height:400}),st("attachPointsViewSize",{width:700,height:500}),st("drawAccordionTitle",null),st("accordionMutex",!1),st("importDataBindingsButtonVisible",!0),st("saveSymbolCustomPropertyDefaultValue",!1),st("saveCompCustomPropertyDefaultValue",!1),st("deleteFileConfirm",!0),st("mixMaskAndBackground",!0),st("moveDummyThreshold",32),st("smartGuideThreshold",8),st("cadToDisplayBoundingType","Standard"),st("cadToSymbolBoundingType","Reset"),st("promptForMovingFile",!1),st("displayTreeVisibleFunc",null),st("symbolListVisibleFunc",null),st("onElementCreated",null),st("commonAndAdvancedFilterMode",!1),st("edgeTypes",[void 0,"points","boundary","flex2","ortho2","h.v2","v.h2","extend.north2","extend.south2","extend.west2","extend.east2"]),st("fileOpeners",{}),st("paramHandlers",{}),st("getToolTip",function(w,t){return null}),st("createFileTreeSortFunc",function(w){var t=w.explorer.rootDir,G=t+"/ht",A=t+"/htdesign";return function(t,I){var R=t.url,_=I.url;return R===_?0:R===G?-1:_===G?1:R===A?-1:_===A?1:ht.Default.sortFunc(w.getLabel(t),w.getLabel(I))}}),st("explorerMode","treeList"),st("filterDisplayViewEnabled",!1),st("filterSymbolViewEnabled",!1),st("customAttachPointsColumns",null),st("isCopyCompsWhenNewState",!0),st("codeEditorTheme",null),st("accordionListIndent",0),st("copyFileByServer",!0),st("isDataBound",function(w,t,G){var A=w.getDataBindings();return A&&A[t]&&A[t][G]}),st("checkFileName",function(w,t){return!!w&&(!!(w=w.trim())&&(!/[!@?#$%^&*/]/.test(w)&&w))}),st("handleDefaultVauleColumnEdit",null),st("paletteColors",[["rgb(51,153,255)","#60ACFC","#32D3EB","rgb(93,217,174)","rgb(125,195,125)","rgb(255,235,195)","rgb(226,250,87)"],["#FEB64D","#FF7C7C","rgb(241,125,164)","rgb(204,104,166)","rgb(135,144,204)","rgb(145,115,205)","rgb(124,145,155)"],["rgb(48,242,120)","rgb(0,199,7)","rgb(242,83,75)","rgb(212,0,0)","rgb(240,225,19)","rgb(247,247,247)","rgb(61,61,61)"]]),st("gradients",[null,"linear.southwest","linear.southeast","linear.northwest","linear.northeast","linear.north","linear.south","linear.west","linear.east","radial.center","radial.southwest","radial.southeast","radial.northwest","radial.northeast","radial.north","radial.south","radial.west","radial.east","spread.horizontal","spread.vertical","spread.diagonal","spread.antidiagonal","spread.north","spread.south","spread.west","spread.east"]),dt.gradientIcons||(dt.gradientIcons=[],dt.gradients.forEach(function(w){w?dt.gradientIcons.push({width:20,height:14,comps:[{type:"rect",rect:[0,0,20,14],gradient:w,gradientColor:dt.color_line,background:dt.color_dark}]}):dt.gradientIcons.push({width:20,height:14,comps:[]})})),st("fontList",["SimSun","NSimSun","FangSong","KaiTi","FangSong_GB2312","Microsoft YaHei","cursive","monospace","serif","sans-serif","fantasy","Arial","Arial Black","Arial Narrow","Arial Rounded MT Bold","Bookman Old Style","Bradley Hand ITC","Century","Century Gothic","Comic Sans MS","Courier","Courier New","Georgia","Gentium","Impact","King","Lucida Console","Lalit","Modena","Monotype Corsiva","Papyrus","Tahoma","TeX","Times","Times New Roman","Trebuchet MS","Verdana","Verona","PingFangSC-Thin"]),st("ignoreFontDetection",!1),st("symbolStateEnabled",!1),st("layerEnabled",!0),st("layoutEnabled",!0),st("overviewEnabled",!0),st("dataViewEnabled",!0),st("expandedTitles",{}),["TitleBasic","TitleCustom","TitleBackground","TitleBorder","TitleText","TitleImage","TitleGroupBasic","TitleEdgeBasic","TitleArc","TitleDataBinding","TitleComponent","TitleShapeBackground","TitleShapeBorder","TitleGroupTitle","TitleEditingPoint","TitleChart"].forEach(function(w){null==dt.expandedTitles[w]&&(dt.expandedTitles[w]=!0)}),ht.Default.handleUnfoundImage=function(w,t){return ht.Default.getImage("editor.unknown")},st("displayConnectActionType",null),st("symbolConnectActionType",null),st("displayConnectActionTypes",[null,"copyStyle","host","parent"]),st("symbolConnectActionTypes",[null,"copyStyle"]),st("appendDisplayConnectActionTypes",null),st("appendSymbolConnectActionTypes",null),st("appendConnectActions",null),st("connectActions",{copyStyle:{action:function(w,t,G){if(G){var I=G.getStyleMap();for(var R in I)"shape"!==R&&"label"!==R&&"label2"!==R&&"note"!==R&&"note2"!==R&&"text"!==R&&t.s(R,A(I[R]))}},extraInfo:{visible:function(w){return!0}}},host:{action:function(w,t,G){t instanceof ht.Node&&G instanceof ht.Node&&!t.s("fullscreen")&&t.setHost(G)},extraInfo:{delete:{visible:function(w){return w.sm().ld()instanceof ht.Node&&w.sm().ld().getHost()},action:function(w,t){t instanceof ht.Node&&t.setHost(void 0)}},visible:function(w){return w.sm().ld()instanceof ht.Node}}},parent:{action:function(w,t,G){G&&t.setParent(G)},extraInfo:{delete:{visible:function(w){return w.sm().ld().getParent()},action:function(w,t){t.setParent(void 0)}},visible:function(w){return!0}}}}),dt.appendDisplayConnectActionTypes&&dt.appendDisplayConnectActionTypes.forEach(function(w){dt.displayConnectActionTypes.push(w)}),dt.appendSymbolConnectActionTypes&&dt.appendSymbolConnectActionTypes.forEach(function(w){dt.symbolConnectActionTypes.push(w)}),dt.appendConnectActions)for(var wG in dt.appendConnectActions)dt.connectActions[wG]=dt.appendConnectActions[wG];for(var tG in dt.connectActions){var GG=dt.connectActions[tG];ht.Default.setConnectAction(tG,GG.action,GG.extraInfo)}var AG=ht.Default.getToolTipDiv();AG.style.color=dt.color_dark,AG.style.background=dt.color_pane,ht.widget.ColorPicker.prototype._paletteColors=dt.paletteColors,ht.graph.GraphView.prototype._scrollBarColor=dt.color_transparent,ht.graph.GraphView.prototype._rectSelectBackground=dt.color_transparent,ht.graph.GraphView.prototype._rectSelectBorderColor=dt.color_select,ht.graph.GraphView.prototype.isLabelVisible=function(){return!0},ht.widget.ListView.prototype._scrollBarColor=dt.color_transparent,ht.widget.TreeView.prototype._scrollBarColor=dt.color_transparent,ht.widget.TableView.prototype._scrollBarColor=dt.color_transparent,ht.widget.TreeTableView.prototype._scrollBarColor=dt.color_transparent,ht.widget.PropertyView.prototype._scrollBarColor=dt.color_transparent,ht.widget.FormPane.prototype._scrollBarColor=dt.color_transparent,ht.widget.SplitView.prototype._dividerBackground=dt.color_line,ht.widget.SplitView.prototype._continuousLayout=dt.continuousLayout,ht.widget.ListView.prototype._selectBackground=dt.color_select,ht.widget.TreeView.prototype._selectBackground=dt.color_select,ht.widget.TableView.prototype._selectBackground=dt.color_select,ht.widget.TreeTableView.prototype._selectBackground=dt.color_select,ht.widget.TableHeader.prototype._columnLineColor=dt.color_line,ht.widget.TableHeader.prototype._insertColor=dt.color_select_dark,ht.widget.TableView.prototype._columnLineColor=dt.color_line,ht.widget.Toolbar.prototype._separatorColor=dt.color_line,ht.widget.Toolbar.prototype._itemGap=4,ht.widget.Button.prototype._labelColor=dt.color_light,ht.widget.Button.prototype._borderColor=null,ht.widget.Button.prototype._background=dt.color_select,ht.widget.Button.prototype._selectBackground=dt.color_select_dark,ht.widget.CheckBox.prototype._pressBackground=dt.color_pane_dark,ht.widget.ComboBox.prototype._selectBackground=dt.color_select,ht.widget.TabView.prototype._insertColor=dt.color_select_dark,ht.widget.TabView.prototype._selectWidth=0,ht.widget.TabView.prototype._selectBackground=dt.color_select,ht.widget.TabView.prototype._tabBackground=dt.color_dark;var IG=ht.widget.TabView.prototype.drawTab;ht.widget.TabView.prototype.drawTab=function(w,t,G,A,I,R,_){return _=t==this.getCurrentTab()?dt.color_select:dt.color_dark,IG.call(this,w,t,G,A,I,R,_)},ht.widget.FormPane.prototype._hPadding=4,ht.widget.FormPane.prototype._vPadding=4,ht.widget.FormPane.prototype._hGap=4,ht.widget.FormPane.prototype._vGap=4,ht.widget.Slider.prototype._background=dt.color_dark,ht.widget.Slider.prototype._leftBackground=dt.color_select,ht.widget.Slider.prototype._button={width:14,height:14,comps:[{type:"circle",rect:[0,0,14,14],borderWidth:1,borderColor:dt.color_dark,background:dt.color_pane_dark}]},ht.widget.ComboBox.prototype._dropDownIcon=ht.widget.MultiComboBox.prototype._dropDownIcon={width:16,height:16,comps:[{type:"shape",points:[13,6,8,12,3,6],segments:[1,2,2],borderWidth:1,borderColor:dt.color_dark}]},ht.Default.comboBoxBorderColor=dt.color_line,ht.Default.textFieldBorderColor=dt.color_line,ht.Default.contextMenuHoverBackground=dt.color_select,ht.Default.contextMenuSeparatorColor=dt.color_line,ht.Default.dialogTitleBackground=dt.dialogTitleBackground||dt.color_dark,ht.Default.dialogButtonBackground=dt.color_select,ht.Default.dialogButtonSelectBackground=dt.color_select_dark,ht.Default.dialogHeaderBackground=dt.color_pane_dark,ht.Default.toolbarBackground=dt.color_pane_dark,ht.Default.tableHeaderBackground=dt.color_pane_dark,ht.Default.contextMenuLabelFont=ht.Default.labelFont,ht.Default.contextMenuBorderRadius=0,ht.Default.contextMenuBorderColor=dt.color_line,ht.Default.contextMenuSubmenuMark=">&nbsp;",ht.Default.contextMenuCheckIcon={width:16,height:16,comps:[{type:"shape",points:[13,3,7,12,4,8],borderWidth:1,borderColor:dt.color_dark}]},ht.Default.setImage("radioOn",{width:16,height:16,comps:[{type:"circle",rect:[2,2,12,12],borderWidth:1,borderColor:ht.Color.widgetIconBorder,background:"#FFF"},{type:"circle",rect:[4,4,8,8],background:dt.color_select}]}),ht.Default.setImage("expandIcon",{width:16,height:16,comps:[{type:"shape",points:[13,6,8,12,3,6],segments:[1,2,2],borderWidth:1,borderColor:dt.color_dark}]}),ht.Default.setImage("collapseIcon",{width:16,height:16,comps:[{type:"shape",points:[6,3,12,8,6,13],segments:[1,2,2],borderWidth:1,borderColor:dt.color_dark}]}),ht.widget.TreeView.prototype._expandIcon="expandIcon",ht.widget.TreeView.prototype._collapseIcon="collapseIcon",ht.widget.TreeTableView.prototype._expandIcon="expandIcon",ht.widget.TreeTableView.prototype._collapseIcon="collapseIcon";var RG=ht.widget.TextArea.prototype.setEditable;ht.widget.TextField.prototype.setEditable=ht.widget.TextArea.prototype.setEditable=function(w){RG.call(this,w);var t=this._element;t.style.color=w?ht.Default.labelColor:dt.color_disabled},ht.Default.onElementCreated=function(w){("INPUT"===w.tagName&&"button"!==w.type||"TEXTAREA"===w.tagName)&&(w.style.border=dt.color_line+" solid 1px",w.style.outline=0,w.style.padding="2px","TEXTAREA"===w.tagName&&(w.style.whiteSpace="pre",w.setAttribute("spellcheck","false")),w.addEventListener("focus",function(t){w.oldBorder=w.style.border,w.style.border=dt.color_select+" solid 1px","INPUT"===w.tagName&&requestAnimationFrame(function(){w.select()}),"TEXTAREA"===w.tagName&&(w.style.zIndex="1")},!1),w.addEventListener("blur",function(t){w.style.border=w.oldBorder,"TEXTAREA"===w.tagName&&(w.style.zIndex="")},!1),dt.onElementCreated&&dt.onElementCreated(w))},ht.Default.onWidgetColorPickerCreated=function(t){for(var G=dt.color_line+" solid 1px",A=t.getView(),I=A.querySelectorAll(".colorPalette"),R=0;R<I.length;R++)I[R].style.border=G;A.querySelector(".satval").style.border=G,A.querySelector(".hue_image").style.border=G,A.querySelector(".preview").style.border=G,I=A.querySelectorAll('input[type="button"]');for(var _=0;_<I.length;_++){var r=I[_];r.style.border=G,r.style.background="none",r.style.outline="none",r.style.width="30px",r.addEventListener("mouseover",function(w){w.target.style.background=dt.color_hover},!1),r.addEventListener("mouseout",function(w){w.target.style.background="none"},!1)}I=A.querySelectorAll("span");for(var y=0;y<I.length;y++)w(t,A,I[y])},ht.Default.handleUnfoundImage=function(w,t){return ht.Default.getImage("editor.unknown")},dt.configStudio&&dt.configStudio();var _G=(function(){function w(w){this.value=w}function t(t){function G(w,t){return new Promise(function(G,I){var r={key:w,arg:t,resolve:G,reject:I,next:null};_?_=_.next=r:(R=_=r,A(w,t))})}function A(G,R){try{var _=t[G](R),r=_.value;r instanceof w?Promise.resolve(r.value).then(function(w){A("next",w)},function(w){A("throw",w)}):I(_.done?"return":"normal",_.value)}catch(w){I("throw",w)}}function I(w,t){switch(w){case"return":R.resolve({value:t,done:!0});break;case"throw":R.reject(t);break;default:R.resolve({value:t,done:!1})}R=R.next,R?A(R.key,R.arg):_=null}var R,_;this._invoke=G,"function"!=typeof t.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(t.prototype[Symbol.asyncIterator]=function(){return this}),t.prototype.next=function(w){return this._invoke("next",w)},t.prototype.throw=function(w){return this._invoke("throw",w)},t.prototype.return=function(w){return this._invoke("return",w)}}(),function(w,t){if(!(w instanceof t))throw new TypeError("Cannot call a class as a function")}),rG=function(){function w(w,t){for(var G=0;G<t.length;G++){var A=t[G];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(w,A.key,A)}}return function(t,G,A){return G&&w(t.prototype,G),A&&w(t,A),t}}(),yG=function(w,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);w.prototype=Object.create(t&&t.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(w,t):w.__proto__=t)},lG=function(w,t){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?w:t},CG=function(w){function t(G){return _G(this,t),lG(this,w.call(this,G))}return yG(t,w),t.prototype.onShown=function(){EG.indexOf(this)>=0||EG.push(this)},t.prototype.onHidden=function(){l(EG,this)},t}(ht.widget.Dialog),VG=function(w){function t(G){_G(this,t);var A=lG(this,w.call(this,G));return A.getView().style.background=kG.config.color_pane,A}return yG(t,w),t.prototype.addLine=function(){this.addRow([],[.1],1.01,{background:kG.config.color_line})},t.prototype.addTitle=function(w){var t=[{element:w,font:kG.config.boldFont}],G={background:kG.config.color_pane_dark};this.addRow(t,[.1],null,G)},t.prototype.getRowIndex=function(w){return this.getRows().indexOf(w)},t}(ht.widget.FormPane),qG=function(){function w(t){if(_G(this,w),this.config=t,this._editable=!0,kG.config.useCodeEditor){(this._view=document.createElement("div")).style.position="absolute"}else this._monacoEditor=new ht.widget.TextArea,this._view=this._monacoEditor.getView(),t&&t.value&&this._monacoEditor.setValue(t.value)}return w.prototype.getView=function(){return this._view},w.prototype.setValue=function(w){void 0!==w&&null!==w||(w=""),this.monacoEditor&&this.monacoEditor.setValue(w)},w.prototype.getValue=function(){return this.monacoEditor&&this.monacoEditor.getValue()},w.prototype.layout=function(){this.monacoEditor&&(this.monacoEditor.layout(),this.isEditable()||this._monacoEditor instanceof ht.widget.TextArea||this.getView().appendChild(this._editableLayer))},w.prototype.invalidate=function(){this.layoutLater()},w.prototype.iv=function(){this.invalidate()},w.prototype.layoutLater=function(w){var t=this;setTimeout(function(){t.layout()},w||300)},w.prototype.setEditable=function(w){var t=this;if(this._monacoEditor instanceof ht.widget.TextArea)return void this._monacoEditor.setEditable(w);if(this._editable!==w){this._timer&&(clearTimeout(this._timer),delete this._timer);var G=this._editableLayer;w?G.parentNode&&G.parentNode.removeChild(G):this._timer=setTimeout(function(){delete t._timer,t.getView().appendChild(G)},10),this._editable=w,this._monacoEditor&&this._monacoEditor.updateOptions({readOnly:!w})}},w.prototype.isEditable=function(){return this._monacoEditor instanceof ht.widget.TextArea?this._monacoEditor.isEditable():this._editable},rG(w,[{key:"monacoEditor",get:function(){if(!this._monacoEditor&&window.monaco){var w=kG.config.convertCodeEditorOption,t=this.config||{value:"",language:"javascript",theme:kG.config.codeEditorTheme,readOnly:!this._editable,minimap:{enabled:!1}};w&&w(t),this._monacoEditor=monaco.editor.create(this._view,t)}return this._monacoEditor}},{key:"_editableLayer",get:function(){if(this.__editableLayer)return this.__editableLayer;var w=this.__editableLayer=document.createElement("div"),t=w.style;return t.backgroundColor=ht.Default.disabledBackground||"rgba( 255, 255, 255, 0.3)",t.position="absolute",t.cursor="not-allow",t.top=0,t.right=0,t.bottom=0,t.left=0,t.pointerEvents="none",w}}]),w}(),kG={strings:{},customStrings:{},config:dt},ZG=["onClick","onDoubleClick","onContextMenu","onDown","onUp","onMove","onEnter","onHover","onLeave","onBeginDrag","onDrag","onEndDrag","onScroll"],zG="unknow",xG="root",LG="dir",QG="asset",JG="symbol",BG="display",nG="component",fG="model",iG="scene",FG="ui",SG="tile",NG="list",TG="accordion",mG="__ht__dataModel",UG=/^attr@/,cG=/firefox/.test(window.navigator.userAgent.toLowerCase()),vG=/safari/.test(window.navigator.userAgent.toLowerCase()),EG=[],OG={width:16,height:16,comps:[]},HG={display:{},symbol:{},data:{},comp:{},scene:{},data3d:{}},XG=new ht.List([{x:50,y:75},{x:25,y:75},{x:25,y:25},{x:75,y:25},{x:75,y:75},{x:65,y:60},{x:75,y:75},{x:85,y:60}]),bG=new ht.List([1,2,2,2,2,2,1,2]);ht.Default.setImage("check",{width:16,height:16,comps:[{type:"border",rect:[1,1,14,14],width:1,color:kG.config.color_line},{type:"shape",points:[13,3,7,12,4,8],borderWidth:2,borderColor:{func:function(w,t){return w&&t&&t.getRowSize&&t.isSelected&&t.isSelected(w)?kG.config.color_line:kG.config.color_select}}}]}),ht.Default.setImage("uncheck",{width:16,height:16,comps:[{type:"border",rect:[1,1,14,14],width:1,color:kG.config.color_line}]}),ht.Default.setImage("text_icon",{width:16,height:16,comps:[{type:"shape",points:[3,14,8,2,13,14,5,9,11,9],segments:[1,2,2,1,2],borderColor:kG.config.color_dark,borderWidth:1}]}),ht.Default.setImage("refGraph_icon",{width:16,height:16,comps:[{type:"shape",borderWidth:1,borderColor:kG.config.color_dark,rotation:.7854,points:[12.90381,7.59615,12.90381,7.59615,12.90381,4.61619,12.90381,3.59619,12.90381,2.57619,11.72047,1.59619,10.40381,1.59619,9.08714,1.59619,7.90381,2.61619,7.90381,3.59619,7.90381,4.35799,7.90381,7.59615,7.90381,7.59615,7.90381,7.59615,7.90381,9.59619,10.40381,9.59619],segments:[1,4,4,4,4,4]},{type:"shape",borderWidth:1,borderColor:kG.config.color_dark,rotation:-2.35619,points:[8.21091,12.28904,8.21091,12.28904,8.21091,9.30909,8.21091,8.28909,8.21091,7.26909,7.02758,6.28909,5.71091,6.28909,4.39425,6.28909,3.21091,7.30909,3.21091,8.28909,3.21091,9.05088,3.21091,12.28904,3.21091,12.28904,3.21091,12.28904,3.21091,14.28909,5.71091,14.28909],segments:[1,4,4,4,4,4]}]}),ht.Default.setImage("editor.unknown",{width:200,height:200,textureCache:!0,comps:[{type:"roundRect",background:"rgb(247,247,247)",borderColor:"#979797",cornerRadius:20,selectable:!1,rect:[0,0,200,200]},{type:"shape",background:"rgba(255,170,79,0.63)",borderColor:"rgb(124,145,155)",points:[35.92101,125.8927,70.22338,97.87611,96.05685,117.16025,108.79166,106.08902,115.70485,111.45559,92.40971,145.02116,35.92101,145.02116,35.92101,130.19911]},{type:"shape",background:"rgba(255,170,79,0.63)",borderColor:"rgb(124,145,155)",points:[143.94195,74.95345,121.52647,95.32915,136.08054,112.06633,115.341,146.63224,166.86461,146.63224,166.86461,103.69774]},{type:"shape",borderWidth:4,borderColor:"rgb(124,145,155)",displayName:"\u4e0d\u89c4\u5219\u56fe\u5f62",closePath:!0,points:[86.52393,81.40417,110.5868,43.51795,35.32634,43.51795,35.32634,146.93709,93.17962,146.93709,117.24248,111.09877,86.52393,81.40417]},{type:"shape",borderWidth:4,borderColor:"rgb(124,145,155)",closePath:!0,points:[105.77896,81.40417,129.84183,43.51795,168.08039,43.51795,168.08039,146.93709,112.43465,146.93709,136.49752,111.09877,105.77896,81.40417]},{type:"shape",borderWidth:4,borderColor:"rgb(124,145,155)",points:[35.92101,126.00861,70.52846,96.60621,95.13328,116.95012,108.45973,104.311]},{type:"shape",borderWidth:4,borderColor:"rgb(124,145,155)",points:[122.25418,94.2376,144.08528,74.22575,168.32002,106.08902]},{type:"oval",background:"#FF7C7C",borderWidth:4,borderColor:"rgb(124,145,155)",rect:[56.57448,66.67972,14,14]}]}),ht.Default.setImage("editor.root",{width:30,height:30,fitSize:!0,comps:[{type:"shape",points:[23,8,8,23],segments:[1,2],borderWidth:1,borderColor:"white"}]}),ht.Default.setImage("editor.display",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"circle",borderWidth:1,borderColor:kG.config.color_light,rect:[6,1,4,4.00837]},{type:"circle",borderWidth:1,borderColor:kG.config.color_light,rect:[11,10.99163,4,4.00837]},{type:"shape",borderWidth:1,borderColor:kG.config.color_light,
points:[2.98235,11.0795,2.98235,8,7.89475,8,7.89475,5.00837,7.89475,8,13,8,13,11]},{type:"circle",borderWidth:1,borderColor:kG.config.color_light,rect:[1,10.99163,4,4.00837]}]}),ht.Default.setImage("editor.symbol",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"circle",borderWidth:1,borderColor:kG.config.color_light,rect:[0,2,10,8]},{type:"rect",borderWidth:1,borderColor:kG.config.color_light,rect:[5,6,10,8]}]}),ht.Default.setImage("editor.filter",{background:"rgb(130,130,130)",width:16,height:16,comps:[{type:"shape",borderWidth:1,borderColor:"rgb(255,255,255)",closePath:!0,points:[2,1.5,14,1.5,9.50949,5.5,9.50949,9.5,13,9.5,9.50949,9.5,9.50949,11.5,12,11.5,9.50949,11.5,9.50949,14.5,6.5335,12.5,6.5335,5.5,2,1.5]}]}),ht.Default.setImage("editor.bind",{width:16,height:16,comps:[{type:"shape",borderWidth:1,borderColor:"white",borderCap:"round",rotation:.7854,points:[12.5502,6.7981,12.5502,6.7981,12.5502,4.8181,12.5502,3.7981,12.5502,2.7781,11.36687,1.7981,10.0502,1.7981,8.73354,1.7981,7.5502,2.8181,7.5502,3.7981,7.5502,4.55989,7.5502,7.79805,7.5502,7.79805,7.5502,7.79805,7.5502,9.7981,10.0502,9.7981],segments:[1,4,4,4,4,4]},{type:"shape",borderWidth:1,borderColor:"white",borderCap:"round",rotation:-2.35619,points:[8.4498,11.2019,8.4498,11.2019,8.4498,9.2219,8.4498,8.2019,8.4498,7.1819,7.26646,6.2019,5.9498,6.2019,4.63313,6.2019,3.4498,7.2219,3.4498,8.2019,3.4498,8.9637,3.4498,12.20186,3.4498,12.20186,3.4498,12.20186,3.4498,14.2019,5.9498,14.2019],segments:[1,4,4,4,4,4]}]}),ht.Default.setImage("editor.unbind",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",rotation:.7854,points:[13.49999,7.03553,13.49999,7.03553,13.49999,5.05554,13.49999,4.03553,13.49999,3.01553,12.31666,2.03553,10.99999,2.03553,9.68333,2.03553,8.49999,3.05553,8.49999,4.03553,8.49999,5.01553,8.49999,7.03553,8.49999,7.03553],segments:[1,4,4,4,4]},{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",rotation:3.92699,points:[7.28554,13.25761,7.28554,13.25761,7.28554,11.27761,7.28554,10.2576,7.28554,9.23761,6.1022,8.25761,4.78554,8.25761,3.46887,8.25761,2.28554,9.2776,2.28554,10.2576,2.28554,11.2376,2.28554,13.25761,2.28554,13.25761],segments:[1,4,4,4,4]}]}),ht.Default.setImage("editor.dircollapsed",{background:"rgb(179,179,179)",width:16,height:16,comps:[{type:"shape",background:"rgb(255,204,153)",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",points:[14.5,14.5,.5,14.5,.5,1.50001,6.5,1.50001,7.5,3.50001,14.5,3.50001,14.5,14.5]},{type:"shape",background:"rgb(255,227,199)",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",points:[.5,5.50001,14.5,5.50001,14.5,14.50001,.5,14.50001,.5,5.50001]}]}),ht.Default.setImage("editor.direxpanded",{background:"rgb(179,179,179)",width:16,height:16,comps:[{type:"shape",background:"rgb(255,255,255)",borderWidth:1,borderColor:"rgb(51,153,255)",borderCap:"round",shadowColor:"#1ABC9C",points:[2.35891,10.47175,3.3125,6.30284,15.5,6.30284,13.625,14.5,.5,14.5,.5,1.5,6.125,1.5,7.0625,3.2289,12.6875,3.2289,12.6875,6.30284]}]}),ht.Default.setImage("editor.dir",{background:"rgb(227,227,227)",width:20,height:20,fitSize:!0,cacheRule:!0,comps:[{type:"shape",background:"#FFCC99",borderWidth:1,borderColor:"rgb(255,255,255)",borderCap:"round",points:[19,4,19,18,1,18,1,2,8.71429,2,10,4,19,4]},{type:"rect",shadow:!0,shadowColor:"rgba(0,0,0,0.4)",shadowBlur:2,shadowOffsetX:0,shadowOffsetY:1,background:"rgb(255,255,255)",borderColor:"#979797",rotation:6.28319,rect:[2.98273,5.998,13.98346,9.99004]},{type:"shape",background:"rgba(255,255,153,0.3)",borderColor:"rgb(255,255,255)",borderCap:"round",points:[18,9,18,17,2,17,2,9,18,9]},{type:"rect",shadowColor:"rgb(0,0,0)",shadowBlur:2,shadowOffsetX:0,shadowOffsetY:1,background:"rgb(232,230,230)",borderColor:"#979797",rotation:6.28319,rect:[4,7,11.98532,1.06039]}]}),ht.Default.setImage("editor.dxf",{width:64,height:64,fitSize:!0,comps:[{type:"shape",shadowColor:"#1ABC9C",background:"#000000",points:[25.13334,60.62742,20.38001,60.62742,20.11302,60.62742,19.89504,60.41688,19.89504,60.15453,19.89504,43.31796,19.89504,43.05561,20.11302,42.84507,20.38001,42.84507,25.13334,42.84507,30.66329,42.84507,33.35167,45.67873,33.35167,51.50916,33.35167,57.47593,30.51009,60.62742,25.13334,60.62742,25.13334,60.62742,23.32783,57.5939,25.03463,57.5939,28.43349,57.5939,29.82018,55.90554,29.82018,51.77117,29.82018,47.64415,28.35946,45.88193,24.93627,45.88193,23.32783,45.88193,23.32783,57.5939,23.32783,57.5939],segments:[1,2,4,2,4,2,4,4,2,1,2,4,4,2,2,2]},{type:"shape",shadowColor:"#1ABC9C",background:"#000000",points:[48.10416,60.62742,45.1488,60.62742,44.97846,60.62742,44.82286,60.54254,44.73581,60.40217,40.95446,54.3465,37.26771,60.39482,37.1786,60.53886,37.01957,60.62776,36.84889,60.62776,34.01657,60.62776,33.84041,60.62776,33.67761,60.53552,33.59227,60.38379,33.50693,60.2324,33.51275,60.04759,33.60735,59.89987,39.05608,51.53522,33.90312,43.56961,33.80853,43.42557,33.8027,43.24076,33.88804,43.08937,33.97338,42.93797,34.13618,42.8454,34.31235,42.8454,37.31706,42.8454,37.4874,42.8454,37.64677,42.93396,37.73382,43.078,41.14399,48.68284,44.48219,43.08168,44.56924,42.93396,44.72861,42.84507,44.90272,42.84507,47.73299,42.84507,47.91121,42.84507,48.074,42.93731,48.15729,43.08903,48.24434,43.24042,48.2368,43.42524,48.14221,43.56928,43.03826,51.48342,48.51339,59.89987,48.60798,60.04759,48.61552,60.2324,48.52847,60.38379,48.44518,60.53485,48.28238,60.62742,48.10416,60.62742,48.10416,60.62742],segments:[1,2,4,2,2,4,2,4,4,2,2,4,4,2,4,2,2,4,2,4,4,2,2,4,4,2]},{type:"shape",shadowColor:"#1ABC9C",background:"#000000",points:[53.17006,60.62742,50.68081,60.62742,50.41177,60.62742,50.19585,60.41688,50.19585,60.15453,50.19585,43.31796,50.19585,43.05561,50.41177,42.84507,50.68081,42.84507,60.09288,42.84507,60.36192,42.84507,60.57784,43.05561,60.57784,43.31796,60.57784,45.40904,60.57784,45.67138,60.36192,45.88193,60.09288,45.88193,53.65537,45.88193,53.65537,50.62587,59.22886,50.62587,59.4979,50.62587,59.71382,50.83642,59.71382,51.09876,59.71382,53.18984,59.71382,53.45219,59.4979,53.66273,59.22886,53.66273,53.65537,53.66273,53.65537,60.1542,53.65537,60.41688,53.43911,60.62742,53.17006,60.62742,53.17006,60.62742],segments:[1,2,4,2,4,2,4,2,4,2,2,2,4,2,4,2,2,4,2]},{type:"shape",shadowColor:"#1ABC9C",background:"#000000",points:[56.21111,19.11398,40.59837,2.34525,40.23096,1.94622,39.70418,1.92216,39.15478,1.92216,8.11505,1.92216,7.04265,1.92216,6.07649,2.35795,6.07649,3.40366,6.07649,60.1542,6.07649,61.1999,7.04299,62.07784,8.11505,62.07784,13.93496,62.07784,15.00736,62.07784,15.87481,61.28546,15.87481,60.23975,15.87481,59.19405,15.00702,58.40166,13.93496,58.40166,9.84618,58.40166,9.84618,5.59867,35.20824,5.59867,35.20824,21.86677,35.20824,22.91248,36.27174,23.64538,37.3438,23.64538,52.6875,23.64538,52.6875,35.56255,52.6875,36.60826,53.67148,37.45412,54.74388,37.45412,55.81629,37.45412,56.80027,36.60793,56.80027,35.56255,56.80027,20.28301,56.80027,19.81747,56.52917,19.46155,56.21111,19.11398,56.21111,19.11398,39.32101,6.67546,51.68947,19.9692,39.32101,19.9692,39.32101,6.67546,39.32101,6.67546],segments:[1,2,4,2,4,2,4,2,4,4,2,2,2,2,4,2,2,4,4,2,4,2,1,2,2,2,2]}]}),ht.Default.setImage("editor.obj",{width:64,height:64,fitSize:!0,attachStyle:"close",comps:[{type:"shape",background:"rgb(0,0,0)",points:[56.21111,19.11398,40.59837,2.34525,40.23096,1.94622,39.70418,1.92216,39.15478,1.92216,8.11505,1.92216,7.04265,1.92216,6.07649,2.35795,6.07649,3.40366,6.07649,60.1542,6.07649,61.1999,7.04299,62.07784,8.11505,62.07784,13.93496,62.07784,15.00736,62.07784,15.87481,61.28546,15.87481,60.23975,15.87481,59.19405,15.00702,58.40166,13.93496,58.40166,9.84618,58.40166,9.84618,5.59867,35.20824,5.59867,35.20824,21.86677,35.20824,22.91248,36.27174,23.64538,37.3438,23.64538,52.6875,23.64538,52.6875,35.56255,52.6875,36.60826,53.67148,37.45412,54.74388,37.45412,55.81629,37.45412,56.80027,36.60793,56.80027,35.56255,56.80027,20.28301,56.80027,19.81747,56.52917,19.46155,56.21111,19.11398,56.21111,19.11398,39.32101,6.67546,51.68947,19.9692,39.32101,19.9692,39.32101,6.67546,39.32101,6.67546],segments:[1,2,4,2,4,2,4,2,4,4,2,2,2,2,4,2,2,4,4,2,4,2,1,2,2,2,2]},{type:"shape",background:"#000000",borderWidth:.5,borderColor:"rgb(0,0,0)",pixelPerfect:!0,points:[31.21904,47.49025,32.38182,48.81914,33.04627,50.64637,33.04627,52.80583,33.04627,54.96528,32.38182,56.79251,31.21904,58.12141,29.89014,59.4503,28.22903,60.28086,26.06957,60.28086,23.91012,60.28086,22.249,59.61642,20.9201,58.12141,19.75732,56.79251,19.09287,54.96528,19.09287,52.80583,19.09287,50.64637,19.59121,48.81914,20.9201,47.49025,22.08289,45.99524,23.91012,45.33079,26.06957,45.33079,28.22903,45.33079,30.05626,45.99524,31.21904,47.49025,22.58122,48.81914,21.75066,49.81582,21.41844,51.14471,21.41844,52.80583,21.41844,54.46695,21.75066,55.79584,22.58122,56.79251,23.41178,57.78919,24.57456,58.28752,26.06957,58.28752,27.56458,58.28752,28.72736,57.78919,29.55792,56.79251,30.38848,55.79584,30.7207,54.46695,30.7207,52.80583,30.7207,51.14471,30.22237,49.81582,29.55792,48.81914,28.72736,47.82247,27.56458,47.32414,26.06957,47.32414,24.57456,47.32414,23.41178,47.82247,22.58122,48.81914],segments:[1,4,4,4,4,4,4,4,4,5,1,4,4,4,4,4,4,4,4,5]},{type:"shape",background:"#000000",borderWidth:.5,borderColor:"rgb(0,0,0)",pixelPerfect:!0,points:[41.68409,45.66302,43.01298,45.66302,44.17577,45.99524,45.00633,46.65969,45.83689,47.32414,46.16911,48.1547,46.16911,49.31748,46.16911,50.14804,46.003,50.81249,45.50466,51.31082,45.17244,51.80916,44.50799,52.30749,43.84354,52.47361,44.84021,52.63972,45.50466,52.97194,46.003,53.63639,46.50133,54.13472,46.66745,54.96528,46.66745,55.96195,46.66745,57.45696,46.16911,58.45363,45.17244,59.11808,44.34188,59.61642,43.1791,59.94864,41.68409,59.94864,35.20573,59.94864,35.20573,45.66302,41.68409,45.66302,37.36518,51.64305,41.18575,51.64305,42.18242,51.64305,42.84687,51.47693,43.34521,51.14471,43.84354,50.81249,44.00966,50.14804,44.00966,49.48359,44.00966,48.81914,43.84354,48.32081,43.34521,47.98858,42.84687,47.65636,42.18242,47.49025,41.18575,47.49025,37.36518,47.49025,37.36518,51.64305,37.36518,58.12141,41.35186,58.12141,42.34854,58.12141,43.01298,57.9553,43.51132,57.62307,44.17577,57.29085,44.50799,56.6264,44.50799,55.79584,44.50799,54.96528,44.17577,54.30084,43.67743,53.96861,43.1791,53.63639,42.34854,53.47028,41.35186,53.47028,37.19907,53.47028,37.19907,58.12141],segments:[1,4,4,4,4,4,4,4,4,2,2,2,5,1,2,4,4,4,4,2,2,5,1,2,4,4,4,4,2,2,5]},{type:"shape",background:"#000000",borderWidth:.5,borderColor:"rgb(0,0,0)",pixelPerfect:!0,points:[56.80027,45.66302,56.80027,55.29751,56.80027,56.95863,56.46805,58.12141,55.8036,58.95197,54.97304,59.78253,53.81026,60.28086,52.14914,60.28086,50.65413,60.28086,49.65746,59.94864,48.99301,59.11808,48.16245,58.28752,47.83023,57.29085,47.83023,55.79584,47.83023,55.29751,49.98968,55.29751,49.98968,55.79584,49.98968,57.45696,50.65413,58.28752,52.14914,58.28752,52.9797,58.28752,53.64414,57.9553,53.97637,57.62307,54.30859,57.12474,54.4747,56.46029,54.4747,55.29751,54.4747,45.66302,56.80027,45.66302],segments:[1,2,4,4,4,4,2,2,2,4,4,4,2,2,5]}]}),ht.Default.setImage("editor.mtl",{width:64,height:64,fitSize:!0,attachStyle:"close",comps:[{type:"shape",background:"rgb(0,0,0)",points:[56.21111,19.11398,40.59837,2.34525,40.23096,1.94622,39.70418,1.92216,39.15478,1.92216,8.11505,1.92216,7.04265,1.92216,6.07649,2.35795,6.07649,3.40366,6.07649,60.1542,6.07649,61.1999,7.04299,62.07784,8.11505,62.07784,13.93496,62.07784,15.00736,62.07784,15.87481,61.28546,15.87481,60.23975,15.87481,59.19405,15.00702,58.40166,13.93496,58.40166,9.84618,58.40166,9.84618,5.59867,35.20824,5.59867,35.20824,21.86677,35.20824,22.91248,36.27174,23.64538,37.3438,23.64538,52.6875,23.64538,52.6875,35.56255,52.6875,36.60826,53.67148,37.45412,54.74388,37.45412,55.81629,37.45412,56.80027,36.60793,56.80027,35.56255,56.80027,20.28301,56.80027,19.81747,56.52917,19.46155,56.21111,19.11398,56.21111,19.11398,39.32101,6.67546,51.68947,19.9692,39.32101,19.9692,39.32101,6.67546,39.32101,6.67546],segments:[1,2,4,2,4,2,4,2,4,4,2,2,2,2,4,2,2,4,4,2,4,2,1,2,2,2,2]},{type:"shape",background:"#000000",borderWidth:.5,borderColor:"rgb(0,0,0)",pixelPerfect:!0,points:[21.55794,45.99697,26.66087,57.7337,26.66087,57.7337,31.7638,45.99697,34.31526,45.99697,34.31526,60.62536,32.10399,60.62536,32.10399,50.24941,32.10399,50.24941,27.68146,60.62536,25.81038,60.62536,21.38785,50.24941,21.38785,50.24941,21.38785,60.62536,19.00648,60.62536,19.00648,45.99697,21.55794,45.99697],segments:[1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,5]},{type:"shape",background:"#000000",borderWidth:.5,borderColor:"rgb(0,0,0)",pixelPerfect:!0,points:[48.09317,45.99697,48.09317,47.86804,43.16034,47.86804,43.16034,60.45527,40.94907,60.45527,40.94907,47.86804,36.01624,47.86804,36.01624,45.99697,48.09317,45.99697],segments:[1,2,2,2,2,2,2,2,2,5]},{type:"shape",background:"#000000",borderWidth:.5,borderColor:"rgb(0,0,0)",pixelPerfect:!0,points:[52.00541,45.99697,52.00541,58.58419,60,58.58419,60,60.45527,49.79414,60.45527,49.79414,45.82687,52.00541,45.82687],segments:[1,2,2,2,2,2,2,5]}]}),ht.Default.setImage("editor.ui",{modified:"Thu Jun 04 2020 09:40:36 GMT+0800 (China Standard Time)",width:16,height:16,fitSize:!0,attachStyle:"close",comps:[{type:"shape",background:"rgb(0,0,0)",points:[14.84148,4.57262,10.64058,.11253,10.54173,.0064,10.39999,0,10.25216,0,1.90035,0,1.61181,0,1.35184,.11591,1.35184,.39404,1.35184,15.48836,1.35184,15.76649,1.6119,16,1.90035,16,6.28421,16,6.57276,16,7.02587,15.76649,7.02587,15.48836,7.02587,15.21023,6.57267,15.02222,6.28421,15.02222,2.36615,15.02222,2.36615,.97787,9.19027,.97787,9.19027,5.3048,9.19027,5.58293,9.47642,5.77787,9.76488,5.77787,13.89338,5.77787,13.89338,8.94755,13.89338,9.22569,14.15814,9.45067,14.44669,9.45067,14.73524,9.45067,15,9.2256,15,8.94755,15,4.88356,15,4.75973,14.92706,4.66507,14.84148,4.57262,14.84148,4.57262,10.29689,1.26427,13.62485,4.80009,10.29689,4.80009,10.29689,1.26427,10.29689,1.26427],segments:[1,2,4,2,4,2,4,2,4,4,2,2,2,2,4,2,2,4,4,2,4,2,1,2,2,2,2]},{type:"shape",background:"#000000",borderWidth:.2,borderColor:"rgb(0,0,0)",pixelPerfect:!0,points:[10.74059,12.112,10.74059,14.67455,10.74059,15.11636,10.6512,15.42564,10.47242,15.64655,10.24894,15.86746,9.93607,16,9.48912,16,9.08686,16,8.81868,15.91164,8.6399,15.69073,8.41643,15.46982,8.32704,15.20473,8.32704,14.80709,8.32704,12.112,8.90807,12.112,8.90807,14.80709,8.90807,15.24891,9.08686,15.46982,9.48912,15.46982,9.71259,15.46982,9.89137,15.38146,9.98077,15.29309,10.07016,15.16055,10.11485,14.98382,10.11485,14.67455,10.11485,12.112,10.74059,12.112,10.74059,12.112],segments:[1,2,4,4,4,4,2,2,2,4,4,4,2,2,2]},{type:"rect",background:"rgb(0,0,0)",borderColor:"#979797",rect:[11.65679,12.112,.82321,3.888]}]}),ht.Default.setImage("editor.ui-tab",{modified:"Thu Jun 04 2020 09:40:36 GMT+0800 (China Standard Time)",width:16,height:16,fitSize:!0,attachStyle:"close",comps:[{type:"shape",background:"rgb(255,255,255)",points:[14.84148,4.57262,10.64058,.11253,10.54173,.0064,10.39999,0,10.25216,0,1.90035,0,1.61181,0,1.35184,.11591,1.35184,.39404,1.35184,15.48836,1.35184,15.76649,1.6119,16,1.90035,16,6.28421,16,6.57276,16,7.02587,15.76649,7.02587,15.48836,7.02587,15.21023,6.57267,15.02222,6.28421,15.02222,2.36615,15.02222,2.36615,.97787,9.19027,.97787,9.19027,5.3048,9.19027,5.58293,9.47642,5.77787,9.76488,5.77787,13.89338,5.77787,13.89338,8.94755,13.89338,9.22569,14.15814,9.45067,14.44669,9.45067,14.73524,9.45067,15,9.2256,15,8.94755,15,4.88356,15,4.75973,14.92706,4.66507,14.84148,4.57262,14.84148,4.57262,10.29689,1.26427,13.62485,4.80009,10.29689,4.80009,10.29689,1.26427,10.29689,1.26427],segments:[1,2,4,2,4,2,4,2,4,4,2,2,2,2,4,2,2,4,4,2,4,2,1,2,2,2,2]},{type:"shape",background:"rgb(255,255,255)",borderWidth:.2,borderColor:"rgb(255,255,255)",pixelPerfect:!0,points:[10.74059,12.112,10.74059,14.67455,10.74059,15.11636,10.6512,15.42564,10.47242,15.64655,10.24894,15.86746,9.93607,16,9.48912,16,9.08686,16,8.81868,15.91164,8.6399,15.69073,8.41643,15.46982,8.32704,15.20473,8.32704,14.80709,8.32704,12.112,8.90807,12.112,8.90807,14.80709,8.90807,15.24891,9.08686,15.46982,9.48912,15.46982,9.71259,15.46982,9.89137,15.38146,9.98077,15.29309,10.07016,15.16055,10.11485,14.98382,10.11485,14.67455,10.11485,12.112,10.74059,12.112,10.74059,12.112],segments:[1,2,4,4,4,4,2,2,2,4,4,4,2,2,2]},{type:"rect",background:"rgb(255,255,255)",rect:[11.65679,12.112,.82321,3.888]}]}),ht.Default.setImage("editor.ttf",{width:64,height:64,fitSize:!0,comps:[{type:"shape",background:"#000000",points:[53.17006,60.62742,50.68081,60.62742,50.41177,60.62742,50.19585,60.41688,50.19585,60.15453,50.19585,43.31796,50.19585,43.05561,50.41177,42.84507,50.68081,42.84507,60.09288,42.84507,60.36192,42.84507,60.57784,43.05561,60.57784,43.31796,60.57784,45.40904,60.57784,45.67138,60.36192,45.88193,60.09288,45.88193,53.65537,45.88193,53.65537,50.62587,59.22886,50.62587,59.4979,50.62587,59.71382,50.83642,59.71382,51.09876,59.71382,53.18984,59.71382,53.45219,59.4979,53.66273,59.22886,53.66273,53.65537,53.66273,53.65537,60.1542,53.65537,60.41688,53.43911,60.62742,53.17006,60.62742,53.17006,60.62742],segments:[1,2,4,2,4,2,4,2,4,2,2,2,4,2,4,2,2,4,2]},{type:"shape",background:"#000000",points:[56.21111,19.11398,40.59837,2.34525,40.23096,1.94622,39.70418,1.92216,39.15478,1.92216,8.11505,1.92216,7.04265,1.92216,6.07649,2.35795,6.07649,3.40366,6.07649,60.1542,6.07649,61.1999,7.04299,62.07784,8.11505,62.07784,13.93496,62.07784,15.00736,62.07784,15.87481,61.28546,15.87481,60.23975,15.87481,59.19405,15.00702,58.40166,13.93496,58.40166,9.84618,58.40166,9.84618,5.59867,35.20824,5.59867,35.20824,21.86677,35.20824,22.91248,36.27174,23.64538,37.3438,23.64538,52.6875,23.64538,52.6875,35.56255,52.6875,36.60826,53.67148,37.45412,54.74388,37.45412,55.81629,37.45412,56.80027,36.60793,56.80027,35.56255,56.80027,20.28301,56.80027,19.81747,56.52917,19.46155,56.21111,19.11398,56.21111,19.11398,39.32101,6.67546,51.68947,19.9692,39.32101,19.9692,39.32101,6.67546,39.32101,6.67546],segments:[1,2,4,2,4,2,4,2,4,4,2,2,2,2,4,2,2,4,4,2,4,2,1,2,2,2,2]},{type:"shape",background:"#000000",points:[41.52931,60.62742,39.04006,60.62742,38.77102,60.62742,38.5551,60.41688,38.5551,60.15453,38.5551,42.84507,46.88507,42.84507,47.15411,42.84507,47.37003,43.05561,47.37003,43.31796,47.37003,45.40904,47.37003,45.67138,47.15411,45.88193,46.88507,45.88193,42.01462,45.88193,42.01462,60.1542,42.01462,60.41688,41.79836,60.62742,41.52931,60.62742,41.52931,60.62742],segments:[1,2,4,2,2,4,2,4,2,2,4,2]},{type:"shape",background:"#000000",rotation:3.14159,points:[33.91988,42.84507,39.07014,42.84507,39.33918,42.84507,39.5551,43.05561,39.5551,43.31796,39.5551,45.40904,39.5551,45.67138,39.33918,45.88193,39.07014,45.88193,33.91988,45.88193],segments:[1,2,4,2,4,2]},{type:"shape",background:"#000000",points:[25.11617,60.62742,22.62692,60.62742,22.35788,60.62742,22.14196,60.41688,22.14196,60.15453,22.14196,42.84507,30.47192,42.84507,30.74096,42.84507,30.95688,43.05561,30.95688,43.31796,30.95688,45.40904,30.95688,45.67138,30.74096,45.88193,30.47192,45.88193,25.60148,45.88193,25.60148,60.1542,25.60148,60.41688,25.38522,60.62742,25.11617,60.62742,25.11617,60.62742],segments:[1,2,4,2,2,4,2,4,2,2,4,2]},{type:"shape",background:"#000000",rotation:3.14159,points:[17.50673,42.84507,22.657,42.84507,22.92604,42.84507,23.14196,43.05561,23.14196,43.31796,23.14196,45.40904,23.14196,45.67138,22.92604,45.88193,22.657,45.88193,17.50673,45.88193],segments:[1,2,4,2,4,2]}]}),ht.Default.setImage("editor.otf",{width:64,height:64,fitSize:!0,comps:[{type:"shape",background:"#000000",points:[53.17006,60.62742,50.68081,60.62742,50.41177,60.62742,50.19585,60.41688,50.19585,60.15453,50.19585,43.31796,50.19585,43.05561,50.41177,42.84507,50.68081,42.84507,60.09288,42.84507,60.36192,42.84507,60.57784,43.05561,60.57784,43.31796,60.57784,45.40904,60.57784,45.67138,60.36192,45.88193,60.09288,45.88193,53.65537,45.88193,53.65537,50.62587,59.22886,50.62587,59.4979,50.62587,59.71382,50.83642,59.71382,51.09876,59.71382,53.18984,59.71382,53.45219,59.4979,53.66273,59.22886,53.66273,53.65537,53.66273,53.65537,60.1542,53.65537,60.41688,53.43911,60.62742,53.17006,60.62742,53.17006,60.62742],segments:[1,2,4,2,4,2,4,2,4,2,2,2,4,2,4,2,2,4,2]},{type:"shape",background:"#000000",points:[56.21111,19.11398,40.59837,2.34525,40.23096,1.94622,39.70418,1.92216,39.15478,1.92216,8.11505,1.92216,7.04265,1.92216,6.07649,2.35795,6.07649,3.40366,6.07649,60.1542,6.07649,61.1999,7.04299,62.07784,8.11505,62.07784,13.93496,62.07784,15.00736,62.07784,15.87481,61.28546,15.87481,60.23975,15.87481,59.19405,15.00702,58.40166,13.93496,58.40166,9.84618,58.40166,9.84618,5.59867,35.20824,5.59867,35.20824,21.86677,35.20824,22.91248,36.27174,23.64538,37.3438,23.64538,52.6875,23.64538,52.6875,35.56255,52.6875,36.60826,53.67148,37.45412,54.74388,37.45412,55.81629,37.45412,56.80027,36.60793,56.80027,35.56255,56.80027,20.28301,56.80027,19.81747,56.52917,19.46155,56.21111,19.11398,56.21111,19.11398,39.32101,6.67546,51.68947,19.9692,39.32101,19.9692,39.32101,6.67546,39.32101,6.67546],segments:[1,2,4,2,4,2,4,2,4,4,2,2,2,2,4,2,2,4,4,2,4,2,1,2,2,2,2]},{type:"shape",background:"#000000",points:[41.52931,60.62742,39.04006,60.62742,38.77102,60.62742,38.5551,60.41688,38.5551,60.15453,38.5551,42.84507,46.88507,42.84507,47.15411,42.84507,47.37003,43.05561,47.37003,43.31796,47.37003,45.40904,47.37003,45.67138,47.15411,45.88193,46.88507,45.88193,42.01462,45.88193,42.01462,60.1542,42.01462,60.41688,41.79836,60.62742,41.52931,60.62742,41.52931,60.62742],segments:[1,2,4,2,2,4,2,4,2,2,4,2]},{type:"shape",background:"#000000",rotation:3.14159,points:[33.91988,42.84507,39.07014,42.84507,39.33918,42.84507,39.5551,43.05561,39.5551,43.31796,39.5551,45.40904,39.5551,45.67138,39.33918,45.88193,39.07014,45.88193,33.91988,45.88193],segments:[1,2,4,2,4,2]},{type:"oval",borderWidth:3.3,borderColor:"rgb(0,0,0)",rect:[18.97543,44.76232,11.82189,13.94784]}]}),ht.Default.setImage("editor.js",{width:64,height:64,fitSize:!0,comps:[{type:"shape",background:"#000000",points:[56.21111,19.11398,40.59837,2.34525,40.23096,1.94622,39.70418,1.92216,39.15478,1.92216,8.11505,1.92216,7.04265,1.92216,6.07649,2.35795,6.07649,3.40366,6.07649,60.1542,6.07649,61.1999,7.04299,62.07784,8.11505,62.07784,13.93496,62.07784,15.00736,62.07784,15.87481,61.28546,15.87481,60.23975,15.87481,59.19405,15.00702,58.40166,13.93496,58.40166,9.84618,58.40166,9.84618,5.59867,35.20824,5.59867,35.20824,21.86677,35.20824,22.91248,36.27174,23.64538,37.3438,23.64538,52.6875,23.64538,52.6875,35.56255,52.6875,36.60826,53.67148,37.45412,54.74388,37.45412,55.81629,37.45412,56.80027,36.60793,56.80027,35.56255,56.80027,20.28301,56.80027,19.81747,56.52917,19.46155,56.21111,19.11398,56.21111,19.11398,39.32101,6.67546,51.68947,19.9692,39.32101,19.9692,39.32101,6.67546,39.32101,6.67546],segments:[1,2,4,2,4,2,4,2,4,4,2,2,2,2,4,2,2,4,4,2,4,2,1,2,2,2,2]},{type:"text",text:{func:"attr@name",value:"JS"},align:"center",font:"bold 24px Arial Rounded MT Bold",rect:[17.50673,40.58187,46.49327,23.41813]}]}),ht.Default.setImage("editor.sound",{width:64,height:64,fitSize:!0,comps:[{type:"shape",background:"#000000",points:[56.21111,19.11398,40.59837,2.34525,40.23096,1.94622,39.70418,1.92216,39.15478,1.92216,8.11505,1.92216,7.04265,1.92216,6.07649,2.35795,6.07649,3.40366,6.07649,60.1542,6.07649,61.1999,7.04299,62.07784,8.11505,62.07784,13.93496,62.07784,15.00736,62.07784,15.87481,61.28546,15.87481,60.23975,15.87481,59.19405,15.00702,58.40166,13.93496,58.40166,9.84618,58.40166,9.84618,5.59867,35.20824,5.59867,35.20824,21.86677,35.20824,22.91248,36.27174,23.64538,37.3438,23.64538,52.6875,23.64538,52.6875,35.56255,52.6875,36.60826,53.67148,37.45412,54.74388,37.45412,55.81629,37.45412,56.80027,36.60793,56.80027,35.56255,56.80027,20.28301,56.80027,19.81747,56.52917,19.46155,56.21111,19.11398,56.21111,19.11398,39.32101,6.67546,51.68947,19.9692,39.32101,19.9692,39.32101,6.67546,39.32101,6.67546],segments:[1,2,4,2,4,2,4,2,4,4,2,2,2,2,4,2,2,4,4,2,4,2,1,2,2,2,2]},{type:"shape",background:"#231815",points:[29.93506,40.65719,29.93506,52.11129,29.99768,52.17391,38.01482,58.31199,38.01482,53.06642,38.01482,39.70982,38.01482,34.45641,29.93506,40.65719,29.93506,40.65719,29.93506,40.65719,29.93506,40.65719,44.44257,36.03797,44.44257,36.03797,43.87107,35.70912,43.69881,34.9732,44.02766,34.40163,44.37211,33.84573,45.10803,33.65787,45.66393,33.99448,47.80131,35.26287,49.59417,37.09491,50.81553,39.2714,52.01338,41.37743,52.71019,43.80448,52.71019,46.38028,52.71019,48.95608,52.01338,51.38313,50.81553,53.48924,49.59417,55.65789,47.80131,57.49777,45.66393,58.77392,45.10803,59.1262,44.37211,58.93834,44.02766,58.35901,43.69881,57.79528,43.87107,57.05152,44.44257,56.7305,46.24326,55.65789,47.71518,54.13119,48.7486,52.32266,49.73508,50.57675,50.30665,48.55685,50.30665,46.38812,50.30665,44.23514,49.72724,42.19948,48.7486,40.46141,47.71518,38.63721,46.23542,37.10275,44.44257,36.03797,44.44257,36.03797,44.44257,36.03797,28.49449,40.89991,28.49449,40.89991,23.62472,40.89991,23.62472,51.86073,28.49449,51.86073,28.49449,40.89991,28.49449,40.89991,28.49449,40.89991,28.80767,38.51197,28.80767,38.51197,38.42189,31.14469,38.64118,30.96459,38.91517,30.86286,39.21267,30.86286,39.88597,30.86286,40.41052,31.38741,40.41052,32.05287,40.41052,39.70982,40.41052,39.97605,41.53008,40.43014,42.47745,41.16606,43.21337,42.09776,44.14506,43.28777,44.7088,44.76753,44.7088,46.38812,44.7088,48.00879,44.1529,49.50414,43.21337,50.67856,42.50096,51.61017,41.53008,52.33834,40.41052,52.80027,40.41052,53.07426,40.41052,60.72336,40.41052,60.99743,40.32439,61.24015,40.1678,61.45936,39.76073,61.97607,39.01698,62.07788,38.50019,61.67073,28.82334,54.25651,22.46606,54.25651,22.43471,54.25651,21.77708,54.25651,21.23686,53.72412,21.23686,53.06642,21.23686,39.73333,21.23686,39.70982,21.23686,39.04435,21.76924,38.51197,22.43471,38.51197,28.80767,38.51197,28.80767,38.51197,28.80767,38.51197,40.40269,41.5497,40.40269,41.5497,40.40269,51.21878,41.06823,50.85858,41.62405,50.37322,42.08598,49.79381,42.8219,48.86219,43.26039,47.6721,43.26039,46.38812,43.26039,45.11197,42.81414,43.92196,42.08598,42.98243,41.62405,42.39526,41.06039,41.90982,40.40269,41.5497,40.40269,41.5497,40.40269,41.5497],segments:[1,2,2,2,2,2,2,2,2,2,2,1,2,4,4,4,4,4,4,4,4,4,4,4,4,2,2,1,2,2,2,2,2,2,2,1,2,2,4,4,2,2,4,4,4,4,2,2,4,4,2,2,2,4,2,2,4,2,2,2,1,2,2,4,4,4,4,2,2]}]}),ht.Default.setImage("editor.video",{width:64,height:64,fitSize:!0,comps:[{type:"shape",background:"#000000",points:[56.21111,19.11398,40.59837,2.34525,40.23096,1.94622,39.70418,1.92216,39.15478,1.92216,8.11505,1.92216,7.04265,1.92216,6.07649,2.35795,6.07649,3.40366,6.07649,60.1542,6.07649,61.1999,7.04299,62.07784,8.11505,62.07784,13.93496,62.07784,15.00736,62.07784,15.87481,61.28546,15.87481,60.23975,15.87481,59.19405,15.00702,58.40166,13.93496,58.40166,9.84618,58.40166,9.84618,5.59867,35.20824,5.59867,35.20824,21.86677,35.20824,22.91248,36.27174,23.64538,37.3438,23.64538,52.6875,23.64538,52.6875,35.56255,52.6875,36.60826,53.67148,37.45412,54.74388,37.45412,55.81629,37.45412,56.80027,36.60793,56.80027,35.56255,56.80027,20.28301,56.80027,19.81747,56.52917,19.46155,56.21111,19.11398,56.21111,19.11398,39.32101,6.67546,51.68947,19.9692,39.32101,19.9692,39.32101,6.67546,39.32101,6.67546],segments:[1,2,4,2,4,2,4,2,4,4,2,2,2,2,4,2,2,4,4,2,4,2,1,2,2,2,2]},{type:"shape",background:"#231815",
points:[34.79567,39.50193,35.8771,39.50193,36.86394,39.06777,37.56645,38.36518,38.28485,37.63888,38.7269,36.65212,38.7269,35.57851,38.7269,34.497,38.28485,33.51024,37.56645,32.80765,36.86394,32.08933,35.86927,31.6472,34.79567,31.6472,33.70626,31.6472,32.7274,32.08933,32.0169,32.80765,31.30641,33.51024,30.86435,34.497,30.86435,35.57851,30.86435,36.65212,31.30641,37.63888,32.0169,38.36518,32.7274,39.05987,33.71416,39.50193,34.79567,39.50193,34.79567,39.50193,34.79567,39.50193,33.03527,33.81021,33.03527,33.81021,33.47733,33.36816,34.10098,33.08399,34.79567,33.08399,35.48246,33.08399,36.0982,33.36816,36.54816,33.81021,36.99022,34.26807,37.27438,34.88382,37.27438,35.57061,37.27438,36.2574,36.99022,36.87315,36.54816,37.33101,36.0982,37.76524,35.48246,38.0494,34.79567,38.0494,34.10098,38.0494,33.47733,37.76524,33.03527,37.33101,32.59314,36.87315,32.31687,36.2574,32.31687,35.57061,32.31687,34.88382,32.59314,34.27598,33.03527,33.81021,33.03527,33.81021,33.03527,33.81021,38.719,42.35963,38.719,42.35963,39.05848,43.38583,39.77688,44.19107,40.6768,44.64103,42.60298,45.61989,44.97913,44.84625,45.95008,42.92007,46.40794,42.02015,46.53422,40.94655,46.17901,39.92027,45.86323,38.89408,45.14484,38.08884,44.23702,37.63888,43.33711,37.18892,42.2714,37.06264,41.24513,37.40995,40.21894,37.74943,39.39789,38.46775,38.95583,39.35984,38.49007,40.25185,38.3796,41.32546,38.719,42.35963,38.719,42.35963,38.719,42.35963,40.24257,40.02292,40.24257,40.02292,40.53471,39.44669,41.04781,38.99665,41.68726,38.77563,42.33454,38.5704,43.02923,38.64144,43.58184,38.93351,44.15808,39.22558,44.60803,39.72295,44.82124,40.38604,45.03436,41.03339,44.96332,41.70438,44.67907,42.28851,44.06341,43.50428,42.55557,43.98577,41.33198,43.3543,40.77937,43.07005,40.30578,42.56486,40.10048,41.9175,39.87945,41.25442,39.9663,40.58343,40.24257,40.02292,40.24257,40.02292,40.24257,40.02292,40.13209,46.26716,40.13209,46.26716,39.16114,46.10935,38.09543,46.33828,37.21915,46.96976,36.34286,47.61711,35.80606,48.54073,35.65607,49.5354,35.65607,49.5354,35.50608,50.53006,35.71929,51.57996,36.35076,52.46415,36.98231,53.33245,37.89803,53.86926,38.89269,54.02714,38.9243,54.02714,41.04781,54.38235,43.08447,52.8904,43.42395,50.76689,43.42395,50.75899,43.56604,49.76433,43.34501,48.71435,42.71346,47.84604,42.06618,46.96976,41.14256,46.42505,40.13209,46.26716,40.13209,46.26716,40.13209,46.26716,39.14533,52.60623,39.14533,52.60623,39.12953,52.59833,38.49797,52.49568,37.91384,52.1641,37.51912,51.61157,37.1244,51.05896,36.97441,50.38798,37.07706,49.75642,37.17181,49.13278,37.51912,48.54073,38.07172,48.13021,38.62433,47.73549,39.30322,47.60131,39.93469,47.69606,40.55044,47.79081,41.15046,48.13021,41.5451,48.69072,41.94772,49.24333,42.08981,49.91431,41.98724,50.53796,41.77403,51.87993,40.4794,52.81936,39.14533,52.60623,39.14533,52.60623,39.14533,52.60623,49.24984,57.84791,49.24984,57.84791,41.37939,57.84791,46.82629,55.31388,50.46553,49.76433,50.46553,43.63056,50.46553,39.30453,48.70514,35.38909,45.86323,32.54719,43.03714,29.72109,39.12162,27.9607,34.79567,27.9607,26.1594,27.9607,19.12572,34.99437,19.12572,43.63056,19.12572,47.94079,20.88612,51.87993,23.71222,54.69813,26.54622,57.54003,30.46963,59.30043,34.79567,59.30043,35.20611,59.30043,35.29296,59.30043,49.24984,59.30043,49.64456,59.30043,49.96816,58.96893,49.96816,58.57421,49.96816,58.17158,49.64456,57.84791,49.24984,57.84791,49.24984,57.84791,49.24984,57.84791,34.79567,56.88485,34.79567,56.88485,31.13271,56.88485,27.81723,55.39282,25.42528,53.00087,23.01761,50.5853,21.54138,47.28553,21.54138,43.62266,21.54138,36.34425,27.51725,30.36837,34.79567,30.36837,38.45064,30.36837,41.77403,31.8525,44.15808,34.25227,46.56583,36.64422,48.04206,39.96769,48.04206,43.62266,48.04206,47.28553,46.55793,50.6011,44.16598,53.00087,41.68726,55.48757,38.30856,56.88485,34.79567,56.88485,34.79567,56.88485,34.79567,56.88485,28.91446,44.64103,28.91446,44.64103,29.80655,44.18317,30.54067,43.38583,30.86435,42.35173,31.19593,41.32546,31.08538,40.25976,30.63542,39.35984,29.67237,37.44156,27.25672,36.66002,25.35424,37.63888,23.42015,38.62564,22.64651,41.00178,23.62545,42.92007,24.07541,43.81998,24.88057,44.53838,25.90684,44.86206,26.94884,45.20146,28.02245,45.09889,28.91446,44.64103,28.91446,44.64103,28.91446,44.64103,26.3647,43.51211,26.3647,43.51211,25.71735,43.29108,25.20425,42.82532,24.91218,42.28069,24.29643,41.0492,24.79373,39.54136,26.00942,38.92561,27.22519,38.30986,28.73294,38.79143,29.34869,40.02292,29.63286,40.59134,29.7118,41.25442,29.50658,41.90178,29.28555,42.54905,28.81979,43.06215,28.27509,43.34639,27.69877,43.63056,27.01198,43.71741,26.3647,43.51211,26.3647,43.51211,26.3647,43.51211,29.44344,46.26716,29.44344,46.26716,27.31195,46.59874,25.85153,48.61178,26.17521,50.72738,26.17521,50.75899,26.33309,51.75365,26.8778,52.69308,27.73828,53.32455,28.59876,53.9561,29.66447,54.17713,30.62752,54.02714,30.66703,54.01924,32.80634,53.67194,34.25886,51.66681,33.92728,49.52749,33.60361,47.39609,31.58275,45.94356,29.44344,46.26716,29.44344,46.26716,29.44344,46.26716,32.50637,49.75642,32.50637,49.75642,32.7274,51.1063,31.80378,52.39303,30.44593,52.60623,30.4223,52.61413,29.79865,52.7009,29.13557,52.55091,28.59086,52.14837,28.04616,51.75365,27.69877,51.15371,27.5962,50.53006,27.5962,50.50635,27.3909,49.17229,28.33032,47.90128,29.66447,47.69606,31.00644,47.48293,32.29317,48.40655,32.50637,49.75642,32.50637,49.75642,32.50637,49.75642,32.50637,49.75642,37.44808,43.63056,37.44808,43.63056,37.44808,42.89644,37.1481,42.22537,36.67444,41.75171,36.18497,41.27022,35.52189,40.96235,34.79567,40.96235,34.06147,40.96235,33.39048,41.27022,32.90891,41.75171,32.43525,42.23328,32.14318,42.89644,32.14318,43.63056,32.14318,44.36469,32.43525,45.02785,32.90891,45.50933,33.39838,45.983,34.06147,46.28297,34.79567,46.28297,36.25609,46.28297,37.44808,45.08308,37.44808,43.63056,37.44808,43.63056,37.44808,43.63056,34.79567,44.83835,34.79567,44.83835,34.45619,44.83835,34.14831,44.71207,33.93519,44.49104,33.71416,44.28574,33.5878,43.96997,33.5878,43.63846,33.5878,43.31479,33.71416,42.99901,33.93519,42.77798,34.14831,42.56486,34.45619,42.42277,34.79567,42.42277,35.11927,42.42277,35.42714,42.55695,35.64817,42.77798,35.86927,42.99901,36.01136,43.31479,36.01136,43.63846,36.01136,44.30155,35.46665,44.83835,34.79567,44.83835,34.79567,44.83835,34.79567,44.83835],segments:[1,4,4,4,4,4,4,4,4,2,2,1,2,4,4,4,4,4,4,4,4,2,2,1,2,4,4,4,4,4,4,4,2,2,1,2,4,4,4,4,4,4,4,2,2,1,2,4,4,2,4,4,2,4,2,4,4,2,2,1,2,2,4,4,4,4,4,4,4,2,2,1,2,2,4,4,4,4,4,4,2,2,2,4,4,2,2,1,2,4,4,4,4,4,4,4,2,2,1,2,4,4,4,4,4,4,2,2,1,2,4,4,4,4,4,4,2,2,1,2,4,2,4,4,2,4,4,2,2,1,2,4,2,4,4,2,4,4,2,2,2,1,2,4,4,4,4,4,4,4,2,2,1,2,4,4,4,4,4,4,4,2,2]}]}),ht.Default.setImage("editor.flipx",{width:16,height:16,comps:[{type:"shape",points:[8,1,8,14],segments:[1,2],borderWidth:1,borderColor:kG.config.color_dark},{type:"shape",points:[6,3,6,13,2,13],background:kG.config.color_dark},{type:"shape",points:[10,3,10,13,14,13],background:kG.config.color_select}]}),ht.Default.setImage("editor.flipy",{width:16,height:16,comps:[{type:"shape",points:[2,8,15,8],segments:[1,2],borderWidth:1,borderColor:kG.config.color_dark},{type:"shape",points:[3,6,13,6,3,2],background:kG.config.color_dark},{type:"shape",points:[3,10,13,10,3,14],background:kG.config.color_select}]}),ht.Default.setImage("editor.resetsize",{width:16,height:16,comps:[{type:"shape",borderWidth:1,borderColor:"white",points:[8,1,8,6,6,3,8,1,10,3,8,10,8,15,6,13,8,15,10,13,1,8,6,8,3,6,1,8,3,10,10,8,15,8,13,6,15,8,13,10],segments:[1,2,1,2,2,1,2,1,2,2,1,2,1,2,2,1,2,1,2,2]}]}),ht.Default.setImage("editor.func",{width:16,height:16,comps:[{type:"border",rect:[0,0,16,16],width:1,color:"#E4E4E4"},{type:"text",rect:[0,0,16,16],text:"F",align:"center",color:"black"}]}),ht.Default.setImage("editor.comp",{fitSize:!0,comps:[{type:{func:function(w){return w.compType},isSafeFunc:!0}}]}),ht.Default.setImage("editor.oops",{width:128,height:128,comps:[{type:"oval",background:"rgb(255,255,255)",borderWidth:2,borderColor:"rgb(61,61,61)",rect:[21.53429,22.96531,88.8981,74.69064]},{type:"shape",background:"rgb(237,237,237)",borderColor:"#979797",points:[34.08079,87.52544,34.08079,87.52544,59.57908,97.75645,77.79215,90.58303,96.00522,83.40961,106.8249,68.87436,109.71641,51.69689,109.71641,51.69689,117.89865,74.48774,101.34821,87.52544,84.79777,100.56314,59.50721,102.27801,46.42474,94.29524],segments:[1,4,4,4,4]},{type:"arc",background:"rgb(196,185,185)",borderColor:"rgb(61,61,61)",arcTo:0,arcOval:!0,rotation:3.14159,rect:[32.3979,36.49467,28.49791,18.12387]},{type:"arc",background:"rgb(196,185,185)",borderColor:"rgb(61,61,61)",arcTo:0,arcOval:!0,rotation:3.14159,rect:[68.95508,36.49467,28.49791,18.12387]},{type:"shape",background:"rgb(149,224,245)",borderColor:"#979797",points:[39.9814,51.13901,39.9814,51.13901,32.00842,57.90113,30.56723,66.4088,29.12604,74.91647,34.21664,85.16969,34.21664,85.16969,39.0516,89.44677,39.0516,89.44677,36.05169,79.68945,37.3999,70.48443,38.74811,61.27941,44.44444,52.62669,44.44444,52.62669,39.9814,51.13901,39.9814,51.13901],segments:[1,4,4,2,4,4,2,2]},{type:"shape",background:"rgb(149,224,245)",borderColor:"#979797",scaleX:-1,points:[97.67259,49.56003,97.67259,49.56003,89.6996,57.90113,88.25841,66.4088,86.81722,74.91647,91.8398,85.99598,91.8398,85.99598,96.74279,89.44677,96.74279,89.44677,93.74288,79.68945,95.09109,70.48443,96.4393,61.27941,102.44264,50.50641,102.44264,50.50641,97.67259,49.56003],segments:[1,4,4,2,4,4,2]},{type:"shape",borderWidth:2,borderColor:"rgb(61,61,61)",borderCap:"round",points:[59.61377,32.055,59.61377,32.055,61.61221,36.91182,59.19747,38.71578,56.78274,40.51974,34.08079,42.18493,34.08079,42.18493],segments:[1,4,4]},{type:"shape",borderWidth:2,borderColor:"rgb(61,61,61)",borderCap:"round",scaleX:-1,points:[94.48806,32.055,94.48806,32.055,96.4865,36.91182,94.07177,38.71578,91.65703,40.51974,68.95508,42.18493,68.95508,42.18493],segments:[1,4,4]},{type:"shape",borderWidth:2,borderColor:"rgb(61,61,61)",borderCap:"round",points:[67.02409,33.58143,67.02409,33.58143,64.9426,37.74441,67.02409,39.68714],segments:[1,4]},{type:"arc",background:"rgb(255,255,255)",borderWidth:2,borderColor:"rgb(61,61,61)",arcTo:0,arcOval:!0,rotation:3.14159,rect:[68.95508,40.07324,28.49791,11.89121]},{type:"arc",background:"rgb(255,255,255)",borderWidth:2,borderColor:"rgb(61,61,61)",arcTo:0,arcOval:!0,rotation:3.14159,rect:[32.3979,40.07323,28.49791,11.89121]},{type:"shape",borderWidth:2,borderColor:"rgb(61,61,61)",borderCap:"round",points:[60.89581,46.6003,56.70566,57.66949,39.6779,55.58118,39.6779,55.58118],segments:[1,4]},{type:"shape",borderWidth:2,borderColor:"rgb(61,61,61)",borderCap:"round",scaleX:-1,points:[90.173,46.6003,85.98284,57.66949,68.95508,55.58118,68.95508,55.58118],segments:[1,4]},{type:"shape",background:"rgb(61,61,61)",borderColor:"#979797",points:[40.88134,45.66533,40.88134,50.44931,49.68823,51.31913,49.03586,45.66533,40.99007,45.5566]},{type:"shape",background:"rgb(61,61,61)",borderColor:"#979797",points:[78.31735,45.66533,78.31735,50.44931,87.12423,51.31913,86.47187,45.66533,78.42607,45.5566]},{type:"shape",borderWidth:2,borderColor:"rgb(61,61,61)",borderCap:"round",points:[36.81151,80.08117,46.71402,84.60188,54.03326,76.42155,61.35251,85.46297,73.83828,76.20628,86.96987,83.95607,93.85858,76.85209,99.24038,80.08117]},{type:"shape",background:"rgb(237,237,237)",borderColor:"rgb(61,61,61)",borderCap:"round",points:[95.58345,31.98512,95.58345,31.98512,104.33563,25.53184,105.97087,18.7394,107.6061,11.94695,113.65647,33.63444,105.97087,42.39888],segments:[1,4,4]},{type:"shape",background:"rgb(237,237,237)",borderColor:"rgb(61,61,61)",borderCap:"round",rotation:.2618,points:[44.41276,23.77714,38.68944,23.77714,33.30496,20.23699,28.88983,14.5401,24.47469,8.84321,22.55729,35.68983,32.04166,40.72938],segments:[1,4,4]},{type:"oval",borderWidth:2,borderColor:"rgb(61,61,61)",rect:[21.53429,22.96531,88.8981,74.69064]},{type:"shape",borderWidth:2,borderColor:"rgb(61,61,61)",borderCap:"round",points:[93.19422,30.5138,93.19422,30.5138,96.32695,28.82985,99.04364,25.51534,100.63358,23.57553,102.08422,21.24706,102.68792,18.7394,104.32316,11.94695,112.13179,31.92062,104.44618,40.68506],segments:[1,4,4,4]},{type:"shape",borderWidth:2,borderColor:"rgb(61,61,61)",borderCap:"round",rotation:.2618,points:[40.62881,26.14647,34.90549,26.14647,32.31798,22.75803,27.90285,17.06114,23.48771,11.36426,18.41848,35.24736,27.90285,40.28692],segments:[1,4,4]},{type:"oval",background:"rgb(255,255,255)",borderColor:"#979797",anchorX:.41176,anchorY:.88889,rect:[91.52207,49.98659,1.67215,3.35736]},{type:"oval",background:"rgb(255,255,255)",borderColor:"#979797",anchorX:.41176,anchorY:.88889,rect:[39.44815,49.46033,2.86639,3.35736]}]}),ht.Default.setImage("editor.block",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"shape",background:"rgb(255,227,199)",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",points:[15,14.5,1,14.5,1,1.50001,7,1.50001,8,3.50001,15,3.50001,15,14.5]},{type:"rect",background:"rgb(255,255,255)",borderWidth:1,borderColor:"rgb(138,138,138)",rect:[5.5,7.22625,6,5]},{type:"circle",background:"rgb(255,255,255)",borderWidth:1,borderColor:"rgb(138,138,138)",rect:[2.5,4.72625,6,5]}]}),ht.Default.setImage("editor.group",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"shape",background:"rgb(255,227,199)",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",points:[15.5,15.5,.5,15.5,.5,.5,6.92857,.5,8.00001,2.80769,15.5,2.80769,15.5,15.5]},{type:"shape",background:"rgb(255,255,255)",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",points:[2.82964,11.54111,13.17036,11.54111,13.17036,13.12467,13.17036,5.20688,2.82964,5.20688,2.82964,13.12467,13.17036,13.12467,7.26137,13.12467,5.78413,15.5,10.21588,15.5,8.84426,13.12467,13.17036,13.12467,13.17036,11.54111]}]}),ht.Default.setImage("editor.subgraph",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"shape",background:"rgb(255,227,199)",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",points:[15.5,15.5,.5,15.5,.5,.5,6.92857,.5,8.00001,2.80769,15.5,2.80769,15.5,15.5]},{type:"shape",background:"rgb(255,255,255)",borderWidth:1,borderColor:"rgb(138,138,138)",closePath:!0,points:[4.90316,8.05737,4.90316,8.05737,4.30121,6.50546,5.25104,5.82166,6.20086,5.13787,7.09165,5.82166,7.09165,5.82166,7.09165,5.82166,7.76857,4.36921,9.6391,4.91013,11.50964,5.45106,11.09684,8.05737,11.09684,8.05737,11.09684,8.05737,12.482,8.53031,12.482,9.79106,12.482,10.86629,11.67411,11.63079,11.09684,11.63079,4.90316,11.63079,4.31315,11.63079,3.518,10.84732,3.518,9.79106,3.518,8.56402,4.90316,8.05737,4.90316,8.05737],segments:[1,4,4,4,4,4,4,2,4,4]},{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderJoin:"miter",points:[13,13.5,8.02409,13.5,8,9,8.02409,13.5,3,13.5]}]}),ht.Default.setImage("editor.restore",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"triangle",background:"rgb(138,138,138)",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rotation:1.5708,rect:[7.5,1.71892,3,2]},{type:"arc",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",arcFrom:0,arcTo:4.7124,arcClose:!1,shadowColor:"#1ABC9C",rect:[2,2.78108,12,12]}]}),ht.Default.setImage("editor.add",{background:"rgb(150,150,150)",width:16,height:16,comps:[{type:"shape",borderWidth:1,borderColor:"rgb(255,255,255)",rotation:3.14159,points:[9.47991,2.5,13.48953,7.4,9.47991,7.4,9.47991,2.5,2.48953,2.5,2.48953,13.5,13.48953,13.5,13.48953,7.4]}]}),ht.Default.setImage("editor.delete",{background:"rgb(89,89,89)",width:16,height:16,comps:[{type:"shape",borderWidth:1,borderColor:"rgb(255,255,255)",borderCap:"round",shadowColor:"#1ABC9C",points:[5.5,5.57173,5.5,12.45709]},{type:"shape",borderWidth:1,borderColor:"rgb(255,255,255)",borderCap:"round",shadowColor:"#1ABC9C",points:[8.05685,5.57173,8.05685,12.45709]},{type:"shape",borderWidth:1,borderColor:"rgb(255,255,255)",borderCap:"round",shadowColor:"#1ABC9C",points:[10.5,5.57173,10.5,12.45709]},{type:"shape",borderWidth:1,borderColor:"rgb(255,255,255)",borderCap:"round",shadowColor:"#1ABC9C",points:[1,3.18902,15,3.16996,5.32652,3.16021,6.32652,1.16021,9.32652,1.16021,10.32652,3.16021]},{type:"rect",borderWidth:1,borderColor:"rgb(255,255,255)",shadowColor:"#1ABC9C",rect:[3.33333,3.18902,9.33334,11.65078]}]}),ht.Default.setImage("editor.import",{background:"rgb(179,179,179)",width:16,height:16,comps:[{type:"triangle",borderColor:"rgb(255,255,255)",borderWidth:1,rotation:1.5708,rect:[7.5,1.71892,3,2]},{type:"arc",borderWidth:1,borderColor:"rgb(255,255,255)",borderCap:"round",arcFrom:0,arcTo:4.7124,arcClose:!1,rect:[2,2.78108,12,12]}]}),ht.Default.setImage("editor.top",{background:"rgb(145,145,145)",width:16,height:16,comps:[{type:"rightTriangle",borderWidth:1,borderColor:"rgb(255,255,255)",shadowColor:"#1ABC9C",rotation:2.35619,rect:[3.86035,6.44002,8.20153,8.2581]},{type:"shape",borderWidth:1,borderColor:"rgb(255,255,255)",borderCap:"round",shadowColor:"#1ABC9C",rotation:3.14159,points:[2.14176,4.58061,13.85824,4.51881]}]}),ht.Default.setImage("editor.up",{background:"rgb(145,145,145)",width:16,height:16,comps:[{type:"rightTriangle",borderWidth:1,borderColor:"rgb(255,255,255)",shadowColor:"#1ABC9C",rotation:2.35619,rect:[3.89924,6.05159,8.20153,8.2581]}]}),ht.Default.setImage("editor.down",{background:"rgb(145,145,145)",width:16,height:16,comps:[{type:"rightTriangle",borderWidth:1,borderColor:"rgb(255,255,255)",shadowColor:"#1ABC9C",rotation:5.49779,rect:[3.89924,.69031,8.20153,8.2581]}]}),ht.Default.setImage("editor.bottom",{background:"rgb(145,145,145)",width:16,height:16,comps:[{type:"rightTriangle",borderWidth:1,borderColor:"rgb(255,255,255)",shadowColor:"#1ABC9C",rotation:5.49779,rect:[3.93812,.69031,8.20153,8.2581]},{type:"shape",borderWidth:1,borderColor:"rgb(255,255,255)",borderCap:"round",shadowColor:"#1ABC9C",rotation:3.14159,points:[2.14176,10.85024,13.85824,10.78844]}]}),ht.Default.setImage("editor.menu",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",points:[.93729,4,14.93729,4]},{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",points:[1.06271,8,15.06271,8]},{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",points:[1.06271,12,15.06271,12]}]}),ht.Default.setImage("editor.undo",{background:"rgb(191,191,191)",width:16,height:16,comps:[{type:"shape",background:"rgb(255,255,255)",points:[9.9945,5.006,6.0345,5.006,6.0345,3.527,6.0345,3.336,5.9255,3.162,5.7545,3.078,5.5825,2.994,5.3785,3.015,5.2275,3.132,2.4795,5.264,2.3575,5.359,2.2865,5.505,2.2865,5.659,2.2865,5.813,2.3575,5.959,2.4795,6.054,5.2275,8.186,5.3175,8.256,5.4255,8.292,5.5345,8.292,5.6095,8.292,5.6845,8.275,5.7545,8.241,5.9255,8.157,6.0345,7.983,6.0345,7.792,6.0345,6.006,9.9945,6.006,11.5445,6.006,12.7135,7.296,12.7135,9.006,12.7135,10.689,11.4815,12.006,9.9085,12.006,5.0345,12.006,4.7585,12.006,4.5345,12.23,4.5345,12.506,4.5345,12.782,4.7585,13.006,5.0345,13.006,9.9085,13.006,12.0425,13.006,13.7135,11.249,13.7135,9.006,13.7135,6.763,12.0795,5.006,9.9945,5.006,9.9945,5.006],segments:[1,2,2,4,4,2,4,4,2,4,4,4,2,2,4,4,2,4,4,2,4,4,2]}]}),ht.Default.setImage("editor.redo",{background:"rgb(191,191,191)",width:16,height:16,comps:[{type:"shape",background:"rgb(255,255,255)",shadowColor:"#1ABC9C",scaleX:-1,points:[9.9945,5.006,6.0345,5.006,6.0345,3.527,6.0345,3.336,5.9255,3.162,5.7545,3.078,5.5825,2.994,5.3785,3.015,5.2275,3.132,2.4795,5.264,2.3575,5.359,2.2865,5.505,2.2865,5.659,2.2865,5.813,2.3575,5.959,2.4795,6.054,5.2275,8.186,5.3175,8.256,5.4255,8.292,5.5345,8.292,5.6095,8.292,5.6845,8.275,5.7545,8.241,5.9255,8.157,6.0345,7.983,6.0345,7.792,6.0345,6.006,9.9945,6.006,11.5445,6.006,12.7135,7.296,12.7135,9.006,12.7135,10.689,11.4815,12.006,9.9085,12.006,5.0345,12.006,4.7585,12.006,4.5345,12.23,4.5345,12.506,4.5345,12.782,4.7585,13.006,5.0345,13.006,9.9085,13.006,12.0425,13.006,13.7135,11.249,13.7135,9.006,13.7135,6.763,12.0795,5.006,9.9945,5.006,9.9945,5.006],segments:[1,2,2,4,4,2,4,4,2,4,4,4,2,2,4,4,2,4,4,2,4,4,2]}]}),ht.Default.setImage("editor.edit",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"shape",borderWidth:1,borderColor:"rgb(51,153,255)",shadowColor:"#1ABC9C",rotation:5.49779,closePath:!0,points:[6,-.83884,.5,13.16116,6.04966,10.58206,11.5,13.16116,6,-.83884]}]}),ht.Default.setImage("editor.rulers",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",rotation:1.5708,points:[1.50517,1.5,1.5,4.49799,2.47337,4.49798,1.5,4.49799,1.50003,14.5,11.23413,14.48019,11.23413,13.48171,11.23413,14.47896,14.5,14.47897,4.00002,14.47899,4.00001,12.00001,1.50521,12.00002]},{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",points:[14,6,14,14,6,14]}]}),ht.Default.setImage("editor.grid",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",points:[4.49468,1.49999,4.5,14.49999,4.49468,11.53541,1.5,11.51432,14.5,11.51432,11.52105,11.53541,11.52105,14.49999,11.52105,1.49999,11.5,4.50429,14.5,4.50429,1.5,4.50429]}]}),ht.Default.setImage("editor.save",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",points:[3.66183,14.5,14.5,14.5,14.5,4.83454,10.71984,1.5,3.66183,1.5,3.66183,6.18654,10.71984,6.18654,10.71984,1.5,1.5,1.5,1.5,14.5,3.66183,14.5,3.66183,9.03168,12.17213,9.03168,12.17213,14.5]}]}),ht.Default.setImage("editor.preview",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",points:[1.9869,6.489,2,2,14,8,1.9869,14,2,9.555]}]}),ht.Default.setImage("editor.reload",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"triangle",background:"rgb(138,138,138)",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rotation:1.5708,rect:[7.5,1.71892,3,2]},{type:"arc",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",arcFrom:0,arcTo:4.7124,arcClose:!1,shadowColor:"#1ABC9C",rect:[2,2.78108,12,12]}]}),ht.Default.setImage("editor.zoomout",{width:16,height:16,comps:[{type:"shape",borderWidth:1,borderColor:"white",points:[2,8,14,8]}]}),ht.Default.setImage("editor.zoomin",{width:16,height:16,comps:[{type:"shape",borderWidth:1,borderColor:"white",points:[2,8,14,8,8,2,8,14],segments:[1,2,1,2]}]}),ht.Default.setImage("editor.zoomtofit",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",points:[8.00001,11.91764,8.00001,15]},{type:"triangle",background:"rgb(138,138,138)",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rotation:-1.5708,rect:[9.75,7.24608,2,1.5]},{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",rotation:-1.5708,points:[13.516,6.484,13.516,9.51599]},{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",rotation:-3.14159,points:[8.00001,.99999,8.00001,4.08236]},{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",rotation:1.5708,points:[2.516,6.4801,2.516,9.51209]},{type:"triangle",background:"rgb(138,138,138)",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rotation:1.5708,rect:[4.25,7.24608,2,1.5]},{type:"triangle",background:"rgb(138,138,138)",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rotation:3.14159,rect:[7.00001,4.5,2,1.5]},{type:"triangle",background:"rgb(138,138,138)",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rotation:6.28319,rect:[7,10,2,1.5]}]}),ht.Default.setImage("editor.toggleleft",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"rect",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rotation:1.5708,rect:[2.50002,1.00002,10.99995,13.99996]},{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",points:[3.49001,5.50001,3.51001,10.49999]}]}),ht.Default.setImage("editor.toggleboth",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"rect",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rotation:1.5708,rect:[2.5,1,11,14]}]}),ht.Default.setImage("editor.toggleright",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"rect",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rotation:1.5708,rect:[2.50002,1.00002,10.99995,13.99996]},{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",points:[12.49999,5.50001,12.51999,10.49999]}]}),ht.Default.setImage("editor.layout.helper",ht.Default.parse(JSON.stringify({modified:"Mon Oct 29 2018 09:55:40 GMT+0800 (\u4e2d\u56fd\u6807\u51c6\u65f6\u95f4)",dataBindings:[{attr:"selectColor",valueType:"Color",defaultValue:"#60ACFC"},{attr:"layout.h",valueType:"String"},{attr:"layout.v",valueType:"String"}],width:100,height:100,interactive:!0,disableSelectedBorder:!0,pixelPerfect:!1,comps:[{type:"rect",borderColor:"#979797",displayName:"\u5de6\u4fa7\u4ea4\u4e92",rect:[5.51795,27.5,20.9641,44.5],onDown:"__ht__function(event, data, view, point, width, height) {\nif (ht.Default.isShiftDown()) {\n    data.a('layout.h', 'leftright');\n}\nelse {\n    data.a('layout.h', 'left');\n}\n}"},{type:"rect",borderColor:"#979797",displayName:"\u53f3\u4fa7\u4ea4\u4e92",rect:[74.0359,27.5,20.9641,45],onDown:"__ht__function(event, data, view, point, width, height) {\nif (ht.Default.isShiftDown()) {\n    data.a('layout.h', 'leftright');\n}\nelse {\n    data.a('layout.h', 'right');\n}\n}"},{type:"rect",borderColor:"#979797",displayName:"\u4e0a\u4fa7\u4ea4\u4e92",rect:[27.5,6,45,20],onDown:"__ht__function(event, data, view, point, width, height) {\nif (ht.Default.isShiftDown()) {\n    data.a('layout.v', 'topbottom');\n}\nelse {\n    data.a('layout.v', 'top');\n}\n}"},{type:"rect",borderColor:"#979797",displayName:"\u4e0b\u4fa7\u4ea4\u4e92",rect:[27.5,74,45,20],onDown:"__ht__function(event, data, view, point, width, height) {\nif (ht.Default.isShiftDown()) {\n    data.a('layout.v', 'topbottom');\n}\nelse {\n    data.a('layout.v', 'bottom');\n}\n}"},{type:"rect",borderColor:"#979797",displayName:"\u6a2a\u5411\u4e2d\u5fc3\u4ea4\u4e92",rect:[28.22051,44,16,12],onDown:"__ht__function(event, data, view, point, width, height) {\ndata.a('layout.h', 'center');\n}"},{type:"rect",borderColor:"#979797",displayName:"\u6a2a\u5411\u4e2d\u5fc3\u4ea4\u4e92",rect:[55.77949,44,16,12],onDown:"__ht__function(event, data, view, point, width, height) {\ndata.a('layout.h', 'center');\n}"},{type:"rect",borderColor:"#979797",displayName:"\u7eb5\u5411\u4e2d\u5fc3\u4ea4\u4e92",rect:[44.22051,28,11.55897,16],onDown:"__ht__function(event, data, view, point, width, height) {\ndata.a('layout.v', 'center');\n}"},{type:"rect",borderColor:"#979797",displayName:"\u7eb5\u5411\u4e2d\u5fc3\u4ea4\u4e92",rect:[44.22051,56,11.55897,16],onDown:"__ht__function(event, data, view, point, width, height) {\ndata.a('layout.v', 'center');\n}"},{type:"rect",borderWidth:1,borderColor:"#d4d4d4",rect:[5,5,90,90]},{type:"rect",borderWidth:1,borderColor:"#d4d4d4",borderPattern:[6,6],rect:[27.5,27.5,45,45]},{type:"rect",background:{func:"__ht__function(data, view) {\nvar layoutH = data.a('layout.h');\nif (layoutH === 'left' || layoutH === 'leftright') {\n    return data.a('selectColor');\n}\nreturn '#d4d4d4';\n}",value:"#D4D4D4"},borderColor:"#979797",rect:[8,48,16,4]},{type:"rect",background:{func:"__ht__function(data, view) {\nvar layoutH = data.a('layout.h');\nif (layoutH === 'right' || layoutH === 'leftright') {\n    return data.a('selectColor');\n}\nreturn '#d4d4d4';\n}",value:"#D8D8D8"},borderColor:"#979797",rect:[76,48,16,4]},{type:"rect",background:{func:"__ht__function(data, view) {\nvar layoutH = data.a('layout.h');\nif (layoutH === 'center') {\n    return data.a('selectColor');\n}\nreturn '#d4d4d4';\n}",value:"#D8D8D8"},borderColor:"#979797",rect:[34,48,32,4],onDown:"__ht__function(event, data, view, point, width, height) {\ndata.a('layout.h', 'center');\n}"},{type:"rect",background:{func:"__ht__function(data, view) {\nvar layoutV = data.a('layout.v');\nif (layoutV === 'bottom' || layoutV === 'topbottom') {\n    return data.a('selectColor');\n}\nreturn '#d4d4d4';\n}",value:"#D8D8D8"},borderColor:"#979797",rect:[48,76,4,16]},{type:"rect",background:{func:"__ht__function(data, view) {\nvar layoutV = data.a('layout.v');\nif (layoutV === 'top' || layoutV === 'topbottom') {\n    return data.a('selectColor');\n}\nreturn '#d4d4d4';\n}",value:"#D8D8D8"},borderColor:"#979797",rect:[48,8,4,16]},{type:"rect",background:{func:"__ht__function(data, view) {\nvar layoutV = data.a('layout.v');\nif (layoutV === 'center') {\n    return data.a('selectColor');\n}\nreturn '#d4d4d4';\n}",value:"#D8D8D8"},borderColor:"#979797",rect:[48,34,4,32],onDown:"__ht__function(event, data, view, point, width, height) {\ndata.a('layout.v', 'center');\n}"},{type:"rect",background:{func:"__ht__function(data, view) {\nif (data.a('layout.h') === 'center' || data.a('layout.v')  === 'center') {\n    return data.a('selectColor');\n}\nreturn '#d4d4d4';\n}",value:"#D8D8D8"},borderColor:"#979797",rect:[48,48,4,4]}]}))),ht.Default.setImage("editor.attachPoint",{width:10,height:10,boundExtend:1,comps:[{type:"shape",borderWidth:1,background:{func:"attr@selectColor",value:"rgb(51,153,255)"},borderColor:{func:"attr@selectColor",value:"rgb(51,153,255)"},closePath:!0,points:[5,0,0,5,5,10,10,5]}]}),ht.Default.setImage("editor.debug",{width:16,height:16,comps:[{type:"shape",borderWidth:1,borderColor:"rgb(255,255,255)",pixelPerfect:!0,points:[7.94786,14.04023,7.94786,14.04023,5.74115,14.04023,3.96501,12.19542,3.96501,9.90337,3.96501,5.76652,11.98452,5.76652,11.98452,9.90337,11.9307,12.19542,10.15457,14.04023,7.94786,14.04023,12.60426,13.98532,12.60426,13.11086,12.16217,12.33113,11.46956,11.86165,11.95932,6.90006,12.73466,6.45216,13.26319,5.60927,13.26319,4.65313,13.26319,4.65313,3.34528,13.98532,3.34528,13.13137,3.76687,12.36776,4.43165,11.8952,1.94907,9.37134,3.96309,9.37134,3.93694,6.8475,3.19558,6.38817,2.74126,5.57307,2.74126,4.65313,2.74126,4.65313,10.93997,4.92497,5.00957,4.92497,5.00957,3.27764,6.32743,1.95977,7.97477,1.95977,9.6221,1.95977,10.93997,3.27764,10.93997,4.92497,10.93997,4.92497,7.97477,13.98532,7.97477,7.94509,12.03691,9.37134,14.05093,9.37134],segments:[1,2,4,2,2,2,4,5,1,4,1,4,2,1,4,1,2,1,4,2,1,2,4,4,2,5,1,2,1,2]}]}),ht.Default.setImage("editor.display.rect",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"rect",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rect:[2.5,1.5,11,13]}]}),ht.Default.setImage("editor.display.oval",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"circle",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rect:[1,1,14,14]}]}),ht.Default.setImage("editor.display.roundrect",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"roundRect",borderWidth:1,borderColor:"rgb(138,138,138)",cornerRadius:2.5,shadowColor:"#1ABC9C",rect:[2.5,1,11,14]}]}),ht.Default.setImage("editor.display.triangle",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"shape",borderWidth:1,
borderColor:"rgb(138,138,138)",borderCap:"round",rotation:4.71239,points:[1.00872,1,14.99345,8,.99345,15,1.00872,1]}]}),ht.Default.setImage("editor.display.polygon",{width:16,height:16,comps:[{type:"polygon",rect:[1,1,14,14],borderColor:"white",borderWidth:1}]}),ht.Default.setImage("editor.display.star",{width:16,height:16,comps:[{type:"star",rect:[1,1,14,14],borderColor:"white",borderWidth:1}]}),ht.Default.setImage("editor.display.arc",{width:16,height:16,comps:[{type:"arc",rect:[1,1,14,14],arcFrom:0,arcTo:4.1888,borderColor:"white",borderWidth:1}]}),ht.Default.setImage("editor.display.shape",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"arc",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rotation:-2.35619,rect:[6.45666,.50222,10,8]},{type:"oval",background:"rgb(138,138,138)",borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rotation:-2.35619,rect:[4.92983,8.48004,2.48323,2.47136]},{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",rotation:-2.35619,points:[.71918,15.84031,-.26373,13.78,4.61411,6.85806,4.66212,13.2497,4.61411,6.85806,9.56535,13.77996,8.58245,15.84028]}]}),ht.Default.setImage("editor.display.node",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",points:[1.5,9.38462,14.5,9.38462,14.5,11.23077,14.5,2,1.5,2,1.5,11.23077,14.5,11.23077,7.07143,11.23077,5,15,11,15,8.92857,11.23077]}]}),ht.Default.setImage("editor.display.group",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",points:[13,12.5,13,10.54,3,10.54,13,10.54,13,5.5,3,5.5,3,12.5,13,12.5,7,12.5,5.85714,15.5,10.14287,15.5,9,12.5]},{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",points:[15.5,15.5,.5,15.5,.5,.5,6.92857,.5,8,2.19286,15.5,2.19286,15.5,15.5]}]}),ht.Default.setImage("editor.display.edge",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"circle",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rect:[.69044,.97071,4,4.00837]},{type:"circle",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rect:[11.27696,10.99163,4,4.00837]},{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",points:[4.35933,3.02819,7.84441,2.9749,7.84441,12.99581,11.64067,12.99581]}]}),ht.Default.setImage("editor.display.text",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",points:[1,15,8.06501,1,15,15,12.38059,9.8,4.10171,9.8]}]}),ht.Default.setImage("editor.display.subgraph",{gridThickColor:"rgb(191,191,191)",width:16,height:16,blendMode:"override",comps:[{type:"shape",borderWidth:1,borderColor:"rgb(207,207,207)",visible:!1,closePath:!0,points:[2.81788,9.09381,2.81788,9.09381,1.38027,6.92868,3.20223,5.43826,5.02418,3.94784,6.51488,5.43826,6.51488,5.43826,6.51488,5.43826,7.61273,3.06338,10.74281,3.94784,13.87289,4.8323,13.18212,9.09381,13.18212,9.09381,13.18212,9.09381,15.5,9.8671,15.5,11.92851,15.5,13.6866,14.14811,14.93662,13.18212,14.93662,2.81788,14.93662,1.83057,14.93662,.5,13.65558,.5,11.92851,.5,9.92221,2.81788,9.09381,2.81788,9.09381],segments:[1,4,4,4,4,4,4,2,4,4]},{type:"rect",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rect:[4.99379,5.52777,6,4.47223]},{type:"circle",background:"rgb(138,138,138)",borderColor:"rgb(138,138,138)",visible:!1,shadowColor:"#1ABC9C",rect:[4,6.43826,2,2]},{type:"arc",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",arcFrom:3.15905,arcTo:5.5676,arcClose:!1,visible:!1,shadowColor:"#1ABC9C",rect:[2.5,3.11794,5,5]},{type:"arc",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",arcFrom:3.57792,arcTo:6.6497,arcClose:!1,visible:!1,shadowColor:"#1ABC9C",rect:[5.63862,1.53868,9.36138,7.15852]},{type:"arc",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",arcFrom:1.5708,arcTo:3.87463,arcClose:!1,visible:!1,shadowColor:"#1ABC9C",rect:[-1,6.56338,8.99379,5.93662]},{type:"arc",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",arcFrom:5.00909,arcTo:1.5708,arcClose:!1,visible:!1,shadowColor:"#1ABC9C",rect:[8.00621,6.56338,8.99379,5.93662]},{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",visible:!1,points:[3.4969,12.5,12.5031,12.5]},{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",points:[9.72,12.5,8,10,6.34,12.5]},{type:"circle",background:"rgb(138,138,138)",borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",displayName:"\u5706\u5f62",rect:[0,0,2,2]},{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderJoin:"miter",points:[15,15.5,8.02409,15.5,8.02409,14,8.02409,15.5,1,15.5]},{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",closePath:!0,points:[2.81167,6.59481,2.81167,6.59481,1.80439,4.03022,3.39379,2.90023,4.98319,1.77025,6.47379,2.90023,6.47379,2.90023,6.47379,2.90023,7.60652,.5,10.7366,1.3939,13.86668,2.28781,13.17591,6.59481,13.17591,6.59481,13.17591,6.59481,15.49379,7.37636,15.49379,9.45978,15.49379,11.23663,14.1419,12.5,13.17591,12.5,2.81167,12.5,1.82436,12.5,.49379,11.20528,.49379,9.45978,.49379,7.43206,2.81167,6.59481,2.81167,6.59481],segments:[1,4,4,4,4,4,4,2,4,4]}]}),ht.Default.setImage("editor.symbol.rect",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"rect",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rect:[2.5,1.5,11,13]}]}),ht.Default.setImage("editor.symbol.oval",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"circle",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rect:[1,1,14,14]}]}),ht.Default.setImage("editor.symbol.roundrect",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"roundRect",borderWidth:1,borderColor:"rgb(138,138,138)",cornerRadius:2.5,shadowColor:"#1ABC9C",rect:[2.5,1,11,14]}]}),ht.Default.setImage("editor.symbol.triangle",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",rotation:4.71239,points:[1.00872,1,14.99345,8,.99345,15,1.00872,1]}]}),ht.Default.setImage("editor.symbol.polygon",{width:16,height:16,comps:[{type:"polygon",rect:[1,1,14,14],borderColor:"white",borderWidth:1}]}),ht.Default.setImage("editor.symbol.star",{width:16,height:16,comps:[{type:"star",rect:[1,1,14,14],borderColor:"white",borderWidth:1}]}),ht.Default.setImage("editor.symbol.arc",{width:16,height:16,comps:[{type:"arc",rect:[1,1,14,14],arcFrom:0,arcTo:4.1888,borderColor:"white",borderWidth:1}]}),ht.Default.setImage("editor.symbol.image",{background:"rgb(156,156,156)",width:16,height:16,comps:[{type:"rect",borderWidth:1,borderColor:"rgb(255,255,255)",rect:[.5,1.96,15,12]},{type:"circle",background:"rgb(255,255,255)",borderColor:"rgb(255,255,255)",rect:[3.32103,4.48721,1.5,1.5]},{type:"shape",borderWidth:1,borderColor:"rgb(255,255,255)",borderCap:"round",points:[2.18757,9.112,6.11684,9.112,7.77072,10.39241,9.50807,13.68975,9.69338,14.04145,9.04982,12.34611,7.45717,10.69236,7.45717,10.69236,8.72728,5.98721,14.05092,5.98721],segments:[1,4,4,4]}]}),ht.Default.setImage("editor.symbol.shape",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"arc",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rotation:-2.35619,rect:[6.45666,.50222,10,8]},{type:"oval",background:"rgb(138,138,138)",borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rotation:-2.35619,rect:[4.92983,8.48004,2.48323,2.47136]},{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",rotation:-2.35619,points:[.71918,15.84031,-.26373,13.78,4.61411,6.85806,4.66212,13.2497,4.61411,6.85806,9.56535,13.77996,8.58245,15.84028]}]}),ht.Default.setImage("editor.symbol.border",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",points:[.5,6.01503,.5,2,15.48868,2,15.5,14,.5,14,.5,10]}]}),ht.Default.setImage("editor.symbol.text",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",points:[1,15,8.06501,1,15,15,12.38059,9.8,4.10171,9.8]}]}),ht.Default.setImage("editor.symbol.piechart",{background:"rgb(97,97,97)",width:16,height:16,comps:[{type:"arc",borderWidth:1,borderColor:"rgb(255,255,255)",arcFrom:.5236,arcTo:4.71239,rect:[.53628,2.06928,13.08634,13.08634]},{type:"arc",borderWidth:1,borderColor:"rgb(255,255,255)",arcFrom:4.71239,arcTo:.5236,rect:[2.37737,1,13.08634,13.08634]}]}),ht.Default.setImage("editor.symbol.onedimensionalcolumnchart",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"rect",borderWidth:1,borderColor:"rgb(138,138,138)",rect:[3.42625,5.95042,3,9.04958]},{type:"rect",borderWidth:1,borderColor:"rgb(138,138,138)",rect:[10.00543,1,3,14]}]}),ht.Default.setImage("editor.symbol.columnchart",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"rect",borderWidth:1,borderColor:"rgb(138,138,138)",rect:[1,9,3,6]},{type:"rect",borderWidth:1,borderColor:"rgb(138,138,138)",rect:[4,5.95042,3,9.04958]},{type:"rect",borderWidth:1,borderColor:"rgb(138,138,138)",rect:[9,1,3,14]},{type:"rect",borderWidth:1,borderColor:"rgb(138,138,138)",rect:[12,10.93747,3,4.06253]}]}),ht.Default.setImage("editor.symbol.linechart",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",points:[1,14,5,7,11,8,15,2]}]}),ht.Default.setImage("editor.point.mirrored",{width:30,height:30,fitSize:!1,comps:[{type:"arc",background:"rgb(202,235,248)",borderWidth:2,borderColor:"rgb(17,158,216)",arcClose:!1,rect:[3.5,10.30081203536023,23,25.3726296254234]},{type:"oval",background:"rgb(255,255,255)",borderWidth:2,borderColor:"rgb(51,51,51)",rect:[12,7.300812035360231,6,6]},{type:"rect",background:"rgb(51,51,51)",borderColor:"#979797",rect:[17.842265898626422,9.310233818119592,9.826713258365732,2]},{type:"rect",background:"rgb(51,51,51)",borderColor:"#979797",rect:[24.713262902082427,8.310233818119592,3,4]},{type:"rect",background:"rgb(51,51,51)",borderColor:"#979797",rect:[2.4018068742542837,9.30081203536023,9.826713258365732,2]},{type:"rect",background:"rgb(51,51,51)",borderColor:"#979797",rect:[2.286737097917573,8.310233818119592,3,4]}]}),ht.Default.setImage("editor.point.straight",{width:30,height:30,fitSize:!1,comps:[{type:"shape",background:"rgb(200,234,247)",borderWidth:2,borderColor:"rgb(17,160,217)",points:[26.974999999999998,23.185840967335317,15.133692185007973,10.275109094255685,3.0250000000000004,23.185840967335317]},{type:"oval",background:"rgb(255,255,255)",borderWidth:2,borderColor:"rgb(51,51,51)",rect:[12,7.561327956066684,6,6]}]}),ht.Default.setImage("editor.point.disconnected",{width:30,height:30,fitSize:!1,comps:[{type:"shape",background:"rgb(200,234,247)",borderWidth:2,borderColor:"rgb(17,160,217)",points:[3.1940148593724587,22.95774078992803,3.1940148593724587,18.139874123261343,7.6015038461565965,10.497740789928038,14.542032480517832,10.497740789928038,26.80598514062754,22.95774078992803],segments:[1,4,2]},{type:"oval",background:"rgb(255,255,255)",borderWidth:2,borderColor:"rgb(51,51,51)",rect:[12.093814401372779,7.5391087731804305,6,6]},{type:"rect",background:"rgb(51,51,51)",borderColor:"#979797",rotation:.7853981633974483,rect:[16.36973009802768,14.555043156001322,9.826713258365732,2]},{type:"rect",background:"rgb(51,51,51)",borderColor:"#979797",rotation:.7853981633974483,rect:[22.831111406474626,16.51363217953681,3,4]},{type:"rect",background:"rgb(51,51,51)",borderColor:"#979797",rect:[2.2671011430070465,9.53910877318043,9.826713258365732,2]},{type:"rect",background:"rgb(51,51,51)",borderColor:"#979797",rect:[2.152031366670336,8.548530555939791,3,4]}]}),ht.Default.setImage("editor.point.asymmetric",{width:30,height:30,fitSize:!1,comps:[{type:"shape",background:"rgb(200,234,247)",borderWidth:2,borderColor:"rgb(17,160,217)",points:[3.5000000000000027,22.974997694265234,3.5000000000000027,17.50768540873153,5.131816608669447,11.637417102180905,12.400695544362113,11.637417102180905,22.516641067164265,11.637417102180905,26.5,22.974997694265234,26.5,22.974997694265234],segments:[1,4,4]},{type:"oval",background:"rgb(255,255,255)",borderWidth:2,borderColor:"rgb(51,51,51)",rect:[9.324670579660944,7.637417102180905,6,6]},{type:"rect",background:"rgb(51,51,51)",borderColor:"#979797",rect:[3.405482351035767,9.637417102180905,6.540642002660807,2]},{type:"rect",background:"rgb(51,51,51)",borderColor:"#979797",rect:[2.7221578598514142,8.637417102180905,3,4]},{type:"rect",background:"rgb(51,51,51)",borderColor:"#979797",rect:[15.278596259040164,9.637417102180905,11.965262549245955,2]},{type:"rect",background:"rgb(51,51,51)",borderColor:"#979797",rect:[24.731262324024406,8.637417102180905,3,4]}]}),ht.Default.setImage("editor.layout.circular",{width:16,height:16,comps:[{type:"shape",background:"white",points:[7,2,7,4,9,4,9,2,2,7,2,9,4,9,4,7,12,7,12,9,14,9,14,7,4,12,4,14,6,14,6,12,10,12,10,14,12,14,12,12],segments:[1,2,2,2,1,2,2,2,1,2,2,2,1,2,2,2,1,2,2,2]},{type:"shape",borderColor:"white",borderWidth:1,points:[8,3,3,8,5,13,11,13,13,8],segments:[1,2,2,2,2,5]}]}),ht.Default.setImage("editor.layout.symmetric",{width:16,height:16,comps:[{type:"shape",background:"white",points:[7,2,7,4,9,4,9,2,2,7,2,9,4,9,4,7,12,7,12,9,14,9,14,7,4,12,4,14,6,14,6,12,10,12,10,14,12,14,12,12],segments:[1,2,2,2,1,2,2,2,1,2,2,2,1,2,2,2,1,2,2,2]},{type:"shape",borderWidth:1,borderColor:"white",points:[8,8,8,3,8,8,3,8,8,8,5,13,8,8,11,13,8,8,13,8],segments:[1,2,1,2,1,2,1,2,1,2]}]}),ht.Default.setImage("editor.layout.hierarchical",{width:16,height:16,comps:[{type:"shape",background:"white",points:[4,3,4,5,6,5,6,3,10,3,10,5,12,5,12,3,1,11,1,13,3,13,3,11,7,11,7,13,9,13,9,11,13,11,13,13,15,13,15,11],segments:[1,2,2,2,1,2,2,2,1,2,2,2,1,2,2,2,1,2,2,2]},{type:"shape",borderColor:"white",borderWidth:1,points:[5,4,2,12,5,4,8,12,5,4,14,12,11,4,2,12,11,4,8,12,11,4,14,12],segments:[1,2,1,2,1,2,1,2,1,2,1,2]}]}),ht.Default.setImage("editor.layout.towardnorth",{width:16,height:16,comps:[{type:"shape",background:"white",points:[7,3,7,5,9,5,9,3,1,11,1,13,3,13,3,11,7,11,7,13,9,13,9,11,13,11,13,13,15,13,15,11],segments:[1,2,2,2,1,2,2,2,1,2,2,2,1,2,2,2]},{type:"shape",borderColor:"white",borderWidth:1,points:[8,4,2,12,8,4,8,12,8,4,14,12],segments:[1,2,1,2,1,2]}]}),ht.Default.setImage("editor.layout.towardsouth",{width:16,height:16,comps:[{type:"image",name:"editor.layout.towardnorth",rotation:Math.PI,rect:[0,0,16,16]}]}),ht.Default.setImage("editor.layout.towardeast",{width:16,height:16,comps:[{type:"image",name:"editor.layout.towardnorth",rotation:.5*-Math.PI,rect:[0,0,16,16]}]}),ht.Default.setImage("editor.layout.towardwest",{width:16,height:16,comps:[{type:"image",name:"editor.layout.towardnorth",rotation:.5*Math.PI,rect:[0,0,16,16]}]}),ht.Default.setImage("editor.align.distributehorizontal",{background:"rgb(150,150,150)",width:16,height:16,comps:[{type:"shape",points:[2,2,2,14,14,2,14,14],segments:[1,2,1,2],borderWidth:1,borderCap:"round",borderColor:{func:function(){return kG.config.color_dark}}},{type:"shape",points:[8,5,8,11],borderWidth:3,borderCap:"round",borderColor:{func:function(){return kG.config.color_select}}}]}),ht.Default.setImage("editor.align.distributevertical",{background:"rgb(150,150,150)",width:16,height:16,comps:[{type:"shape",points:[2,2,14,2,2,14,14,14],segments:[1,2,1,2],borderWidth:1,borderCap:"round",borderColor:{func:function(){return kG.config.color_dark}}},{type:"shape",points:[5,8,11,8],borderWidth:3,borderCap:"round",borderColor:{func:function(){return kG.config.color_select}}}]}),ht.Default.setImage("editor.align.alignleft",{background:"rgb(150,150,150)",width:16,height:16,comps:[{type:"shape",points:[2,2,2,14],segments:[1,2],borderWidth:1,borderCap:"round",borderColor:{func:function(){return kG.config.color_dark}}},{type:"shape",points:[5,5,13,5,5,11,8,11],segments:[1,2,1,2],borderWidth:3,borderCap:"round",borderColor:{func:function(){return kG.config.color_select}}}]}),ht.Default.setImage("editor.align.alignhorizontal",{background:"rgb(150,150,150)",width:16,height:16,comps:[{type:"shape",points:[8,2,8,14],segments:[1,2],borderWidth:1,borderCap:"round",borderColor:{func:function(){return kG.config.color_dark}}},{type:"shape",points:[3,5,13,5,6,11,10,11],segments:[1,2,1,2],borderWidth:3,borderCap:"round",borderColor:{func:function(){return kG.config.color_select}}}]}),ht.Default.setImage("editor.align.alignright",{background:"rgb(150,150,150)",width:16,height:16,comps:[{type:"shape",points:[14,2,14,14],segments:[1,2],borderWidth:1,borderCap:"round",borderColor:{func:function(){return kG.config.color_dark}}},{type:"shape",points:[3,5,11,5,11,11,8,11],segments:[1,2,1,2],borderWidth:3,borderCap:"round",borderColor:{func:function(){return kG.config.color_select}}}]}),ht.Default.setImage("editor.align.aligntop",{background:"rgb(150,150,150)",width:16,height:16,comps:[{type:"shape",points:[2,2,14,2],segments:[1,2],borderWidth:1,borderCap:"round",borderColor:{func:function(){return kG.config.color_dark}}},{type:"shape",points:[5,5,5,13,11,5,11,8],segments:[1,2,1,2],borderWidth:3,borderCap:"round",borderColor:{func:function(){return kG.config.color_select}}}]}),ht.Default.setImage("editor.align.alignvertical",{background:"rgb(150,150,150)",width:16,height:16,comps:[{type:"shape",points:[2,8,14,8],segments:[1,2],borderWidth:1,borderCap:"round",borderColor:{func:function(){return kG.config.color_dark}}},{type:"shape",points:[5,3,5,13,11,6,11,10],segments:[1,2,1,2],borderWidth:3,borderCap:"round",borderColor:{func:function(){return kG.config.color_select}}}]}),ht.Default.setImage("editor.align.alignbottom",{background:"rgb(150,150,150)",width:16,height:16,comps:[{type:"shape",points:[2,14,14,14],segments:[1,2],borderWidth:1,borderCap:"round",borderColor:{func:function(){return kG.config.color_dark}}},{type:"shape",points:[5,3,5,11,11,11,11,8],segments:[1,2,1,2],borderWidth:3,borderCap:"round",borderColor:{func:function(){return kG.config.color_select}}}]});var pG=function(){return!0};Rt("editor.layout.circular"),Rt("editor.layout.symmetric"),Rt("editor.layout.hierarchical"),Rt("editor.layout.towardnorth"),Rt("editor.layout.towardsouth"),Rt("editor.layout.towardeast"),Rt("editor.layout.towardwest"),Rt("editor.root"),Rt("editor.bind",pG),Rt("editor.unbind"),Rt("editor.dir"),Rt("editor.dxf"),Rt("editor.obj"),Rt("editor.mtl"),Rt("editor.ui-tab"),Rt("editor.ttf"),Rt("editor.otf"),Rt("editor.sound"),Rt("editor.video"),Rt("editor.resetsize"),Rt("editor.restore"),Rt("editor.js"),ht.Data.prototype.$49$=Nt,ht.Data.prototype.$50$=function(w){return this._refGraph?[]:[Ft.call(this,w),St]},ht.Node.prototype.$49$=Ut,ht.Node.prototype.$50$=function(w){return this._refGraph?[]:[Tt.call(this,w),mt]},ht.Edge.prototype.$49$=Et,ht.Edge.prototype.$50$=function(w){return this._refGraph?[]:[ct.call(this,w),vt]},ht.Group.prototype.$50$=function(w){return this._refGraph?[]:[Ot.call(this,w),Ht]},ht.Shape.prototype.$50$=function(w){return this._refGraph?[]:[Xt.call(this,w),bt]},ht.Block.prototype.$50$=function(w){return this._refGraph?[]:[pt.call(this,w),$t]},ht.RefGraph.prototype.$50$=function(w){return this._refGraph?[]:[Mt.call(this,w),ut]};var $G=function(w){function t(G,A,I){_G(this,t);var R=lG(this,w.call(this));return R.parse(G,A,I),R}return yG(t,w),t.prototype.getClass=function(){return t},t.prototype.toLabel=function(){return this.getDisplayName()||R("editor.comptype."+this.s("shape").toLowerCase())},t.prototype.parse=function(w,t,G){w&&(Mw(this,"shape",w.type,"rect"),Mw(this,"shape.background",w.background,null),Mw(this,"shape.repeat.image",w.repeatImage),Mw(this,"shape.border.width",w.borderWidth),Mw(this,"shape.border.color",w.borderColor,null),Mw(this,"shape.border.3d",w.border3d),Mw(this,"shape.border.3d.color",w.border3dColor),Mw(this,"shape.border.3d.accuracy",w.border3dAccuracy),Mw(this,"shape.border.cap",w.borderCap),Mw(this,"shape.border.join",w.borderJoin),Mw(this,"shape.border.pattern",w.borderPattern),Mw(this,"shape.gradient",w.gradient),Mw(this,"shape.gradient.color",w.gradientColor),Mw(this,"shape.dash",w.dash),Mw(this,"shape.dash.pattern",w.dashPattern),Mw(this,"shape.dash.offset",w.dashOffset),Mw(this,"shape.dash.color",w.dashColor),Mw(this,"shape.dash.width",w.dashWidth),Mw(this,"shape.dash.3d",w.dash3d),Mw(this,"shape.dash.3d.color",w.dash3dColor),Mw(this,"shape.dash.3d.accuracy",w.dash3dAccuracy),Mw(this,"shape.border.width.absolute",w.borderWidthAbsolute),Mw(this,"shape.fill.clip.direction",w.fillClipDirection),Mw(this,"shape.fill.clip.percentage",w.fillClipPercentage),"rect"===this.compType?Mw(this,"shape.depth",w.depth):"roundRect"===this.compType?Mw(this,"shape.corner.radius",w.cornerRadius):"polygon"===this.compType?Mw(this,"shape.polygon.side",w.polygonSide):"arc"===this.compType&&(Mw(this,"shape.arc.from",w.arcFrom),Mw(this,"shape.arc.to",w.arcTo),Mw(this,"shape.arc.close",w.arcClose),Mw(this,"shape.arc.oval",w.arcOval)),pw(this,w,t,G))},t.prototype.toJSON=function(){var w={};return Ew(this,w,"shape","type",void 0),Ew(this,w,"shape.background","background",null),Ew(this,w,"shape.repeat.image","repeatImage"),Ew(this,w,"shape.border.width","borderWidth"),Ew(this,w,"shape.border.color","borderColor",null),Ew(this,w,"shape.border.3d","border3d"),Ew(this,w,"shape.border.3d.color","border3dColor"),Ew(this,w,"shape.border.3d.accuracy","border3dAccuracy"),Ew(this,w,"shape.border.cap","borderCap"),Ew(this,w,"shape.border.join","borderJoin"),Ew(this,w,"shape.border.pattern","borderPattern"),Ew(this,w,"shape.gradient","gradient"),Ew(this,w,"shape.gradient.color","gradientColor"),Ew(this,w,"shape.dash","dash"),Ew(this,w,"shape.dash.pattern","dashPattern"),Ew(this,w,"shape.dash.offset","dashOffset"),Ew(this,w,"shape.dash.color","dashColor"),Ew(this,w,"shape.dash.width","dashWidth"),Ew(this,w,"shape.dash.3d","dash3d"),Ew(this,w,"shape.dash.3d.color","dash3dColor"),Ew(this,w,"shape.dash.3d.accuracy","dash3dAccuracy"),Ew(this,w,"shape.border.width.absolute","borderWidthAbsolute"),Ew(this,w,"shape.fill.clip.direction","fillClipDirection"),Ew(this,w,"shape.fill.clip.percentage","fillClipPercentage"),"rect"===this.compType?Ew(this,w,"shape.depth","depth"):"roundRect"===this.compType?Ew(this,w,"shape.corner.radius","cornerRadius"):"polygon"===this.compType?Ew(this,w,"shape.polygon.side","polygonSide"):"arc"===this.compType&&(Ew(this,w,"shape.arc.from","arcFrom"),Ew(this,w,"shape.arc.to","arcTo"),Ew(this,w,"shape.arc.close","arcClose"),Ew(this,w,"shape.arc.oval","arcOval")),$w(this,w),w},rG(t,[{key:"compType",get:function(){return this.s("shape")}}]),t}(ht.Node),MG=function(w){function t(G,A,I){_G(this,t);var R=lG(this,w.call(this));return R.parse(G,A,I),R}return yG(t,w),t.prototype.getClass=function(){return t},t.prototype.toLabel=function(){return this.getDisplayName()||R("editor.comptype.shape")},t.prototype.parse=function(w,t,G){w&&(Mw(this,"type",w.type,"shape"),Mw(this,"shape.background",w.background,null),Mw(this,"shape.repeat.image",w.repeatImage),Mw(this,"shape.border.width",w.borderWidth),Mw(this,"shape.border.color",w.borderColor,null),Mw(this,"shape.border.3d",w.border3d),Mw(this,"shape.border.3d.color",w.border3dColor),Mw(this,"shape.border.3d.accuracy",w.border3dAccuracy),Mw(this,"shape.border.cap",w.borderCap),Mw(this,"shape.border.join",w.borderJoin),Mw(this,"shape.border.pattern",w.borderPattern),Mw(this,"shape.gradient",w.gradient),Mw(this,"shape.gradient.color",w.gradientColor),Mw(this,"shape.dash",w.dash),Mw(this,"shape.dash.pattern",w.dashPattern),Mw(this,"shape.dash.offset",w.dashOffset),Mw(this,"shape.dash.color",w.dashColor),Mw(this,"shape.dash.width",w.dashWidth),Mw(this,"shape.dash.3d",w.dash3d),Mw(this,"shape.dash.3d.color",w.dash3dColor),Mw(this,"shape.dash.3d.accuracy",w.dash3dAccuracy),Mw(this,"shape.fill.rule",w.fillRule),Mw(this,"shape.fill.clip.direction",w.fillClipDirection),Mw(this,"shape.fill.clip.percentage",w.fillClipPercentage),Mw(this,"shape.gradient.pack",w.gradientPack),Mw(this,"shape.border.width.absolute",w.borderWidthAbsolute),pw(this,w,t,G),gw(this,w),this.setPoints(Kw(ew(w.points))),this.setSegments(ew(w.segments)))},t.prototype.toJSON=function(){var w={};if(Ew(this,w,"type","type",void 0),Ew(this,w,"shape.background","background",null),Ew(this,w,"shape.repeat.image","repeatImage"),Ew(this,w,"shape.border.width","borderWidth"),Ew(this,w,"shape.border.color","borderColor",null),Ew(this,w,"shape.border.3d","border3d"),Ew(this,w,"shape.border.3d.color","border3dColor"),Ew(this,w,"shape.border.3d.accuracy","border3dAccuracy"),Ew(this,w,"shape.border.cap","borderCap"),Ew(this,w,"shape.border.join","borderJoin"),Ew(this,w,"shape.border.pattern","borderPattern"),Ew(this,w,"shape.gradient","gradient"),Ew(this,w,"shape.gradient.color","gradientColor"),Ew(this,w,"shape.dash","dash"),Ew(this,w,"shape.dash.pattern","dashPattern"),Ew(this,w,"shape.dash.offset","dashOffset"),Ew(this,w,"shape.dash.color","dashColor"),Ew(this,w,"shape.dash.width","dashWidth"),Ew(this,w,"shape.dash.3d","dash3d"),Ew(this,w,"shape.dash.3d.color","dash3dColor"),Ew(this,w,"shape.dash.3d.accuracy","dash3dAccuracy"),Ew(this,w,"shape.fill.rule","fillRule"),Ew(this,w,"shape.fill.clip.direction","fillClipDirection"),Ew(this,w,"shape.fill.clip.percentage","fillClipPercentage"),Ew(this,w,"shape.gradient.pack","gradientPack"),Ew(this,w,"shape.border.width.absolute","borderWidthAbsolute"),$w(this,w),vw(this,w),bw(w,"points",this.a("points"),Pw(this.getPoints())),this.getSegments()){var t=this.getSegments().toArray();if(t.length){var G=1===t[0];if(G)for(var A=1;A<t.length;A++)if(2!==t[A]){G=!1;break}G||bw(w,"segments",this.a("segments"),t)}}return w},rG(t,[{key:"compType",get:function(){return this.s("type")}}]),t}(ht.Shape),uG=function(w){function t(G,A,I){_G(this,t);var R=lG(this,w.call(this));return R.parse(G,A,I),R}return yG(t,w),t.prototype.getClass=function(){return t},t.prototype.toLabel=function(){if(this.getDisplayName())return this.getDisplayName();var w=this.s("image");return w&&w.length<100?w:R("editor.comptype.image")},t.prototype.onStyleChanged=function(t,G,A){w.prototype.onStyleChanged.call(this,t,G,A),"image"===t&&this.setImage(A)},t.prototype.parse=function(w,t,G){w&&(Mw(this,"type",w.type,"image"),Mw(this,"body.color",w.color),Mw(this,"image.stretch",w.stretch),Mw(this,"image",w.name,"node_image"),pw(this,w,t,G))},t.prototype.toJSON=function(){var w={};return Ew(this,w,"type","type",void 0),Ew(this,w,"body.color","color"),Ew(this,w,"image.stretch","stretch"),Ew(this,w,"image","name"),$w(this,w),w},rG(t,[{key:"compType",get:function(){return this.s("type")}}]),t}(ht.Node),aG=function(w){function t(G,A,I){_G(this,t);var R=lG(this,w.call(this));return R.parse(G,A,I),R}return yG(t,w),t.prototype.getClass=function(){return t},t.prototype.toLabel=function(){return this.getDisplayName()||this.s("text")||R("editor.comptype.text")},t.prototype.parse=function(w,t,G){w&&(Mw(this,"type",w.type,"text"),Mw(this,"text",w.text),Mw(this,"text.align",w.align),Mw(this,"text.vAlign",w.vAlign),Mw(this,"text.color",w.color),Mw(this,"text.gradient.pack",w.gradientPack),Mw(this,"text.font",w.font),Mw(this,"text.shadow",w.shadow),Mw(this,"text.shadow.color",w.shadowColor),Mw(this,"text.shadow.blur",w.shadowBlur),Mw(this,"text.shadow.offset.x",w.shadowOffsetX),Mw(this,"text.shadow.offset.y",w.shadowOffsetY),pw(this,w,t,G))},t.prototype.toJSON=function(){var w={};return Ew(this,w,"type","type",void 0),Ew(this,w,"text","text"),Ew(this,w,"text.align","align"),Ew(this,w,"text.vAlign","vAlign"),Ew(this,w,"text.color","color"),Ew(this,w,"text.gradient.pack","gradientPack"),Ew(this,w,"text.font","font"),Ew(this,w,"text.shadow","shadow"),Ew(this,w,"text.shadow.color","shadowColor"),Ew(this,w,"text.shadow.blur","shadowBlur"),Ew(this,w,"text.shadow.offset.x","shadowOffsetX"),Ew(this,w,"text.shadow.offset.y","shadowOffsetY"),$w(this,w),w},rG(t,[{key:"compType",get:function(){return this.s("type")}}]),t}(ht.Text),hG=function(w){function t(G,A,I){_G(this,t);var R=lG(this,w.call(this));return R.s({"shape.border.color":"red","shape.border.width":1,"shape.background":null}),R.parse(G,A,I),R.setClosePath(!0),R}return yG(t,w),t.prototype.getClass=function(){return t},t.prototype.toLabel=function(){return this.getDisplayName()||R("editor.comptype.clip")},t.prototype.parse=function(w,t,G){w&&(Mw(this,"type",w.type,"clip"),pw(this,w,t,G),this.setPoints(Kw(ew(w.points))),this.setSegments(ew(w.segments)))},t.prototype.toJSON=function(){var w={};if(Ew(this,w,"type","type",void 0),$w(this,w),bw(w,"points",this.a("points"),Pw(this.getPoints())),this.getSegments()){var t=this.getSegments().toArray();if(t.length){var G=1===t[0];if(G)for(var A=1;A<t.length;A++)if(2!==t[A]){G=!1;break}G||bw(w,"segments",this.a("segments"),t)}}return w},rG(t,[{key:"compType",get:function(){return this.s("type")}}]),t}(ht.Shape),DG=function(w){function t(G,A,I){_G(this,t);var R=lG(this,w.call(this));return R.parse(G,A,I),R}return yG(t,w),t.prototype.getClass=function(){return t},t.prototype.toLabel=function(){return this.getDisplayName()||R("editor.comptype.restore")},t.prototype.parse=function(w,t,G){w&&Mw(this,"type",w.type,"restore")},t.prototype.toJSON=function(){var w={};return Ew(this,w,"type","type",void 0),w},rG(t,[{key:"compType",get:function(){return this.s("type")}}]),t}(ht.Node),gG=function(w){function t(){return _G(this,t),lG(this,w.call(this))}return yG(t,w),t}(ht.widget.BorderPane),WG=function(w){function t(G){return _G(this,t),lG(this,w.call(this,G))}return yG(t,w),t}(ht.widget.ContextMenu),eG=function(w){function t(G){return _G(this,t),lG(this,w.call(this,G))}return yG(t,w),t.prototype.adjustZoom=function(w){return w>kG.config.maxZoom?kG.config.maxZoom:w<kG.config.minZoom?kG.config.minZoom:w},t.prototype.getUnionNodeRect=function(w){var t=this,G=void 0;return w=w._as||w,w.forEach(function(w){w instanceof ht.Node&&(G=P(G,t.getNodeRect(w)))}),G},t.prototype.$63$=function(w){this.validate();var t=this.getViewRect(),G=this.getUnionNodeRect(w);if(!t||!G||ht.Default.intersectsRect(t,G))return null;var A=t.x+t.width/2-G.x-G.width/2,I=t.y+t.height/2-G.y-G.height/2;return this.moveDatas(w,A,I),{x:A,y:I}},t.prototype.getFullscreenDatas=function(){return null},t}(ht.graph.GraphView),oG=function(w){function t(G){return _G(this,t),lG(this,w.call(this,G))}return yG(t,w),t}(ht.widget.ListView),KG=function(w){function t(G){_G(this,t);var A=lG(this,w.call(this,G));return A.getView().style.background=kG.config.color_pane_dark,A.setMaskBackground(null),A.setContentBorderColor(null),A.setContentBackground("white"),A.getMask().style.border=kG.config.color_select+" solid 1px",A}return yG(t,w),t}(ht.graph.Overview),PG=function(w){function t(G,A,I,R){_G(this,t);var _=lG(this,w.call(this,G,A,I,R));return _.setTogglable(!1),_}return yG(t,w),t}(ht.widget.SplitView),jG=function(w){function t(G){return _G(this,t),lG(this,w.call(this,G))}return yG(t,w),t}(ht.widget.TablePane),dG=function(w){function t(){return _G(this,t),lG(this,w.call(this))}return yG(t,w),t.prototype.add=function(t,G,A){var I=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],R=w.prototype.add.call(this,t,G,A);return R.setVisible(I),R},t}(ht.widget.TabView),sG=function(w){function t(G){return _G(this,t),lG(this,w.call(this,G))}return yG(t,w),t}(ht.widget.Toolbar),YG=function(w){function t(G){_G(this,t);var A=lG(this,w.call(this,G));return A.setDoubleClickToToggle(!1),A}return yG(t,w),t.prototype.getToggleIcon=function(w){
if(this._loader&&!this._loader.isLoaded(w))return this._collapseIcon;var t=w.getChildren(),G=t.size();if(G){for(var A=!1,I=0;I<G;I++)if(this.isVisible(t.get(I))){A=!0;break}if(A)return this.isExpanded(w)?this._expandIcon:this._collapseIcon}},t.prototype.hasExpandedChild=function(w){if(!this.isExpanded(w))return!1;var t=w.getChildren(),G=t.size();if(G)for(var A=0;A<G;A++)if(this.isVisible(t.get(A)))return!0;return!1},rG(t,[{key:"expandIds",get:function(){return Object.keys(this._expandMap)},set:function(w){var t=this;w.forEach(function(w){var G=t.dm().getDataById(w);G&&t.expand(G)})}},{key:"selectionIds",get:function(){var w=[];return this.sm().each(function(t){w.push(t.$33$||t._id)}),w},set:function(w){var t=this,G=[];w.forEach(function(w){var A=t.dm().getDataById(w);A&&G.push(A)}),this.sm().ss(G)}}]),t}(ht.widget.TreeView),wA=function(w){8===w.keyCode&&w.preventDefault()},tA=ht.widget.TextField.prototype.setEditable;ht.widget.TextField.prototype.setEditable=ht.widget.TextArea.prototype.setEditable=function(w){tA.call(this,w);var t=this._element;w?t.removeEventListener("keydown",wA):t.addEventListener("keydown",wA)},function(w,t,G){var A=w.ht,I=A.Default;I.getInternal().addMethod(I,{svgToShape:function(w,t){var G=new A.SvgConverter(t);return{converter:G,output:G.toShape(w)}}});var R=A.Context2dProxy=function(w,t,G){var A=this;A.ctx=w,A.writer=t,A._currentContext={a:1,b:0,c:0,d:1,tx:0,ty:0},A._emptyPath(),A._forceSplitEllipse=!0,A._splitToBezier=G.splitToBezier,A._ellipseSegments=G.segments,A._minimumFontSize=G.minimumFontSize,A._contextStack=[];for(var I in CanvasRenderingContext2D.prototype)if("webkitImageSmoothingEnabled"!==I){var R=w[I];"function"==typeof R&&(w[I]=function(t,G){return function(){try{var I=G.apply(w,arguments);return A.handleFunc(t,I,arguments),I}catch(w){}}}(I,R))}};R.prototype={},R.prototype.constructor=R,R.prototype.handleFunc=function(w,t,G){var A=this;switch(w){case"save":A._ctxSave();break;case"restore":A._ctxRestore();break;case"translate":A._ctxTranslate.apply(A,G);break;case"rotate":A._ctxRotate.apply(A,G);break;case"scale":A._ctxScale.apply(A,G);break;case"setTransform":A._ctxSetTransform.apply(A,G);break;case"transform":A._ctxTransform.apply(A,G);break;case"fillText":case"strokeText":A._ctxText(G[0],G[1],G[2],"fillText"===w);break;case"rect":A._ctxRect.apply(A,G);break;case"fill":A._ctxFill(G[0]);break;case"fillRect":A._ctxRect.apply(A,G),A._ctxDraw("fill");break;case"stroke":A._ctxDraw("stroke");break;case"moveTo":A._ctxMoveTo(G[0],G[1]);break;case"lineTo":A._ctxLineTo(G[0],G[1]);break;case"beginPath":A._ctxBeginPath();break;case"closePath":A._ctxClosePath();break;case"arc":A._ctxArc.apply(A,G);break;case"ellipse":A._ctxEllipse.apply(A,G);break;case"quadraticCurveTo":A._ctxBezier([{x:G[0],y:G[1]}],G[2],G[3]);break;case"bezierCurveTo":A._ctxBezier([{x:G[0],y:G[1]},{x:G[2],y:G[3]}],G[4],G[5]);break;case"createLinearGradient":A._ctxCreateGradient(t,!0,G);break;case"createRadialGradient":A._ctxCreateGradient(t,!1,G);break;case"createPattern":A._ctxCreatePattern(t,G[0],G[1]);break;case"drawImage":A._ctxDrawImage.apply(A,G);break;case"clip":A._ctxClip()}},R.prototype.handleSetter=function(w,t){},R.prototype._ctxSave=function(){var w=this,t={},G=w._currentContext;for(var A in G)t[A]=G[A],"clip"===A&&G[A]&&delete G[A];w._contextStack.push(t)},R.prototype._ctxRestore=function(){var w=this;w._currentContext.clip&&w.writer.addRestore(),w._currentContext=w._contextStack.pop(),w._transformUpdated()},R.prototype._ctxTranslate=function(w,t){if(w=w||0,t=t||0,0!==w||0!==t){var G=this,A=G._currentContext,I=A.a,R=A.b,_=A.c,r=A.d;A.tx=I*w+_*t+A.tx,A.ty=R*w+r*t+A.ty,G._transformUpdated()}},R.prototype._ctxScale=function(w,t){if(w=w||1,t=t||1,1!==w||1!==t){var G=this,A=G._currentContext;A.a*=w,A.b*=w,A.c*=t,A.d*=t,G._transformUpdated()}},R.prototype._ctxRotate=function(w){var t=Math.cos(w),G=Math.sin(w),A=this,I=A._currentContext,R=I.a,_=I.b,r=I.c,y=I.d;I.a=R*t+r*G,I.b=_*t+y*G,I.c=-R*G+r*t,I.d=-_*G+y*t,A._transformUpdated()},R.prototype._ctxSetTransform=function(w,t,G,A,I,R){var _=this,r=_._currentContext;r.a=w,r.b=t,r.c=G,r.d=A,r.tx=I,r.ty=R,_._transformUpdated()},R.prototype._ctxTransform=function(w,t,G,A,I,R){var _=this,r=_._currentContext,y=r.a,l=r.b,C=r.c,V=r.d;r.a=y*w+C*t,r.b=l*w+V*t,r.c=y*G+C*A,r.d=l*G+V*A,r.tx=y*I+C*R+r.tx,r.ty=l*I+V*R+r.ty,_._transformUpdated()},R.prototype._transformUpdated=function(){},R.prototype._calcCurrentRotation=function(){var w=this._currentContext;return 0===w.b&&0===w.c?0:Math.atan2(w.b,w.a)},R.prototype._calcCurrentScale=function(){var w=this._currentContext;return{x:Math.sqrt(w.a*w.a+w.c*w.c),y:Math.sqrt(w.b*w.b+w.d*w.d)}},R.prototype._transformPoint=function(w){var t=this._currentContext,G=w.x,A=w.y;return{x:t.a*G+t.c*A+t.tx,y:t.b*G+t.d*A+t.ty}},R.prototype._transformPoints=function(w){for(var t=this,G=new Array(w.length),A=0,I=w.length;A<I;A++)G[A]=t._transformPoint(w[A]);return G},R.prototype._transformSize=function(w){var t=this._currentContext;return w*Math.max(Math.sqrt(t.c*t.c+t.d*t.d),Math.sqrt(t.a*t.a+t.b*t.b))},R.prototype._equal=function(w,t){var G=w-t;return G>-1e-5&&G<1e-5},R.prototype._getTextFirstPixelLine=function(w,t){var G,A=this._measureTextCanvas;A?G=this._measureTextContext:(A=this._measureTextCanvas=document.createElement("canvas"),G=this._measureTextContext=A.getContext("2d")),G.font=w;var I=Math.ceil(G.measureText("H").width),R=4*I;if(A.width=I,A.height=R,G.fillStyle="#f00",G.fillRect(0,0,I,R),G.textBaseline=t,G.fillStyle="#000",G.font=w,G.fillText("H",0,R/2),!G.getImageData(0,0,I,R))return 0;var _,r,y=G.getImageData(0,0,I,R).data,l=4*I;for(_=0;_<R;_++)for(r=0;r<l;r+=4)if(255!==y[l*_+r])return _;return 0},R.prototype._calcShift=function(w,t,G){var A=this._fontBaselineShiftCache;A||(A=this._fontBaselineShiftCache={});var I=w+t+G,R=A[I];if(R)return R;var _=this._getTextFirstPixelLine(w,t),r=this._getTextFirstPixelLine(w,G);return A[I]=_-r},R.prototype._ctxText=function(w,t,G,A){var I=this,R=I.ctx,_=R.font,r=A?R.fillStyle:R.strokeStyle,y=R.textAlign,l=R.textBaseline;"middle"!==l&&"top"!==l&&"bottom"!==l&&(G-=I._calcShift(_,"middle",l),l="middle");var C,V,q=1,k=I._minimumFontSize;if("string"==typeof _&&(V=_.match(/[\d\.]+/))){C=1*V[0];var Z=I._transformSize(C);Z<k&&(q=Z/k,Z=k),_=_.replace(V[0],Z)}var z=I._calcCurrentRotation();"string"==typeof r&&"rgba(0,0,0,0)"===r.replace(/ /g,"")||w.trim().length&&(r={color:r},I._tryConvertAndRecordGradient(r),I.writer.addText(w,I._transformPoint({x:t,y:G}),_,z,y,l,r,q))},R.prototype._ctxDrawImage=function(w,t,A,I,R,_,r,y,l){if(w.width&&w.height){I===G&&R===G?(_=t,r=A,t=0,A=0,I=y=w.width,R=l=w.height):_===G&&r===G&&(_=t,r=A,y=I,l=R,t=0,A=0,I=w.width,R=w.height);var C=this,V=C._currentContext,q=y/I,k=l/R,Z=_-q*t,z=r-k*A,x=V.a,L=V.b,Q=V.c,J=V.d;V.tx,V.ty}},R.prototype._ctxClip=function(){var w=this;w._currentContext.clip=!0,w._ctxDraw("clip")},R.prototype._ctxCreateGradient=function(w,t,G){w.isLinear=t,w.points=t?[G[0],G[1],G[2],G[3]]:[G[0],G[1],G[2],G[3],G[4],G[5]];var A=this._currentContext;w.trans=[A.a,A.b,A.c,A.d,A.tx,A.ty];var I=w.addColorStop;w.addColorStop=function(t,G){I.apply(this,arguments),w.colorStops||(w.colorStops=[]),w.colorStops.push(t,G)}},R.prototype._ctxCreatePattern=function(w,t,G){},R.prototype._ctxRect=function(w,t,G,A){var I=this,R=I._transformPoints([{x:w,y:t},{x:w+G,y:t},{x:w+G,y:t+A},{x:w,y:t+A}]);I._path.push({type:"rect",points:R})},R.prototype._ctxMoveTo=function(w,t){var G=this,A=G._transformPoint({x:w,y:t});G._headPoint=A,G._path.push({type:"moveTo",x:A.x,y:A.y})},R.prototype._ctxLineTo=function(w,t){var G=this,A=G._transformPoint({x:w,y:t});G._path.push({type:"lineTo",x:A.x,y:A.y})},R.prototype._ctxArc=function(w,t,G,A,I,R){A=A||0,I=I||2*Math.PI,G&&this._ctxEllipse(w,t,G,G,0,A,I,R)},R.prototype._ctxEllipse=function(w,t,G,A,I,R,_,r){var y,l,C,V,q,k,Z,z,x,L,Q,J,B,n,f=this,i=f._calcCurrentScale(),F=f._transformPoint({x:w,y:t});q=Math.sin(I),k=Math.cos(I);var S=function(w){return N(Math.cos(-w),Math.sin(-w))},N=function(I,R){var _=G*I,r=A*R;return{x:w+(k*_-q*r),y:t+(q*_+k*r)}},T=[],m=_;if(r)for(;m>=R;)m-=2*Math.PI;else for(;m<=R;)m+=2*Math.PI;for(x=(m-R)/f._ellipseSegments,Q=0;Q<=f._ellipseSegments;Q++)L=R+x*Q,J=f._transformPoint(S(-L)),T.push(J);var U=R,c=m;if(T[0],V=T[T.length-1],y=f._calcaEllipseAngle(R,_,r),R=y.start,_=y.end,Z=f._equal(i.x,i.y),z=f._equal(G,A),!f._forceSplitEllipse&&Z&&z&&f._equal(Math.abs(R-_),2*Math.PI))f._path.push({type:"circle",x:F.x,y:F.y,end:V,keyPoints:T,radius:G*i.x});else if(!f._forceSplitEllipse&&Z&&z)l=f._calcCurrentRotation(),C=Math.cos(l),B=f._currentContext.a*C<0,n=f._currentContext.d*C<0,y=f._transformStartEndAngle(R,_,B,n),R=y.start-l,_=y.end-l,f._path.push({type:"arc",x:F.x,y:F.y,end:V,radius:G*i.x,startAngle:R,endAngle:_,keyPoints:T});else{if(f._forceSplitEllipse||!Z){if(f._path.length||f._path.push({type:"moveTo",x:T[0].x,y:T[0].y}),f._splitToBezier){var v,E,O,H=c-U,X=Math.max(Math.ceil(Math.abs(H)/Math.PI*2),1),b=H/X,p=Math.tan(.5*b),$=Math.sin(b)*(Math.sqrt(4+3*p*p)-1)/3,M=Math.cos(U),u=Math.sin(U);for(Q=0;Q<X;Q++){O=U+(Q+1)*b,v=Math.cos(O),E=Math.sin(O);var a=N(v,E);f._ctxBezier([N(M-u*$,u+M*$),N(v+E*$,E-v*$)],a.x,a.y),M=v,u=E,O}return}for(Q=1;Q<=f._ellipseSegments;Q++)J=T[Q],f._path.push({type:"lineTo",x:J.x,y:J.y});return}var h,D,g=f._transformPoint(S(0)),W=f._transformPoint(S(Math.PI/2)),e=function(w,t){var G=w.x-t.x,A=w.y-t.y;return Math.sqrt(G*G+A*A)},o=e(g,F),K=e(W,F);K>o?(D=o,o=K,K=D,h=W):h=g,l=f._calcCurrentRotation(),C=Math.cos(l),B=f._currentContext.a*C<0,n=f._currentContext.d*C<0,y=f._transformStartEndAngle(R-Math.PI/2,_-Math.PI/2,B,n),R=y.start,_=y.end,f._path.push({type:"ellipse",x:F.x,y:F.y,end:V,major:{x:h.x-F.x,y:h.y-F.y},ratio:K/o,startAngle:R,endAngle:_,keyPoints:T})}},R.prototype._ctxBezier=function(w,t,G){var A=this,I=A._transformPoint({x:t,y:G});this._path.push({type:"bezier",x:I.x,y:I.y,ctrl:A._transformPoints(w)})},R.prototype._ctxBeginPath=function(){this._emptyPath()},R.prototype._ctxClosePath=function(){var w=this,t=w._headPoint;t&&(w._path.push({type:"lineTo",x:t.x,y:t.y,subType:"closePath"}),w._headPoint=null,w._lastPoint=null)},R.prototype._calcaEllipseAngle=function(w,t,G){w=-w,t=-t;var A,I=w%(2*Math.PI),R=t%(2*Math.PI);for(I<0&&(I+=2*Math.PI),R<0&&(R+=2*Math.PI),G||(A=I,I=R,R=A);R<=I;)R+=2*Math.PI;return{start:I,end:R}},R.prototype._transformStartEndAngle=function(w,t,G,A){var I;return(A||G)&&(G&&A?(w=Math.PI+w,t=Math.PI+t):(I=Math.PI*(G?1:2)-t,t=Math.PI*(G?1:2)-w,w=I)),{start:w,end:t}},R.prototype._ctxFill=function(w){var t=this;return t._fillRule=w||"nonzero",t._ctxDraw("fill")},R.prototype._tryConvertAndRecordGradient=function(w){if("string"!=typeof w.color){var t=this;if(w.color instanceof CanvasGradient){var G=w.color,A=[G.isLinear?"L":"R"];A=A.concat(G.points);var I=t._currentContext;A=A.concat([I.a,I.b,I.c,I.d,I.tx,I.ty]),A=A.concat(G.colorStops),w.gradientPack=A}else if(w.color instanceof CanvasPattern&&w.color.gradient){var R=w.color,G=R.gradient,A=[G.isLinear?"L":"R"];A=A.concat(G.points);var _=R.trans,I=t._currentContext,r=I.a,y=I.b,l=I.c,C=I.d,V=I.tx,q=I.ty,k=_[0],Z=_[1],z=_[2],x=_[3],L=_[4],Q=_[5];A=A.concat([r*k+l*Z,y*k+C*Z,r*z+l*x,y*z+C*x,r*L+l*Q+V,y*L+C*Q+q]),A=A.concat(G.colorStops),w.gradientPack=A}else w.trans=[t._currentContext.a,t._currentContext.b,t._currentContext.c,t._currentContext.d,t._currentContext.tx,t._currentContext.ty],w.color=w.color.image?w.color.image:w.color,w.isPattern=!0}},R.prototype._ctxDraw=function(w){var t=this,G=t._path;if(G.length){var A,I,R,_,r,y=[],l=[];if("clip"===w)r={clip:!0};else{if("stroke"===w){r={stroke:!0,lineWidth:t._transformSize(t.ctx.lineWidth),color:t.ctx.strokeStyle};var C=t.ctx.lineCap;"butt"!==C&&(r.lineCap=C);var V=t.ctx.getLineDash();if(V&&V.length){r.dash=!0;for(var q=0,k=V.length;q<k;q++)V[q]=t._transformSize(V[q]);r.dashPattern=V,r.dashOffset=t._transformSize(t.ctx.lineDashOffset)}}else r={stroke:!1,color:t.ctx.fillStyle},"nonzero"!==t._fillRule&&(r.fillRule=t._fillRule);if(t.ctx.globalAlpha<1&&(r.opacity=t.ctx.globalAlpha),t._tryConvertAndRecordGradient(r),"string"==typeof r.color&&"rgba(0,0,0,0)"===r.color.replace(/ /g,""))return}for(I=0,A=G.length;I<A;I++)switch(R=G[I],R.type){case"moveTo":t._lastPoint={x:R.x,y:R.y},y.push(t._lastPoint),l.push(1);break;case"lineTo":"closePath"===R.subType?l.push(5):(y.push({x:R.x,y:R.y}),l.push(2)),t._lastPoint={x:R.x,y:R.y};break;case"rect":_=R.points,y.push({x:_[0].x,y:_[0].y},{x:_[1].x,y:_[1].y},{x:_[2].x,y:_[2].y},{x:_[3].x,y:_[3].y},{x:_[0].x,y:_[0].y}),l.push(2,2,2,2,2),t._lastPoint=R.points[0];break;case"circle":case"arc":case"ellipse":console.log("split to line",R.type);break;case"arcBegin":y.length&&l.length&&t.writer.addShape(y,l,r),y=[],l=[];break;case"arcClose":t.writer.addShape(y,l,r),y=[],l=[];break;case"bezier":if(!t._lastPoint)break;1===R.ctrl.length?(y.push({x:R.ctrl[0].x,y:R.ctrl[0].y},{x:R.x,y:R.y}),l.push(3)):(y.push({x:R.ctrl[0].x,y:R.ctrl[0].y},{x:R.ctrl[1].x,y:R.ctrl[1].y},{x:R.x,y:R.y}),l.push(4)),t._lastPoint={x:R.x,y:R.y};break;default:y.push({x:R.x,y:R.y}),l.push(2)}t.writer.addShape(y,l,r)}},R.prototype._emptyPath=function(){var w=this;w._path=[],w._lastPoint=null,w._headPoint=null};var _=A.SvgConverter=function(w){var t=this;t.initConfig(w||{}),t.initCanvas()};_.prototype={},_.prototype.constructor=_,_.prototype.initConfig=function(w){var t,A=this;t=A.options={},t.size=w.size||512,t.segments=w.segments||16,t.splitToBezier=w.splitToBezier===G||w.splitToBezier,t.minimumFontSize=w.minimumFontSize==G?12:w.minimumFontSize},_.prototype.initCanvas=function(){var w=this,t=document.createElement("canvas");t.width=t.height=w.options.size,t.style.width=t.style.height=w.options.size;var G=t.getContext;t.getContext=function(t){return function(G){var A=t.apply(this,arguments);return"2d"===G&&w.wrapContext2d(A),A}}(G),w._canvas=t,w._segments=[]},_.prototype.toShape=function(w){var t=this;t._canvas;return t._segments=[],canvg(t._canvas,w,{ignoreMouse:!0,ignoreAnimation:!0}),t.write()},_.prototype.wrapContext2d=function(w){var t=this;return new A.Context2dProxy(w,t,t.options)},_.prototype.write=function(){var w=this;return{width:w._canvas.width,height:w._canvas.height,comps:w._segments}},_.prototype.addComponent=function(w){this._segments.push(w)},_.prototype.addText=function(w,t,G,A,I,R,_,r){I=I||"left","start"===I?I="left":"end"===I&&(I="right");var y=this,l={type:"text",text:w,rotation:A,rect:[t.x,t.y,.01,.01],align:I,vAlign:R,font:G};_.gradientPack?l.gradientPack=y._fixGraidentPack(_.gradientPack):l.color=_.color,r&&1!==r&&(l.scaleX=r,l.scaleY=r),y.addComponent(l)},_.prototype._fixGraidentPack=function(w){var t="L"===w[0]?[w[5],w[6],w[7],w[8],w[9],w[10]]:[w[7],w[8],w[9],w[10],w[11],w[12]];if(Math.abs(t[4])>1e8||Math.abs(t[5])>1e8){var G=t[0],A=t[1],I=t[2],R=t[3],_=t[4],r=t[5],y=Math.floor((_*R-r*I)/(G*R-A*I)),l=Math.floor((_*A-r*G)/(I*A-G*R));_=-(G*y+I*l),r=-(A*y+R*l),"L"===w[0]?(w[9]+=_,w[10]+=r,w[1]+=y,w[2]+=l,w[3]+=y,w[4]+=l):(w[11]+=_,w[12]+=r,w[1]+=y,w[2]+=l,w[4]+=y,w[5]+=l)}return w},_.prototype.addShape=function(w,t,A){for(var I=this,R=[],_=0,r=w.length;_<r;_++){var y=w[_];R.push(y.x,y.y)}if(A.clip)return void I.addComponent({type:"clip",points:R,segments:t});var l={type:"shape",points:R,segments:t};A.opacity!=G&&(l.opacity=A.opacity),A.stroke?(A.dash?(l.dash=A.dash,l.dashPattern=A.dashPattern,l.dashOffset=A.dashOffset,l.dashColor=A.color,l.dashWidth=A.lineWidth,l.borderColor=null,l.borderWidth=0,l.background=null):(l.borderColor=A.color,l.borderWidth=A.lineWidth,l.background=null),A.lineCap&&(l.borderCap=A.lineCap)):(l.borderColor=null,l.borderWidth=0,A.isPattern?(l.repeatImage=A.color,l.trans=A.trans,l.background=null):A.gradientPack?(l.gradientPack=I._fixGraidentPack(A.gradientPack),l.background=null):l.background=A.color,A.gradient&&(l.gradient=A.gradient,l.gradientColor=A.gradientColor),A.fillRule&&(l.fillRule=A.fillRule)),I.addComponent(l)},_.prototype.addRestore=function(){this.addComponent({type:"restore"})},function(w){function t(w){this.ok=!1,"#"==w.charAt(0)&&(w=w.substr(1,6)),w=w.replace(/ /g,""),w=w.toLowerCase();var G={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};for(var A in G)w==A&&(w=G[A]);for(var I=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(w){return[parseInt(w[1]),parseInt(w[2]),parseInt(w[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(w){return[parseInt(w[1],16),parseInt(w[2],16),parseInt(w[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(w){return[parseInt(w[1]+w[1],16),parseInt(w[2]+w[2],16),parseInt(w[3]+w[3],16)]}}],R=0;R<I.length;R++){var _=I[R].re,r=I[R].process,y=_.exec(w);if(y){var l=r(y);this.r=l[0],this.g=l[1],this.b=l[2],this.ok=!0}}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var w=this.r.toString(16),t=this.g.toString(16),G=this.b.toString(16);return 1==w.length&&(w="0"+w),1==t.length&&(t="0"+t),1==G.length&&(G="0"+G),"#"+w+t+G},this.getHelpXML=function(){for(var w=new Array,A=0;A<I.length;A++)for(var R=I[A].example,_=0;_<R.length;_++)w[w.length]=R[_];for(var r in G)w[w.length]=r;var y=document.createElement("ul");y.setAttribute("id","rgbcolor-examples");for(var A=0;A<w.length;A++)try{var l=document.createElement("li"),C=new t(w[A]),V=document.createElement("div");V.style.cssText="margin: 3px; border: 1px solid black; background:"+C.toHex()+"; color:"+C.toHex(),V.appendChild(document.createTextNode("test"));var q=document.createTextNode(" "+w[A]+" -> "+C.toRGB()+" -> "+C.toHex());l.appendChild(V),l.appendChild(q),y.appendChild(l)}catch(w){}return y}}w.RGBColor=t}(void 0!==w?w:this),function(w){function t(w){for(var t=w.data,G=w.width*w.height*4,A=0;A<G;A+=4){var I=t[A+3]/255;t[A]*=I,t[A+1]*=I,t[A+2]*=I}}function G(w){for(var t=w.data,G=w.width*w.height*4,A=0;A<G;A+=4){var I=t[A+3];0!=I&&(I=255/I,t[A]*=I,t[A+1]*=I,t[A+2]*=I)}}function A(w,t,G,A){var _=document.getElementById(w),r=_.naturalWidth,y=_.naturalHeight,l=document.getElementById(t);l.style.width=r+"px",l.style.height=y+"px",l.width=r,l.height=y;var C=l.getContext("2d");C.clearRect(0,0,r,y),C.drawImage(_,0,0),isNaN(G)||G<1||(A?I(t,0,0,r,y,G):R(t,0,0,r,y,G))}function I(w,A,I,R,l,C){if(!(isNaN(C)||C<1)){C|=0;var V,q=document.getElementById(w),k=q.getContext("2d");try{try{V=k.getImageData(A,I,R,l)}catch(w){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead"),V=k.getImageData(A,I,R,l)}catch(w){throw alert("Cannot access local image"),new Error("unable to access local image data: "+w)}}}catch(w){throw alert("Cannot access image"),new Error("unable to access image data: "+w)}t(V);var Z,z,x,L,Q,J,B,n,f,i,F,S,N,T,m,U,c,v,E,O,H,X,b,p,$=V.data,M=C+C+1,u=R-1,a=l-1,h=C+1,D=h*(h+1)/2,g=new _,W=g;for(x=1;x<M;x++)if(W=W.next=new _,x==h)var e=W;W.next=g;var o=null,K=null;B=J=0;var P=r[C],j=y[C];for(z=0;z<l;z++){for(U=c=v=E=n=f=i=F=0,S=h*(O=$[J]),N=h*(H=$[J+1]),T=h*(X=$[J+2]),m=h*(b=$[J+3]),n+=D*O,f+=D*H,i+=D*X,F+=D*b,W=g,x=0;x<h;x++)W.r=O,W.g=H,W.b=X,W.a=b,W=W.next;for(x=1;x<h;x++)L=J+((u<x?u:x)<<2),n+=(W.r=O=$[L])*(p=h-x),f+=(W.g=H=$[L+1])*p,i+=(W.b=X=$[L+2])*p,F+=(W.a=b=$[L+3])*p,U+=O,c+=H,v+=X,E+=b,W=W.next;for(o=g,K=e,Z=0;Z<R;Z++)$[J]=n*P>>j,$[J+1]=f*P>>j,$[J+2]=i*P>>j,$[J+3]=F*P>>j,n-=S,f-=N,i-=T,F-=m,S-=o.r,N-=o.g,T-=o.b,m-=o.a,L=B+((L=Z+C+1)<u?L:u)<<2,U+=o.r=$[L],c+=o.g=$[L+1],v+=o.b=$[L+2],E+=o.a=$[L+3],n+=U,f+=c,i+=v,F+=E,o=o.next,S+=O=K.r,N+=H=K.g,T+=X=K.b,m+=b=K.a,U-=O,c-=H,v-=X,E-=b,K=K.next,J+=4;B+=R}for(Z=0;Z<R;Z++){for(c=v=E=U=f=i=F=n=0,J=Z<<2,S=h*(O=$[J]),N=h*(H=$[J+1]),T=h*(X=$[J+2]),m=h*(b=$[J+3]),n+=D*O,f+=D*H,i+=D*X,F+=D*b,W=g,x=0;x<h;x++)W.r=O,W.g=H,W.b=X,W.a=b,W=W.next;for(Q=R,x=1;x<=C;x++)J=Q+Z<<2,n+=(W.r=O=$[J])*(p=h-x),f+=(W.g=H=$[J+1])*p,i+=(W.b=X=$[J+2])*p,F+=(W.a=b=$[J+3])*p,U+=O,c+=H,v+=X,E+=b,W=W.next,x<a&&(Q+=R);for(J=Z,o=g,K=e,z=0;z<l;z++)L=J<<2,$[L]=n*P>>j,$[L+1]=f*P>>j,$[L+2]=i*P>>j,$[L+3]=F*P>>j,n-=S,f-=N,i-=T,F-=m,S-=o.r,N-=o.g,T-=o.b,m-=o.a,L=Z+((L=z+h)<a?L:a)*R<<2,n+=U+=o.r=$[L],f+=c+=o.g=$[L+1],i+=v+=o.b=$[L+2],F+=E+=o.a=$[L+3],o=o.next,S+=O=K.r,N+=H=K.g,T+=X=K.b,m+=b=K.a,U-=O,c-=H,v-=X,E-=b,K=K.next,J+=R}G(V),k.putImageData(V,A,I)}}function R(w,t,G,A,I,R){if(!(isNaN(R)||R<1)){R|=0;var l,C=document.getElementById(w),V=C.getContext("2d");try{try{l=V.getImageData(t,G,A,I)}catch(w){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead"),l=V.getImageData(t,G,A,I)}catch(w){throw alert("Cannot access local image"),new Error("unable to access local image data: "+w)}}}catch(w){throw alert("Cannot access image"),new Error("unable to access image data: "+w)}var q,k,Z,z,x,L,Q,J,B,n,f,i,F,S,N,T,m,U,c,v,E=l.data,O=R+R+1,H=A-1,X=I-1,b=R+1,p=b*(b+1)/2,$=new _,M=$;for(Z=1;Z<O;Z++)if(M=M.next=new _,Z==b)var u=M;M.next=$;var a=null,h=null;Q=L=0;var D=r[R],g=y[R];for(k=0;k<I;k++){for(S=N=T=J=B=n=0,f=b*(m=E[L]),i=b*(U=E[L+1]),F=b*(c=E[L+2]),J+=p*m,B+=p*U,n+=p*c,M=$,Z=0;Z<b;Z++)M.r=m,M.g=U,M.b=c,M=M.next;for(Z=1;Z<b;Z++)z=L+((H<Z?H:Z)<<2),J+=(M.r=m=E[z])*(v=b-Z),B+=(M.g=U=E[z+1])*v,n+=(M.b=c=E[z+2])*v,S+=m,N+=U,T+=c,M=M.next;for(a=$,h=u,q=0;q<A;q++)E[L]=J*D>>g,E[L+1]=B*D>>g,E[L+2]=n*D>>g,J-=f,B-=i,n-=F,f-=a.r,i-=a.g,F-=a.b,z=Q+((z=q+R+1)<H?z:H)<<2,S+=a.r=E[z],N+=a.g=E[z+1],T+=a.b=E[z+2],J+=S,B+=N,n+=T,a=a.next,f+=m=h.r,i+=U=h.g,F+=c=h.b,S-=m,N-=U,T-=c,h=h.next,L+=4;Q+=A}for(q=0;q<A;q++){for(N=T=S=B=n=J=0,L=q<<2,f=b*(m=E[L]),i=b*(U=E[L+1]),F=b*(c=E[L+2]),J+=p*m,B+=p*U,n+=p*c,M=$,Z=0;Z<b;Z++)M.r=m,M.g=U,M.b=c,M=M.next;for(x=A,Z=1;Z<=R;Z++)L=x+q<<2,J+=(M.r=m=E[L])*(v=b-Z),B+=(M.g=U=E[L+1])*v,n+=(M.b=c=E[L+2])*v,S+=m,N+=U,T+=c,M=M.next,Z<X&&(x+=A);for(L=q,a=$,h=u,k=0;k<I;k++)z=L<<2,E[z]=J*D>>g,E[z+1]=B*D>>g,E[z+2]=n*D>>g,J-=f,B-=i,n-=F,f-=a.r,i-=a.g,F-=a.b,z=q+((z=k+b)<X?z:X)*A<<2,J+=S+=a.r=E[z],B+=N+=a.g=E[z+1],n+=T+=a.b=E[z+2],a=a.next,f+=m=h.r,i+=U=h.g,F+=c=h.b,S-=m,N-=U,T-=c,h=h.next,L+=A}V.putImageData(l,t,G)}}function _(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}var r=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],y=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24],l={image:A,canvasRGBA:I,canvasRGB:R};w.stackBlur=l}(void 0!==w?w:this),function(t,I){t.canvg=function(t,I){function R(w){var t=[0,0,0],G=function(G,A){var I=w.match(G);null!=I&&(t[A]+=I.length,w=w.replace(G," "))};return w=w.replace(/:not\(([^\)]*)\)/g,"     $1 "),w=w.replace(/{[\s\S]*/gm," "),G(l,1),G(C,0),G(V,1),G(q,2),G(k,1),G(Z,1),w=w.replace(/[\*\s\+>~]/g," "),w=w.replace(/[#\.]/g," "),G(z,2),t.join("")}function _(_){var y={opts:_};y.FRAMERATE=30,y.MAX_VIRTUAL_PIXELS=3e4,y.log=function(w){},1==y.opts.log&&"undefined"!=typeof console&&(y.log=function(w){console.log(w)}),y.init=function(w){var t=0;y.UniqueId=function(){return"canvg"+ ++t},y.Definitions={},y.Styles={},y.StylesSpecificity={},y.Animations=[],y.Images=[],y.ctx=w,y.ViewPort=new function(){this.viewPorts=[],this.Clear=function(){this.viewPorts=[]},this.SetCurrent=function(w,t){this.viewPorts.push({width:w,height:t})},this.RemoveCurrent=function(){this.viewPorts.pop()},this.Current=function(){return this.viewPorts[this.viewPorts.length-1]},this.width=function(){var w,t=this.Current();return t&&(w=t.width)?w:100},this.height=function(){var w,t=this.Current();return t&&(w=t.height)?w:100},this.ComputeSize=function(w){return null!=w&&"number"==typeof w?w:"x"==w?this.width():"y"==w?this.height():Math.sqrt(Math.pow(this.width(),2)+Math.pow(this.height(),2))/Math.sqrt(2)}}},y.init(),y.ImagesLoaded=function(){for(var w=0;w<y.Images.length;w++)if(!y.Images[w].loaded)return!1;return!0},y.trim=function(w){return w.replace(/^\s+|\s+$/g,"")},y.compressSpaces=function(w){return w.replace(/[\s\r\t\n]+/gm," ")},y.ajax=function(w){w=A.Default.beforeLoadURL(w);var t=new A.Request,G={};return G.url=encodeURI(w),G.sync=!0,t.send(G),t.getResponseText()},y.parseXml=function(t){if("undefined"!=typeof Windows&&void 0!==Windows.Data&&void 0!==Windows.Data.Xml){var G=new Windows.Data.Xml.Dom.XmlDocument,A=new Windows.Data.Xml.Dom.XmlLoadSettings;return A.prohibitDtd=!1,G.loadXml(t,A),G}if(w.DOMParser){return(new DOMParser).parseFromString(t,"text/xml")}t=t.replace(/<!DOCTYPE svg[^>]*>/,"");var G=new ActiveXObject("Microsoft.XMLDOM");return G.async="false",G.loadXML(t),G},y.Property=function(w,t){this.name=w,this.value=t},y.Property.prototype.getValue=function(){return this.value},y.Property.prototype.hasValue=function(){return null!=this.value&&""!==this.value},y.Property.prototype.numValue=function(){if(!this.hasValue())return 0;var w=parseFloat(this.value);return(this.value+"").match(/%$/)&&(w/=100),w},y.Property.prototype.valueOrDefault=function(w){return this.hasValue()?this.value:w},y.Property.prototype.numValueOrDefault=function(w){return this.hasValue()?this.numValue():w},y.Property.prototype.addOpacity=function(w){var G=this.value;if(null!=w.value&&""!=w.value&&"string"==typeof this.value){var A=new t(this.value);A.ok&&(G="rgba("+A.r+", "+A.g+", "+A.b+", "+w.numValue()+")")}return new y.Property(this.name,G)},y.Property.prototype.getDefinition=function(){var w=this.value.match(/#([^\)'"]+)/);return w&&(w=w[1]),w||(w=this.value),y.Definitions[w]},y.Property.prototype.isUrlDefinition=function(){return 0==this.value.indexOf("url(")},y.Property.prototype.getFillStyleDefinition=function(w,t){var G=this.getDefinition();if(null!=G&&G.createGradient)return G.createGradient(y.ctx,w,t);if(null!=G&&G.createPattern){if(G.getHrefAttribute().hasValue()){var A=G.attribute("patternTransform");G=G.getHrefAttribute().getDefinition(),A.hasValue()&&(G.attribute("patternTransform",!0).value=A.value)}return G.createPattern(y.ctx,w)}return null},y.Property.prototype.getDPI=function(w){return 96},y.Property.prototype.getEM=function(w){var t=12,G=new y.Property("fontSize",y.Font.Parse(y.ctx.font).fontSize);return G.hasValue()&&(t=G.toPixels(w)),t},y.Property.prototype.getUnits=function(){return(this.value+"").replace(/[0-9\.\-]/g,"")},y.Property.prototype.toPixels=function(w,t){if(!this.hasValue())return 0;var G=this.value+"";if(G.match(/em$/))return this.numValue()*this.getEM(w);if(G.match(/ex$/))return this.numValue()*this.getEM(w)/2;if(G.match(/px$/))return this.numValue();if(G.match(/pt$/))return this.numValue()*this.getDPI(w)*(1/72);if(G.match(/pc$/))return 15*this.numValue();if(G.match(/cm$/))return this.numValue()*this.getDPI(w)/2.54;if(G.match(/mm$/))return this.numValue()*this.getDPI(w)/25.4;if(G.match(/in$/))return this.numValue()*this.getDPI(w);if(G.match(/%$/))return this.numValue()*y.ViewPort.ComputeSize(w);var A=this.numValue();return t&&A<1?A*y.ViewPort.ComputeSize(w):A},y.Property.prototype.toMilliseconds=function(){if(!this.hasValue())return 0;var w=this.value+"";return w.match(/s$/)?1e3*this.numValue():(w.match(/ms$/),this.numValue())},y.Property.prototype.toRadians=function(){if(!this.hasValue())return 0;var w=this.value+"";return w.match(/deg$/)?this.numValue()*(Math.PI/180):w.match(/grad$/)?this.numValue()*(Math.PI/200):w.match(/rad$/)?this.numValue():this.numValue()*(Math.PI/180)};var l={baseline:"alphabetic","before-edge":"top","text-before-edge":"top",middle:"middle",central:"middle","after-edge":"bottom","text-after-edge":"bottom",ideographic:"ideographic",alphabetic:"alphabetic",hanging:"hanging",mathematical:"alphabetic"};return y.Property.prototype.toTextBaseline=function(){return this.hasValue()?l[this.value]:null},y.Font=new function(){this.Styles="normal|italic|oblique|inherit",this.Variants="normal|small-caps|inherit",
this.Weights="normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit",this.CreateFont=function(w,t,G,A,I,R){var _=null!=R?this.Parse(R):this.CreateFont("","","","","",y.ctx.font);return{fontFamily:I||_.fontFamily,fontSize:A||_.fontSize,fontStyle:w||_.fontStyle,fontWeight:G||_.fontWeight,fontVariant:t||_.fontVariant,toString:function(){return[this.fontStyle,this.fontVariant,this.fontWeight,this.fontSize,this.fontFamily].join(" ")}}};var w=this;this.Parse=function(t){for(var G={},A=y.trim(y.compressSpaces(t||"")).split(" "),I={fontSize:!1,fontStyle:!1,fontWeight:!1,fontVariant:!1},R="",_=0;_<A.length;_++)I.fontStyle||-1==w.Styles.indexOf(A[_])?I.fontVariant||-1==w.Variants.indexOf(A[_])?I.fontWeight||-1==w.Weights.indexOf(A[_])?I.fontSize?"inherit"!=A[_]&&(R+=A[_]):("inherit"!=A[_]&&(G.fontSize=A[_].split("/")[0]),I.fontStyle=I.fontVariant=I.fontWeight=I.fontSize=!0):("inherit"!=A[_]&&(G.fontWeight=A[_]),I.fontStyle=I.fontVariant=I.fontWeight=!0):("inherit"!=A[_]&&(G.fontVariant=A[_]),I.fontStyle=I.fontVariant=!0):("inherit"!=A[_]&&(G.fontStyle=A[_]),I.fontStyle=!0);return""!=R&&(G.fontFamily=R),G}},y.ToNumberArray=function(w){for(var t=y.trim(y.compressSpaces((w||"").replace(/,/g," "))).split(" "),G=0;G<t.length;G++)t[G]=parseFloat(t[G]);return t},y.Point=function(w,t){this.x=w,this.y=t},y.Point.prototype.angleTo=function(w){return Math.atan2(w.y-this.y,w.x-this.x)},y.Point.prototype.applyTransform=function(w){var t=this.x*w[0]+this.y*w[2]+w[4],G=this.x*w[1]+this.y*w[3]+w[5];this.x=t,this.y=G},y.CreatePoint=function(w){var t=y.ToNumberArray(w);return new y.Point(t[0],t[1])},y.CreatePath=function(w){for(var t=y.ToNumberArray(w),G=[],A=0;A<t.length;A+=2)G.push(new y.Point(t[A],t[A+1]));return G},y.BoundingBox=function(w,t,G,A){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN,this.x=function(){return this.x1},this.y=function(){return this.y1},this.width=function(){return this.x2-this.x1},this.height=function(){return this.y2-this.y1},this.addPoint=function(w,t){null!=w&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=w,this.x2=w),w<this.x1&&(this.x1=w),w>this.x2&&(this.x2=w)),null!=t&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=t,this.y2=t),t<this.y1&&(this.y1=t),t>this.y2&&(this.y2=t))},this.addX=function(w){this.addPoint(w,null)},this.addY=function(w){this.addPoint(null,w)},this.addBoundingBox=function(w){this.addPoint(w.x1,w.y1),this.addPoint(w.x2,w.y2)},this.addQuadraticCurve=function(w,t,G,A,I,R){var _=w+2/3*(G-w),r=t+2/3*(A-t),y=_+1/3*(I-w),l=r+1/3*(R-t);this.addBezierCurve(w,t,_,y,r,l,I,R)},this.addBezierCurve=function(w,t,G,A,I,R,_,r){var y=[w,t],l=[G,A],C=[I,R],V=[_,r];this.addPoint(y[0],y[1]),this.addPoint(V[0],V[1]);for(var q=0;q<=1;q++){var k=function(w){return Math.pow(1-w,3)*y[q]+3*Math.pow(1-w,2)*w*l[q]+3*(1-w)*Math.pow(w,2)*C[q]+Math.pow(w,3)*V[q]},Z=6*y[q]-12*l[q]+6*C[q],z=-3*y[q]+9*l[q]-9*C[q]+3*V[q],x=3*l[q]-3*y[q];if(0!=z){var L=Math.pow(Z,2)-4*x*z;if(!(L<0)){var Q=(-Z+Math.sqrt(L))/(2*z);0<Q&&Q<1&&(0==q&&this.addX(k(Q)),1==q&&this.addY(k(Q)));var J=(-Z-Math.sqrt(L))/(2*z);0<J&&J<1&&(0==q&&this.addX(k(J)),1==q&&this.addY(k(J)))}}else{if(0==Z)continue;var B=-x/Z;0<B&&B<1&&(0==q&&this.addX(k(B)),1==q&&this.addY(k(B)))}}},this.isPointInBox=function(w,t){return this.x1<=w&&w<=this.x2&&this.y1<=t&&t<=this.y2},this.addPoint(w,t),this.addPoint(G,A)},y.Transform=function(w){var t=this;this.Type={},this.Type.translate=function(w){this.p=y.CreatePoint(w),this.getMatrix=function(){return[1,0,0,1,this.p.x||0,this.p.y||0]},this.apply=function(w){w.translate(this.p.x||0,this.p.y||0)},this.unapply=function(w){w.translate(-1*this.p.x||0,-1*this.p.y||0)},this.applyToPoint=function(w){w.applyTransform([1,0,0,1,this.p.x||0,this.p.y||0])}},this.Type.rotate=function(w){var t=y.ToNumberArray(w);this.angle=new y.Property("angle",t[0]),this.cx=t[1]||0,this.cy=t[2]||0,this.apply=function(w){w.translate(this.cx,this.cy),w.rotate(this.angle.toRadians()),w.translate(-this.cx,-this.cy)},this.getMatrix=function(){var w=this.angle.toRadians(),t=Math.sin(w),G=Math.cos(w),A=this.cx,I=this.cy;return[G,t,-t,G,G*-A+t*I+A,t*-A-G*I+I]},this.unapply=function(w){w.translate(this.cx,this.cy),w.rotate(-1*this.angle.toRadians()),w.translate(-this.cx,-this.cy)},this.applyToPoint=function(w){var t=this.angle.toRadians();w.applyTransform([1,0,0,1,this.p.x||0,this.p.y||0]),w.applyTransform([Math.cos(t),Math.sin(t),-Math.sin(t),Math.cos(t),0,0]),w.applyTransform([1,0,0,1,-this.p.x||0,-this.p.y||0])}},this.Type.scale=function(w){this.p=y.CreatePoint(w),this.getMatrix=function(){return[this.p.x||1,0,0,this.p.y||this.p.x||1,0,0]},this.apply=function(w){w.scale(this.p.x||1,this.p.y||this.p.x||1)},this.unapply=function(w){w.scale(1/this.p.x||1,1/this.p.y||this.p.x||1)},this.applyToPoint=function(w){w.applyTransform([this.p.x||0,0,0,this.p.y||0,0,0])}},this.Type.matrix=function(w){this.m=y.ToNumberArray(w),this.getMatrix=function(){return this.m},this.apply=function(w){w.transform(this.m[0],this.m[1],this.m[2],this.m[3],this.m[4],this.m[5])},this.unapply=function(w){var t=this.m[0],G=this.m[2],A=this.m[4],I=this.m[1],R=this.m[3],_=this.m[5],r=1/(t*(1*R-0*_)-G*(1*I-0*_)+A*(0*I-0*R));w.transform(r*(1*R-0*_),r*(0*_-1*I),r*(0*A-1*G),r*(1*t-0*A),r*(G*_-A*R),r*(A*I-t*_))},this.applyToPoint=function(w){w.applyTransform(this.m)}},this.Type.SkewBase=function(w){this.base=t.Type.matrix,this.base(w),this.angle=new y.Property("angle",w)},this.Type.SkewBase.prototype=new this.Type.matrix,this.Type.skewX=function(w){this.base=t.Type.SkewBase,this.base(w),this.m=[1,0,Math.tan(this.angle.toRadians()),1,0,0]},this.Type.skewX.prototype=new this.Type.SkewBase,this.Type.skewY=function(w){this.base=t.Type.SkewBase,this.base(w),this.m=[1,Math.tan(this.angle.toRadians()),0,1,0,0]},this.Type.skewY.prototype=new this.Type.SkewBase,this.transforms=[],this.getMatrix=function(){for(var w=1,t=0,G=0,A=1,I=0,R=0,_=0;_<this.transforms.length;_++){var r=this.transforms[_].getMatrix(),y=w,l=t,C=G,V=A,q=I,k=R;w=y*r[0]+C*r[1],t=l*r[0]+V*r[1],G=y*r[2]+C*r[3],A=l*r[2]+V*r[3],I=y*r[4]+C*r[5]+q,R=l*r[4]+V*r[5]+k}return[w,t,G,A,I,R]},this.apply=function(w){for(var t=0;t<this.transforms.length;t++)this.transforms[t].apply(w)},this.unapply=function(w){for(var t=this.transforms.length-1;t>=0;t--)this.transforms[t].unapply(w)},this.applyToPoint=function(w){for(var t=0;t<this.transforms.length;t++)this.transforms[t].applyToPoint(w)};for(var G=y.trim(y.compressSpaces(w)).replace(/\)([a-zA-Z])/g,") $1").replace(/\)(\s?,\s?)/g,") ").split(/\s(?=[a-z])/),A=0;A<G.length;A++){var I=y.trim(G[A].split("(")[0]),R=G[A].split("(")[1].replace(")",""),_=this.Type[I];if(void 0!==_){var r=new _(R);r.type=I,this.transforms.push(r)}}},y.AspectRatio=function(w,t,G,A,I,R,_,r,l,C){t=y.compressSpaces(t),t=t.replace(/^defer\s/,"");var V=t.split(" ")[0]||"xMidYMid",q=t.split(" ")[1]||"meet",k=G/A,Z=I/R,z=Math.min(k,Z),x=Math.max(k,Z);"meet"==q&&(A*=z,R*=z),"slice"==q&&(A*=x,R*=x),l=new y.Property("refX",l),C=new y.Property("refY",C),l.hasValue()&&C.hasValue()?w.translate(-z*l.toPixels("x"),-z*C.toPixels("y")):(V.match(/^xMid/)&&("meet"==q&&z==Z||"slice"==q&&x==Z)&&w.translate(G/2-A/2,0),V.match(/YMid$/)&&("meet"==q&&z==k||"slice"==q&&x==k)&&w.translate(0,I/2-R/2),V.match(/^xMax/)&&("meet"==q&&z==Z||"slice"==q&&x==Z)&&w.translate(G-A,0),V.match(/YMax$/)&&("meet"==q&&z==k||"slice"==q&&x==k)&&w.translate(0,I-R)),"none"==V?w.scale(k,Z):"meet"==q?w.scale(z,z):"slice"==q&&w.scale(x,x),w.translate(null==_?0:-_,null==r?0:-r)},y.Element={},y.EmptyProperty=new y.Property("EMPTY",""),y.Element.ElementBase=function(w){this.attributes={},this.styles={},this.stylesSpecificity={},this.children=[],this.attribute=function(w,t){var G=this.attributes[w];return null!=G?G:(1==t&&(G=new y.Property(w,""),this.attributes[w]=G),G||y.EmptyProperty)},this.getHrefAttribute=function(){for(var w in this.attributes)if("href"==w||w.match(/:href$/))return this.attributes[w];return y.EmptyProperty},this.style=function(w,t,G){var A=this.styles[w];if(null!=A)return A;var I=this.attribute(w);if(null!=I&&I.hasValue())return this.styles[w]=I,I;if(1!=G){var R=this.parent;if(null!=R){var _=R.style(w);if(null!=_&&_.hasValue())return _}}return 1==t&&(A=new y.Property(w,""),this.styles[w]=A),A||y.EmptyProperty},this.render=function(w){if("none"!=this.style("display").value&&"hidden"!=this.style("visibility").value){if(w.save(),this.style("mask").hasValue()){var t=this.style("mask").getDefinition();null!=t&&t.apply(w,this)}else this.setContext(w),this.renderChildren(w),this.clearContext(w);w.restore()}},this.setContext=function(w){},this.clearContext=function(w){},this.renderChildren=function(w){for(var t=0;t<this.children.length;t++)this.children[t].render(w)},this.addChild=function(w,t){var G=w;t&&(G=y.CreateElement(w)),G.parent=this,"title"!=G.type&&this.children.push(G)},this.addStylesFromStyleDefinition=function(){for(var t in y.Styles)if("@"!=t[0]&&r(w,t)){var G=y.Styles[t],A=y.StylesSpecificity[t];if(null!=G)for(var I in G){var R=this.stylesSpecificity[I];void 0===R&&(R="000"),A>R&&(this.styles[I]=G[I],this.stylesSpecificity[I]=A)}}};var t=new RegExp("^[A-Z-]+$");if(null!=w&&1==w.nodeType){for(var G=0;G<w.attributes.length;G++){var A=w.attributes[G],I=function(w){return t.test(w)?w.toLowerCase():w}(A.nodeName);this.attributes[I]=new y.Property(I,A.value)}if(this.addStylesFromStyleDefinition(),this.attribute("style").hasValue())for(var R=this.attribute("style").value.split(";"),G=0;G<R.length;G++)if(""!=y.trim(R[G])){var _=R[G].split(":"),l=y.trim(_[0]),C=y.trim(_[1]);this.styles[l]=new y.Property(l,C)}this.attribute("id").hasValue()&&null==y.Definitions[this.attribute("id").value]&&(y.Definitions[this.attribute("id").value]=this);for(var G=0;G<w.childNodes.length;G++){var V=w.childNodes[G];if(1==V.nodeType&&this.addChild(V,!0),this.captureTextNodes&&(3==V.nodeType||4==V.nodeType)){var q=V.value||V.text||V.textContent||"";""!=y.compressSpaces(q)&&this.addChild(new y.Element.tspan(V),!1)}}}},y.Element.RenderedElementBase=function(w){this.base=y.Element.ElementBase,this.base(w),this.setContext=function(w,t){if(!t){if(this.style("fill").isUrlDefinition()){var G=this.style("fill").getFillStyleDefinition(this,this.style("fill-opacity"));null!=G&&(w.fillStyle=G)}else if(this.style("fill").hasValue()){var A=this.style("fill");"currentColor"==A.value&&(A.value=this.style("color").value),"inherit"!=A.value&&(w.fillStyle="none"==A.value?"rgba(0,0,0,0)":A.value)}if(this.style("fill-opacity").hasValue()){var A=new y.Property("fill",w.fillStyle);A=A.addOpacity(this.style("fill-opacity")),w.fillStyle=A.value}if(this.style("stroke").isUrlDefinition()){var G=this.style("stroke").getFillStyleDefinition(this,this.style("stroke-opacity"));null!=G&&(w.strokeStyle=G)}else if(this.style("stroke").hasValue()){var I=this.style("stroke");"currentColor"==I.value&&(I.value=this.style("color").value),"inherit"!=I.value&&(w.strokeStyle="none"==I.value?"rgba(0,0,0,0)":I.value)}if(this.style("stroke-opacity").hasValue()){var I=new y.Property("stroke",w.strokeStyle);I=I.addOpacity(this.style("stroke-opacity")),w.strokeStyle=I.value}if(this.style("stroke-width").hasValue()){var R=this.style("stroke-width").toPixels();w.lineWidth=0==R?.001:R}if(this.style("stroke-linecap").hasValue()&&(w.lineCap=this.style("stroke-linecap").value),this.style("stroke-linejoin").hasValue()&&(w.lineJoin=this.style("stroke-linejoin").value),this.style("stroke-miterlimit").hasValue()&&(w.miterLimit=this.style("stroke-miterlimit").value),this.style("stroke-dasharray").hasValue()&&"none"!=this.style("stroke-dasharray").value){var _=y.ToNumberArray(this.style("stroke-dasharray").value);void 0!==w.setLineDash?w.setLineDash(_):void 0!==w.webkitLineDash?w.webkitLineDash=_:void 0===w.mozDash||1==_.length&&0==_[0]||(w.mozDash=_);var r=this.style("stroke-dashoffset").numValueOrDefault(1);void 0!==w.lineDashOffset?w.lineDashOffset=r:void 0!==w.webkitLineDashOffset?w.webkitLineDashOffset=r:void 0!==w.mozDashOffset&&(w.mozDashOffset=r)}if(void 0!==w.font){var l=this.style("font-size"),C=y.Font.CreateFont(this.style("font-style").value,this.style("font-variant").value,this.style("font-weight").value,l.hasValue()?l.toPixels()+"px":"",this.style("font-family").value);l!==y.EmptyProperty&&l.value!=C.fontSize&&(this.styles["font-size"]=new y.Property("font-size",C.fontSize)),w.font=C.toString()}this.style("text-align").hasValue()?w.textAlign=this.style("text-align").value:w.textAlign="start"}if(this.style("transform",!1,!0).hasValue()){new y.Transform(this.style("transform",!1,!0).value).apply(w)}if(this.style("clip-path",!1,!0).hasValue()){var V=this.style("clip-path",!1,!0).getDefinition();null!=V&&V.apply(w)}this.style("opacity").hasValue()&&(w.globalAlpha=this.style("opacity").numValue())}},y.Element.RenderedElementBase.prototype=new y.Element.ElementBase,y.Element.PathElementBase=function(w){this.base=y.Element.RenderedElementBase,this.base(w),this.path=function(w){return null!=w&&w.beginPath(),new y.BoundingBox},this.renderChildren=function(w){this.path(w),y.Mouse.checkPath(this,w),""!=w.fillStyle&&("inherit"!=this.style("fill-rule").valueOrDefault("inherit")?w.fill(this.style("fill-rule").value):w.fill()),""!=w.strokeStyle&&w.stroke();var t=this.getMarkers();if(null!=t){if(this.style("marker-start").isUrlDefinition()){var G=this.style("marker-start").getDefinition();if(!G)return;G.render(w,t[0][0],t[0][1],"start")}if(this.style("marker-mid").isUrlDefinition()){var G=this.style("marker-mid").getDefinition();if(!G)return;for(var A=1;A<t.length-1;A++)G.render(w,t[A][0],t[A][1],"mid",t[A-1][1])}if(this.style("marker-end").isUrlDefinition()){var G=this.style("marker-end").getDefinition();if(!G)return;G.render(w,t[t.length-1][0],t[t.length-1][1],"end")}}},this.getBoundingBox=function(){return this.path()},this.getMarkers=function(){return null}},y.Element.PathElementBase.prototype=new y.Element.RenderedElementBase,y.Element.svg=function(t){this.base=y.Element.RenderedElementBase,this.base(t),this.baseClearContext=this.clearContext,this.clearContext=function(w){this.baseClearContext(w),y.ViewPort.RemoveCurrent()},this.baseSetContext=this.setContext,this.setContext=function(t){t.strokeStyle="rgba(0,0,0,0)",t.lineCap="butt",t.lineJoin="miter",t.miterLimit=4,void 0!==t.font&&void 0!==w.getComputedStyle&&(t.font=w.getComputedStyle(t.canvas).getPropertyValue("font")),this.baseSetContext(t),this.attribute("x").hasValue()||(this.attribute("x",!0).value=0),this.attribute("y").hasValue()||(this.attribute("y",!0).value=0),t.translate(this.attribute("x").toPixels("x"),this.attribute("y").toPixels("y"));var G=y.ViewPort.width(),A=y.ViewPort.height(),I=0,R=0;if(this.attribute("width").hasValue()||(this.attribute("width",!0).value="100%"),this.attribute("height").hasValue()||(this.attribute("height",!0).value="100%"),void 0===this.root&&(G=this.attribute("width").toPixels("x"),A=this.attribute("height").toPixels("y"),this.attribute("refX").hasValue()&&this.attribute("refY").hasValue()&&(I=-this.attribute("refX").toPixels("x"),R=-this.attribute("refY").toPixels("y")),"visible"!=this.attribute("overflow").valueOrDefault("hidden")&&(t.beginPath(),t.moveTo(I,R),t.lineTo(G,R),t.lineTo(G,A),t.lineTo(I,A),t.closePath(),t.clip())),y.ViewPort.SetCurrent(G,A),this.attribute("viewBox").hasValue()){var _=y.ToNumberArray(this.attribute("viewBox").value),r=_[0],l=_[1];G=_[2],A=_[3],y.AspectRatio(t,this.attribute("preserveAspectRatio").value,y.ViewPort.width(),G,y.ViewPort.height(),A,r,l,this.attribute("refX").value,this.attribute("refY").value),y.ViewPort.RemoveCurrent(),y.ViewPort.SetCurrent(_[2],_[3])}else 0===I&&0===R||t.translate(I,R)}},y.Element.svg.prototype=new y.Element.RenderedElementBase,y.Element.rect=function(w){this.base=y.Element.PathElementBase,this.base(w),this.path=function(w){var t=this.attribute("x").toPixels("x"),G=this.attribute("y").toPixels("y"),A=this.attribute("width").toPixels("x"),I=this.attribute("height").toPixels("y"),R=this.attribute("rx").toPixels("x"),_=this.attribute("ry").toPixels("y");return this.attribute("rx").hasValue()&&!this.attribute("ry").hasValue()&&(_=R),this.attribute("ry").hasValue()&&!this.attribute("rx").hasValue()&&(R=_),R=Math.min(R,A/2),_=Math.min(_,I/2),null!=w&&(w.beginPath(),w.moveTo(t+R,G),w.lineTo(t+A-R,G),w.quadraticCurveTo(t+A,G,t+A,G+_),w.lineTo(t+A,G+I-_),w.quadraticCurveTo(t+A,G+I,t+A-R,G+I),w.lineTo(t+R,G+I),w.quadraticCurveTo(t,G+I,t,G+I-_),w.lineTo(t,G+_),w.quadraticCurveTo(t,G,t+R,G),w.closePath()),new y.BoundingBox(t,G,t+A,G+I)}},y.Element.rect.prototype=new y.Element.PathElementBase,y.Element.circle=function(w){this.base=y.Element.PathElementBase,this.base(w),this.path=function(w){var t=this.attribute("cx").toPixels("x"),G=this.attribute("cy").toPixels("y"),A=this.attribute("r").toPixels();return null!=w&&(w.beginPath(),w.arc(t,G,A,0,2*Math.PI,!0),w.closePath()),new y.BoundingBox(t-A,G-A,t+A,G+A)}},y.Element.circle.prototype=new y.Element.PathElementBase,y.Element.ellipse=function(w){this.base=y.Element.PathElementBase,this.base(w),this.path=function(w){var t=(Math.sqrt(2)-1)/3*4,G=this.attribute("rx").toPixels("x"),A=this.attribute("ry").toPixels("y"),I=this.attribute("cx").toPixels("x"),R=this.attribute("cy").toPixels("y");return null!=w&&(w.beginPath(),w.moveTo(I,R-A),w.bezierCurveTo(I+t*G,R-A,I+G,R-t*A,I+G,R),w.bezierCurveTo(I+G,R+t*A,I+t*G,R+A,I,R+A),w.bezierCurveTo(I-t*G,R+A,I-G,R+t*A,I-G,R),w.bezierCurveTo(I-G,R-t*A,I-t*G,R-A,I,R-A),w.closePath()),new y.BoundingBox(I-G,R-A,I+G,R+A)}},y.Element.ellipse.prototype=new y.Element.PathElementBase,y.Element.line=function(w){this.base=y.Element.PathElementBase,this.base(w),this.getPoints=function(){return[new y.Point(this.attribute("x1").toPixels("x"),this.attribute("y1").toPixels("y")),new y.Point(this.attribute("x2").toPixels("x"),this.attribute("y2").toPixels("y"))]},this.path=function(w){var t=this.getPoints();return null!=w&&(w.beginPath(),w.moveTo(t[0].x,t[0].y),w.lineTo(t[1].x,t[1].y)),new y.BoundingBox(t[0].x,t[0].y,t[1].x,t[1].y)},this.getMarkers=function(){var w=this.getPoints(),t=w[0].angleTo(w[1]);return[[w[0],t],[w[1],t]]}},y.Element.line.prototype=new y.Element.PathElementBase,y.Element.polyline=function(w){this.base=y.Element.PathElementBase,this.base(w),this.points=y.CreatePath(this.attribute("points").value),this.path=function(w){var t=new y.BoundingBox(this.points[0].x,this.points[0].y);null!=w&&(w.beginPath(),w.moveTo(this.points[0].x,this.points[0].y));for(var G=1;G<this.points.length;G++)t.addPoint(this.points[G].x,this.points[G].y),null!=w&&w.lineTo(this.points[G].x,this.points[G].y);return t},this.getMarkers=function(){for(var w=[],t=0;t<this.points.length-1;t++)w.push([this.points[t],this.points[t].angleTo(this.points[t+1])]);return w.length>0&&w.push([this.points[this.points.length-1],w[w.length-1][1]]),w}},y.Element.polyline.prototype=new y.Element.PathElementBase,y.Element.polygon=function(w){this.base=y.Element.polyline,this.base(w),this.basePath=this.path,this.path=function(w){var t=this.basePath(w);return null!=w&&(w.lineTo(this.points[0].x,this.points[0].y),w.closePath()),t}},y.Element.polygon.prototype=new y.Element.polyline,y.Element.path=function(w){this.base=y.Element.PathElementBase,this.base(w);var t=this.attribute("d").value;t=t.replace(/,/gm," ");for(var G=0;G<2;G++)t=t.replace(/([MmZzLlHhVvCcSsQqTtAa])([^\s])/gm,"$1 $2");t=t.replace(/([^\s])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2"),t=t.replace(/([0-9])([+\-])/gm,"$1 $2");for(var G=0;G<2;G++)t=t.replace(/(\.[0-9]*)(\.)/gm,"$1 $2");t=t.replace(/([Aa](\s+[0-9]+){3})\s+([01])\s*([01])/gm,"$1 $3 $4 "),t=y.compressSpaces(t),t=y.trim(t),this.PathParser=new function(w){this.tokens=w.split(" "),this.reset=function(){this.i=-1,this.command="",this.previousCommand="",this.start=new y.Point(0,0),this.control=new y.Point(0,0),this.current=new y.Point(0,0),this.points=[],this.angles=[]},this.isEnd=function(){return this.i>=this.tokens.length-1},this.isCommandOrEnd=function(){return!!this.isEnd()||null!=this.tokens[this.i+1].match(/^[A-Za-z]$/)},this.isRelativeCommand=function(){switch(this.command){case"m":case"l":case"h":case"v":case"c":case"s":case"q":case"t":case"a":case"z":return!0}return!1},this.getToken=function(){return this.i++,this.tokens[this.i]},this.getScalar=function(){return parseFloat(this.getToken())},this.nextCommand=function(){this.previousCommand=this.command,this.command=this.getToken()},this.getPoint=function(){var w=new y.Point(this.getScalar(),this.getScalar());return this.makeAbsolute(w)},this.getAsControlPoint=function(){var w=this.getPoint();return this.control=w,w},this.getAsCurrentPoint=function(){var w=this.getPoint();return this.current=w,w},this.getReflectedControlPoint=function(){return"c"!=this.previousCommand.toLowerCase()&&"s"!=this.previousCommand.toLowerCase()&&"q"!=this.previousCommand.toLowerCase()&&"t"!=this.previousCommand.toLowerCase()?this.current:new y.Point(2*this.current.x-this.control.x,2*this.current.y-this.control.y)},this.makeAbsolute=function(w){return this.isRelativeCommand()&&(w.x+=this.current.x,w.y+=this.current.y),w},this.addMarker=function(w,t,G){null!=G&&this.angles.length>0&&null==this.angles[this.angles.length-1]&&(this.angles[this.angles.length-1]=this.points[this.points.length-1].angleTo(G)),this.addMarkerAngle(w,null==t?null:t.angleTo(w))},this.addMarkerAngle=function(w,t){this.points.push(w),this.angles.push(t)},this.getMarkerPoints=function(){return this.points},this.getMarkerAngles=function(){for(var w=0;w<this.angles.length;w++)if(null==this.angles[w])for(var t=w+1;t<this.angles.length;t++)if(null!=this.angles[t]){this.angles[w]=this.angles[t];break}return this.angles}}(t),this.path=function(w){var t=this.PathParser;t.reset();var G=new y.BoundingBox;for(null!=w&&w.beginPath();!t.isEnd();)switch(t.nextCommand(),t.command){case"M":case"m":var A=t.getAsCurrentPoint();for(t.addMarker(A),G.addPoint(A.x,A.y),null!=w&&w.moveTo(A.x,A.y),t.start=t.current;!t.isCommandOrEnd();){var A=t.getAsCurrentPoint();t.addMarker(A,t.start),G.addPoint(A.x,A.y),null!=w&&w.lineTo(A.x,A.y)}break;case"L":case"l":for(;!t.isCommandOrEnd();){var I=t.current,A=t.getAsCurrentPoint();t.addMarker(A,I),G.addPoint(A.x,A.y),null!=w&&w.lineTo(A.x,A.y)}break;case"H":case"h":for(;!t.isCommandOrEnd();){var R=new y.Point((t.isRelativeCommand()?t.current.x:0)+t.getScalar(),t.current.y);t.addMarker(R,t.current),t.current=R,G.addPoint(t.current.x,t.current.y),null!=w&&w.lineTo(t.current.x,t.current.y)}break;case"V":case"v":for(;!t.isCommandOrEnd();){var R=new y.Point(t.current.x,(t.isRelativeCommand()?t.current.y:0)+t.getScalar());t.addMarker(R,t.current),t.current=R,G.addPoint(t.current.x,t.current.y),null!=w&&w.lineTo(t.current.x,t.current.y)}break;case"C":case"c":for(;!t.isCommandOrEnd();){var _=t.current,r=t.getPoint(),l=t.getAsControlPoint(),C=t.getAsCurrentPoint();t.addMarker(C,l,r),G.addBezierCurve(_.x,_.y,r.x,r.y,l.x,l.y,C.x,C.y),null!=w&&w.bezierCurveTo(r.x,r.y,l.x,l.y,C.x,C.y)}break;case"S":case"s":for(;!t.isCommandOrEnd();){var _=t.current,r=t.getReflectedControlPoint(),l=t.getAsControlPoint(),C=t.getAsCurrentPoint();t.addMarker(C,l,r),G.addBezierCurve(_.x,_.y,r.x,r.y,l.x,l.y,C.x,C.y),null!=w&&w.bezierCurveTo(r.x,r.y,l.x,l.y,C.x,C.y),t.previousCommand=t.command}break;case"Q":case"q":for(;!t.isCommandOrEnd();){var _=t.current,l=t.getAsControlPoint(),C=t.getAsCurrentPoint();t.addMarker(C,l,l),G.addQuadraticCurve(_.x,_.y,l.x,l.y,C.x,C.y),null!=w&&w.quadraticCurveTo(l.x,l.y,C.x,C.y)}break;case"T":case"t":for(;!t.isCommandOrEnd();){var _=t.current,l=t.getReflectedControlPoint();t.control=l;var C=t.getAsCurrentPoint();t.addMarker(C,l,l),G.addQuadraticCurve(_.x,_.y,l.x,l.y,C.x,C.y),null!=w&&w.quadraticCurveTo(l.x,l.y,C.x,C.y),t.previousCommand=t.command}break;case"A":case"a":for(;!t.isCommandOrEnd();){var _=t.current,V=t.getScalar(),q=t.getScalar(),k=t.getScalar()*(Math.PI/180),Z=t.getScalar(),z=t.getScalar(),C=t.getAsCurrentPoint(),x=new y.Point(Math.cos(k)*(_.x-C.x)/2+Math.sin(k)*(_.y-C.y)/2,-Math.sin(k)*(_.x-C.x)/2+Math.cos(k)*(_.y-C.y)/2),L=Math.pow(x.x,2)/Math.pow(V,2)+Math.pow(x.y,2)/Math.pow(q,2);if(L<1e-6)t.addMarker(C,_),G.addPoint(C.x,C.y),null!=w&&w.lineTo(C.x,C.y);else{L>1&&(V*=Math.sqrt(L),q*=Math.sqrt(L));var Q=(Z==z?-1:1)*Math.sqrt((Math.pow(V,2)*Math.pow(q,2)-Math.pow(V,2)*Math.pow(x.y,2)-Math.pow(q,2)*Math.pow(x.x,2))/(Math.pow(V,2)*Math.pow(x.y,2)+Math.pow(q,2)*Math.pow(x.x,2)));isNaN(Q)&&(Q=0);var J=new y.Point(Q*V*x.y/q,Q*-q*x.x/V),B=new y.Point((_.x+C.x)/2+Math.cos(k)*J.x-Math.sin(k)*J.y,(_.y+C.y)/2+Math.sin(k)*J.x+Math.cos(k)*J.y),n=function(w){return Math.sqrt(Math.pow(w[0],2)+Math.pow(w[1],2))},f=function(w,t){return(w[0]*t[0]+w[1]*t[1])/(n(w)*n(t))},i=function(w,t){return(w[0]*t[1]<w[1]*t[0]?-1:1)*Math.acos(f(w,t))},F=i([1,0],[(x.x-J.x)/V,(x.y-J.y)/q]),S=[(x.x-J.x)/V,(x.y-J.y)/q],N=[(-x.x-J.x)/V,(-x.y-J.y)/q],T=i(S,N);f(S,N)<=-1&&(T=Math.PI),f(S,N)>=1&&(T=0);var m=1-z?1:-1,U=F+m*(T/2),c=new y.Point(B.x+V*Math.cos(U),B.y+q*Math.sin(U));if(t.addMarkerAngle(c,U-m*Math.PI/2),t.addMarkerAngle(C,U-m*Math.PI),G.addPoint(C.x,C.y),null!=w){var f=V>q?V:q,v=V>q?1:V/q,E=V>q?q/V:1;w.translate(B.x,B.y),w.rotate(k),w.scale(v,E),w.arc(0,0,f,F,F+T,1-z),w.scale(1/v,1/E),w.rotate(-k),w.translate(-B.x,-B.y)}}}break;case"Z":case"z":null!=w&&w.closePath(),t.current=t.start}return G},this.getMarkers=function(){for(var w=this.PathParser.getMarkerPoints(),t=this.PathParser.getMarkerAngles(),G=[],A=0;A<w.length;A++)G.push([w[A],t[A]]);return G}},y.Element.path.prototype=new y.Element.PathElementBase,y.Element.pattern=function(w){this.base=y.Element.ElementBase,this.base(w),this.createPattern=function(w,t){var G=this.attribute("width").toPixels("x",!0),A=this.attribute("height").toPixels("y",!0),I=new y.Element.svg;I.attributes.viewBox=new y.Property("viewBox",this.attribute("viewBox").value),I.attributes.width=new y.Property("width",G+"px"),I.attributes.height=new y.Property("height",A+"px"),I.attributes.transform=new y.Property("transform",this.attribute("patternTransform").value),I.children=this.children;var R=document.createElement("canvas");R.width=G,R.height=A;var _=R.getContext("2d");this.attribute("x").hasValue()&&this.attribute("y").hasValue()&&_.translate(this.attribute("x").toPixels("x",!0),this.attribute("y").toPixels("y",!0));for(var r=-1;r<=1;r++)for(var l=-1;l<=1;l++)_.save(),I.attributes.x=new y.Property("x",r*R.width),I.attributes.y=new y.Property("y",l*R.height),I.render(_),_.restore();return w.createPattern(R,"repeat")}},y.Element.pattern.prototype=new y.Element.ElementBase,y.Element.marker=function(w){this.base=y.Element.ElementBase,this.base(w),this.baseRender=this.render,this.render=function(w,t,A,I,R){if(R!==G){A=(A+R)/2;var _=(A-R)%(2*Math.PI);Math.abs(_)>Math.PI&&(A+=Math.PI)}if(t){w.save(),w.translate(t.x,t.y);var r=this.attribute("orient").valueOrDefault("auto")||"";"auto"===r?w.rotate(A):"auto-start-reverse"===r?w.rotate("start"===I?A+Math.PI:A):r&&w.rotate(new y.Property("angle",r).toRadians()),"strokeWidth"==this.attribute("markerUnits").valueOrDefault("strokeWidth")&&w.scale(w.lineWidth,w.lineWidth);var l=new y.Element.svg;l.attributes.viewBox=new y.Property("viewBox",this.attribute("viewBox").value),l.attributes.refX=new y.Property("refX",this.attribute("refX").value),l.attributes.refY=new y.Property("refY",this.attribute("refY").value),l.attributes.width=new y.Property("width",this.attribute("markerWidth").value),l.attributes.height=new y.Property("height",this.attribute("markerHeight").value),l.attributes.fill=new y.Property("fill",this.attribute("fill").valueOrDefault("black")),l.attributes.stroke=new y.Property("stroke",this.attribute("stroke").valueOrDefault("none")),l.children=this.children,l.render(w),w.restore()}}},y.Element.marker.prototype=new y.Element.ElementBase,y.Element.defs=function(w){this.base=y.Element.ElementBase,this.base(w),this.render=function(w){}},y.Element.defs.prototype=new y.Element.ElementBase,y.Element.GradientBase=function(w){this.base=y.Element.ElementBase,this.base(w),this.stops=[];for(var t=0;t<this.children.length;t++){var G=this.children[t];"stop"==G.type&&this.stops.push(G)}this.getGradient=function(){},this.gradientUnits=function(){return this.attribute("gradientUnits").valueOrDefault("objectBoundingBox")},this.attributesToInherit=["gradientUnits"],this.inheritStopContainer=function(w){for(var t=0;t<this.attributesToInherit.length;t++){var G=this.attributesToInherit[t];!this.attribute(G).hasValue()&&w.attribute(G).hasValue()&&(this.attribute(G,!0).value=w.attribute(G).value)}},this.createGradient=function(w,t,G){var A=this;this.getHrefAttribute().hasValue()&&(A=this.getHrefAttribute().getDefinition(),this.inheritStopContainer(A));var I=function(w){if(G.hasValue()){return new y.Property("color",w).addOpacity(G).value}return w},R=this.getGradient(w,t);if(null==R)return I(A.stops[A.stops.length-1].color);for(var _=0;_<A.stops.length;_++)R.addColorStop(A.stops[_].offset,I(A.stops[_].color));if(this.attribute("gradientTransform").hasValue()){var r=y.ViewPort.viewPorts[0],l=new y.Element.rect;l.attributes.x=new y.Property("x",-y.MAX_VIRTUAL_PIXELS/3),l.attributes.y=new y.Property("y",-y.MAX_VIRTUAL_PIXELS/3),l.attributes.width=new y.Property("width",y.MAX_VIRTUAL_PIXELS),l.attributes.height=new y.Property("height",y.MAX_VIRTUAL_PIXELS);var C=new y.Element.g;C.attributes.transform=new y.Property("transform",this.attribute("gradientTransform").value),C.children=[l];var V=new y.Element.svg;V.attributes.x=new y.Property("x",0),V.attributes.y=new y.Property("y",0),V.attributes.width=new y.Property("width",r.width),V.attributes.height=new y.Property("height",r.height),V.children=[C];var q=document.createElement("canvas");q.width=r.width,q.height=r.height;var k=q.getContext("2d");k.fillStyle=R,V.render(k);var Z=k.createPattern(q,"no-repeat");return Z.gradient=R,Z.gradientTransform=this.attribute("gradientTransform").value,Z.trans=new y.Transform(this.attribute("gradientTransform").value).getMatrix(),Z}return R}},y.Element.GradientBase.prototype=new y.Element.ElementBase,y.Element.linearGradient=function(w){this.base=y.Element.GradientBase,this.base(w),this.attributesToInherit.push("x1"),this.attributesToInherit.push("y1"),this.attributesToInherit.push("x2"),this.attributesToInherit.push("y2"),this.getGradient=function(w,t){var G="objectBoundingBox"==this.gradientUnits()?t.getBoundingBox(w):null;this.attribute("x1").hasValue()||this.attribute("y1").hasValue()||this.attribute("x2").hasValue()||this.attribute("y2").hasValue()||(this.attribute("x1",!0).value=0,this.attribute("y1",!0).value=0,this.attribute("x2",!0).value=1,this.attribute("y2",!0).value=0);var A="objectBoundingBox"==this.gradientUnits()?G.x()+G.width()*this.attribute("x1").numValue():this.attribute("x1").toPixels("x"),I="objectBoundingBox"==this.gradientUnits()?G.y()+G.height()*this.attribute("y1").numValue():this.attribute("y1").toPixels("y"),R="objectBoundingBox"==this.gradientUnits()?G.x()+G.width()*this.attribute("x2").numValue():this.attribute("x2").toPixels("x"),_="objectBoundingBox"==this.gradientUnits()?G.y()+G.height()*this.attribute("y2").numValue():this.attribute("y2").toPixels("y");return A==R&&I==_?null:w.createLinearGradient(A,I,R,_)}},y.Element.linearGradient.prototype=new y.Element.GradientBase,y.Element.radialGradient=function(w){this.base=y.Element.GradientBase,this.base(w),this.attributesToInherit.push("cx"),this.attributesToInherit.push("cy"),this.attributesToInherit.push("r"),this.attributesToInherit.push("fx"),this.attributesToInherit.push("fy"),this.getGradient=function(w,t){var G=t.getBoundingBox();this.attribute("cx").hasValue()||(this.attribute("cx",!0).value="50%"),this.attribute("cy").hasValue()||(this.attribute("cy",!0).value="50%"),this.attribute("r").hasValue()||(this.attribute("r",!0).value="50%")
;var A="objectBoundingBox"==this.gradientUnits()?G.x()+G.width()*this.attribute("cx").numValue():this.attribute("cx").toPixels("x"),I="objectBoundingBox"==this.gradientUnits()?G.y()+G.height()*this.attribute("cy").numValue():this.attribute("cy").toPixels("y"),R=A,_=I;this.attribute("fx").hasValue()&&(R="objectBoundingBox"==this.gradientUnits()?G.x()+G.width()*this.attribute("fx").numValue():this.attribute("fx").toPixels("x")),this.attribute("fy").hasValue()&&(_="objectBoundingBox"==this.gradientUnits()?G.y()+G.height()*this.attribute("fy").numValue():this.attribute("fy").toPixels("y"));var r="objectBoundingBox"==this.gradientUnits()?(G.width()+G.height())/2*this.attribute("r").numValue():this.attribute("r").toPixels();return w.createRadialGradient(R,_,0,A,I,r)}},y.Element.radialGradient.prototype=new y.Element.GradientBase,y.Element.stop=function(w){this.base=y.Element.ElementBase,this.base(w),this.offset=this.attribute("offset").numValue(),this.offset<0&&(this.offset=0),this.offset>1&&(this.offset=1);var t=this.style("stop-color",!0);""===t.value&&(t.value="#000"),this.style("stop-opacity").hasValue()&&(t=t.addOpacity(this.style("stop-opacity"))),this.color=t.value},y.Element.stop.prototype=new y.Element.ElementBase,y.Element.AnimateBase=function(w){this.base=y.Element.ElementBase,this.base(w),y.Animations.push(this),this.duration=0,this.begin=this.attribute("begin").toMilliseconds(),this.maxDuration=this.begin+this.attribute("dur").toMilliseconds(),this.getProperty=function(){var w=this.attribute("attributeType").value,t=this.attribute("attributeName").value;return"CSS"==w?this.parent.style(t,!0):this.parent.attribute(t,!0)},this.initialValue=null,this.initialUnits="",this.removed=!1,this.calcValue=function(){return""},this.update=function(w){if(null==this.initialValue&&(this.initialValue=this.getProperty().value,this.initialUnits=this.getProperty().getUnits()),this.duration>this.maxDuration){if("indefinite"==this.attribute("repeatCount").value||"indefinite"==this.attribute("repeatDur").value)this.duration=0;else if("freeze"!=this.attribute("fill").valueOrDefault("remove")||this.frozen){if("remove"==this.attribute("fill").valueOrDefault("remove")&&!this.removed)return this.removed=!0,this.getProperty().value=this.parent.animationFrozen?this.parent.animationFrozenValue:this.initialValue,!0}else this.frozen=!0,this.parent.animationFrozen=!0,this.parent.animationFrozenValue=this.getProperty().value;return!1}this.duration=this.duration+w;var t=!1;if(this.begin<this.duration){var G=this.calcValue();if(this.attribute("type").hasValue()){G=this.attribute("type").value+"("+G+")"}this.getProperty().value=G,t=!0}return t},this.from=this.attribute("from"),this.to=this.attribute("to"),this.values=this.attribute("values"),this.values.hasValue()&&(this.values.value=this.values.value.split(";")),this.progress=function(){var w={progress:(this.duration-this.begin)/(this.maxDuration-this.begin)};if(this.values.hasValue()){var t=w.progress*(this.values.value.length-1),G=Math.floor(t),A=Math.ceil(t);w.from=new y.Property("from",parseFloat(this.values.value[G])),w.to=new y.Property("to",parseFloat(this.values.value[A])),w.progress=(t-G)/(A-G)}else w.from=this.from,w.to=this.to;return w}},y.Element.AnimateBase.prototype=new y.Element.ElementBase,y.Element.animate=function(w){this.base=y.Element.AnimateBase,this.base(w),this.calcValue=function(){var w=this.progress();return w.from.numValue()+(w.to.numValue()-w.from.numValue())*w.progress+this.initialUnits}},y.Element.animate.prototype=new y.Element.AnimateBase,y.Element.animateColor=function(w){this.base=y.Element.AnimateBase,this.base(w),this.calcValue=function(){var w=this.progress(),G=new t(w.from.value),A=new t(w.to.value);if(G.ok&&A.ok){var I=G.r+(A.r-G.r)*w.progress,R=G.g+(A.g-G.g)*w.progress,_=G.b+(A.b-G.b)*w.progress;return"rgb("+parseInt(I,10)+","+parseInt(R,10)+","+parseInt(_,10)+")"}return this.attribute("from").value}},y.Element.animateColor.prototype=new y.Element.AnimateBase,y.Element.animateTransform=function(w){this.base=y.Element.AnimateBase,this.base(w),this.calcValue=function(){for(var w=this.progress(),t=y.ToNumberArray(w.from.value),G=y.ToNumberArray(w.to.value),A="",I=0;I<t.length;I++)A+=t[I]+(G[I]-t[I])*w.progress+" ";return A}},y.Element.animateTransform.prototype=new y.Element.animate,y.Element.font=function(w){this.base=y.Element.ElementBase,this.base(w),this.horizAdvX=this.attribute("horiz-adv-x").numValue(),this.isRTL=!1,this.isArabic=!1,this.fontFace=null,this.missingGlyph=null,this.glyphs=[];for(var t=0;t<this.children.length;t++){var G=this.children[t];"font-face"==G.type?(this.fontFace=G,G.style("font-family").hasValue()&&(y.Definitions[G.style("font-family").value]=this)):"missing-glyph"==G.type?this.missingGlyph=G:"glyph"==G.type&&(""!=G.arabicForm?(this.isRTL=!0,this.isArabic=!0,void 0===this.glyphs[G.unicode]&&(this.glyphs[G.unicode]=[]),this.glyphs[G.unicode][G.arabicForm]=G):this.glyphs[G.unicode]=G)}},y.Element.font.prototype=new y.Element.ElementBase,y.Element.fontface=function(w){this.base=y.Element.ElementBase,this.base(w),this.ascent=this.attribute("ascent").value,this.descent=this.attribute("descent").value,this.unitsPerEm=this.attribute("units-per-em").numValue()},y.Element.fontface.prototype=new y.Element.ElementBase,y.Element.missingglyph=function(w){this.base=y.Element.path,this.base(w),this.horizAdvX=0},y.Element.missingglyph.prototype=new y.Element.path,y.Element.glyph=function(w){this.base=y.Element.path,this.base(w),this.horizAdvX=this.attribute("horiz-adv-x").numValue(),this.unicode=this.attribute("unicode").value,this.arabicForm=this.attribute("arabic-form").value},y.Element.glyph.prototype=new y.Element.path,y.Element.text=function(w){this.captureTextNodes=!0,this.base=y.Element.RenderedElementBase,this.base(w),this.baseSetContext=this.setContext,this.setContext=function(w){this.baseSetContext(w);var t=this.style("dominant-baseline").toTextBaseline();null==t&&(t=this.style("alignment-baseline").toTextBaseline()),null!=t&&(w.textBaseline=t)},this.getBoundingBox=function(){var w=this.attribute("x").toPixels("x"),t=this.attribute("y").toPixels("y"),G=this.parent.style("font-size").numValueOrDefault(y.Font.Parse(y.ctx.font).fontSize);return new y.BoundingBox(w,t-G,w+Math.floor(2*G/3)*this.children[0].getText().length,t)},this.renderChildren=function(w){this.x=this.attribute("x").toPixels("x"),this.y=this.attribute("y").toPixels("y"),this.attribute("dx").hasValue()&&(this.x+=this.attribute("dx").toPixels("x")),this.attribute("dy").hasValue()&&(this.y+=this.attribute("dy").toPixels("y")),this.x+=this.getAnchorDelta(w,this,0);for(var t=0;t<this.children.length;t++)this.renderChild(w,this,this,t)},this.getAnchorDelta=function(w,t,G){var A=this.style("text-anchor").valueOrDefault("start");if("start"!=A){for(var I=0,R=G;R<t.children.length;R++){var _=t.children[R];if(R>G&&_.attribute("x").hasValue())break;_.measureTextRecursive&&(I+=_.measureTextRecursive(w))}return-1*("end"==A?I:I/2)}return 0},this.renderChild=function(w,t,G,A){var I=G.children[A];I.attribute("x").hasValue()?(I.x=I.attribute("x").toPixels("x")+t.getAnchorDelta(w,G,A),I.attribute("dx").hasValue()&&(I.x+=I.attribute("dx").toPixels("x"))):(I.attribute("dx").hasValue()&&(t.x+=I.attribute("dx").toPixels("x")),I.x=t.x),t.x=I.x+(I.measureText?I.measureText(w):0),I.attribute("y").hasValue()?(I.y=I.attribute("y").toPixels("y"),I.attribute("dy").hasValue()&&(I.y+=I.attribute("dy").toPixels("y"))):(I.attribute("dy").hasValue()&&(t.y+=I.attribute("dy").toPixels("y")),I.y=t.y),t.y=I.y,I.render(w);for(var A=0;A<I.children.length;A++)t.renderChild(w,t,I,A)}},y.Element.text.prototype=new y.Element.RenderedElementBase,y.Element.TextElementBase=function(w){this.base=y.Element.RenderedElementBase,this.base(w),this.getGlyph=function(w,t,G){var A=t[G],I=null;if(w.isArabic){var R="isolated";(0==G||" "==t[G-1])&&G<t.length-2&&" "!=t[G+1]&&(R="terminal"),G>0&&" "!=t[G-1]&&G<t.length-2&&" "!=t[G+1]&&(R="medial"),G>0&&" "!=t[G-1]&&(G==t.length-1||" "==t[G+1])&&(R="initial"),void 0!==w.glyphs[A]&&null==(I=w.glyphs[A][R])&&"glyph"==w.glyphs[A].type&&(I=w.glyphs[A])}else I=w.glyphs[A];return null==I&&(I=w.missingGlyph),I},this.renderChildren=function(w){var t=this.parent.style("font-family").getDefinition();if(null==t)""!=w.fillStyle&&w.fillText(y.compressSpaces(this.getText()),this.x,this.y),""!=w.strokeStyle&&w.strokeText(y.compressSpaces(this.getText()),this.x,this.y);else{var G=this.parent.style("font-size").numValueOrDefault(y.Font.Parse(y.ctx.font).fontSize),A=this.parent.style("font-style").valueOrDefault(y.Font.Parse(y.ctx.font).fontStyle),I=this.getText();t.isRTL&&(I=I.split("").reverse().join(""));for(var R=y.ToNumberArray(this.parent.attribute("dx").value),_=0;_<I.length;_++){var r=this.getGlyph(t,I,_),l=G/t.fontFace.unitsPerEm;w.translate(this.x,this.y),w.scale(l,-l);var C=w.lineWidth;w.lineWidth=w.lineWidth*t.fontFace.unitsPerEm/G,"italic"==A&&w.transform(1,0,.4,1,0,0),r.render(w),"italic"==A&&w.transform(1,0,-.4,1,0,0),w.lineWidth=C,w.scale(1/l,-1/l),w.translate(-this.x,-this.y),this.x+=G*(r.horizAdvX||t.horizAdvX)/t.fontFace.unitsPerEm,void 0===R[_]||isNaN(R[_])||(this.x+=R[_])}}},this.getText=function(){},this.measureTextRecursive=function(w){for(var t=this.measureText(w),G=0;G<this.children.length;G++)t+=this.children[G].measureTextRecursive(w);return t},this.measureText=function(w){var t=this.parent.style("font-family").getDefinition();if(null!=t){var G=this.parent.style("font-size").numValueOrDefault(y.Font.Parse(y.ctx.font).fontSize),A=0,I=this.getText();t.isRTL&&(I=I.split("").reverse().join(""));for(var R=y.ToNumberArray(this.parent.attribute("dx").value),_=0;_<I.length;_++){A+=(this.getGlyph(t,I,_).horizAdvX||t.horizAdvX)*G/t.fontFace.unitsPerEm,void 0===R[_]||isNaN(R[_])||(A+=R[_])}return A}var r=y.compressSpaces(this.getText());if(!w.measureText)return 10*r.length;w.save(),this.setContext(w,!0);var l=w.measureText(r).width;return w.restore(),l},this.getBoundingBox=function(w){var t=this.parent.style("font-size").numValueOrDefault(y.Font.Parse(y.ctx.font).fontSize);return new y.BoundingBox(this.x,this.y-t,this.x+this.measureText(w),this.y)}},y.Element.TextElementBase.prototype=new y.Element.RenderedElementBase,y.Element.tspan=function(w){this.captureTextNodes=!0,this.base=y.Element.TextElementBase,this.base(w),this.text=y.compressSpaces(w.value||w.text||w.textContent||""),this.getText=function(){return this.children.length>0?"":this.text}},y.Element.tspan.prototype=new y.Element.TextElementBase,y.Element.tref=function(w){this.base=y.Element.TextElementBase,this.base(w),this.getText=function(){var w=this.getHrefAttribute().getDefinition();if(null!=w)return w.children[0].getText()}},y.Element.tref.prototype=new y.Element.TextElementBase,y.Element.a=function(t){this.base=y.Element.TextElementBase,this.base(t),this.hasText=t.childNodes.length>0;for(var G=0;G<t.childNodes.length;G++)3!=t.childNodes[G].nodeType&&(this.hasText=!1);this.text=this.hasText?t.childNodes[0].value:"",this.getText=function(){return this.text},this.baseRenderChildren=this.renderChildren,this.renderChildren=function(w){if(this.hasText){this.baseRenderChildren(w);var t=new y.Property("fontSize",y.Font.Parse(y.ctx.font).fontSize);y.Mouse.checkBoundingBox(this,new y.BoundingBox(this.x,this.y-t.toPixels("y"),this.x+this.measureText(w),this.y))}else if(this.children.length>0){var G=new y.Element.g;G.children=this.children,G.parent=this,G.render(w)}},this.onclick=function(){w.open(this.getHrefAttribute().value)},this.onmousemove=function(){y.ctx.canvas.style.cursor="pointer"}},y.Element.a.prototype=new y.Element.TextElementBase,y.Element.image=function(w){this.base=y.Element.RenderedElementBase,this.base(w);var t=this.getHrefAttribute().value;if(""!=t){var G=t.match(/\.svg$/);if(y.Images.push(this),this.loaded=!1,G)this.img=y.ajax(t),this.loaded=!0;else{this.img=document.createElement("img"),1==y.opts.useCORS&&(this.img.crossOrigin="Anonymous");var A=this;this.img.onload=function(){A.loaded=!0},this.img.onerror=function(){y.log('ERROR: image "'+t+'" not found'),A.loaded=!0},this.img.src=t}this.renderChildren=function(w){var t=this.attribute("x").toPixels("x"),A=this.attribute("y").toPixels("y"),I=this.attribute("width").toPixels("x"),R=this.attribute("height").toPixels("y");0!=I&&0!=R&&(w.save(),G?w.drawSvg(this.img,t,A,I,R):(w.translate(t,A),y.AspectRatio(w,this.attribute("preserveAspectRatio").value,I,this.img.width,R,this.img.height,0,0),w.drawImage(this.img,0,0)),w.restore())},this.getBoundingBox=function(){var w=this.attribute("x").toPixels("x"),t=this.attribute("y").toPixels("y"),G=this.attribute("width").toPixels("x"),A=this.attribute("height").toPixels("y");return new y.BoundingBox(w,t,w+G,t+A)}}},y.Element.image.prototype=new y.Element.RenderedElementBase,y.Element.g=function(w){this.base=y.Element.RenderedElementBase,this.base(w),this.getBoundingBox=function(){for(var w=new y.BoundingBox,t=0;t<this.children.length;t++)w.addBoundingBox(this.children[t].getBoundingBox());return w}},y.Element.g.prototype=new y.Element.RenderedElementBase,y.Element.symbol=function(w){this.base=y.Element.RenderedElementBase,this.base(w),this.render=function(w){}},y.Element.symbol.prototype=new y.Element.RenderedElementBase,y.Element.switch=function(w){this.base=y.Element.RenderedElementBase,this.base(w)},y.Element.switch.prototype=new y.Element.symbol,y.Element.style=function(w){this.base=y.Element.ElementBase,this.base(w);for(var t="",G=0;G<w.childNodes.length;G++)t+=w.childNodes[G].data;t=t.replace(/(\/\*([^*]|[\r\n]|(\*+([^*\/]|[\r\n])))*\*+\/)|(^[\s]*\/\/.*)/gm,""),t=y.compressSpaces(t);for(var A=t.split("}"),G=0;G<A.length;G++)if(""!=y.trim(A[G]))for(var I=A[G].split("{"),_=I[0].split(","),r=I[1].split(";"),l=0;l<_.length;l++){var C=y.trim(_[l]);if(""!=C){for(var V=y.Styles[C]||{},q=0;q<r.length;q++){var k=r[q].indexOf(":"),Z=r[q].substr(0,k),z=r[q].substr(k+1,r[q].length-k);null!=Z&&null!=z&&(V[y.trim(Z)]=new y.Property(y.trim(Z),y.trim(z)))}if(y.Styles[C]=V,y.StylesSpecificity[C]=R(C),"@font-face"==C)for(var x=V["font-family"].value.replace(/"/g,""),L=V.src.value.split(","),Q=0;Q<L.length;Q++)if(L[Q].indexOf('format("svg")')>0)for(var J=L[Q].indexOf("url"),B=L[Q].indexOf(")",J),n=L[Q].substr(J+5,B-J-6),f=y.parseXml(y.ajax(n)),i=f.getElementsByTagName("font"),F=0;F<i.length;F++){var S=y.CreateElement(i[F]);y.Definitions[x]=S}}}},y.Element.style.prototype=new y.Element.ElementBase,y.Element.use=function(w){this.base=y.Element.RenderedElementBase,this.base(w),this.baseSetContext=this.setContext,this.setContext=function(w){this.baseSetContext(w),this.attribute("x").hasValue()&&w.translate(this.attribute("x").toPixels("x"),0),this.attribute("y").hasValue()&&w.translate(0,this.attribute("y").toPixels("y"))};var t=this.getHrefAttribute().getDefinition();this.path=function(w){null!=t&&t.path(w)},this.getBoundingBox=function(){if(null!=t)return t.getBoundingBox()},this.renderChildren=function(w){if(null!=t){var G=t;"symbol"==t.type&&(G=new y.Element.svg,G.type="svg",G.attributes.viewBox=new y.Property("viewBox",t.attribute("viewBox").value),G.attributes.preserveAspectRatio=new y.Property("preserveAspectRatio",t.attribute("preserveAspectRatio").value),G.attributes.overflow=new y.Property("overflow",t.attribute("overflow").value),G.children=t.children),"svg"==G.type&&(this.attribute("width").hasValue()&&(G.attributes.width=new y.Property("width",this.attribute("width").value)),this.attribute("height").hasValue()&&(G.attributes.height=new y.Property("height",this.attribute("height").value)));var A=G.parent;G.parent=null,G.render(w),G.parent=A}}},y.Element.use.prototype=new y.Element.RenderedElementBase,y.Element.mask=function(w){this.base=y.Element.ElementBase,this.base(w),this.apply=function(w,t){var G=this.attribute("x").toPixels("x"),A=this.attribute("y").toPixels("y"),I=this.attribute("width").toPixels("x"),R=this.attribute("height").toPixels("y"),_=1;if(0==I&&0==R){for(var r=new y.BoundingBox,l=0;l<this.children.length;l++)this.children[l].getBoundingBox&&r.addBoundingBox(this.children[l].getBoundingBox());G=Math.floor(r.x1),A=Math.floor(r.y1),I=Math.floor(r.width()),R=Math.floor(r.height())}if(I&&R){var C=G+I,V=A+R;(C>2048||V>2048)&&(_=Math.min(2048/C,2048/V),C*=_,V*=_);var q=t.style("mask").value;t.style("mask").value="";var k=document.createElement("canvas");k.width=C,k.height=V;var Z=k.getContext("2d");if(Z.save(),1!==_&&Z.scale(_,_),this.renderChildren(Z),Z.restore(),k.width&&k.height){var z=document.createElement("canvas");z.width=C,z.height=V;var x=z.getContext("2d");x.save(),1!==_&&x.scale(_,_),t.render(x),x.restore(),x.globalCompositeOperation="destination-in",x.fillStyle=Z.createPattern(k,"no-repeat"),x.fillRect(0,0,C,V),w.save(),1!==_&&w.scale(1/_,1/_),w.fillStyle=x.createPattern(z,"no-repeat"),w.fillRect(0,0,C,V),w.restore(),t.style("mask").value=q}}},this.render=function(w){}},y.Element.mask.prototype=new y.Element.ElementBase,y.Element.clipPath=function(w){this.base=y.Element.ElementBase,this.base(w),this.apply=function(w){var t=w.beginPath;w.beginPath=function(){};var G=w.closePath;w.closePath=function(){};var A;this.style("transform",!1,!0).hasValue()&&(A=new y.Transform(this.style("transform",!1,!0).value),A.apply(w)),t.call(w);for(var I=0;I<this.children.length;I++){var R=this.children[I];if(void 0!==R.path){var _=null;R.style("transform",!1,!0).hasValue()&&(_=new y.Transform(R.style("transform",!1,!0).value),_.apply(w)),R.path(w),w.closePath=G,_&&_.unapply(w)}}G.call(w),w.clip(),A&&A.unapply(w),w.beginPath=t,w.closePath=G},this.render=function(w){}},y.Element.clipPath.prototype=new y.Element.ElementBase,y.Element.filter=function(w){this.base=y.Element.ElementBase,this.base(w),this.apply=function(w,t){return},this.render=function(w){}},y.Element.filter.prototype=new y.Element.ElementBase,y.Element.feMorphology=function(w){this.base=y.Element.ElementBase,this.base(w),this.apply=function(w,t,G,A,I){}},y.Element.feMorphology.prototype=new y.Element.ElementBase,y.Element.feComposite=function(w){this.base=y.Element.ElementBase,this.base(w),this.apply=function(w,t,G,A,I){}},y.Element.feComposite.prototype=new y.Element.ElementBase,y.Element.feColorMatrix=function(w){function t(w,t,G,A,I,R){return w[G*A*4+4*t+R]}function G(w,t,G,A,I,R,_){w[G*A*4+4*t+R]=_}function A(w,t){var G=I[w];return G*(G<0?t-255:t)}this.base=y.Element.ElementBase,this.base(w);var I=y.ToNumberArray(this.attribute("values").value);switch(this.attribute("type").valueOrDefault("matrix")){case"saturate":var R=I[0];I=[.213+.787*R,.715-.715*R,.072-.072*R,0,0,.213-.213*R,.715+.285*R,.072-.072*R,0,0,.213-.213*R,.715-.715*R,.072+.928*R,0,0,0,0,0,1,0,0,0,0,0,1];break;case"hueRotate":var _=I[0]*Math.PI/180,r=function(w,t,G){return w+Math.cos(_)*t+Math.sin(_)*G};I=[r(.213,.787,-.213),r(.715,-.715,-.715),r(.072,-.072,.928),0,0,r(.213,-.213,.143),r(.715,.285,.14),r(.072,-.072,-.283),0,0,r(.213,-.213,-.787),r(.715,-.715,.715),r(.072,.928,.072),0,0,0,0,0,1,0,0,0,0,0,1];break;case"luminanceToAlpha":I=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2125,.7154,.0721,0,0,0,0,0,0,1]}this.apply=function(w,I,R,_,r){if(_&&r){for(var y=w.getImageData(0,0,_,r),R=0;R<r;R++)for(var I=0;I<_;I++){var l=t(y.data,I,R,_,r,0),C=t(y.data,I,R,_,r,1),V=t(y.data,I,R,_,r,2),q=t(y.data,I,R,_,r,3);G(y.data,I,R,_,r,0,A(0,l)+A(1,C)+A(2,V)+A(3,q)+A(4,1)),G(y.data,I,R,_,r,1,A(5,l)+A(6,C)+A(7,V)+A(8,q)+A(9,1)),G(y.data,I,R,_,r,2,A(10,l)+A(11,C)+A(12,V)+A(13,q)+A(14,1)),G(y.data,I,R,_,r,3,A(15,l)+A(16,C)+A(17,V)+A(18,q)+A(19,1))}w.clearRect(0,0,_,r),w.putImageData(y,0,0)}}},y.Element.feColorMatrix.prototype=new y.Element.ElementBase,y.Element.feGaussianBlur=function(w){this.base=y.Element.ElementBase,this.base(w),this.blurRadius=Math.floor(this.attribute("stdDeviation").numValue()),this.extraFilterDistance=this.blurRadius,this.apply=function(w,t,G,A,R){if(void 0===I.canvasRGBA)return void y.log("ERROR: StackBlur.js must be included for blur to work");w.canvas.id=y.UniqueId(),w.canvas.style.display="none",document.body.appendChild(w.canvas),I.canvasRGBA(w.canvas.id,t,G,A,R,this.blurRadius),document.body.removeChild(w.canvas)}},y.Element.feGaussianBlur.prototype=new y.Element.ElementBase,y.Element.title=function(w){},y.Element.title.prototype=new y.Element.ElementBase,y.Element.desc=function(w){},y.Element.desc.prototype=new y.Element.ElementBase,y.Element.MISSING=function(w){y.log("ERROR: Element '"+w.nodeName+"' not yet implemented.")},y.Element.MISSING.prototype=new y.Element.ElementBase,y.CreateElement=function(w){var t=w.nodeName.replace(/^[^:]+:/,"");t=t.replace(/\-/g,"");var G=null;return G=void 0!==y.Element[t]?new y.Element[t](w):new y.Element.MISSING(w),G.type=w.nodeName,G},y.load=function(w,t){y.loadXml(w,y.ajax(t))},y.loadXml=function(w,t){y.loadXmlDoc(w,y.parseXml(t))},y.loadXmlDoc=function(t,G){y.init(t);var A=function(G){for(var A=t.canvas;A;)G.x-=A.offsetLeft,G.y-=A.offsetTop,A=A.offsetParent;return w.scrollX&&(G.x+=w.scrollX),w.scrollY&&(G.y+=w.scrollY),G};1!=y.opts.ignoreMouse&&(t.canvas.onclick=function(w){var t=A(new y.Point(null!=w?w.clientX:event.clientX,null!=w?w.clientY:event.clientY));y.Mouse.onclick(t.x,t.y)},t.canvas.onmousemove=function(w){var t=A(new y.Point(null!=w?w.clientX:event.clientX,null!=w?w.clientY:event.clientY));y.Mouse.onmousemove(t.x,t.y)});var I=y.CreateElement(G.documentElement);I.root=!0,I.addStylesFromStyleDefinition();var R=!0,_=function(){var w=!1;t.canvas.parentElement||(w=!0,document.body.appendChild(t.canvas)),y.ViewPort.Clear(),t.canvas.parentNode&&y.ViewPort.SetCurrent(t.canvas.parentNode.clientWidth,t.canvas.parentNode.clientHeight),1!=y.opts.ignoreDimensions&&(I.style("width").hasValue()&&(t.canvas.width=I.style("width").toPixels("x"),t.canvas.style.width=t.canvas.width+"px"),I.style("height").hasValue()&&(t.canvas.height=I.style("height").toPixels("y"),t.canvas.style.height=t.canvas.height+"px"));var A=t.canvas.clientWidth||t.canvas.width,_=t.canvas.clientHeight||t.canvas.height;if(1==y.opts.ignoreDimensions&&I.style("width").hasValue()&&I.style("height").hasValue()&&(A=I.style("width").toPixels("x"),_=I.style("height").toPixels("y")),y.ViewPort.SetCurrent(A,_),null!=y.opts.offsetX&&(I.attribute("x",!0).value=y.opts.offsetX),null!=y.opts.offsetY&&(I.attribute("y",!0).value=y.opts.offsetY),null!=y.opts.scaleWidth||null!=y.opts.scaleHeight){var r=null,l=null,C=y.ToNumberArray(I.attribute("viewBox").value);null!=y.opts.scaleWidth&&(I.attribute("width").hasValue()?r=I.attribute("width").toPixels("x")/y.opts.scaleWidth:isNaN(C[2])||(r=C[2]/y.opts.scaleWidth)),null!=y.opts.scaleHeight&&(I.attribute("height").hasValue()?l=I.attribute("height").toPixels("y")/y.opts.scaleHeight:isNaN(C[3])||(l=C[3]/y.opts.scaleHeight)),null==r&&(r=l),null==l&&(l=r),I.attribute("width",!0).value=y.opts.scaleWidth,I.attribute("height",!0).value=y.opts.scaleHeight,I.style("transform",!0,!0).value+=" scale("+1/r+","+1/l+")"}1!=y.opts.ignoreClear&&t.clearRect(0,0,A,_),I.render(t),R&&(R=!1,"function"==typeof y.opts.renderCallback&&y.opts.renderCallback(G)),w&&t.canvas.parentElement&&t.canvas.parentElement.removeChild(t.canvas)},r=!0;y.ImagesLoaded()&&(r=!1,_()),y.intervalID=setInterval(function(){var w=!1;if(r&&y.ImagesLoaded()&&(r=!1,w=!0),1!=y.opts.ignoreMouse&&(w|=y.Mouse.hasEvents()),1!=y.opts.ignoreAnimation)for(var t=0;t<y.Animations.length;t++)w|=y.Animations[t].update(1e3/y.FRAMERATE);"function"==typeof y.opts.forceRedraw&&1==y.opts.forceRedraw()&&(w=!0),w&&(_(),y.Mouse.runEvents())},1e3/y.FRAMERATE)},y.stop=function(){y.intervalID&&clearInterval(y.intervalID)},y.Mouse=new function(){this.events=[],this.hasEvents=function(){return 0!=this.events.length},this.onclick=function(w,t){this.events.push({type:"onclick",x:w,y:t,run:function(w){w.onclick&&w.onclick()}})},this.onmousemove=function(w,t){this.events.push({type:"onmousemove",x:w,y:t,run:function(w){w.onmousemove&&w.onmousemove()}})},this.eventElements=[],this.checkPath=function(w,t){for(var G=0;G<this.events.length;G++){var A=this.events[G];t.isPointInPath&&t.isPointInPath(A.x,A.y)&&(this.eventElements[G]=w)}},this.checkBoundingBox=function(w,t){for(var G=0;G<this.events.length;G++){var A=this.events[G];t.isPointInBox(A.x,A.y)&&(this.eventElements[G]=w)}},this.runEvents=function(){y.ctx.canvas.style.cursor="";for(var w=0;w<this.events.length;w++)for(var t=this.events[w],G=this.eventElements[w];G;)t.run(G),G=G.parent;this.events=[],this.eventElements=[]}},y}var r,y=function(w,t,G){if(null!=w||null!=t||null!=G){"string"==typeof w&&(w=document.getElementById(w)),null!=w.svg&&w.svg.stop();var A=_(G||{});1==w.childNodes.length&&"OBJECT"==w.childNodes[0].nodeName||(w.svg=A);var I=w.getContext("2d");void 0!==t.documentElement?A.loadXmlDoc(I,t):"<"==t.substr(0,1)?A.loadXml(I,t):A.load(I,t)}else for(var R=document.querySelectorAll("svg"),r=0;r<R.length;r++){var l=R[r],C=document.createElement("canvas");C.width=l.clientWidth,C.height=l.clientHeight,l.parentNode.insertBefore(C,l),l.parentNode.removeChild(l);var V=document.createElement("div");V.appendChild(l),y(C,V.innerHTML)}};void 0!==Element.prototype.matches?r=function(w,t){var G;try{G=w.matches(t)}catch(w){G=!1}return G}:void 0!==Element.prototype.webkitMatchesSelector?r=function(w,t){return w.webkitMatchesSelector(t)}:void 0!==Element.prototype.mozMatchesSelector?r=function(w,t){return w.mozMatchesSelector(t)}:void 0!==Element.prototype.msMatchesSelector?r=function(w,t){return w.msMatchesSelector(t)}:void 0!==Element.prototype.oMatchesSelector?r=function(w,t){return w.oMatchesSelector(t)}:("function"!=typeof jQuery&&"function"!=typeof Zepto||(r=function(w,t){return $(w).is(t)}),void 0===r&&(r=Sizzle.matchesSelector));var l=/(\[[^\]]+\])/g,C=/(#[^\s\+>~\.\[:]+)/g,V=/(\.[^\s\+>~\.\[:]+)/g,q=/(::[^\s\+>~\.\[:]+|:first-line|:first-letter|:before|:after)/gi,k=/(:[\w-]+\([^\)]*\))/gi,Z=/(:[^\s\+>~\.\[:]+)/g,z=/([^\s\+>~\.\[:]+)/g;return"undefined"!=typeof CanvasRenderingContext2D&&(CanvasRenderingContext2D.prototype.drawSvg=function(w,t,G,A,I,R){var _={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0,ignoreClear:!0,offsetX:t,offsetY:G,scaleWidth:A,scaleHeight:I};for(var r in R)R.hasOwnProperty(r)&&(_[r]=R[r]);y(this.canvas,w,_)}),y}(t.RGBColor,t.stackBlur)}(void 0!==w?w:this)}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object),function(w,t,G){function A(w){this._pointer=0,this._data=w,this._eof=!1}function I(w,t){return w<=9?t:w>=10&&w<=59?parseFloat(t):w>=60&&w<=99?parseInt(t):w>=100&&w<=109?t:w>=110&&w<=149?parseFloat(t):w>=160&&w<=179?parseInt(t):w>=210&&w<=239?parseFloat(t):w>=270&&w<=289?parseInt(t):w>=290&&w<=299?R(t):w>=300&&w<=369?t:w>=370&&w<=389?parseInt(t):w>=390&&w<=399?t:w>=400&&w<=409?parseInt(t):w>=410&&w<=419?t:w>=420&&w<=429?parseInt(t):w>=430&&w<=439?t:w>=440&&w<=459?parseInt(t):w>=460&&w<=469?parseFloat(t):w>=470&&w<=481?t:999===w?t:w>=1e3&&w<=1009?t:w>=1010&&w<=1059?parseFloat(t):w>=1060&&w<=1071?parseInt(t):(console.log("WARNING: Group code does not have a defined type: %j",{code:w,value:t}),t)}function R(w){if("0"===w)return!1;if("1"===w)return!0;throw TypeError("String '"+w+"' cannot be cast to Boolean type")}function _(w){w&&w.sanitize!==G&&(this.sanitize=w.sanitize)}function r(w){k.debug("unhandled group "+y(w))}function y(w){return w.code+":"+w.value}function l(w){return Z[w]}var C=w.ht,V=C.Default;V.getInternal().addMethod(V,{cadToShape:function(w,t){return new C.DxfViewer(t).toShape(w)},shapeToCad:function(w,t,G){return new C.DxfWriter(G).toDxf(w,t)}});var q=function(){},k={debug:q,warn:q,error:q},Z=[0,16711680,16776960,65280,65535,255,16711935,16777215,8421504,12632256,16711680,16744319,13369344,13395558,10027008,10046540,8323072,8339263,4980736,4990502,16727808,16752511,13382400,13401958,10036736,10051404,8331008,8343359,4985600,4992806,16744192,16760703,13395456,13408614,10046464,10056268,8339200,8347455,4990464,4995366,16760576,16768895,13408512,13415014,10056192,10061132,8347392,8351551,4995328,4997670,16776960,16777087,13421568,13421670,10000384,10000460,8355584,8355647,5000192,5000230,12582656,14679935,10079232,11717734,7510016,8755276,6258432,7307071,3755008,4344870,8388352,12582783,6736896,10079334,5019648,7510092,4161280,6258495,2509824,3755046,4194048,10485631,3394560,8375398,2529280,6264908,2064128,5209919,1264640,3099686,65280,8388479,52224,6736998,38912,5019724,32512,4161343,19456,2509862,65343,8388511,52275,6737023,38950,5019743,32543,4161359,19475,2509871,65407,8388543,52326,6737049,38988,5019762,32575,4161375,19494,2509881,65471,8388575,52377,6737074,39026,5019781,32607,4161391,19513,2509890,65535,8388607,52428,6737100,39064,5019800,32639,4161407,19532,2509900,49151,8380415,39372,6730444,29336,5014936,24447,4157311,14668,2507340,32767,8372223,26316,6724044,19608,5010072,16255,4153215,9804,2505036,16383,8364031,13260,6717388,9880,5005208,8063,4149119,4940,2502476,255,8355839,204,6710988,152,5000344,127,4145023,76,2500172,4129023,10452991,3342540,8349388,2490520,6245528,2031743,5193599,1245260,3089996,8323327,12550143,6684876,10053324,4980888,7490712,4128895,6242175,2490444,3745356,12517631,14647295,10027212,11691724,7471256,8735896,6226047,7290751,3735628,4335180,16711935,16744447,13369548,13395660,9961624,9981080,8323199,8339327,4980812,4990540,16711871,16744415,13369497,13395634,9961586,9981061,8323167,8339311,4980793,4990530,16711807,16744383,13369446,13395609,9961548,9981042,8323135,8339295,4980774,4990521,16711743,16744351,13369395,13395583,9961510,9981023,8323103,8339279,4980755,4990511,3355443,5987163,8684676,11382189,14079702,16777215];A.prototype.next=function(){var w;if(!this.hasNext())throw this._eof?new Error("Cannot call 'next' after EOF group has been read"):new Error("Unexpected end of input: EOF group not read before end of file. Ended on code "+this._data[this._pointer]);return w={code:parseInt(this._data[this._pointer])},this._pointer++,w.value=I(w.code,this._data[this._pointer].trim()),this._pointer++,0===w.code&&"EOF"===w.value&&(this._eof=!0),w},A.prototype.hasNext=function(){return!this._eof&&!(this._pointer>this._data.length-2)},A.prototype.isEOF=function(){return this._eof},_.prototype.parse=function(w,t){throw new Error("read() not implemented. Use readSync()")},_.prototype.parseSync=function(w){return"string"==typeof w?this._parse(w):(console.error("Cannot read dxf source of type `"+typeof w),null)},_.prototype.parseStream=function(w,t){function G(w){R+=w}function A(){try{var w=_._parse(R)}catch(w){return t(w)}t(null,w)}function I(w){t(w)}var R="",_=this;w.on("data",G),w.on("end",A),w.on("error",I)},_.prototype.sanitizeFileName=function(){var w=/[\/\?<>\\:\*\|":]/g,t=/[\x00-\x1f\x80-\x9f]/g,G=/^\.+$/,A=/^(con|prn|aux|nul|com[0-9]|lpt[0-9])(\..*)?$/i,I=/[\. ]+$/;return function(R){var _=this.sanitize;return null==_?R:R.replace(w,_).replace(t,_).replace(G,_).replace(A,_).replace(I,_)}}(),_.prototype._parse=function(w){var I,R,_=this,C={},V=0,q=w.split(/\r\n|\r|\n/g);if(I=new A(q),!I.hasNext())throw Error("Empty file");var Z=function(w,t){return R.code===w&&R.value===t},z=function(){var w=null,t=null,G={};for(R=I.next();;){if(Z(0,"ENDSEC")){w&&(G[w]=t);break}9===R.code?(w&&(G[w]=t),w=R.value):10===R.code?t={x:R.value}:20===R.code?t.y=R.value:30===R.code?t.z=R.value:t=R.value,R=I.next()}return R=I.next(),G},x=function(){var w,t={};for(R=I.next();"EOF"!==R.value&&!Z(0,"ENDSEC");)Z(0,"BLOCK")?(k.debug("block {"),w=L(),k.debug("}"),o(w),w.name?t[w.name]=w:k.error('block with handle "'+w.handle+'" is missing a name.')):(r(R),R=I.next());return t},L=function(){var w={};for(R=I.next();"EOF"!==R.value;){switch(R.code){case 1:w.xrefPath=R.value,R=I.next();break;case 2:w.name=_.sanitizeFileName(R.value),R=I.next();break;case 3:w.name2=_.sanitizeFileName(R.value),R=I.next();break;case 5:w.handle=R.value,R=I.next();break;case 8:w.layer=R.value,R=I.next();break;case 10:w.position=m();break;case 67:w.paperSpace=!(!R.value||1!=R.value),R=I.next();break;case 70:0!=R.value&&(w.type=R.value),R=I.next();break;case 100:
R=I.next();break;case 330:w.ownerHandle=R.value,R=I.next();break;case 0:if("ENDBLK"==R.value)break;I._pointer-=2,w.entities=F(!0);break;default:r(R),R=I.next()}if(Z(0,"ENDBLK")){R=I.next();break}}return w},Q=function(){var w={};for(R=I.next();"EOF"!==R.value&&!Z(0,"ENDSEC");)if(Z(0,"TABLE")){R=I.next();var t=i[R.value];t?(k.debug(R.value+" Table {"),w[i[R.value].tableName]=J(),k.debug("}")):k.debug("Unhandled Table "+R.value)}else R=I.next();return R=I.next(),w},J=function(){var w,G=i[R.value],A={},_=0;for(R=I.next();!Z(0,"ENDTAB");)switch(R.code){case 5:A.handle=R.value,R=I.next();break;case 330:A.ownerHandle=R.value,R=I.next();break;case 100:"AcDbSymbolTable"===R.value?R=I.next():(r(R),R=I.next());break;case 70:_=R.value,R=I.next();break;case 0:R.value===G.dxfSymbolName?A[G.tableRecordsProperty]=G.parseTableRecords():(r(R),R=I.next());break;default:r(R),R=I.next()}var y=A[G.tableRecordsProperty];return y&&(y.constructor===Array?w=y.length:"object"==typeof y&&(w=t.keys(y).length),_!==w&&k.warn("Parsed "+w+" "+G.dxfSymbolName+"'s but expected "+_)),R=I.next(),A},B=function(){var w=[],t={};for(k.debug("ViewPort {"),R=I.next();!Z(0,"ENDTAB");)switch(R.code){case 2:t.name=R.value,R=I.next();break;case 10:t.lowerLeftCorner=m();break;case 11:t.upperRightCorner=m();break;case 12:t.center=m();break;case 13:t.snapBasePoint=m();break;case 14:t.snapSpacing=m();break;case 15:t.gridSpacing=m();break;case 16:t.viewDirectionFromTarget=m();break;case 17:t.viewTarget=m();break;case 40:t.viewHeight=R.value,t.aspectRatio!==G&&(t.viewWidth=R.value*t.aspectRatio),R=I.next();break;case 41:t.aspectRatio=R.value,t.viewHeight!==G&&(t.viewWidth=R.value*t.viewHeight),R=I.next();break;case 42:t.lensLength=R.value,R=I.next();break;case 43:t.frontClippingPlane=R.value,R=I.next();break;case 44:t.backClippingPlane=R.value,R=I.next();break;case 45:t.viewHeight=R.value,R=I.next();break;case 50:t.snapRotationAngle=R.value,R=I.next();break;case 51:t.viewTwistAngle=R.value,R=I.next();break;case 79:t.orthographicType=R.value,R=I.next();break;case 110:t.ucsOrigin=m();break;case 111:t.ucsXAxis=m();break;case 112:t.ucsYAxis=m();break;case 110:t.ucsOrigin=m();break;case 281:t.renderMode=R.value,R=I.next();break;case 281:t.defaultLightingType=R.value,R=I.next();break;case 292:t.defaultLightingOn=R.value,R=I.next();break;case 330:t.ownerHandle=R.value,R=I.next();break;case 63:case 421:case 431:t.ambientColor=R.value,R=I.next();break;case 0:"VPORT"===R.value&&(k.debug("}"),w.push(t),k.debug("ViewPort {"),t={},R=I.next());break;default:r(R),R=I.next()}return k.debug("}"),w.push(t),w},n=function(){var w,t,G={},A={};for(k.debug("LType {"),R=I.next();!Z(0,"ENDTAB");)switch(R.code){case 2:A.name=R.value,w=R.value,R=I.next();break;case 3:A.description=R.value,R=I.next();break;case 73:t=R.value,t>0&&(A.pattern=[]),R=I.next();break;case 40:A.patternLength=R.value,R=I.next();break;case 49:A.pattern.push(R.value),R=I.next();break;case 0:k.debug("}"),t>0&&t!==A.pattern.length&&k.warn("lengths do not match on LTYPE pattern"),G[w]=A,A={},k.debug("LType {"),R=I.next();break;default:R=I.next()}return k.debug("}"),G[w]=A,G},f=function(){var w,t={},A={};for(k.debug("Layer {"),R=I.next();!Z(0,"ENDTAB");)switch(R.code){case 2:A.name=R.value,w=R.value,R=I.next();break;case 62:A.visible=R.value>=0,A.color=l(Math.abs(R.value)),R=I.next();break;case 6:A.lineType=R.value,R=I.next();break;case 0:"LAYER"===R.value&&(k.debug("}"),t[w]=A,k.debug("Layer {"),A={},w=G,R=I.next());break;default:r(R),R=I.next()}return k.debug("}"),t[w]=A,t},i={VPORT:{tableRecordsProperty:"viewPorts",tableName:"viewPort",dxfSymbolName:"VPORT",parseTableRecords:B},LTYPE:{tableRecordsProperty:"lineTypes",tableName:"lineType",dxfSymbolName:"LTYPE",parseTableRecords:n},LAYER:{tableRecordsProperty:"layers",tableName:"layer",dxfSymbolName:"LAYER",parseTableRecords:f}},F=function(w){var t=[],G=w?"ENDBLK":"ENDSEC";for(R=I.next();;)if(0===R.code){if(R.value===G)break;var A;if("LWPOLYLINE"===R.value)k.debug("LWPOLYLINE {"),A=H(),k.debug("}");else if("POLYLINE"===R.value)k.debug("POLYLINE {"),A=X(),k.debug("}");else if("LINE"===R.value)k.debug("LINE {"),A=b(),k.debug("}");else if("CIRCLE"===R.value)k.debug("CIRCLE {"),A=p(),k.debug("}");else if("ARC"===R.value)k.debug("ARC {"),A=p(),k.debug("}");else if("ELLIPSE"===R.value)k.debug("ELLIPSE {"),A=$(),k.debug("}");else if("SPLINE"===R.value)k.debug("SPLINE {"),A=a(),k.debug("}");else if("TEXT"===R.value)k.debug("TEXT {"),A=h(),k.debug("}");else if("ATTRIB"===R.value)k.debug("ATTRIB {"),A=D(),k.debug("}");else if("DIMENSION"===R.value)k.debug("DIMENSION {"),A=g(),k.debug("}");else if("INSERT"===R.value)k.debug("INSERT {"),A=M(),k.debug("}");else if("HATCH"===R.value)k.debug("HATCH {"),A=u(),k.debug("}");else if("SOLID"===R.value)k.debug("SOLID {"),A=W(),k.debug("}");else if("POINT"===R.value)k.debug("POINT {"),A=e(),k.debug("}");else if("MTEXT"===R.value)k.debug("MTEXT {"),A=E(),k.debug("}");else{if("ATTDEF"!==R.value){k.warn("Unhandled entity "+R.value),R=I.next();continue}k.debug("ATTDEF {"),A=O(),k.debug("}")}o(A),t.push(A)}else R=I.next();return"ENDSEC"==G&&(R=I.next()),t},S=function(w){switch(R.code){case 0:w.type=R.value,R=I.next();break;case 5:w.handle=R.value,R=I.next();break;case 6:w.lineType=R.value,R=I.next();break;case 8:w.layer=R.value,R=I.next();break;case 48:w.lineTypeScale=R.value,R=I.next();break;case 60:w.visible=0===R.value,R=I.next();break;case 62:w.colorIndex=R.value,w.color=l(Math.abs(R.value)),R=I.next();break;case 67:w.inPaperSpace=0!==R.value,R=I.next();break;case 210:w.extrusionDirection=m();break;case 230:w.extrusionDirection={x:0,y:0,z:R.value},R=I.next();break;case 330:w.ownerHandle=R.value,R=I.next();break;case 347:w.materialObjectHandle=R.value,R=I.next();break;case 370:w.lineweight=R.value,R=I.next();break;case 420:w.color=R.value,R=I.next();break;case 100:if("AcDbEntity"==R.value){R=I.next();break}default:r(R),R=I.next()}},N=function(){var w={type:R.value};for(R=I.next();"EOF"!==R&&0!==R.code;)switch(R.code){case 10:w.x=R.value,R=I.next();break;case 20:w.y=R.value,R=I.next();break;case 30:w.z=R.value,R=I.next();break;case 40:case 41:case 42:R=I.next();break;case 70:w.curveFittingVertex=0!=(1|R.value),w.curveFitTangent=0!=(2|R.value),w.splineVertex=0!=(8|R.value),w.splineControlPoint=0!=(16|R.value),w.ThreeDPolylineVertex=0!=(32|R.value),w.ThreeDPolylineMesh=0!=(64|R.value),w.polyfaceMeshVertex=0!=(128|R.value),R=I.next();break;case 50:case 71:case 72:case 73:case 74:R=I.next();break;default:S(w)}return w},T=function(){var w={type:R.value};for(R=I.next();"EOF"!=R&&0!=R.code;)S(w);return w},m=function(){var w={},t=R.code;if(w.x=R.value,t+=10,R=I.next(),R.code!=t)throw new Error("Expected code for point value to be "+t+" but got "+R.code+".");return w.y=R.value,t+=10,R=I.next(),R.code!=t?w:(w.z=R.value,R=I.next(),w)},U=function(){var w={},t=R.code;return w.x=R.value,t+=1,R=I.next(),R.code!=t?(I._pointer-=2,w.y=1):w.y=R.value,t+=1,R=I.next(),R.code!=t?(I._pointer-=2,w.z=1):w.z=R.value,R=I.next(),w},c=function(w){if(!w||w<=0)throw Error("n must be greater than 0 verticies");var t,G=[],A=!1,_=!1;for(t=0;t<w;t++){for(var r={};"EOF"!==R&&0!==R.code&&!_;){switch(R.code){case 10:if(A){_=!0;continue}r.x=R.value,A=!0;break;case 20:r.y=R.value;break;case 30:r.z=R.value;break;case 40:r.startWidth=R.value;break;case 41:r.endWidth=R.value;break;case 42:0!=R.value&&(r.bulge=R.value);break;default:if(A){_=!0;continue}}R=I.next()}G.push(r),A=!1,_=!1}return G},v=function(){for(var w=[];"EOF"!==R;)if(0===R.code)if("VERTEX"===R.value)w.push(N());else if("SEQEND"===R.value){T();break}return w},E=function(){var w={type:R.value};for(R=I.next();"EOF"!==R&&0!==R.code;)switch(R.code){case 1:w.text=R.value,R=I.next();break;case 3:w.text+=R.value,R=I.next();break;case 10:w.position=m();break;case 40:w.height=R.value,R=I.next();break;case 41:w.width=R.value,R=I.next();break;case 71:w.attachmentPoint=R.value,R=I.next();break;case 72:w.drawingDirection=R.value,R=I.next();break;case 50:w.angle=2*R.value*Math.PI/360,R=I.next();break;case 11:w.directionX=R.value,R=I.next();break;case 21:w.directionY=R.value,R=I.next();break;case 60:w.hidden=1===R.value,R=I.next();break;default:S(w)}return w},O=function(){var w={type:R.value,scale:1,textStyle:"STANDARD"};for(R=I.next();"EOF"!==R&&0!==R.code;)switch(R.code){case 1:w.text=R.value,R=I.next();break;case 2:w.tag=R.value,R=I.next();break;case 3:w.prompt=R.value,R=I.next();break;case 7:w.textStyle=R.value,R=I.next();break;case 10:w.x=R.value,R=I.next();break;case 20:w.y=R.value,R=I.next();break;case 30:w.z=R.value,R=I.next();break;case 39:w.thickness=R.value,R=I.next();break;case 40:w.textHeight=R.value,R=I.next();break;case 41:w.scale=R.value,R=I.next();break;case 50:w.rotation=R.value,R=I.next();break;case 51:w.obliqueAngle=R.value,R=I.next();break;case 70:w.invisible=!!(1&R.value),w.constant=!!(2&R.value),w.verificationRequired=!!(4&R.value),w.preset=!!(8&R.value),R=I.next();break;case 71:w.backwards=!!(2&R.value),w.mirrored=!!(4&R.value),R=I.next();break;case 72:w.horizontalJustification=R.value,R=I.next();break;case 73:w.fieldLength=R.value,R=I.next();break;case 74:w.verticalJustification=R.value,R=I.next();break;case 100:R=I.next();break;case 210:w.extrusionDirectionX=R.value,R=I.next();break;case 220:w.extrusionDirectionY=R.value,R=I.next();break;case 230:w.extrusionDirectionZ=R.value,R=I.next();break;default:S(w)}return w},H=function(){var w={type:R.value,vertices:[]},t=0;for(R=I.next();"EOF"!==R&&0!==R.code;)switch(R.code){case 38:w.elevation=R.value,R=I.next();break;case 39:w.depth=R.value,R=I.next();break;case 70:w.shape=1===R.value,R=I.next();break;case 90:t=R.value,R=I.next();break;case 10:w.vertices=c(t);break;case 40:0!==R.value&&(w.startWidth=R.value),R=I.next();break;case 41:0!==R.value&&(w.endWidth=R.value),R=I.next();break;case 43:0!==R.value&&(w.width=R.value),R=I.next();break;default:S(w)}return w},X=function(){var w={type:R.value,vertices:[]};for(R=I.next();"EOF"!==R&&0!==R.code;)switch(R.code){case 10:case 20:case 30:case 39:R=I.next();break;case 40:0!==R.value&&(w.startWidth=R.value),R=I.next();break;case 41:0!==R.value&&(w.endWidth=R.value),R=I.next();break;case 70:w.shape=1===R.value,R=I.next();break;case 71:case 72:case 73:case 74:case 75:case 100:R=I.next();break;default:S(w)}return w.vertices=v(),w},b=function(){var w={type:R.value,vertices:[]};for(R=I.next();"EOF"!==R&&0!==R.code;)switch(R.code){case 10:w.vertices.unshift(m());break;case 11:w.vertices.push(m());break;case 100:if("AcDbLine"==R.value){R=I.next();break}default:S(w)}return w},p=function(){var w,t;for(w={type:R.value},R=I.next();"EOF"!==R&&0!==R.code;)switch(R.code){case 10:w.center=m();break;case 40:w.radius=R.value,R=I.next();break;case 50:w.startAngle=Math.PI/180*R.value,R=I.next();break;case 51:t=Math.PI/180*R.value,t<w.startAngle?w.angleLength=t+2*Math.PI-w.startAngle:w.angleLength=t-w.startAngle,w.endAngle=t,R=I.next();break;default:S(w)}return w},$=function(){var w,t;for(w={type:R.value},R=I.next();"EOF"!==R&&0!==R.code;)switch(R.code){case 10:w.center=m();break;case 11:w.major=m();break;case 40:w.ratio=R.value,R=I.next();break;case 41:w.startAngle=R.value,R=I.next();break;case 42:t=R.value,t<w.startAngle?w.angleLength=t+2*Math.PI-w.startAngle:w.angleLength=t-w.startAngle,w.endAngle=t,R=I.next();break;default:S(w)}return w},M=function(){var w;for(w={type:R.value},R=I.next();"EOF"!==R&&0!==R.code;)switch(R.code){case 2:w.block=_.sanitizeFileName(R.value),R=I.next();break;case 10:w.center=m();break;case 41:w.scale=U();break;case 50:w.deg=R.value,R=I.next();break;default:S(w)}return w},u=function(){var w;for(w={type:R.value},R=I.next();"EOF"!==R&&0!==R.code;)switch(R.code){case 2:w.block=_.sanitizeFileName(R.value),R=I.next();break;case 10:w.center=m();break;case 41:w.scale=U();break;case 50:w.deg=R.value,R=I.next();break;default:S(w)}return w},a=function(){var w,t;for(w={type:R.value},R=I.next();"EOF"!==R&&0!==R.code;)switch(R.code){case 10:w.center=m();break;case 11:w.major=m();break;case 40:w.ratio=R.value,R=I.next();break;case 41:w.startAngle=R.value,R=I.next();break;case 42:t=R.value,t<w.startAngle?w.angleLength=t+2*Math.PI-w.startAngle:w.angleLength=t-w.startAngle,w.endAngle=t,R=I.next();break;default:S(w)}return w},h=function(){var w;for(w={type:R.value},R=I.next();"EOF"!==R&&0!==R.code;)switch(R.code){case 10:w.startPoint=m();break;case 11:w.endPoint=m();break;case 40:w.textHeight=R.value,R=I.next();break;case 41:w.xScale=R.value,R=I.next();break;case 1:w.text=R.value,R=I.next();break;case 7:w.font=R.value,R=I.next();break;case 71:w.generationFlags=R.value,R=I.next();break;case 72:w.halign=R.value,R=I.next();break;case 73:w.valign=R.value,R=I.next();break;case 50:w.rotation=2*R.value*Math.PI/360,R=I.next();break;case 60:w.hidden=1===R.value,R=I.next();break;default:S(w)}return w},D=function(){var w;for(w={type:R.value},R=I.next();"EOF"!==R&&0!==R.code;)switch(R.code){case 10:w.startPoint=m();break;case 11:w.endPoint=m();break;case 40:w.textHeight=R.value,R=I.next();break;case 41:w.xScale=R.value,R=I.next();break;case 1:w.text=R.value,R=I.next();break;case 7:w.font=R.value,R=I.next();break;case 71:w.generationFlags=R.value,R=I.next();break;case 72:w.halign=R.value,R=I.next();break;case 74:w.valign=R.value,R=I.next();break;case 50:w.rotation=2*R.value*Math.PI/360,R=I.next();break;case 70:w.hidden=1===R.value,R=I.next();break;default:S(w)}return w},g=function(){var w;for(w={type:R.value},R=I.next();"EOF"!==R&&0!==R.code;)switch(R.code){case 2:w.block=_.sanitizeFileName(R.value),R=I.next();break;case 10:w.anchorPoint=m();break;case 11:w.middleOfText=m();break;case 71:w.attachmentPoint=R.value,R=I.next();break;case 42:w.actualMeasurement=R.value,R=I.next();break;case 1:w.text=R.value,R=I.next();break;case 50:w.angle=R.value,R=I.next();break;default:S(w)}return w},W=function(){var w;for(w={type:R.value},w.points=[],R=I.next();"EOF"!==R&&0!==R.code;)switch(R.code){case 10:w.points[0]=m();break;case 11:w.points[1]=m();break;case 12:w.points[2]=m();break;case 13:w.points[3]=m();break;default:S(w)}return w},e=function(){var w;for(w={type:R.value},R=I.next();"EOF"!==R&&0!==R.code;)switch(R.code){case 10:w.position=m();break;case 39:w.thickness=R.value,R=I.next();break;case 100:if("AcDbPoint"==R.value){R=I.next();break}default:S(w)}return w},o=function(w){if(!w)throw new TypeError("entity cannot be undefined or null");w.handle||(w.handle=V++)};return function(){for(R=I.next();!I.isEOF();)if(0===R.code&&"SECTION"===R.value){if(R=I.next(),2!==R.code){console.error("Unexpected code %s after 0:SECTION",y(R)),R=I.next();continue}"HEADER"===R.value?(k.debug("> HEADER"),C.header=z(),k.debug("<")):"BLOCKS"===R.value?(k.debug("> BLOCKS"),C.blocks=x(),k.debug("<")):"ENTITIES"===R.value?(k.debug("> ENTITIES"),C.entities=F(!1),k.debug("<")):"TABLES"===R.value?(k.debug("> TABLES"),C.tables=Q(),k.debug("<")):"EOF"===R.value?k.debug("EOF"):k.warn("Skipping section '%s'",R.value)}else R=I.next()}(),C};var z=C.DxfViewer=function(w){this.init(w)};z.prototype={},z.prototype.constructor=z;var x={LINE:["LINE","POLYLINE","LWPOLYLINE"],CIRCLE:["CIRCLE","ARC"],ELLIPSE:["ELLIPSE"],TEXT:["TEXT","MTEXT","ATTRIB"],SOLID:["SOLID"],POINT:["POINT"]};t.defineProperties(z.prototype,{dxf:{get:function(){return this._dxf}}}),z.prototype.init=function(w){var t=this,A=t.options={};w=w||{},A.font=w.font||"Standard",A.textScaleRatio=w.textScaleRatio||1,A.size=w.size,A.scale=w.scale,A.blockSize=w.blockSize||256,A.filter=w.filter,A.defaultColor=w.defaultColor||0,A.edgeLayer=w.edgeLayer,w.showText===G&&(w.showText=!0),A.showText=w.showText,A.mapColor=w.mapColor,A.circleSegments=w.circleSegments||72,A.browserMinFontSize=w.browserMinFontSize||12,A.useTextCompScale=w.useTextCompScale===G||w.useTextCompScale,A.boundingType=w.boundingType||"Reset",A.convertArcToBezier=w.convertArcToBezier,!1!==w.sanitize&&(A.sanitize=w.sanitize||"_")},z.prototype.toShape=function(w){var t=this;t.parseFile(w);var G,A,I,R=t._dxf.blocks,_=t.sortBlocks(R);t._blockDef={};for(var r=_.length-1;r>=0;r--)A=_[r],I=R[A],I.entities&&(t._blockDef[A]||(G=t.entitiesToShape(I.entities,I.position,null,!1))&&(G.flag=I.type,t._blockDef[A]=G));return G=t.entitiesToShape(t._dxf.entities,null,t.options.size,!0,t.options.scale),G.sortedBlockName=_,G.blockDef=t._blockDef,G.layers=t._dxf.tables.layer.layers,G},z.prototype.entitiesToShape=function(w,t,G,A,I){var R=this;R._minFontSize=12,R._bound={xMin:1/0,yMin:1/0,xMax:-1/0,yMax:-1/0},t=t||{x:0,y:0,z:0};var _,r,y,l=R._models={},C=R._dxf;for(_=0,r=w.length;_<r;_++)y=w[_],R._groupEntity(l,y,C);if(A)switch(R.options.boundingType){case"Viewport":var V=R._dxfViewport;!V||isNaN(V.x)||isNaN(V.y)||isNaN(V.width)||isNaN(V.height)||(R._bound={xMin:V.x-V.width/2,xMax:V.x+V.width/2,yMin:V.y-V.height/2,yMax:V.y+V.height/2});break;case"Standard":R._bound={xMin:0,xMax:1,yMin:0,yMax:1}}R._shiftX=R._bound.xMin,R._shiftY=R._bound.yMax;var q=R._bound.xMax-R._bound.xMin,k=R._bound.yMax-R._bound.yMin;if(!(q<0||k<0)){if(q=q||1,k=k||1,R._bound.pos=t,I)R._scale=I;else{if(G){var Z=G/q,z=G/k;R._scale=Math.min(Z,z)}else R._scale=1;R.options.useTextCompScale||(R._scale*=Math.max(1,Math.ceil(R.options.browserMinFontSize/R._minFontSize)))}R.shapeComps=[],R.drawLine(),R.drawSolid(),R.drawCircle(),R.drawEllipse(),R.options.showText&&R.drawText(),R.drawBlock();var x={width:q*R._scale,height:k*R._scale,comps:R.shapeComps,scale:R._scale,anchorX:-(R._bound.xMin-t.x)/q,anchorY:(R._bound.yMax-t.y)/k,bound:R._bound};return R._calcBoundExtend(x),x}},z.prototype._calcBoundExtend=function(w){var t=1,G=!1;w.comps.forEach(function(w){t=Math.max(t,w.borderWidth||0),w.borderWidthAbsolute&&(G=!0)}),w.boundExtend=t,G&&(w.boundExtendAbsolute=!0)},z.prototype._bulgesAt=function(w,t){return w[t].bulge},z.prototype._isStraightLine=function(w){return!w||Math.abs(w)<1e-6},z.prototype._getDistance=function(w,t){var G=w.x-t.x,A=w.y-t.y;return Math.sqrt(G*G+A*A)},z.prototype._getBulgeSegment=function(w,t,G){var A=this,I=G<0,R=4*Math.atan(G);if(Math.abs(R)>2*Math.PI-1e-6)return[t];var _={x:(w.x+t.x)/2,y:(w.y+t.y)/2},r=A._getDistance(w,t)/2,y=Math.atan2(t.y-w.y,t.x-w.x),l=Math.abs(r/Math.sin(R/2)),C=Math.abs(l*l-r*r),V=Math.sqrt(C);G>0?y+=Math.PI/2:y-=Math.PI/2,Math.abs(R)>Math.PI&&(V*=-1);var q,y,k=V*Math.cos(y)+_.x,Z=V*Math.sin(y)+_.y,z=Math.atan2(w.y-Z,w.x-k),x=Math.atan2(t.y-Z,t.x-k),L=[];if(q=2*Math.PI/A.options.circleSegments,y=z,I){for(;x>z;)x-=2*Math.PI;for(;y>x;)y-=q,y<x&&(y=x),L.push({x:k+l*Math.cos(y),y:Z+l*Math.sin(y)})}else{for(;x<z;)x+=2*Math.PI;for(;y<x;)y+=q,y>x&&(y=x),L.push({x:k+l*Math.cos(y),y:Z+l*Math.sin(y)})}return L},z.prototype.drawLine=function(){var w,t,A,I,R,_,r,y,l,C,V,q,k,Z,z,L,Q,J,B,n,f=this,i=f._models;for(w=x.LINE,I=0,R=w.length;I<R;I++){t=w[I],A=i[t];for(y in A)for(l=A[y],_=0,r=l.length;_<r;_++)if(C=l[_],(V=C.vertices)&&V.length){for(z=f.toLocal(V[0].x,1),L=f.toLocal(V[0].y,2),J={type:"shape",cadType:t,cadLayer:C.layer,maybeEdge:C.layer===f.options.edgeLayer,borderColor:y,points:[z,L],segments:[1]},n=G,C.startWidth?n=(C.startWidth+(C.endWidth?C.endWidth:C.startWidth))/2:C.width&&(n=C.width),n?J.borderWidth=f.toLocal(n):(J.borderWidthAbsolute=!0,J.borderWidth=1),k=1,Z=V.length;k<Z;k++)q=V[k],Q=f._bulgesAt(V,k-1),f._isStraightLine(Q)?(J.points.push(f.toLocal(q.x,1),f.toLocal(q.y,2)),J.segments.push(2)):(B=f._getBulgeSegment(V[k-1],q,Q),B.forEach(function(w){J.points.push(f.toLocal(w.x,1),f.toLocal(w.y,2)),J.segments.push(2)}));C.shape&&(Q=f._bulgesAt(V,V.length-1),f._isStraightLine(Q)?J.segments.push(5):(B=f._getBulgeSegment(V[V.length-1],V[0],Q),B.forEach(function(w){J.points.push(f.toLocal(w.x,1),f.toLocal(w.y,2)),J.segments.push(2)}))),J.handle=C.handle,f.shapeComps.push(J)}}},z.prototype.drawBlock=function(){var w,t,G,A,I,R,_,r,y,l,C,V,q=this,k=q._models.BLOCK;if(k)for(w=0,t=k.length;w<t;w++)G=k[w],A=G.block,I=q._blockDef[A],C=G.transform,R=Math.atan2(C.b,C.a),Math.abs(R-Math.PI)<1e-5||Math.abs(R)<1e-5||Math.abs(R+Math.PI)<1e-5?(y=Math.cos(R),_=C.a/y,r=C.d/y):(l=Math.sin(R),_=C.b/l,r=-C.c/l),V={type:"image",cadType:"block",cadLayer:G.layer,handle:G.handle,name:A,rect:[[q.toLocal(C.tx,1),q.toLocal(C.ty,2)],q.toLocal(I.width/I.scale),q.toLocal(I.height/I.scale)],rotation:R},1===_&&1===r||(V.scaleX=_,V.scaleY=r),q.shapeComps.push(V)},z.prototype.drawSolid=function(){var w,t,G,A,I,R,_,r,y,l,C,V=this,q=V._models;for(w=x.SOLID,A=0,I=w.length;A<I;A++){t=w[A],G=q[t];for(r in G)for(y=G[r],R=0,_=y.length;R<_;R++)l=y[R],C=l.points,V.shapeComps.push({type:"shape",cadType:t,cadLayer:l.layer,handle:l.handle,background:r,points:[V.toLocal(C[0].x,1),V.toLocal(C[0].y,2),V.toLocal(C[1].x,1),V.toLocal(C[1].y,2),V.toLocal(C[3].x,1),V.toLocal(C[3].y,2),V.toLocal(C[2].x,1),V.toLocal(C[2].y,2)],segments:[1,2,2,2,5]})}},z.prototype.extrusionZNagative=function(w){var t=w.extrusionDirection;return!!t&&Math.abs(t.z+1)<1e-5},z.prototype.drawCircle=function(){var w,t,G,A,I,R,_,r,y,l,C,V,q,k,Z,z,L,Q,J,B,n=this,f=n._models;for(w=x.CIRCLE,A=0,I=w.length;A<I;A++){t=w[A],G=f[t];for(r in G)for(y=G[r],R=0,_=y.length;R<_;R++){if(l=y[R],C=l.startAngle||0,V=l.angleLength||2*Math.PI,q=C+V,k=n.toLocal(l.radius),Z=l.addonAngle||0,z=n.toLocal(l.center.x,1),L=n.toLocal(l.center.y,2),B=l.xInvert^n.extrusionZNagative(l),J=l.yInvert,J||B?B&&J?(C=Math.PI+C,q=Math.PI+q,Q=!1):(C=Math.PI*(B?1:2)-C,q=Math.PI*(B?1:2)-q,Q=!0):Q=!1,Q=!Q,C=2*Math.PI-C-Z,q=2*Math.PI-q-Z,Q){var i=C;C=q,q=i}var F={type:"arc",cadType:t,cadLayer:l.layer,handle:l.handle,borderColor:r,borderWidth:1,borderWidthAbsolute:!0,rect:[z-k,L-k,2*k,2*k],arcFrom:C,arcTo:q,arcClose:!1};n.options.convertArcToBezier?n.shapeComps.push(n._convertArcToBezier(F)):n.shapeComps.push(F)}}},z.prototype.drawText=function(){var w,t,G,A,I,R,_,r,y,l,C,V,q,k,Z,z,L,Q,J,B,n,f,i,F,S,N=this,T=N._models;w=x.TEXT,S=N.options.textScaleRatio;var m=N.options.useTextCompScale?N.options.browserMinFontSize:0;for(A=0,I=w.length;A<I;A++){t=w[A],G=T[t];for(r in G)for(y=G[r],R=0,_=y.length;R<_;R++)if(l=y[R],(C=l.text)&&C.length){if("MTEXT"===t)V=N.toLocal(l.height||12),q=N.toLocal(l.position.x,1),k=N.toLocal(l.position.y,2),n=l.angle?l.angle:l.directionX?Math.atan2(l.directionY,l.directionX):0,n+=l.addonAngle||0,F=1,B=l.attachmentPoint||1,Q=B%3,J=Math.floor(B/3),J=1===J?"middle":0===J?"top":"bottom",z=0===Q?"right":2===Q?"center":"left";else{V=N.toLocal(l.textHeight||12);var U=l.endPoint;U||(U=l.startPoint),q=U.x,k=U.y,n=l.rotation||0,F=l.xScale||1,2===l.generationFlags?n=2*Math.PI-n:4===l.generationFlags?n=Math.PI-n:6===l.generationFlags&&(n=Math.PI+n),q=N.toLocal(q,1),k=N.toLocal(k,2),Q=l.halign,J=l.valign,4===Q&&(Q=1,J=2),z=2===Q||5===Q?"right":1===Q||4===Q?"center":"left",J=3===J?"top":2===J?"middle":"bottom"}k+=V/4,n=2*Math.PI-n;var c=V*S,v=1;if(c<m&&(v=c/m,c=m),Z=c+"px "+(l.font||N.options.font),"MTEXT"===t)for(C=C.replace(/\\{/g,"#@#"),C=C.replace(/\\}/g,"#@@"),C=C.replace(/({|})/g,""),C=C.replace(/#@#/g,"{"),C=C.replace(/#@@/g,"}"),C=C.replace(/\\[FfLIOoKkNXQHWSACT~][^;]*;/g,""),k-=V/6,f=C.split("\\P"),i=0;i<f.length;i++)L={type:"text",cadType:t,cadLayer:l.layer,handle:l.handle,color:r,text:f[i],rotation:n,rect:[q,k+i*V*1.5,0,0],align:z,vAlign:J,font:Z,visible:!l.hidden},1!==v&&(L.scaleX=L.scaleY=v),N.shapeComps.push(L);else L={type:"text",cadType:t,cadLayer:l.layer,handle:l.handle,color:r,text:C,scaleX:F,rotation:n,rect:[q,k,1e-5,1e-5],align:z,vAlign:J,font:Z,visible:!l.hidden},1!==v&&(L.scaleX*=v,L.scaleY=v),N.shapeComps.push(L)}}},z.prototype.drawEllipse=function(){var w,t,G,A,I,R,_,r,y,l,C,V,q,k,Z,z,L,Q,J,B,n,f,i=this,F=i._models;for(w=x.ELLIPSE,A=0,I=w.length;A<I;A++){t=w[A],G=F[t];for(r in G)for(y=G[r],R=0,_=y.length;R<_;R++){if(l=y[R],C=l.major,V=Math.atan2(C.y,C.x),q=i.toLocal(Math.sqrt(C.x*C.x+C.y*C.y)),k=q*l.ratio,Z=l.startAngle||0,z=l.angleLength||2*Math.PI,L=Z+z,Q=i.toLocal(l.center.x,1),J=i.toLocal(l.center.y,2),B=l.xInvert,n=l.yInvert^i.extrusionZNagative(l),n^=1,n||B?B&&n?(Z=Math.PI+Z,L=Math.PI+L,f=!1):(Z=Math.PI*(B?1:2)-Z,L=Math.PI*(B?1:2)-L,f=!0):f=!1,f){var S=Z;Z=L,L=S}V=2*Math.PI-V;var N={type:"arc",cadType:t,cadLayer:l.layer,handle:l.handle,borderColor:r,borderWidth:1,borderWidthAbsolute:!0,rotation:V,rect:[Q-q,J-k,2*q,2*k],arcFrom:Z,arcTo:L,arcClose:!1,arcOval:!0};i.options.convertArcToBezier?i.shapeComps.push(i._convertArcToBezier(N)):i.shapeComps.push(N)}}},z.prototype._convertArcToBezier=function(w){var t=w.arcFrom,G=w.arcTo;if(t===G)return w;t>G&&(G+=2*Math.PI);var A={type:"shape"},I=w.rect,R="type,rect,arcFrom,arcTo,arcClose,arcOval,rotation".split(",");for(var _ in w)R.indexOf(_)>=0||(A[_]=w[_]);var r,y,l,C,V,q=A.points=[],k=A.segments=[1],Z=G-t,z=Math.max(Math.ceil(Math.abs(Z)/Math.PI*2),1),x=Z/z,L=Math.tan(.5*x),Q=Math.sin(x)*(Math.sqrt(4+3*L*L)-1)/3,J=Math.cos(t),B=Math.sin(t),n=I[2]/2,f=I[3]/2,i=I[0]+n,F=I[1]+f,S=Math.sin(w.rotation||0),N=Math.cos(w.rotation||0),T=function(w,t){var G=n*w,A=f*t;return{x:i+(N*G-S*A),y:F+(S*G+N*A)}},m=T(J,B);q.push(m.x,m.y);for(var U=0;U<z;U++)l=t+(U+1)*x,r=Math.cos(l),y=Math.sin(l),m=T(J-B*Q,B+J*Q),C=T(r+y*Q,y-r*Q),V=T(r,y),J=r,B=y,q.push(m.x,m.y,C.x,C.y,V.x,V.y),k.push(4);return A},z.prototype._transformPoint=function(w,t,G){if(w){var A=w.x,I=w.y;return G=G||1,{x:A*G*t.a+I*t.c+t.tx,y:A*G*t.b+I*t.d+t.ty}}},z.prototype._groupEntity=function(w,t,G,A,I){var R=this,_=R.getColor(t,G);if(_&&(!R.options.filter||!R.options.filter(t,I))){var r,y,l,C=R._transformPoint,V=t.type;if("DIMENSION"===V||"INSERT"===V){if(!t.block)return;var q=G.blocks[t.block];if(!q||!q.entities)return;if(!(l=R._blockDef[t.block]))return void console.log("no entity ",t.block);var k=A||{a:1,b:0,c:0,d:1,tx:0,ty:0};if("INSERT"===V){var Z=t.scale?t.scale.x:1,z=t.scale?t.scale.y:1,x=0,L=1,Q=0;if(t.deg&&(x=t.deg*Math.PI/180,x=2*Math.PI-x,L=Math.cos(x),Q=Math.sin(x)),A){var J=Z*L,B=Z*Q,n=-z*Q,f=z*L,i=t.center.x,F=t.center.y;k={a:A.a*J+A.c*B,b:A.b*J+A.d*B,c:A.a*n+A.c*f,d:A.b*n+A.d*f,tx:A.a*i+A.c*F+A.tx,ty:A.b*i+A.d*F+A.ty}}else k={a:Z*L,b:Z*Q,c:-z*Q,d:z*L,tx:t.center.x,ty:t.center.y}}R.extrusionZNagative(t)&&(k.a*=-1,k.c*=-1,k.tx*=-1);var S=l.bound,N=(S.pos.x,S.pos.y,C({x:S.xMin,y:S.yMin},k)),T=C({x:S.xMax,y:S.yMax},k),m=C({x:S.xMin,y:S.yMax},k),U=C({x:S.xMax,y:S.yMin},k),c=R._bound;c.xMin=Math.min(c.xMin,N.x,T.x,m.x,U.x),c.yMin=Math.min(c.yMin,N.y,T.y,m.y,U.y),c.xMax=Math.max(c.xMax,N.x,T.x,m.x,U.x),c.yMax=Math.max(c.yMax,N.y,T.y,m.y,U.y);var v;return(v=R._models.BLOCK)||(R._models.BLOCK=v=[]),void v.push({handle:t.handle,block:t.block,transform:k})}(r=w[V])||(r=w[V]={}),(y=r[_])||(y=r[_]=[]);var E=R.extrusionZNagative(t)&&["POINT","LINE","ELLIPSE"].indexOf(V)<0;if(A||E){A||(A={a:1,b:0,c:0,d:1,tx:0,ty:0});var O={};for(var H in t)O[H]=t[H];O.radius&&(O.radius*=Math.sqrt(A.a*A.a+A.b*A.b)),O.textHeight&&(O.textHeight*=Math.sqrt(A.a*A.a+A.b*A.b));var X=E?-1:1;if(O.position=C(O.position,A,X),O.startPoint=C(O.startPoint,A,X),O.center=C(O.center,A,X),"ELLIPSE"===V){var b;b=C({x:t.major.x+t.center.x,y:t.major.y+t.center.y},A,X),O.major={x:b.x-O.center.x,y:b.y-O.center.y},R.extrusionZNagative(t)&&(O.major.x*=-1)}var p;O.vertices&&(p=[],O.vertices.forEach(function(w){var t=C(w,A,X);w.bulge&&(t.bulge=w.bulge),p.push(t)}),O.vertices=p),O.points&&(p=[],O.points.forEach(function(w){var t=C(w,A,X);w.bulge&&(t.bulge=w.bulge),p.push(t)}),O.points=p);var $=Math.atan2(A.b,A.a),M=Math.cos($);O.yInvert=A.d*M<0,O.xInvert=A.a*M<0,0!==$&&(O.addonAngle=$),t=O}R.mergeBound(t),y.push(t)}},z.prototype.getPointsBound=function(w){for(var t=1/0,G=1/0,A=-1/0,I=-1/0,R=0,_=w.length;R<_;R++){var r=w[R];t=Math.min(t,r.x),G=Math.min(G,r.y),A=Math.max(A,r.x),I=Math.max(I,r.y)}return{xMin:t,yMin:G,xMax:A,yMax:I}},z.prototype.mergeBound=function(w){var t,G,A=this;G=w.type;for(t in x)if(x[t].indexOf(G)>=0)break;var I,R,_,r,y,l,C,V,q,k,Z,z,L,Q,J,B,n,f,i,F,S,N=A.getPointsBound;switch(t){case"LINE":for(I=N(w.vertices),F=w.vertices.length,f=0;f<F;f++)i=w.vertices[f],A._isStraightLine(i.bulge)||(f!==F-1||w.shape)&&(S=N(A._getBulgeSegment(i,w.vertices[(f+1)%F],i.bulge)),I.xMin=Math.min(I.xMin,S.xMin),I.yMin=Math.min(I.yMin,S.yMin),I.xMax=Math.max(I.xMax,S.xMax),I.yMax=Math.max(I.yMax,S.yMax));break;case"SOLID":I=N(w.points);break;case"POINT":if(!w.position)return;R=w.position.x,_=w.position.y,I={xMin:R,yMin:_,xMax:R,yMax:_};break;case"TEXT":if(!w.text||!w.text.length)return;R=w.position?w.position.x:w.startPoint.x,_=w.position?w.position.y:w.startPoint.y,n=w.height||w.textHeight||12,A._minFontSize=Math.min(A._minFontSize,n),I={xMin:R,yMin:_,xMax:R+n*w.text.length,yMax:_+n};break;case"CIRCLE":for(R=w.center.x,_=w.center.y,r=w.radius,y=[],l=w.startAngle||0,C=l+(w.angleLength||2*Math.PI),V=w.xInvert^A.extrusionZNagative(w),q=w.yInvert,k=V?-1:1,Z=q?-1:1,z=l;z<C+Math.PI/30;z+=Math.PI/30)z=Math.min(z,C),y.push({x:R+k*r*Math.cos(z),y:_+Z*r*Math.sin(z)});I=N(y);break;case"ELLIPSE":for(R=w.center.x,_=w.center.y,y=[],L=Math.sqrt(w.major.x*w.major.x+w.major.y*w.major.y),Q=L*w.ratio,r=Math.atan2(w.major.y,w.major.x),J=Math.sin(r),B=Math.cos(r),l=w.startAngle||0,C=l+(w.angleLength||2*Math.PI),V=w.xInvert,q=w.yInvert^A.extrusionZNagative(w),k=V?-1:1,Z=q?-1:1,z=l;z<C+Math.PI/30;z+=Math.PI/30){z=Math.min(z,C);var T=k*L*Math.cos(z),m=Z*Q*Math.sin(z);y.push({x:R+(B*T-J*m),y:_+(J*T+B*m)})}I=N(y);break;default:return}var U=A._bound;U.xMin=Math.min(U.xMin,I.xMin),U.yMin=Math.min(U.yMin,I.yMin),U.xMax=Math.max(U.xMax,I.xMax),U.yMax=Math.max(U.yMax,I.yMax)},z.prototype.parseFile=function(w){var t=this,G="string"==typeof t.options.sanitize?{sanitize:t.options.sanitize}:null,A=new _(G),I=A.parseSync(w);t._dxf=I,t._isAc2015="AC1015"===I.header.$ACADVER,t._dxfViewport=t.getCameraParametersFromDxf(I)},z.prototype.toLocal=function(w,t){var G=this;return(2===t?-(w-G._shiftY):1===t?w-G._shiftX:w)*G._scale},z.prototype.getCameraParametersFromDxf=function(w){var t,G,A,I,R,_,r,y,l,C,V,q;if(!t&&w.tables&&w.tables.viewPort){C=w.tables.viewPort.viewPorts;for(l in C)if(V=C[l],q=V.viewDirectionFromTarget,V.center&&(0===V.renderMode||q&&0===q.x&&0===q.y&&1===q.z)){A=V.center,I=V.upperRightCorner,R=V.lowerLeftCorner,t={x:I.x,y:I.y},G={x:R.x,y:R.y},_=V.viewWidth||0,r=V.viewHeight||0,V.viewTarget&&(A={x:A.x+V.viewTarget.x,y:A.y+V.viewTarget.y});break}}return!t&&w.header&&(y=w.header,y.$EXTMIN&&y.$EXTMAX&&(t=y.$EXTMAX,G=y.$EXTMIN)),_=Math.max(_,t.x-G.x),r=Math.max(r,t.y-G.y),A=A||{x:_/2+G.x,y:r/2+G.y},{width:_,height:r,x:A.x,y:A.y}},z.prototype.getColor=function(w,t){var A,I=this;if(w||console.log("no entity",w),t.tables&&t.tables.layer&&(A=t.tables.layer.layers[w.layer]),!A||A.visible){var R;w.color!==G?0===(R=w.color)&&(R=I.options.defaultColor):A&&(R=A.color),R&&16777215!==R||(R=I.options.defaultColor);var R="#"+((1<<24)+R).toString(16).slice(1);return I.options.mapColor&&(R=I.options.mapColor(R)),R}},z.prototype.sortBlocks=function(w){var G,A,I,R,_=t.keys(w),r={};for(G in w)if(A=w[G],A.entities)for(var y=0,l=A.entities.length;y<l;y++)I=A.entities[y],"DIMENSION"!==(R=I.type)&&"INSERT"!==R||I.block&&(r[G]||(r[G]=[]),r[G].push(I.block));for(var C=_.length,V=C,q={},k=new Array(C),Z=!1,z=function(w,t,G){if(G.indexOf(w)>=0)return void(Z=!0);if(!q[t]){q[t]=!0;var A=r[w],I=A?A.length:0;if(I){var R=G.concat(w);do{var y=A[--I];if(z(y,_.indexOf(y),R),Z)break}while(I)}k[--C]=w}};V--;)q[V]||z(_[V],V,[]);return Z?[]:k};var L=C.DxfWriter=function(w){this.init(w)};L.prototype={},L.prototype.constructor=L,t.defineProperties(L.prototype,{}),L.prototype.init=function(w){var G=this,A=C.DxfWriter.template;A.converted||(t.keys(A).forEach(function(w){A[w]=A[w].join("\n")}),A.converted=!0),G._transformFunc=w.transformFunc||function(w){return w},G._drawingScale=w.scale||1,G._matchFunc=w.matchFunc||function(){return!0},G._maxHandleId=262128},L.prototype.toDxf=function(w,t){var G=this;return G.dxfContent=w,G.gv=t,G.outputEntityLines=["ENTITIES","  0","ENDSEC"],G._fetchEntityContent(),G._collectGvEntity(),G._insertEntities(),G._write()},L.prototype._collectGvEntity=function(){var w=this;w.gv.dm().toDatas(w._matchFunc).each(function(t){var G=t.a("handle");G&&w._recordMaxHandleId(G)})},L.prototype._fetchEntityContent=function(){
var w=this,t=w.dxfContent,G=w.entitiesStartIndex=t.indexOf("ENTITIES"),A=w.entitiesEndIndex=t.indexOf("ENDSEC",G)+"ENDSEC".length;w.entitiesContent=t.slice(G,A),w.dxfEntityLines=w.entitiesContent.split(/\r\n|\n/)},L.prototype._updateEntities=function(){var w=this,t=w.outputEntityLines,A=w.dxfEntityLines,I=w.gvEntities;t.push(A[0]);for(var R,_,r,y,l,C,V,q,k,Z,z,x,L,Q,J=1,B=1e5,n=w._findCode,f=w._toFloat;B--;){if("ENDSEC"===(y=A[J+1].trim())){t.push(A[J]),t.push(A[J+1]);break}for(R=J+2;B--&&"0"!==A[R].trim();)R+=2;if(l=A[n("5",A,J,R)],w._recordMaxHandleId(l),C=I[l]){for(_=t.length,z=J;z<R;z++)t.push(A[z]);if(r=t.length,J=R,"edge"!==C.a("shapeType")){if("image"===C.a("shapeType")){for(V=w._getNodeRealScale(C),k=2*Math.PI-C.getRotation();k>=2*Math.PI;)k-=2*Math.PI;for(;k<0;)k+=2*Math.PI;q=w._transformFunc(C.getPosition()),Math.abs(V.x-1)<1e-5&&Math.abs(V.y+1)<1e-5&&(V.x=-1,V.y=1,k=2*Math.PI-k);var i={};[{key:"10",value:q.x},{key:"20",value:q.y},{key:"42",value:V.y,default:1,before:["50"]},{key:"41",value:V.x,default:1,dependOn:"42",before:["42","50"]},{key:"50",value:180*k/Math.PI,default:0}].forEach(function(w){if(x=w.key,L=w.value,Q=w.default!==G&&Math.abs(L-w.default)<1e-5,L=f(L,"10"===x||"20"===x||"50"===x),Z=n(x,t,_,r))L!==t[Z].trim()&&(t[Z]=L);else{if(Q&&(!w.dependOn||i[w.dependOn]))return void(i[x]=!0);var A=!1;do{if(!w.before)break;if(Z=G,w.before.forEach(function(w){var G=n(w,t,_,r);G&&(!Z||G<Z)&&(Z=G)}),!Z)break;t.splice(Z-1,0," "+x,L),A=!0}while(!1);A||(t.push(" "+x),t.push(L)),r+=2}})}}else w._tryUpdateEdge(t,_,r,y,C)}else console.log("have no entity with handle "+l+" "+y),J=R}},L.prototype._recordMaxHandleId=function(w){var t=parseInt("0x"+w),G=this;G._maxHandleId=Math.max(G._maxHandleId,t)},L.prototype._nextHandleId=function(){return(++this._maxHandleId).toString(16).toUpperCase()},L.prototype._getNodeRealScale=function(w){var t=this,G=w.getScale(),A=w.getSize(),I=C.Default.getImage(w.getImage());return{x:G.x*A.width*I.scale/(I.width*t._drawingScale),y:G.y*A.height*I.scale/(I.height*t._drawingScale)}},L.template={INSERT:["  0","INSERT","  5","$HANDLE","330","1F","100","AcDbEntity","  8","0","100","AcDbBlockReference","  2","$BLOCK"," 10","$POSITION.X"," 20","$POSITION.Y"," 30","0.0"," 41","$SCALE.X"," 42","$SCALE.Y"," 50","$ROTATION"]},L.prototype._insertEntities=function(){var w,t=this;t.gv.dm().toDatas(t._matchFunc).each(function(G){if(w=null,G.a("addonBlock"))w=t._addonBlock(G);else if(G.a("addonText"))w=t._addonText(G);else if(G.a("addonARC")&&!G.s("shape.arc.oval")){var A=G.s("shape.arc.to"),I=G.s("shape.arc.from")||0;w=!A||Math.abs(A-I)>=2*Math.PI?t._addonCircle(G):t._addonARC(G)}else G.a("addonARC")&&G.s("shape.arc.oval")?w=t._addonEllipse(G):G.a("addonLine")?w=t._addonLine(G):G.a("addonRect")&&(w=t._addonRect(G));if(w){var R=w.length,_=t.outputEntityLines.length,r=_+R;t.outputEntityLines.length=r,t.outputEntityLines[r-1]=t.outputEntityLines[_-1],t.outputEntityLines[r-2]=t.outputEntityLines[_-2];for(var y=0,l=_-2;y<R;++y,++l)t.outputEntityLines[l]=w[y]}})};var Q=function(w){if(w instanceof C.Shape){var t=new C.Matrix,G=w.getPosition();return t.translate(-G.x,-G.y).scale(w.getScaleX(),w.getScaleY()).rotate(w.getRotation()).translate(G.x,G.y),t}return w.getMatrix?w.getMatrix():new C.Matrix};L.prototype._addonRect=function(w){var t=this,G=w.getPoints(),A=w.getSegments(),I=!0;A&&(I=5===A.get(A.size()-1));var R,_=["  0","LWPOLYLINE","  5",w.a("handle")||t._nextHandleId(),"330","1F","100","AcDbEntity","  8","0","100","AcDbPolyline"," 90","        "+G.size()," 70","     "+(I?1:0)," 43","0.0"],r=t._toFloat,y=Q(w);return G.each(function(w){R=t._transformFunc(y.tf(w)),_.push.apply(_,[" 10",r(R.x,!0)," 20",r(R.y,!0)])}),_},L.prototype._addonCircle=function(w){var t=this,G=["  0","CIRCLE","  5",w.a("handle")||t._nextHandleId(),"330","1F","100","AcDbEntity","  8","0","100","AcDbCircle"],A=t._toFloat,I=t._transformFunc(w.getPosition());G.push.apply(G,[" 10",A(I.x,!0)," 20",A(I.y,!0)," 30","0.0"]);var R=w.getScale(),_=w.getWidth()*R.x,r=w.getHeight()*R.y;return G.push.apply(G,[" 40",.5*Math.min(_,r)/t._drawingScale]),G},L.prototype._addonLine=function(w){var t,G=this,A=[],I=G._toFloat,R=w.getPoints(),_=Q(w),r=G._transformFunc(_.tf(R.get(0))),y=w.a("handle")||G._nextHandleId();return R.each(function(w,R){0!==R&&(A.push.apply(A,["  0","LINE","  5",y,"330","1F","100","AcDbEntity","  8","0","100","AcDbLine"]),A.push.apply(A,[" 10",I(r.x,!0)," 20",I(r.y,!0)," 30","0.0"]),t=G._transformFunc(_.tf(w)),A.push.apply(A,[" 11",I(t.x,!0)," 21",I(t.y,!0)," 31","0.0"]),r=t,y=G._nextHandleId())}),A},L.prototype._addonEllipse=function(w){var t=this,G=["  0","ELLIPSE","  5",w.a("handle")||t._nextHandleId()];G.push.apply(G,["330","1F","100","AcDbEntity","  8","0","100","AcDbEllipse"]);var A=t._toFloat,I=t._transformFunc(w.getPosition());G.push(" 10");G.push(A(I.x,!0));G.push(" 20");G.push(A(I.y,!0)),G.push.apply(G,[" 30","0.0"]);var R,_=w.getScale(),r=w.getWidth()*_.x/t._drawingScale,y=w.getHeight()*_.y/t._drawingScale,l=.5*Math.max(r,y),C=0;r>y?R={x:l,y:0}:(R={x:0,y:l},C=.5*-Math.PI);var V=-w.getRotation(),q=Math.sin(V),k=Math.cos(V),Z=k*R.x-q*R.y,z=q*R.x+k*R.y;G.push.apply(G,[" 11",A(Z,!0)," 21",A(z,!0)," 31","0.0"]),G.push.apply(G,["210","0.0","220","0.0","230","1.0"]);var x=r/y;x>1&&(x=1/x),G.push.apply(G,[" 40",A(x,!0)]);var L=w.s("shape.arc.from"),Q=w.s("shape.arc.to"),J=2*Math.PI-Q+C,B=(J+Q-L)%(2*Math.PI);return G.push.apply(G,[" 41",J," 42",B||2*Math.PI]),G},L.prototype._addonARC=function(w){var t=this,G=["  0","ARC","  5",w.a("handle")||t._nextHandleId()];G.push.apply(G,["330","1F","100","AcDbEntity","  8","0","100","AcDbCircle"]);var A=t._toFloat,I=t._transformFunc(w.getPosition());G.push(" 10");G.push(A(I.x,!0));G.push(" 20");G.push(A(I.y,!0)),G.push.apply(G,[" 30","0.0"]);var R=w.getScale(),_=w.getWidth()*R.x,r=w.getHeight()*R.y,y=.5*Math.min(_,r);G.push.apply(G,[" 40",A(y/t._drawingScale,!0)]),G.push.apply(G,["100","AcDbArc"]);var l=w.getRotation(),C=w.s("shape.arc.from"),V=w.s("shape.arc.to"),q=2*Math.PI,k=(q-V-l)%q,Z=(k+V-C)%q;return Z=Z||2*Math.PI,G.push.apply(G,[" 50",A(180*k/Math.PI,!0)," 51",A(180*Z/Math.PI,!0)]),G};var J={left:0,center:1,right:2},B={top:3,middle:2,bottom:1};L.prototype._addonText=function(w){var t=this,G=["  0","TEXT","  5",w.a("handle")||t._nextHandleId()];G.push.apply(G,["330","1F","100","AcDbEntity","  8","0","100","AcDbText"]);var A=w.s("text.font")||"16px Standard",I=w.s("text"),R=C.Default.getTextSize(A,I),_=w.getScale(),r=parseFloat(A)/t._drawingScale*_.y,y=r/R.height*R.width,l=t._toFloat,V=t._transformFunc(w.getPosition());V.y+=r/4;var q=G.push(" 10");G.push(l(V.x,!0));var k=G.push(" 20");G.push(l(V.y,!0)),G.push.apply(G,[" 30","0.0"]),G.push(" 40"),G.push(r),G.push("  1"),G.push(I);var Z=2*Math.PI-w.getRotation();G.push(" 50"),G.push(l(180*Z/Math.PI%360,!0)),G.push(" 41"),G.push(_.x/_.y),A=A.substr(A.indexOf("px")+3).split(","),G.push("  7"),G.push(A[0]);var z=w.s("text.align")||"left",x=w.s("text.vAlign")||"bottom";if("left"!==z&&(G.push(" 72"),G.push("     "+J[z])),"bottom"!==x||"left"!==z){G.push(" 11"),G.push(l(V.x,!0)),G.push(" 21"),G.push(l(V.y,!0)),G.push.apply(G,[" 31","0.0"]);var L=0,Q=0;"center"===z?L=.5*y:"right"===z&&(L=y),L*=_.x,"top"===x?Q=r:"middle"===x&&(Q=.5*r),Q*=_.y;var n=Math.cos(Z+Math.PI),f=Math.sin(Z+Math.PI);G[q]=n*L-f*Q+V.x,G[k]=f*L+n*Q+V.y}return G.push.apply(G,["100","AcDbText"]),"bottom"!==x&&(G.push(" 73"),G.push("     "+B[x])),G},L.prototype._addonBlock=function(w){var t=this,G=C.DxfWriter.template.INSERT;G=G.replace("$HANDLE",w.a("handle")||t._nextHandleId()),G=G.replace("$BLOCK",w.getImage());for(var A=t._getNodeRealScale(w),I=2*Math.PI-w.getRotation();I>=2*Math.PI;)I-=2*Math.PI;for(;I<0;)I+=2*Math.PI;var R=t._transformFunc(w.getPosition());Math.abs(A.x-1)<1e-5&&Math.abs(A.y+1)<1e-5&&(A.x=-1,A.y=1,I=2*Math.PI-I);var _=t._toFloat;return G=G.replace("$POSITION.X",_(R.x,!0)),G=G.replace("$POSITION.Y",_(R.y,!0)),G=G.replace("$SCALE.X",_(A.x)),G=G.replace("$SCALE.Y",_(A.y)),G=G.replace("$ROTATION",_(180*I/Math.PI,!0)),G.split(/\r\n|\n/)},L.prototype._tryUpdateEdge=function(w,t,G,A,I){var R=this,_=C.Default.getInternal(),r=_.getEdgeAgentPosition(R.gv,I.getSourceAgent(),I.s("edge.source.position"),I.s("edge.source.offset.x"),I.s("edge.source.offset.y"),I.s("edge.source.anchor.x"),I.s("edge.source.anchor.y")),y=_.getEdgeAgentPosition(R.gv,I.getTargetAgent(),I.s("edge.target.position"),I.s("edge.target.offset.x"),I.s("edge.target.offset.y"),I.s("edge.target.anchor.x"),I.s("edge.target.anchor.y"));r=R._transformFunc(r),y=R._transformFunc(y);var l=R._findCode;if("LINE"===A)w[l("10",w,t,G)]=r.x,w[l("20",w,t,G)]=r.y,w[l("11",w,t,G)]=y.x,w[l("21",w,t,G)]=y.y;else if("LWPOLYLINE"===A){for(var V,q=l("10",w,t,G),k=q;V=l("10",w,k+1,G);)k=V;k=(V=l("30",w,k+1,G))?V:l("20",w,k+1,G),w.splice(q-1,k-q+2);var Z=[r];I.s("edge.points").each(function(w){Z.push(R._transformFunc(w))}),Z.push(y);var z=q-1;Z.forEach(function(t){w.splice(z,0,"10",t.x,"20",t.y),z+=4})}},L.prototype._findCode=function(w,t,G,A){for(var I=G,R=!1;I<A;){if(w===t[I].trim()){R=!0;break}I+=2}if(R)return I+1},L.prototype._toFloat=function(w,t){return t||(w=Math.round(1e8*w)/1e8),w=""+w,w.indexOf(".")<0&&(w+=".0"),w},L.prototype._write=function(){var w=this,t=w.dxfContent,G=w.outputEntityLines.join("\n"),A=w.entitiesStartIndex,I=w.entitiesEndIndex;return t.slice(0,A)+G+t.slice(I)}}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);var GA=function(){function w(t,G){_G(this,w),this.editor=G,this.handler=t,this.cookie=0,this.callbacks={},this.cmds={};var A=kG.config.host||window.location.hostname,I=kG.config.port||window.location.port,R=this.url=window.location.protocol+"//"+A+":"+I;this.socket=io.connect(R),this.initEventListener()}return w.prototype.request=function(w,t,G){var A=++this.cookie;this.callbacks[A]=G,this.cmds[A]=w;var I=this.editor.sid;this.socket.emit(w,A,t,I?{sid:I}:null);var R=w;t&&(fw(t)?R=w+": "+t:t.path&&(R=w+": "+t.path)),this.handler({type:"request",message:R,cmd:w,data:t})},w.prototype.handleRespone=function(w,t){var G=this.callbacks[w],A=this.cmds[w];delete this.callbacks[w],delete this.cmds[w],this.handler({type:"response",message:A,cmd:A,data:t}),G&&G(t)},w.prototype.initEventListener=function(){var w=this;this.socket.on("connect",function(){w.handler({type:"connected",message:w.url})}),this.socket.on("disconnect",function(){w.handler({type:"disconnected",message:w.url})}),this.socket.on("fileChanged",function(t){w.handler({type:"fileChanged",path:t.path,event:t.event})}),this.socket.on("operationDone",function(t,G){w.handleRespone(t,G)}),this.socket.on("download",function(t){w.handler({type:"download",path:t})}),this.socket.on("confirm",function(t,G){w.handler({type:"confirm",path:t,datas:G})})},w}(),AA=function(w){function t(G,A){var I=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];_G(this,t);var R=lG(this,w.call(this,A));return R.editor=G,R.editable=I,R.dragToIndexEnabled=!0,R.dragToChildEnabled=!0,R.addTopPainter(R.drawDNDState.bind(R)),R}return yG(t,w),t.prototype.getLabelColor=function(t){return t!==this.draggingData||this.isSelected(t)?t.s("2d.visible")&&t.s("3d.visible")?w.prototype.getLabelColor.call(this,t):kG.config.color_disabled:kG.config.color_select},t.prototype.handleDelete=function(){this.editable&&this.removeSelection()},t.prototype.isDroppable=function(w,t){return!1},t.prototype._clearDragInfo=function(){this.editor.dnd.hideTip(),this._dragInfo&&(this._dragInfo=null,this.redraw())},t.prototype._endDrag=function(w,t){},t.prototype._endCrossDrag=function(w,t){},t.prototype.drawDNDState=function(w){kG.config.drawDNDState?w.drawDNDState=!0:(kG.config.texureImage3D&&(w.texureImage3D=!0),w.texureImage2D=!0);var t=void 0;if(this._dragInfo&&this._dragInfo.inView?t=this._dragInfo:this._crossDragInfo&&(t=this._crossDragInfo),t){var G=this.getWidth(),A=this.getRowHeight(),I=t.type,R=t.parent,_=R?this.getRowDatas().indexOf(R):-1,r=kG.config.color_select_dark;if(t.refData){if(this.dragToChildEnabled&&s(w,r,0,_*A,G,A,2),"up"===I||"down"===I){var y=t.x,l=t.y;w.beginPath(),w.arc(y-3,l,3,0,2*Math.PI,!0),w.moveTo(y,l),w.lineTo(G,l),w.lineWidth=2,w.strokeStyle=r,w.stroke()}}else{var C=this.getViewRect();s(w,r,C.x,C.y,C.width,C.height,2)}}},t.prototype._dragging=function(w,t){var G=this.getRowHeight(),A=this.lp(w),I=A.y/G,R=Math.floor(I);if(R>this.getRowSize()-1||R<0)t.refData=null,t.type="parent",t.parent=null;else{var _=A.y-R*G,r=this.dragToChildEnabled?.25:.5,y=this.dragToChildEnabled?.75:.5;this.dragToIndexEnabled?t.type=_<G*r?"up":_>G*y?"down":"parent":t.type="parent";var l=t.refData=this.getRowDatas().get(R);"up"===t.type?(t.parent=l.getParent(),t.x=(this.getLevel(l)+1)*this.getIndent(),t.y=R*G):"down"===t.type?(this.getToggleIcon(l)===this.getExpandIcon()?(t.parent=l,t.x=(this.getLevel(l)+2)*this.getIndent()):(t.parent=l.getParent(),t.x=(this.getLevel(l)+1)*this.getIndent()),t.y=(R+1)*G):t.parent=l}this.autoScroll(w),this.redraw()},t.prototype.$1$=function(){var w="";if(this.draggingData&&(w=this.getLabel(this.draggingData),this.isSelected(this.draggingData))){var t=this.sm().size();w+=t>1?" (+"+t+") ":""}return w},t.prototype.handleDragAndDrop=function(w,t){if(this.editable){if("prepare"===t)return void this._clearDragInfo();"begin"===t&&(this._dragInfo={tip:this.$1$(),view:this});var G=this._dragInfo;if(G){var A=this.editor.dnd;if("begin"===t||"between"===t){return this.getView().contains(T(w))?(G.inView=!0,this._dragging(w,G),A.clearDropView(w,G)):(G.inView&&this.redraw(),G.inView=!1,A.crossDrag(w,G)),void A.showTip(G.tip,w)}return"end"===t?(G.inView?this._endDrag(w,G):A.crossDrop(w,G),void this._clearDragInfo()):"cancel"===t?(G.inView||A.crossCancel(w,G),void this._clearDragInfo()):void 0}}},t.prototype.handleCrossDrag=function(w,t,G){if("exit"===t||"cancel"===t)return this._crossDragInfo=null,void this.redraw();if("enter"===t||"over"===t)return this._crossDragInfo||(this._crossDragInfo={}),void this._dragging(w,this._crossDragInfo);if("drop"===t){if(this.explorer){var A=this._crossDragInfo.parent?this._crossDragInfo.parent.url:this.explorer.currentDir,I={url:A,event:w};this.editor.fireEvent("explorerCrossDrop",I),I.preventDefault||this._endCrossDrag(w,G)}else this._endCrossDrag(w,G);return this._crossDragInfo=null,void this.redraw()}},t.prototype.isEditable=function(w){return this.editable},t.prototype.rename=function(w,t){w.setName(t)},t.prototype.handleDataDoubleSelect=function(w,t){if(this.isEditable(t)){var G=this.getLevel(t);G+=this.getIcon(t)?2:1,this.lp(w).x>G*this.getIndent()&&this.beginEditing(t)}},t.prototype.getEditingLabel=function(w){return this.getLabel(w)},t.prototype.beginEditing=function(w){var t=this;this.cancelEditing(),this.makeVisible(w),this.validate();var G=this.getLevel(w);G+=this.getIcon(w)?2:1;var A=this.getIndent()*G,I=this.ty()+this.getRowIndex(w)*this.getRowHeight(),R=Math.max(1,this.getWidth()-A),_=this.getRowHeight();this._currentEditor=new ht.widget.TextField,this._currentEditor.data=w;var r=this._currentEditor.getElement(),y=this.getEditingLabel(w);r.value=null==y?"":y,r.onblur=function(w){t.endEditing()},r.onkeydown=function(w){B(w)?t.endEditing():n(w)&&t.cancelEditing()},this.getView().appendChild(this._currentEditor.getView()),u(this._currentEditor,A,I,R,_),this._currentEditor.setFocus(),ht.Default.callLater(r.select,r)},t.prototype.endEditing=function(){var w=this._currentEditor;w&&(this.rename(w.data,w.getValue()),delete this._currentEditor,h(w.getView()),this.redraw())},t.prototype.cancelEditing=function(){var w=this._currentEditor;w&&(delete this._currentEditor,h(w.getView()),this.redraw())},t.prototype.addBlockItems=function(w){var t=this,G=function(){return t.sm().size()>0},A=function(){for(var w=t.sm(),G=w.getSelection(),A=0,I=w.size();A<I;A++){var R=G.get(A);if(R instanceof ht.Block&&!(R instanceof ht.RefGraph))return!0}return!1};w.push({separator:!0,visible:function(){return t.editable&&(G()||A())}}),w.push({id:"block",label:R("editor.block"),action:function(){t.editor.block()},visible:function(){return t.editable&&G()}}),w.push({id:"unblock",label:R("editor.unblock"),action:function(){t.editor.unblock()},visible:function(){return t.editable&&A()}})},t.prototype.addSelectDescendantItems=function(w){var t=this;w.push({id:"selectDescendant",label:R("editor.selectdescendant"),action:function(){var w=t.sm(),G=w.getSelection().toArray(),A=[];G.forEach(function(w){t.dm().eachByDepthFirst(function(w){G.indexOf(w)>=0||A.push(w)},w)}),w.as(A)},visible:function(){return!!t.sm().size()}})},t}(YG),IA=function(w){function t(G){var A=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];_G(this,t);var I=lG(this,w.call(this,G.editor,G.dataModel,A));return I.explorer=G,I.dragToIndexEnabled=!1,I.setSortFunc(kG.config.createFileTreeSortFunc(I)),I}return yG(t,w),t.prototype.isVisible=function(w){return!1!==w.a("visible")&&((!this._visibleFunc||!1!==this._visibleFunc(w))&&(w.fileType===LG||w.fileType===xG))},t.prototype.getLabel=function(w){return R("url:"+w.url,!0)||this.getEditingLabel(w)},t.prototype.getEditingLabel=function(w){return w.getName()},t.prototype.handleBackgroundClick=function(w){},t.prototype.handleDelete=function(){this.editable&&kG.config.removeFileByKeyboardEnabled&&this.explorer.deleteSelection(this)},t.prototype.isDroppable=function(w,t){return!(!this.editable||t.view!==this.explorer.list)||t.view===this.editor.dndFromOutside},t.prototype._endCrossDrag=function(w,t){var G=this;if(this._crossDragInfo){var A=t.view,I=this._crossDragInfo.parent;if(I||(I=this.explorer.rootNode),A===this.explorer.list){var _=A.draggingData,r=function(){A.isSelected(_)?A.sm().toSelection().each(function(w){G.editor.moveFile(w,I)}):G.editor.moveFile(_,I)};kG.config.promptForMovingFile?tt(R("editor.move"),R("editor.confirmmovefile"),r,function(){}):r()}else A===this.editor.dndFromOutside&&this.editor.dropLocalFileOnDir(w,I)}},t.prototype._endDrag=function(w,t){var G=this,A=t.parent;A||(A=this.explorer.rootNode);var I=this.draggingData,_=function(){if(G.isSelected(I)){G.getTopRowOrderSelection().each(function(w){G.editor.moveFile(w,A)})}else G.editor.moveFile(I,A),G.sm().ss(I);A&&G.expand(A)};kG.config.promptForMovingFile?tt(R("editor.move"),R("editor.confirmmovefile"),_,function(){}):_()},t.prototype.isEditable=function(w){return this.editable&&w&&!1!==w.a("editable")},t.prototype.beginEditing=function(t){var G={data:t,url:t.url};this.editor.fireEvent("fileRenaming",G),G.preventDefault||w.prototype.beginEditing.call(this,t)},t.prototype.rename=function(w,t){this.editor.renameFile(w,t,function(){w.s("label")?w.s("label",t):w.setName(t)})},t.prototype.getIcon=function(w){return void 0!==w.getIcon()?w.getIcon():w.fileType===LG?this.hasExpandedChild(w)?"editor.direxpanded":"editor.dircollapsed":w.fileType===xG?"editor.root.state":null},t}(AA),RA=function(w){function t(G){return _G(this,t),lG(this,w.call(this,G))}return yG(t,w),t.prototype.isVScrollable=function(){return this.gv.getViewRect().height<this.gv.getScrollRect().height},t.prototype.isV=function(w){var t=this.gv.getViewRect();return this.isVScrollable()&&(t.x+t.width-this.gv.lp(w).x)*this.gv.getZoom()<ht.Default.scrollBarInteractiveSize},t.prototype.clear=function(w){w&&this._dragging&&!this._dragCancel&&this.gv.handleDragAndDrop(w,"end"),this.gv.draggingData&&(this.gv.draggingData.iv(),this.gv.draggingData=null,this.gv.redraw()),this._dragging=this._dragCancel=this._clientPoint=null},t.prototype.handle_mousedown=function(w){this.handle_touchstart(w)},t.prototype.handle_touchstart=function(w){if(!this.isV(w)&&!Yw(w.target)){Gw(w),this.clear(w),this._clientPoint=N(w);var t=this.gv.getDataAt(w);i(w)?t?(this.gv.draggingData=t,t.iv(),this.gv.redraw(),this.gv.handleDragAndDrop(w,"prepare"),S(this,w)):this.gv.sm().cs():(t?this.handleSelection(w,t):this._cancelDataDoubleSelect(),this.clear(w))}},t.prototype.handle_mouseup=function(w){this.handle_touchend(w)},t.prototype.handle_touchend=function(w){if(this._clientPoint&&!this._dragging){var t=this.gv.getDataAt(w);t?this.handleSelection(w,t):this._cancelDataDoubleSelect()}this.gv._justDoubleClickData=!1,this.gv._levelChanged=!1,this.clear(w)},t.prototype.handleWindowMouseMove=function(w){this.handleWindowTouchMove(w)},t.prototype.handleWindowMouseUp=function(w){this.handleWindowTouchEnd(w)},t.prototype.handleWindowTouchMove=function(w){Gw(w),this._dragging?this._dragCancel||this.gv.handleDragAndDrop(w,"between"):this._clientPoint&&this.gv.draggingData&&c(N(w),this._clientPoint)>2&&(this._dragging=!0,this.gv.handleDragAndDrop(w,"begin"))},t.prototype.handleWindowTouchEnd=function(w){Gw(w),this.clear(w)},t.prototype.handleSelection=function(w,t){var G=this.gv.sm();if(W(w))this.gv.isSelected(t)?G.removeSelection(t):G.appendSelection(t);else if(g(w)){var A=G.ld();if(A)for(var I=this.gv.nodes,R=I.indexOf(A),_=I.indexOf(t);R!==_;)R+=_>R?1:-1,G.as(I[R]);else G.ss(t)}else i(w)?G.contains(t)?(this._handleDataDoubleSelect(w,t),F(w)&&this._cancelDataDoubleSelect()):(this._cancelDataDoubleSelect(),!0!==this.gv._levelChanged&&G.ss(t)):G.contains(t)||G.ss(t)},t.prototype.handle_keydown=function(w){if(!Yw(w.target))if(n(w))this._dragging&&!this._dragCancel&&(this.gv.handleDragAndDrop(w,"cancel"),this._dragCancel=!0);else if(L(w)||J(w)||x(w)||Q(w)){var t=this.gv.sm(),G=this.gv.nodes,A=t.ld();if(G.length){var I=void 0;if(A){var R=G.indexOf(A);L(w)||x(w)?0!==R&&(I=G[R-1]):R!==G.length-1&&(I=G[R+1])}else I=G[0];I&&(g(w)?t.as(I):t.ss(I))}}},t.prototype._handleDataDoubleSelect=function(w,t){var G=this;this._cancelDataDoubleSelect(),this._doubleSelectTimer=setTimeout(function(){G.gv.handleDataDoubleSelect(w,t),G._doubleSelectTimer=void 0},ht.Default.doubleClickSpeed)},t.prototype._cancelDataDoubleSelect=function(){this._doubleSelectTimer&&(clearTimeout(this._doubleSelectTimer),this._doubleSelectTimer)},t}(ht.graph.Interactor),_A=function(w){function t(G){_G(this,t);var A=lG(this,w.call(this,G.editor,G.dm));return A.displayView=G,A.graphView=G.graphView,A.nodeIcon=jw(A),A.initMenu(),A.initStudio&&A.initStudio(),G.dm.addDataPropertyChangeListener(function(w){var t=w.data;(t instanceof ht.Shape||t instanceof ht.Edge)&&(t.editorIcon=null)}),A}return yG(t,w),t.prototype.getToolTip=function(w){return kG.config.getToolTip(w,this)},t.prototype.getBorderColor=function(w){return null},t.prototype.onDataDoubleClicked=function(w,t){this.editor.fitSelection()},t.prototype.onPropertyChanged=function(t){"filter"===t.property&&(this.visibleMap=null,this.ivm()),w.prototype.onPropertyChanged.call(this,t)},t.prototype.handleDataPropertyChange=function(t){!this._filter||"name"!==t.property&&"displayName"!==t.property?w.prototype.handleDataPropertyChange.call(this,t):(this.visibleMap=null,this.ivm())},t.prototype.checkVisible=function(w){if(!this._filter)return!0;if(kG.config.displayTreeVisibleFunc)return kG.config.displayTreeVisibleFunc(w,this._filter);var t=this.getLabel(w),G=(this._filter+"").toLowerCase();return null!=t&&(t=(t+"").toLowerCase(),t.indexOf(G)>=0)},t.prototype.validateModel=function(){var t=this;this._filter&&!this.visibleMap&&(this.visibleMap={},this.getDataModel().each(function(w){if(t.checkVisible(w)){t.visibleMap[w._id]=!0;for(var G=w.getParent();G&&!t.visibleMap[G._id];)t.visibleMap[G._id]=!0,G=G.getParent()}})),w.prototype.validateModel.call(this),kG.config.filterDisplayViewEnabled&&this.graphView.setVisibleFunc(function(w){return t.isVisible(w,!0)})},t.prototype.isVisible=function(w,t){if(!t&&w._refGraph)return!1;var G=this.getVisibleFunc();return!(G&&!G(w))&&(!this._filter||this.visibleMap&&this.visibleMap[w._id])},t.prototype.validate=function(){this.graphView.validate(),w.prototype.validate.call(this)},t.prototype.getLabel=function(w){return null==w.toLabel()&&w.s("editor.folder")?R("ht.Folder"):w.toLabel()||w.s("label")||R(w.getClassName())},t.prototype.getIcon=function(w){return w instanceof ht.SubGraph?"editor.subgraph":w instanceof ht.Group?"editor.group":w instanceof ht.RefGraph||w instanceof ht.Text?w.getIcon():w instanceof ht.Block?"editor.block":w instanceof ht.Shape?(w.editorIcon||(w.editorIcon=sw(w)),w.editorIcon):w instanceof ht.Edge?(w.editorIcon||(w.editorIcon=dw(this,w)),w.editorIcon):w instanceof ht.Node?this.nodeIcon:w.s("editor.folder")?this.hasExpandedChild(w)?"editor.direxpanded":"editor.dircollapsed":null},t.prototype.isDroppable=function(w,t){return!!this.editor.editable&&(t.view===this.editor.symbols.getFileListView()||(t.view===this.editor.assets.getFileListView()||t.view===this.editor.displays.getFileListView()))},t.prototype._endCrossDrag=function(w,t){var G=this;if(this.editor.editable&&this._crossDragInfo){this.editor.beginTransaction();var A=[],I=t.view,R=this._crossDragInfo.type,_=this._crossDragInfo.parent,r=this._crossDragInfo.refData;I!==this.editor.symbols.getFileListView()&&I!==this.editor.assets.getFileListView()||I.toDraggingDatas("down"===R).forEach(function(w){var t=new ht.Node;t.setImage(w.getFileUUID()),t.setDisplayName(b(w.getName())),A.push(t),G.displayView.addData(t,!0),G.editor.gv.$63$([t]),G._dropData(t,R,_,r)}),I===this.editor.displays.getFileListView()&&I.toDraggingDatas("down"===R).forEach(function(w){if(w.url!==G.editor.url){var t=new ht.RefGraph;t.setRef(w.getFileUUID()),t.setDisplayName(b(w.getName())),A.push(t),G.displayView.addData(t,!0),G._dropData(t,R,_,r)}}),A.length&&this.sm().ss(A),this.editor.endTransaction()}},t.prototype._endDrag=function(w,t){var G=this;if(this.editor.editable){this.editor.beginTransaction();var A=t.type,I=t.parent,R=t.refData;if(this.isSelected(this.draggingData)){var _=this.getTopRowOrderSelection();"down"===A&&_.reverse(),_.each(function(w){G._dropData(w,A,I,R)})}else this._dropData(this.draggingData,A,I,R),this.sm().ss(this.draggingData);I&&this.expand(I),this.editor.endTransaction()}},t.prototype._dropData=function(w,t,G,A){if(this.editor.editable)if(w.setParent(G),"down"===t||"up"===t){var I=G?G.getChildren():this.dm().getRoots(),R=I.indexOf(A);"down"===t&&R++,I.indexOf(w)<R&&R--,this.dm().moveTo(w,R)}else G||this.dm().moveToBottom(w)},t.prototype.rename=function(w,t){w.setDisplayName(t)},t.prototype.initMenu=function(){this.menu=new WG;var w=[];this.initMenuItems(w),this.menu.setItems(w),this.menu.addTo(this.getView()),this.editor.menus.push(this.menu)},t.prototype.onClosed=function(){l(this.editor.menus,this.menu)},t.prototype.initMenuItems=function(w){var t=this,G=function(){for(var w=t.editor.selection,G=0;G<w.length;G++)if(w[G].s("editor.folder"))return!0;return!1};w.push.apply(w,[{id:"folder",label:R("editor.folder"),action:function(){t.editor.folder()},visible:function(){return t.editable&&!!t.editor.ld}},{id:"unfolder",label:R("editor.unfolder"),action:function(){t.editor.unfolder()},visible:function(){return t.editable&&G()}},{separator:!0,visible:function(){return t.editable&&!!t.editor.ld}},{id:"copy",label:R("editor.copy"),action:function(){t.editor.copy()},visible:function(){return t.editable&&!!t.editor.ld}},{id:"paste",label:R("editor.paste"),action:function(){t.editor.paste()},visible:function(){return t.editable&&t.editor.hasCopyInfo()}},{id:"delete",label:R("editor.delete"),action:function(){t.editor.delete()},visible:function(){return t.editable&&!!t.editor.ld}},{separator:!0,visible:function(){return t.editable&&!!t.editor.ld}},{id:"bringToFront",label:R("editor.bringtofront"),action:function(){t.editor.bringToFront()},visible:function(){return t.editable&&!!t.editor.ld}},{id:"bringForward",label:R("editor.bringforward"),action:function(){t.editor.bringForward()},visible:function(){return t.editable&&!!t.editor.ld}},{id:"sendBackward",label:R("editor.sendbackward"),action:function(){t.editor.sendBackward()},visible:function(){return t.editable&&!!t.editor.ld}},{id:"sendToBack",label:R("editor.sendtoback"),action:function(){t.editor.sendToBack()},visible:function(){return t.editable&&!!t.editor.ld}},{separator:!0,visible:function(){return t.editable&&!!t.editor.ld}},{id:"expandAll",label:R("editor.expandall"),action:function(){t.expandAll()}},{id:"collapseAll",label:R("editor.collapseall"),action:function(){t.collapseAll()}}]),this.addSelectDescendantItems(w),this.addBlockItems(w)},rG(t,[{key:"editable",get:function(){return this.editor.editable},set:function(w){}}]),t}(AA);ww(_A,{ms_ac:["filter"]});var rA=function(w){function t(G){var A=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];_G(this,t);var I=lG(this,w.call(this,G.dataModel));return I.explorer=G,I.editable=A,I.editor=G.editor,I.getHScrollBar().style.display="none",I.setMaxFileSize(kG.config.imageSize),I.enableToolTip(),I.setPannable(!1),I.setInteractors([new ht.graph.ScrollBarInteractor(I),new RA(I),new ht.graph.DefaultInteractor(I),new ht.graph.TouchInteractor(I,{editable:!1})]),I.mi(function(w){var t=w.kind;"beginScroll"===t?I.disableToolTip():"endScroll"===t&&I.enableToolTip()}),I}return yG(t,w),t.prototype.getToolTip=function(w){var t=this.getDataAt(w);return t?this._filter?t.url:this.getLabel(t):null},t.prototype.getLabel=function(w){return R("url:"+w.url,!0)||this.getEditingLabel(w)},t.prototype.isEditable=function(w){return this.editable&&w&&!1!==w.a("editable")},t.prototype.getEditingLabel=function(w){return w.s("label")||w.getName()},t.prototype.rename=function(w,t){this.editor.renameFile(w,t,function(){w.s("label")?w.s("label",t):w.setName(t)})},t.prototype.handleDelete=function(){this.editable&&kG.config.removeFileByKeyboardEnabled&&this.explorer.deleteSelection(this)},t.prototype.beginEditing=function(w){var t=this,G={data:w,url:w.url};if(this.editor.fireEvent("fileRenaming",G),!G.preventDefault){this.cancelEditing(),this.makeVisible(w),this.validate();var A=this.getDataUI(w),I=!1,R=void 0;if(this.explorer.isAccordionMode()&&w.fileType===LG?(R=w.getRect(),I=!0):A&&A.labelInfo&&(R=A.labelInfo.rect),R){var _=void 0,r=void 0,y=void 0,l=void 0;if(I)_=R.x,r=R.y,y=R.width,l=R.height;else if(this._layoutType===NG)_=this._rowHeight,r=w.p().y-this._rowHeight/2,y=this.getWidth()-_,l=this._rowHeight;else{var C=A.labelInfo.rect||w.getRect();_=w.p().x-w.getWidth()/2,r=C.y,y=w.getWidth(),l=C.height}r+=this.ty(),this._currentEditor=new ht.widget.TextField,this._currentEditor.data=w;var V=this._currentEditor.getElement(),q=this.getEditingLabel(w);w.fileType===QG&&(this._editingExtension=M(q),q=b(q)),V.value=null==q?"":q,V.onblur=function(w){t.endEditing()},V.onkeydown=function(w){B(w)?t.endEditing():n(w)&&t.cancelEditing()},this.getView().appendChild(this._currentEditor.getView()),u(this._currentEditor,_,r,y,l),this._currentEditor.setFocus(),ht.Default.callLater(V.select,V)}}},t.prototype.endEditing=function(){var w=this._currentEditor;w&&(this.rename(w.data,w.getValue()+(this._editingExtension||"")),delete this._currentEditor,delete this._editingExtension,h(w.getView()),this.redraw())},t.prototype.cancelEditing=function(){var w=this._currentEditor;w&&(delete this._currentEditor,h(w.getView()),this.redraw())},t.prototype._clearDragInfo=function(){this.editor.dnd.hideTip(),this._dragInfo&&(this._dragInfo=null,this.redraw())},t.prototype.handleDragAndDrop=function(w,t){if("prepare"===t)return void this._clearDragInfo();if("begin"===t){var G=this.draggingData;G.fileType===BG?ht.ui&&ht.ui.DragHelper.doDrag(this,{"a:clazz":"ht.ui.UIGraphView","a:initProps":{disableInit:!0,url:G.url}},{width:10,height:0,comps:[]},0,0):G.fileType===iG?ht.ui&&ht.ui.DragHelper.doDrag(this,{"a:clazz":"ht.ui.UIGraph3dView","a:initProps":{disableInit:!0,url:G.url}},{width:10,height:0,comps:[]},0,0):G.fileType===FG&&ht.ui&&ht.ui.DragHelper.doDrag(this,{"a:clazz":G.url},{width:10,height:0,comps:[]},0,0),this._dragInfo={tip:this.$1$(),view:this}}var A=this._dragInfo;if(A){var I=this.editor.dnd;if("begin"===t||"between"===t){return this.getView().contains(T(w))?(A.inView=!0,this._dragging(w,A),I.clearDropView(w,A)):(A.inView&&this.redraw(),A.inView=!1,I.crossDrag(w,A)),void I.showTip(A.tip,w)}return"end"===t?(A.inView?this._endDrag(w,A):I.crossDrop(w,A),
void this._clearDragInfo()):"cancel"===t?(A.inView||I.crossCancel(w,A),void this._clearDragInfo()):void 0}},t.prototype._dragging=function(w,t){if(this.editable){var G=this.getDataAt(w);G&&G.fileType===LG?t.targetData=G:t.targetData=null,this.autoScroll(w),this.redraw()}},t.prototype.$1$=function(){var w="";if(this.draggingData&&(w=this.getLabel(this.draggingData),this.isSelected(this.draggingData))){var t=this.sm().size();w+=t>1?" (+"+t+") ":""}return w},t.prototype._endDrag=function(w,t){},t.prototype.handleSelectionChange=function(t){w.prototype.handleSelectionChange.call(this,t),this.redraw()},t.prototype.handleCrossDrag=function(w,t,G){if(this.editable){if("exit"===t||"cancel"===t)return this._crossDragInfo=null,void this.redraw();if("enter"===t||"over"===t)return this._crossDragInfo||(this._crossDragInfo={}),void this._dragging(w,this._crossDragInfo);if("drop"===t){var A=this._crossDragInfo.targetData?this._crossDragInfo.targetData.url:this.explorer.currentDir,I={url:A,event:w};return this.editor.fireEvent("explorerCrossDrop",I),I.preventDefault||this._endCrossDrag(w,G),this._crossDragInfo=null,void this.redraw()}}},t.prototype._endCrossDrag=function(w,t){if(this.editable&&this._crossDragInfo){var G=this._crossDragInfo.targetData;if(G&&G.fileType===LG||(G=this.dm().sm().ld()),G){var A=t.view;"displays"===this.explorer.rootDir&&A instanceof _A&&this.handleDisplayTreeDrop(A,G),A===this.editor.dndFromOutside&&this.editor.dropLocalFileOnDir(w,G)}}},t.prototype.validateImpl=function(){document.body.contains(this.getView())&&w.prototype.validateImpl.call(this)},t}(eG);ww(rA,{ms_ac:["layoutType","fileSize","fileGap","rowHeight","maxFileSize","filter"],_fileRect:{x:0,y:0,width:0,height:0},_layoutType:SG,_fileSize:50,_fileGap:6,_rowHeight:21,_maxFileSize:200});var yA={filter:!0,layoutType:!0,fileSize:!0,fileGap:!0,rowHeight:!0,visibleFunc:!0},lA=function(w){function t(G){var A=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];_G(this,t);var I=lG(this,w.call(this,G,A));return I.nodes=[],I.doLayoutBind=I.doLayout.bind(I),I.dm().sm().ms(function(w){I.sm().cs(),I.doLayoutLater()}),I.dm().mm(function(){I.doLayoutLater()}),I.addInteractorListener(I.handleInteraction.bind(I)),I.addBottomPainter(I.paintBottom.bind(I)),I.addTopPainter(I.paintTop.bind(I)),I.getCoreInteractor().disabled=!0,I}return yG(t,w),t.prototype.getDataAt=function(t){if(this._layoutType===NG){var G=Math.floor(this.lp(t).y/this._rowHeight);return this.nodes[G]}return w.prototype.getDataAt.call(this,t)},t.prototype.paintBottom=function(w){var t=this,G=this._rowHeight,A=this.getWidth();this.nodes.forEach(function(I){if(t.isSelected(I))if(t._layoutType===NG)w.beginPath(),w.rect(0,I.p().y-G/2,A,G),w.fillStyle=kG.config.color_select,w.fill();else{var R=I.getRect();s(w,kG.config.color_select,R.x-2,R.y-2,R.width+4,R.height+4,1)}})},t.prototype.paintTop=function(w){kG.config.drawDNDState?w.drawDNDState=!0:(kG.config.texureImage3D&&(w.texureImage3D=!0),w.texureImage2D=!0);var t=void 0;if(this._dragInfo&&this._dragInfo.inView?t=this._dragInfo:this._crossDragInfo&&(t=this._crossDragInfo),t){var G=kG.config.color_select_dark,A=t.targetData;if(A)if(this._layoutType===NG){var I=A.p().y-this._rowHeight/2,R=this.getWidth(),_=this._rowHeight;s(w,G,0,I,R,_,2)}else{var r=A.getRect();w.beginPath(),w.rect(r.x,r.y,r.width,r.height),w.lineWidth=2,w.strokeStyle=kG.config.color_select_dark,w.stroke()}else{var y=this.getViewRect();s(w,G,y.x,y.y,y.width,y.height,2)}}},t.prototype.toDraggingDatas=function(w){var t=[];return this.isSelected(this.draggingData)?(this.sm().toSelection().each(function(w){w.fileType!==LG&&t.push(w)}),w&&t.reverse()):this.draggingData.fileType!==LG&&t.push(this.draggingData),t},t.prototype.isDroppable=function(w,t){return"displays"===this.explorer.rootDir&&t.view instanceof _A||t.view===this.editor.dndFromOutside},t.prototype._endDrag=function(w,t){var G=this,A=t.targetData;if(A){var I=this.draggingData,_=function(){G.isSelected(I)?G.sm().toSelection().each(function(w){G.editor.moveFile(w,A)}):G.editor.moveFile(I,A)};kG.config.promptForMovingFile?tt(R("editor.move"),R("editor.confirmmovefile"),_,function(){}):_()}},t.prototype.handleDisplayTreeDrop=function(w,t){var G=this,A=void 0;A=w.isSelected(w.draggingData)?w.getTopRowOrderSelection().toArray():[w.draggingData];var I={};A.forEach(function(w){tw(w,I)});var _=new ht.JSONSerializer(w.getDataModel(),!0);_.isSerializable=function(w){return I[w._id]};var r=_.serialize();wt(R("editor.inputnewdisplayname")+" ["+t.url+"]",w.getLabel(w.draggingData),{nullable:!1,trim:!0,maxLength:kG.config.maxFileNameLength,checkFunc:kG.config.checkFileName,$38$:this.editor.$38$},function(w,A){if("ok"===A){Vw(w)||(w+=".json");var R=t.url+"/"+w,_={path:R,content:r,parent_uuid:t.uuid,root_dir:t.rootDir};G.editor.request("upload",_,function(w){if(!0===w){var A=G.editor.gv,_=A.isVisible;A.isVisible=function(w){return _.call(A,w)&&I[w._id]},G.editor.saveImage(A,R.substr(0,R.length-5)+".png",void 0,w.uuid,w.parent_uuid,t.rootDir),A.isVisible=_,A.redraw()}G.editor.fireEvent("displayViewSaved",{url:R})})}})},t.prototype.handleDataDoubleSelect=function(w,t){if(this.isEditable(t)){var G=this.lp(w);if(this._layoutType===NG)G.x>this._rowHeight&&this.beginEditing(t);else{var A=this.getDataUI(t);A&&A.labelInfo&&A.labelInfo.rect&&ht.Default.containsPoint(A.labelInfo.rect,G)&&this.beginEditing(t)}}},t.prototype.getLabelColor=function(w){return w!==this.draggingData||this.isSelected(w)?this._layoutType===NG?this.isSelected(w)?kG.config.color_light:ht.Default.labelColor:this.isSelected(w)?kG.config.color_select:ht.Default.labelColor:kG.config.color_select},t.prototype.handleInteraction=function(w){var t=w.kind,G=w.data,A=w.event;if("clickData"===t&&this._filter)this.dm().sm().ss(G.getParent());else if("doubleClickData"===t)1===this.sm().size()&&(this.setFilter(""),this._justDoubleClickData=!0,G.fileType===LG?(this.dm().sm().ss(G),this._levelChanged=!0):this.editor.open(G,g(A),!0));else if("doubleClickBackground"===w.kind&&!this._filter){var I=this.dm().sm().ld();if(I&&I.getParent()){var R={target:this.explorer};if(this.editor.fireEvent("doubleClickBackgroundToUpLevel",R),R.preventDefault)return;this._upLevel=!0,this.dm().sm().ss(I.getParent()),this._levelChanged=!0}}},t.prototype.handleScroll=function(w,t){Gw(w),g(w)?t>0?this.setFileSize(Math.min(this.getFileSize()+2,this.getMaxFileSize())):this.setFileSize(Math.max(this.getFileSize()-2,1)):(cG||w.wheelDelta!==w.wheelDeltaX)&&(t=cG&&w.detail?-w.detail:w.wheelDelta/40,this.translate(0,20*t))},t.prototype.handlePinch=function(w,t,G){G<t?this.setFileSize(Math.min(this.getFileSize()+2,this.getMaxFileSize())):this.setFileSize(Math.max(this.getFileSize()-2,1))},t.prototype.onPropertyChanged=function(w){rA.prototype.onPropertyChanged.apply(this,arguments),yA[w.property]&&this.doLayoutLater()},t.prototype.isVisible=function(w){if(this._layouting){if(!1===w.a("visible"))return!1;if(this._visibleFunc&&!1===this._visibleFunc(w))return!1;var t=this._filter;if(t){var G=this.dm().sm().ld();if(!w.isDescendantOf(G))return!1;if(kG.config.vision&&w.uuid===p(t))return!0;var A=this.getLabel(w);if(!A||A.indexOf(t)<0)return!1}else{var I=this.dm().sm().ld();if(!I||w.getParent()!==I)return!1}if(!(w.fileType!==zG))return!1}else{if(this.nodes.indexOf(w)<0)return!1;if(!this.isNodeInRect(w))return!1}return!0},t.prototype.isNodeInRect=function(w){var t=ht.Default.clone(this.getViewRect());return ht.Default.grow(t,this.getFileSize()),!(!ht.Default.containsPoint(t,w.p())&&!ht.Default.intersectsRect(t,w.getRect()))},t.prototype.isMovable=function(){return!1},t.prototype.onValidated=function(){this._lastWidth===this.getWidth()&&this._lastHeight===this.getHeight()||this.doLayoutLater()},t.prototype.adjustTranslateX=function(){return 0},t.prototype.adjustTranslateY=function(w){var t=this.getHeight()-this._fileRect.height;return w<t&&(w=t),w>0?0:Math.round(w)},t.prototype.getContentRect=function(){return this._fileRect},t.prototype.doLayoutLater=function(){this._doLayoutLater||(this._doLayoutLater=!0,requestAnimationFrame(this.doLayoutBind))},t.prototype.doLayout=function(){var w=this;this._layouting=!0,this._doLayoutLater=!1,this.redraw();var t=this.nodes=[];this.dm().getDatas().each(function(G){w.isVisible(G)&&t.push(G)});var G=this._lastWidth=this.getWidth();this._lastHeight=this.getHeight();var A=this._fileGap;if(this._layoutType===NG){for(var I=this._rowHeight,R=Math.max(I-4,2),_=0;_<t.length;_++)this.updateFileNodeProperties(t[_],A+R/2,I*_+2+R/2,R);this._fileRect={x:0,y:0,width:G,height:I*t.length}}else{for(var r=this._fileSize,y=r+A,l=r+A+16,C=A,V=A,q=0,k=0;k<t.length;k++)this.updateFileNodeProperties(t[k],C+r/2,V+r/2,r),(q+2)*y+A>G?(C=A,k!==t.length-1&&(V+=l),q=0):(C+=y,q++);this._fileRect={x:0,y:0,width:G,height:V+l}}this.tx(this.tx()),this.ty(this.ty()),this.showScrollBar(),this._layouting=!1},t.prototype.updateFileNodeProperties=function(w,t,G,A){this._layoutType===NG?(w.setPosition(t,G),w.setSize(A,A),w.s({"label.position":20,"label.offset.x":3,"label.offset.y":0,"label.max":void 0})):(w.setPosition(t,G),w.setSize(A,A),w.s({"label.position":31,"label.offset.x":0,"label.offset.y":2,"label.max":A}))},t}(rA),CA=function(w){function t(G,A,I,R){_G(this,t);var _=lG(this,w.call(this));_.setSize(20,20),_.setAnchor(.5,.5),_._id=_.url=A?A+"/"+I:I,_.path=A,_.value=R,_.rootDir=G,_.uuid=Fw(R)&&fw(R.fileType)&&null!=R.uuid?R.uuid:_.url,_.postfix=R?R.postfix:"";var r=zG,y=void 0,l=void 0,C=R&&R.uuid&&_.postfix?_.uuid+"."+_.postfix:_.url,V=I;return R&&R.attrs&&R.attrs.label&&(_.label=V=R.attrs.label),_.s({"select.width":0,pixelPerfect:!1,"image.stretch":"centerUniform","label.position":17}),""===A?(r=xG,l="editor.root.state"):"assets"===G&&(l=_.getFileImage(I))?(r=QG,_.s("label",V)):Vw(I)&&"displays"===G?(r=BG,l=nw(C),_.s("label",b(I))):Vw(I)&&"symbols"===G?(r=JG,l=nw(C),_.s("label",b(I))):Vw(I)&&"components"===G?(r=nG,l=nw(C),_.s("label",b(I))):Vw(I)&&"scenes"===G?(r=iG,l=nw(C),_.s("label",b(I))):Vw(I)&&"models"===G?(r=fG,l=nw(C),_.s("label",b(I))):Vw(I)&&"uis"===G?(r=FG,l=nw(C),_.s("label",b(I))):_.s("label",V),Fw(R)&&(fw(R.fileType)?(r=R.fileType,y=R.fileIcon,l=R.fileImage||l||y,l||R.fileType!==LG||(l="editor.dir"),_.a(R.attrs),_.s(R.styles)):(!0===R.dir||null==R.dir&&null==R.fileType)&&(r=LG,l="editor.dir")),l||(l="editor.unknown"),_.fileType=r,_.setIcon(y),_.setImage(l),_.setName(I),_}return yG(t,w),t.prototype.getFileUUID=function(){return this.postfix?this.uuid+"."+this.postfix:this.uuid},t.prototype.getFileImage=function(w){return Cw(w)?this.url:zw(w)?"editor.dxf.state":xw(w)?"editor.obj.state":Lw(w)?"editor.mtl.state":Qw(w)?"editor.ttf.state":Jw(w)?"editor.otf.state":qw(w)?"editor.sound.state":kw(w)?"editor.video.state":Bw(w)?"editor.js.state":void 0},t.prototype.setAnchor=function(){for(var t,G=arguments.length,A=Array(G),I=0;I<G;I++)A[I]=arguments[I];var R=(t=w.prototype.setAnchor).call.apply(t,[this].concat(A));return R||(this._anchor=this._anchor),R},t}(ht.Node);ht.Default.setCompType("accordion-title-comp",function(w,t,G,A,I){var R=kG.config.drawAccordionTitle;if(R)return void R(w,t,A,I,{isHover:A.__hover,isExpanded:A.expanded,hoverColor:kG.config.color_hover,selectColor:kG.config.color_select});var _=A.__hover,r=t.x,y=t.y,l=t.width,C=t.height,V=I.getLabel(A),q=I.getFileGap();w.save(),(_||I.isSelected(A))&&(w.fillStyle=kG.config.color_hover,w.fillRect(r,y,l,C)),w.fillStyle=kG.config.color_select,w.fillRect(r+q,y+(C-8)/2,8,8),V&&ht.Default.drawText(w,V,"bold 14px Arial",ht.Default.labelColor,r+q+8+8,y,200,C,"left","middle"),w.restore()}),ht.Default.setImage("accordion-title",{width:160,height:24,fitSize:!0,pixelPerfect:!1,interactive:!0,boundExtend:2,onDown:function(w,t,G,A,I,R){ht.Default.isLeftButton(w)&&(G.getMutex()&&!t.expanded&&G.dirs.forEach(function(w){w!==t&&(w.expanded=!1)}),t.expanded=!t.expanded,G.ivm())},onEnter:function(w,t,G,A,I,R){t.__hover=!0,t.iv()},onLeave:function(w,t,G,A,I,R){t.__hover=!1,t.iv()},comps:[{type:"accordion-title-comp",displayName:"clock-pointer",rect:[0,0,160,24]}]});var VA={layoutType:!0,fileSize:!0,fileGap:!0,rowHeight:!0,filePadding:!0,titleHeight:!0},qA=function(w){function t(G){var A=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];_G(this,t);var I=lG(this,w.call(this,G,A));return I.setFileGap(10),I.setMutex(kG.config.accordionMutex),I.nodes=[],I.dirs=[],I.bottomRects=[],I.addViewListener(function(w){"beginValidate"===w.kind&&I.doLayout()}),I.setSelectionModelShared(!1),I.dm().sm().ms(function(){I.sm().cs()}),I._layouted=!1,I.mi(I.handleInteraction.bind(I)),I.addBottomPainter(I.paintBottom.bind(I)),I.addTopPainter(I.paintTop.bind(I)),I}return yG(t,w),t.prototype.paintBottom=function(w){var t=this,G=this._rowHeight,A=this.getWidth();this.nodes.forEach(function(I){if(t._layoutType===NG)t.isSelected(I)&&(w.beginPath(),w.rect(0,I.p().y-G/2,A,G),w.fillStyle=kG.config.color_select,w.fill());else{var R=t.isSelected(I)?kG.config.color_select:kG.config.color_mask,_=I.getRect(),r=_.x,y=_.y,l=_.width,C=_.height,V=t._filePadding;s(w,R,r-V,y-V,l+2*V,C+2*V,1)}}),w.beginPath(),w.lineWidth=2,w.strokeStyle=kG.config.color_hover,this.bottomRects.forEach(function(t){var G=t.x,A=t.y,I=t.width,R=t.height;w.moveTo(G+10,A+R/2),w.lineTo(G+I-10,A+R/2)}),w.stroke()},t.prototype.isDroppable=function(w,t){return"displays"===this.explorer.rootDir&&t.view instanceof _A||t.view===this.editor.dndFromOutside},t.prototype.handleDragAndDrop=function(t,G){var A=this.draggingData;A&&A.fileType!==LG&&w.prototype.handleDragAndDrop.call(this,t,G)},t.prototype.isLabelVisible=function(w){return w.fileType!==LG},t.prototype.paintTop=function(w){kG.config.drawDNDState?w.drawDNDState=!0:(kG.config.texureImage3D&&(w.texureImage3D=!0),w.texureImage2D=!0);var t=void 0;if(this._dragInfo&&this._dragInfo.inView?t=this._dragInfo:this._crossDragInfo&&(t=this._crossDragInfo),t){var G=kG.config.color_select_dark,A=t.targetData;if(A){var I=A.getRect();w.beginPath(),w.rect(I.x,I.y,I.width,I.height),w.lineWidth=2,w.strokeStyle=kG.config.color_select_dark,w.stroke()}else{var R=this.getViewRect();s(w,G,0,0,R.width,R.height,2)}}},t.prototype.getDataAt=function(t){if(this._layoutType!==NG)return w.prototype.getDataAt.call(this,t);var G=w.prototype.getDataAt.call(this,t);if(G)return G;for(var A=this.lp(t).y,I=0;I<this.nodes.length;I++){var R=this.nodes[I],_=R.getY(),r=this._rowHeight,y=_-r/2,l=_+r/2;if(A>=y&&A<l)return R}},t.prototype.handleInteraction=function(w){var t=w.kind,G=w.data,A=w.event;"doubleClickData"===t&&1===this.sm().size()&&G.fileType!==LG&&(this.setFilter(""),G.getParent().expanded=!0,this.sm().ss(G),this.ivm(),this.editor.open(G,g(A),!0))},t.prototype.handleDataDoubleSelect=function(w,t){if(this.isEditable(t)){var G=this.lp(w);if(t.fileType!==LG)if(this._layoutType===NG)G.x>this._rowHeight&&this.beginEditing(t);else{var A=this.getDataUI(t);A&&A.labelInfo&&A.labelInfo.rect&&ht.Default.containsPoint(A.labelInfo.rect,G)&&this.beginEditing(t)}}},t.prototype.getLabelColor=function(w){return w!==this.draggingData||this.isSelected(w)?this._layoutType===NG?this.isSelected(w)?kG.config.color_light:ht.Default.labelColor:this.isSelected(w)?kG.config.color_select:ht.Default.labelColor:kG.config.color_select},t.prototype.isVisible=function(w){if(!this._layouted)return!1;if(this._visibleFunc&&!1===this._visibleFunc(w))return!1;var t=this.explorer.rootDir,G=w.getParent();if(!1===w.a("visible"))return!1;if(w.fileType===zG||!G)return!1;if(this._visibleFunc&&!this._visibleFunc(w))return!1;if(this._filter){var A=this.getLabel(w);if(G.url===t&&w.fileType===LG){for(var I=w.getChildren(),R=0;R<I.length;R++){var _=I.get(R);if(this.isVisible(_))return!0}return!1}if(G.getParent()&&G.getParent().url===t&&w.fileType!==LG)return!(!A||A.indexOf(this._filter)<0)}return G.url===t&&w.fileType===LG||!(!G.getParent()||G.getParent().url!==t||w.fileType===LG)&&!!G.expanded},t.prototype.adjustTranslateX=function(w){return 0},t.prototype.adjustTranslateY=function(w){if(!this.contentHeight)return 0;var t=this.getViewRect(),G=t.height-this.contentHeight;return w>=0||G>=0?0:w>G?w:G},t.prototype.getImage=function(w){if(w.getImage)return w.fileType===LG?"accordion-title":w.getImage()},t.prototype.doLayout=function(){var w=this;if(this._lastWidth!==this.getWidth()||this._lastHeight!==this.getHeight()||this._lastFileSize!==this.getFileSize()){this._doLayoutLater=!1,this.redraw();var t=this.dirs=[],G=this.nodes=[],A=this.bottomRects=[];this.dm().each(function(G){w.isVisible(G)&&G.fileType===LG&&t.push(G)});var I=this._lastWidth=this.getWidth(),R=this._titleHeight,_=0;this._lastHeight=this.getHeight(),this._lastFileSize=this._fileSize,this._expandIds&&(this.dirs.forEach(function(t){t.expanded=w._expandIds.indexOf(t.getId())>=0}),delete this._expandIds),t.forEach(function(t){t.setAnchor(0,0),t.p(0,_),t.setSize(I,R),t.s("label",null),_+=R;var r=[];t.getChildren().each(function(t){w.isVisible(t)&&(r.push(t),G.push(t))}),_=w.layoutChildren(r,_),t.expanded&&(A.push({x:0,y:_,width:I,height:16}),_+=16)}),this.contentHeight=_,this._layouted=!0}},t.prototype.layoutChildren=function(w,t){if(!w||0===w.length)return t;var G=this._fileGap;if(this._layoutType===NG){var A=this._rowHeight,I=Math.max(A-4,15);return w.forEach(function(w,R){w.setPosition(G+I/2+kG.config.accordionListIndent,t+2+I/2),w.setSize(I,I),w.s({"label.position":20,"label.offset.x":3,"label.offset.y":0,"label.max":void 0}),t+=A}),t}var R=this.getWidth(),_=this._fileSize,r=this._filePadding,y=_+2*r,l=G,C=t+G,V=0,q=_+G+2*r,k=_+G+16+2*r;return w.forEach(function(t,A){t.setPosition(l+y/2,C+y/2),t.setSize(_,_),t.s({"label.position":31,"label.offset.x":0,"label.offset.y":2+r,"label.max":y}),(V+2)*q+G>R?(l=G,A!==w.length-1&&(C+=k),V=0):(l+=q,V++)}),C+k},t.prototype.handleScroll=function(w){var t=cG&&w.detail?-w.detail:w.wheelDelta/10;(cG||w.wheelDelta!==w.wheelDeltaX)&&this.translate(0,t)},t.prototype.adjustZoom=function(){return 1},t.prototype.onPropertyChanged=function(t){w.prototype.onPropertyChanged.call(this,t);var G=t.property;"dataModel"!==G&&"fileSize"!==G||this.doLayout()},t.prototype._endDrag=function(w,t){var G=this,A=t.targetData;if(A&&A.fileType===LG){var I=this.draggingData,_=function(){G.isSelected(I)?G.sm().toSelection().each(function(w){G.editor.moveFile(w,A)}):G.editor.moveFile(I,A),G.doLayout(),G.redraw()};kG.config.promptForMovingFile?tt(R("editor.move"),R("editor.confirmmovefile"),_,function(){}):_()}},t.prototype.toDraggingDatas=function(w){var t=[];return this.isSelected(this.draggingData)?(this.sm().toSelection().each(function(w){w.fileType!==LG&&t.push(w)}),w&&t.reverse()):this.draggingData.fileType!==LG&&t.push(this.draggingData),t},t.prototype.invalidateModel=function(){this._lastWidth=null,this.iv()},t.prototype.ivm=function(){this.invalidateModel()},t.prototype.getContentRect=function(){return{x:0,y:0,width:this.getWidth(),height:this.contentHeight||0}},t.prototype.onPropertyChanged=function(t){w.prototype.onPropertyChanged.apply(this,arguments),VA[t.property]&&this.ivm()},rG(t,[{key:"expandIds",get:function(){var w=[];return this.dirs.forEach(function(t){t.expanded&&w.push(t.getId())}),w},set:function(w){this._expandIds=w,this._lastWidth=null}}]),t}(rA);ww(qA,{ms_ac:["filePadding","titleHeight","mutex"],_mutex:!1,_filePadding:6,_titleHeight:36});var kA=function(w){function t(G,A){var I=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];_G(this,t);var R=lG(this,w.call(this));R.editor=G,R.rootDir=A,R.copyFileInfos=[],R.dataModel=new ht.DataModel,R.dataModel.setAutoAdjustIndex(!1),R.urlUUIDMap={},R.uuidURLMap={};var _=R.mode=kG.config.explorerMode;_===TG&&(R.accordion=new qA(R,I)),R.tree=new IA(R,I),R.list=new lA(R,I),R.controlPane=new VG,R.controlPane.addRow([{id:"filter",textField:{}},{id:"url",textField:{editable:!1}},{id:"slider",slider:{min:1,max:R.getFileListView().getMaxFileSize(),step:1,onValueChanged:function(w,t){R.getFileListView().setFileSize(t),R.getFileListView().setLayoutType(t>16?SG:NG)}}}],[.1,.2,ht.Default.isTouchable?70:50]);var r=R.controlPane.getViewById("filter").getElement();r.onkeyup=function(w){n(w)&&(r.value=""),_===TG?(R.accordion.setFilter(r.value),R.accordion.ivm()):R.list.setFilter(r.value)},(_===TG?R.accordion:R.list).mp(function(w){"filter"===w.property&&(r.value=w.newValue||"")});var y=R.controlPane.getItemById("slider").element;return y.getToolTip=function(){},R.getFileListView().mp(function(w){"fileSize"===w.property&&y.setValue(w.newValue)}),R.bottomPane=new gG,R.bottomPane.setCenterView(R.getFileListView()),R.bottomPane.setBottomView(R.controlPane),R.bottomPane.setBottomHeight(ht.Default.widgetRowHeight+8),R.setOrientation("vertical"),_===TG?(R.setLeftView(R.bottomPane),R.setPosition(1),R.accordion.sm().ms(function(){R.$51$(R.accordion)}),R.accordion.setFileSize(kG.config.fileSize),R.setDraggable(!1)):(R.setLeftView(R.tree),R.setRightView(R.bottomPane),R.setPosition(kG.config.explorerSplitViewPosition),R.list.setSelectionModelShared(!1),R.list.sm().ms(function(){R.$51$(R.list)}),R.list.setFileSize(kG.config.fileSize)),R.tree.menu=new WG,R.treeMenuItems=[],R.initTreeMenu(R.tree.menu,R.treeMenuItems),R.tree.menu.setItems(R.treeMenuItems),R.tree.menu.addTo(R.tree.getView()),R.editor.menus.push(R.tree.menu),R.list.menu=new WG,R.listMenuItems=[],R.initListMenu(R.list.menu,R.listMenuItems),R.list.menu.setItems(R.listMenuItems),R.list.menu.addTo(R.list.getView()),R.editor.menus.push(R.list.menu),R.isAccordionMode()&&(R.accordion.menu=new WG,R.accordionMenuItems=[],R.initAccordionMenu(R.accordion.menu,R.accordionMenuItems),R.accordion.menu.setItems(R.accordionMenuItems),R.accordion.menu.addTo(R.accordion.getView()),R.editor.menus.push(R.accordion.menu)),R}return yG(t,w),t.prototype.$51$=function(w){var t=w.sm().ld();this.controlPane.v("url",t?t.getFileUUID():"")},t.prototype.isAccordionMode=function(){return this.mode===TG},t.prototype.findFileNode=function(w){var t=this.dataModel.getDataById(w);return!t&&this.uuidURLMap[w]&&(t=this.dataModel.getDataById(this.uuidURLMap[w])),t},t.prototype.parse=function(w){var t=this,G=void 0,A=void 0,I=void 0,R=void 0;if(this.mode===TG?(A=this.accordion.expandIds,G=this.accordion.ty()):(G=this.tree.ty(),A=this.tree.expandIds,I=this.tree.selectionIds,R=this.tree.dm().size()),this.dataModel.clear(),Nw(w))w.forEach(function(w){if(w){var G=w.attrs&&w.attrs.path?w.attrs.path:"",A=t.rootNode=t.addFileNode(t.rootDir,G,w.name,w);t.parseRoot(A,w)}});else{var _=this.rootNode=this.addFileNode(this.rootDir,"",this.rootDir);this.parseRoot(_,w)}var r=this.dataModel.getDatas(),y={};this.urlUUIDMap={},this.uuidURLMap={},r.toArray().forEach(function(w,G){y[w._id]=G,t.uuidURLMap[w.getFileUUID()]=w.url,t.urlUUIDMap[w.url]=w.getFileUUID()}),r.sort(function(w,t){return w.fileType===xG?-1:t.fileType===xG?1:w.fileType===LG&&t.fileType!==LG?-1:w.fileType!==LG&&t.fileType===LG?1:y[w._id]-y[t._id]}),this.mode===TG?(this.accordion.expandIds=A,this.accordion.ty(G)):(this.tree.expandIds=A,this.tree.selectionIds=I,this.tree.ty(G),0===R&&(this.tree.expand(this.rootNode),this.tree.sm().ss(this.rootNode))),this.list.doLayout();var l={explorer:this};this.editor.fireEvent("explorerUpdated",l)},t.prototype.parseRoot=function(w,t){kG.config.vision&&w.a("editable",!1);var G=void 0;t.fileType===LG||t.fileType===xG?(w.a(t.attrs),w.s(t.styles),t.fileIcon&&(w.setIcon(t.fileIcon),w.setImage(t.fileIcon)),G=t.children):G=t;for(var A in G)this.parseChild(w,A,G[A])},t.prototype.parseChild=function(w,t,G){var A=this.addFileNode(this.rootDir,w.url,t,G);A.setParent(w);var I=void 0;G&&G.fileType===LG?I=G.children:A.fileType===LG&&(I=G);for(var R in I)this.parseChild(A,R,I[R]);return A},t.prototype.deleteSelection=function(w){var t=this,G=[];if(w.sm().getTopSelection().forEach(function(w){var A={data:w,url:w.url};t.editor.fireEvent("fileDeleting",A),A.preventDefault||G.push(w)}),G.length){var A=w.getLabel(G[0])||G[0].getName(),I=R("editor.delete")+" ["+A+"]";G.length>1&&(I+=" ("+G.length+")");var _=function(){t.editor.removeFiles(G)};kG.config.deleteFileConfirm?tt(I,R("editor.deleteselection"),_,function(){}):_()}},t.prototype.addNewItem=function(w,t,G,A){var I=this,_={id:G,label:R("editor."+G.toLowerCase()),action:function(){if(t instanceof lA){var w=I.tree.sm().ld();w&&w.fileType===LG&&(I.editor._rightClickURL=w.url)}I.editor[G](I.editor._rightClickURL),A&&I.editor.save(),delete I.editor._rightClickURL},visible:function(){var w=I.tree.sm().ld();if(!t.editable||kG.config.vision&&w&&2!==w.a("dir_type")&&!w.a("editable"))return!1;if(I.isAccordionMode()){var G=I.accordion.sm().ld();return G&&G.fileType===LG}return!0}};return w.push(_),_},t.prototype.addDeleteItem=function(w,t){var G=this,A={id:"delete",label:R("editor.delete"),action:function(){G.deleteSelection(t)},visible:function(){return!(!t.sm().ld()||!t.isEditable(t.sm().ld()))}};return w.push(A),A},t.prototype.addNewFolderItem=function(w,t){var G=this,A={id:"newFolder",label:R("editor.newfolder"),action:function(){G.editor.newFolder(t)},visible:function(){var w=G.tree.sm().ld();return t.editable&&(t.isEditable(w)||kG.config.vision&&w&&2===w.a("dir_type"))}};return w.push(A),A},t.prototype.addLocateTreeFileItem=function(w){var t=this,G=void 0;return kG.config.locateFileEnabled&&!kG.config.vision&&(G={id:"locateFile",label:R("editor.locatefile"),action:function(){var w=t.tree.sm().ld()||t.rootNode;t.editor.locate(w)}},w.push(G)),G},t.prototype.addLocateListFileItem=function(w){var t=this,G=void 0;return kG.config.locateFileEnabled&&!kG.config.vision&&(G={id:"locateFile",label:R("editor.locatefile"),action:function(){var w=t.ld||t.tree.sm().ld()||t.rootNode;t.editor.locate(w)},visible:function(){return!t.isAccordionMode()||!!t.getFileListView().sm().ld()}},w.push(G)),G},t.prototype.addExportItem=function(w){var t=this,G={id:"export",label:R("editor.export"),action:function(){var w=[],G=t.getFileListView().sm();G.size()>0&&(G.each(function(t){w.push(t.url)}),t.editor.request("export",w))},visible:function(){var w=t.getFileListView().sm().ld();if(!w)return!1;var G=w.fileType;return G===BG||G===JG||G===nG||G===iG||G===fG||G===FG||G===LG}};return w.push(G),G},t.prototype.addRenameItem=function(w,t){var G={id:"rename",label:R("editor.rename"),action:function(){var w=t.sm().ld();w&&!1!==w.a("editable")&&t.beginEditing(w)},visible:function(){var w=t.sm().ld();return!(!w||!t.isEditable(w))}};return w.push(G),G},t.prototype.addCopyItem=function(w){var t=this,G={id:"copy",label:R("editor.copy"),action:function(){t.copyFiles()},visible:function(){if(!t.getFileListView().editable)return!1;var w=t.getFileListView().sm().ld();return!(!w||!1===w.a("editable"))}};return w.push(G),G},t.prototype.addPasteItem=function(w){var t=this,G={id:"paste",label:R("editor.paste"),action:function(){t.pasteFiles()},visible:function(){if(!t.copyFileInfos.length)return!1;var w=t.tree.sm().ld();if(!w)return!1;if(kG.config.vision){if(!1===w.a("editable")&&2!==w.a("dir_type"))return!1}else if(!1===w.a("editable"))return!1;return!!t.getFileListView().editable&&(!t.isAccordionMode()||!!t.ld)}};return w.push(G),G},t.prototype.copyFiles=function(){var w=this;this.copyFileInfos.length=0,this.getFileListView().sm().each(function(t){w.prepareCopyFileInfos(t)})},t.prototype.prepareCopyFileInfos=function(w,t){var G=this;if(w.fileType!==xG&&w.fileType!==zG){var A={url:w.url,name:w.getName(),fileNode:w,parentInfo:t,parent_uuid:w.parent_uuid};if(this.copyFileInfos.push(A),this.editor.fireEvent("copyFile",{url:w.url}),!kG.config.copyFileByServer&&w.fileType===LG)return A.isDir=!0,void w.eachChild(function(w){G.prepareCopyFileInfos(w,A)});this.loadFileInfo(A)}},t.prototype.loadFileInfo=function(w){var t=w.url,G=kG.config.copyFileByServer;if(G||this.editor.requestBase64(t,function(t){w.content=t}),Vw(t)){var A=nw(t);this.findFileNode(A)&&(G?w.image=!0:this.editor.requestBase64(A,function(t){w.image=t}))}},t.prototype.pasteFiles=function(){var w=this;if(kG.config.copyFileByServer){var t=[],G=this.currentDir;this.copyFileInfos.forEach(function(w){t.push(w.url),w.image&&t.push(nw(w.url))}),this.editor.request("paste",{fileList:t,destDir:G})}else this.copyFileInfos.forEach(function(t){w.pasteFileImpl(t)})},t.prototype.pasteFileImpl=function(w){var t=w.url,G=w.parentInfo,A=void 0,I=2,R=G?G.pasteURL:this.currentDir;if(w.isDir){var _=R+"/"+w.name;for(A=_;this.findFileNode(A);)A=_+" "+I++}else if(w.content){var r=R+"/"+b(w.name),y=t.substring(t.lastIndexOf("."),t.length);for(A=r+y;this.findFileNode(A);)A=r+" "+I+++y}if(A){if(w.content){var l={path:A,content:w.content,parent_uuid:w.uuid,root_dir:w.rootDir};this.editor.request("upload",l),this.editor.fireEvent("pasteFile",{url:A}),w.image&&(l.path=nw(A),l.content=w.image,this.editor.request("upload",l),this.editor.fireEvent("pasteFile",{url:l.path}))}w.isDir&&(w.pasteURL=A,this.editor.request("mkdir",A,function(w){}))}},t.prototype.enableDroppableToSymbolView=function(){var w=this.list;this.mode===TG&&(w=this.accordion),w.isDroppableToSymbolView=!0},t.prototype.enableDroppableToDisplayView=function(){var w=this.list;this.mode===TG&&(w=this.accordion),w.isDroppableToDisplayView=!0},t.prototype.enableDroppableToSceneView=function(){var w=this.list;this.mode===TG&&(w=this.accordion),w.isDroppableToSceneView=!0},t.prototype.enableDroppableToUIView=function(){var w=this.list;this.mode===TG&&(w=this.accordion),w.isDroppableToUIView=!0},t.prototype.enableDroppableToUIImage=function(){var w=this.list;this.mode===TG&&(w=this.accordion),w.isDroppableToUIImage=!0},t.prototype.getFileListView=function(){return this.mode===TG?this.accordion:this.list},t.prototype.initTreeMenu=function(w,t){},t.prototype.initListMenu=function(w,t){},t.prototype.initAccordionMenu=function(w,t){},t.prototype.addFileNode=function(w,t,G,A){var I=new CA(w,t,G,A);return this.dataModel.add(I),I},rG(t,[{key:"currentDir",get:function(){var w=void 0;return this.isAccordionMode()?(w=this.ld,w&&w.fileType!==LG&&(w=w.getParent()),w?w.url:this.accordion.dirs.length?this.accordion.dirs[this.accordion.dirs.length-1].url:this.rootDir):(w=this.tree.sm().ld(),w?w.url:this.rootDir)}},{key:"ld",get:function(){return this.getFileListView().sm().ld()}}]),t}(PG),ZA=function(w){function t(G){var A=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];_G(this,t);var I=lG(this,w.call(this,G,"displays",A));return I.enableDroppableToDisplayView(),I.enableDroppableToUIView(),I}return yG(t,w),t.prototype.initTreeMenu=function(w,t){var G=this.tree;this.addLocateTreeFileItem(t),this.addNewFolderItem(t,this.tree).visible=function(){return G.editable&&(G.isEditable(G.sm().ld())||kG.config.vision&&G.sm().ld()&&2===G.sm().ld().a("dir_type"))},this.addNewDisplayItem(t,this.tree),this.addRenameItem(t,this.tree),this.addDeleteItem(t,this.tree)},t.prototype.initListMenu=function(w,t){var G=this,A=this.tree;this.addLocateListFileItem(t);var I=this.addNewFolderItem(t,this.list);I.visible=function(){return A.editable&&(A.isEditable(A.sm().ld())||kG.config.vision&&A.sm().ld()&&2===A.sm().ld().a("dir_type"))},I=this.addNewDisplayItem(t,this.list),I.visible=function(){var w=A.sm().ld();if(!A.editable||kG.config.vision&&w&&2!==w.a("dir_type")&&!w.a("editable"))return!1;if(G.isAccordionMode()){var t=G.accordion.sm().ld();return t&&t.fileType===LG}return!0},this.addCopyItem(t),this.addPasteItem(t),this.addRenameItem(t,this.list),this.addDeleteItem(t,this.list),this.addExportItem(t)},t.prototype.initAccordionMenu=function(w,t){this.addLocateListFileItem(t),this.addNewFolderItem(t,this.accordion),this.addNewDisplayItem(t,this.list),this.addCopyItem(t),this.addPasteItem(t),this.addRenameItem(t,this.accordion),this.addDeleteItem(t,this.accordion),this.addExportItem(t)},t.prototype.addNewDisplayItem=function(w,t){var G=this,A={id:"newDisplayView",label:R("editor.newdisplayview"),action:function(){if(t instanceof lA){var w=t.sm().ld();w&&w.fileType===LG&&(G.editor._rightClickURL=w.url)}G.editor.newDisplayView(),G.editor.save(),delete G.editor._rightClickURL},visible:function(){var w=t.sm().ld()
;if(!t.editable||kG.config.vision&&w&&2!==w.a("dir_type")&&!w.a("editable"))return!1;if(G.isAccordionMode()){var A=G.accordion.sm().ld();return A&&A.fileType===LG}return!0}};return w.push(A),A},t}(kA),zA=function(w){function t(G){var A=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];_G(this,t);var I=lG(this,w.call(this,G,"symbols",A));return I.enableDroppableToDisplayView(),I.enableDroppableToSymbolView(),I.enableDroppableToSceneView(),I.enableDroppableToUIImage(),I}return yG(t,w),t.prototype.initTreeMenu=function(w,t){this.addLocateTreeFileItem(t),this.addNewFolderItem(t,this.tree),this.addNewItem(t,this.tree,"newSymbolView",!0),this.addRenameItem(t,this.tree),this.addDeleteItem(t,this.tree)},t.prototype.initListMenu=function(w,t){this.addLocateListFileItem(t),this.addNewFolderItem(t,this.list),this.addNewItem(t,this.list,"newSymbolView",!0),this.addCopyItem(t),this.addPasteItem(t),this.addRenameItem(t,this.list),this.addDeleteItem(t,this.list),this.addExportItem(t)},t.prototype.initAccordionMenu=function(w,t){this.addLocateListFileItem(t),this.addNewFolderItem(t,this.accordion),this.addNewItem(t,this.accordion,"newSymbolView",!0),this.addCopyItem(t),this.addPasteItem(t),this.addRenameItem(t,this.accordion),this.addDeleteItem(t,this.accordion),this.addExportItem(t)},t}(kA),xA=function(w){function t(G){var A=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];_G(this,t);var I=lG(this,w.call(this,G,"components",A));return I.enableDroppableToSymbolView(),I}return yG(t,w),t.prototype.initTreeMenu=function(w,t){this.addLocateTreeFileItem(t),this.addNewFolderItem(t,this.tree),this.addNewItem(t,this.tree,"newComponent"),this.addRenameItem(t,this.tree),this.addDeleteItem(t,this.tree)},t.prototype.initListMenu=function(w,t){this.addLocateListFileItem(t),this.addNewFolderItem(t,this.list),this.addNewItem(t,this.list,"newComponent"),this.addCopyItem(t),this.addPasteItem(t),this.addRenameItem(t,this.list),this.addDeleteItem(t,this.list),this.addExportItem(t)},t.prototype.initAccordionMenu=function(w,t){this.addLocateListFileItem(t),this.addNewFolderItem(t,this.accordion),this.addNewItem(t,this.accordion,"newComponent"),this.addCopyItem(t),this.addPasteItem(t),this.addRenameItem(t,this.accordion),this.addDeleteItem(t,this.accordion),this.addExportItem(t)},t}(kA),LA=function(w){function t(G){var A=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];_G(this,t);var I=lG(this,w.call(this,G,"scenes",A));return I.enableDroppableToDisplayView(),I.enableDroppableToSceneView(),I.enableDroppableToUIView(),I}return yG(t,w),t}(kA),QA=function(w){function t(G){var A=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];_G(this,t);var I=lG(this,w.call(this,G,"models",A));return I.enableDroppableToDisplayView(),I.enableDroppableToSceneView(),I}return yG(t,w),t}(kA),JA=function(w){function t(G){var A=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];_G(this,t);var I=lG(this,w.call(this,G,"uis",A));return I.enableDroppableToUIView(),I}return yG(t,w),t.prototype.initTreeMenu=function(w,t){this.addLocateTreeFileItem(t),this.addNewFolderItem(t,this.tree),this.addNewItem(t,this.tree,"newUIView",!0),this.addRenameItem(t,this.tree),this.addDeleteItem(t,this.tree)},t.prototype.initListMenu=function(w,t){this.addLocateListFileItem(t),this.addNewFolderItem(t,this.list),this.addNewItem(t,this.list,"newUIView",!0),this.addCopyItem(t),this.addPasteItem(t),this.addRenameItem(t,this.list),this.addDeleteItem(t,this.list),this.addExportItem(t)},t.prototype.initAccordionMenu=function(w,t){this.addLocateListFileItem(t),this.addNewFolderItem(t,this.accordion),this.addNewItem(t,this.accordion,"newUIView",!0),this.addCopyItem(t),this.addPasteItem(t),this.addRenameItem(t,this.accordion),this.addDeleteItem(t,this.accordion),this.addExportItem(t)},t}(kA),BA=function(w){function t(G){var A=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];_G(this,t);var I=lG(this,w.call(this,G,"assets",A));return I.enableDroppableToDisplayView(),I.enableDroppableToSymbolView(),I.enableDroppableToSceneView(),I.enableDroppableToUIImage(),I}return yG(t,w),t.prototype.initTreeMenu=function(w,t){this.addLocateTreeFileItem(t),this.addNewFolderItem(t,this.tree),this.addRenameItem(t,this.tree),this.addDeleteItem(t,this.tree)},t.prototype.initListMenu=function(w,t){this.addLocateListFileItem(t),this.addNewFolderItem(t,this.list),this.addCopyItem(t),this.addPasteItem(t),this.addRenameItem(t,this.list),this.addDeleteItem(t,this.list),this.$53$(t)},t.prototype.initAccordionMenu=function(w,t){this.addLocateListFileItem(t),this.addNewFolderItem(t,this.accordion),this.addCopyItem(t),this.addPasteItem(t),this.addRenameItem(t,this.accordion),this.addDeleteItem(t,this.accordion),this.$53$(t)},t.prototype.$53$=function(w){var t=this;w.push("separator"),w.push({id:"convertToDisplay",label:R("editor.converttodisplay"),action:function(){t.editor.open(t.getFileListView().sm().ld(),!1)},visible:function(){var w=t.getFileListView().sm().ld();return!!w&&(Zw(w.url)||zw(w.url))}}),w.push({id:"convertToSymbol",label:R("editor.converttosymbol"),action:function(){t.editor.open(t.getFileListView().sm().ld(),!0)},visible:function(){var w=t.getFileListView().sm().ld();return!!w&&(Zw(w.url)||zw(w.url)||Qw(w.url)||Jw(w.url))}}),w.push({id:"batchConvertSVG",label:R("editor.batchconvertsvg"),action:function(){t.editor.batchConvertSVG(t.getFileListView().sm().getSelection().toArray())},visible:function(){var w=t.getFileListView().sm().ld();return!!w&&Zw(w.url)}})},t}(kA),nA=function(w){function t(G){_G(this,t);var A=lG(this,w.call(this));return A.editor=G,A}return yG(t,w),t.prototype.$5$=function(w){this.setGraphView(this.editor.gv)},t}(KG),fA=function(w){function t(G){_G(this,t);var A=lG(this,w.call(this));A.editView=G,A.editor=G.editor,A._topCanvas=o(),A._topDiv=K(),A._view.insertBefore(A._topCanvas,A._scrollBarDiv||null),A._view.insertBefore(A._topDiv,A._scrollBarDiv||null);var I=[];return A.menu=new WG(I),A.menu.beforeShow=function(w){A._rightClickPosition=A.lp(w)},A.initMenuItems(I),A.menu.addTo(A.getView()),A.editor.menus.push(A.menu),A.setResettable(!0),A.addTopPainter(function(w){kG.config.drawDNDState?w.drawDNDState=!0:(kG.config.texureImage3D&&(w.texureImage3D=!0),w.texureImage2D=!0);var t=A.getViewRect(),G=A.editView,I=G.hoverGuideLineX,R=G.hoverGuideLineY,_=ht.Default.brighter(A.dm().a("alignmentGuideColor"));ht.Default.isDragging()||!I&&!R||(w.beginPath(),w.strokeStyle=_,w.lineWidth=1/A.getZoom(),I&&(w.moveTo(I.x,t.y),w.lineTo(I.x,t.y+t.height)),R&&(w.moveTo(t.x,R.y),w.lineTo(t.x+t.width,R.y)),w.stroke())}),A}return yG(t,w),t.prototype.reset=function(){this.fitContent(kG.config.animate,kG.config.fitPadding)},t.prototype.isEditable=function(t){return!!this.editable&&w.prototype.isEditable.call(this,t)},t.prototype.isMovable=function(t){return!!this.editable&&w.prototype.isMovable.call(this,t)},t.prototype.invalidateAll=function(t,G){if("imageLoaded"===G||"modelLoaded"===G){var A=this.editor.inspector;A&&(A.$34$(),A.$85$&&A.$85$())}w.prototype.invalidateAll.call(this,t,G)},t.prototype.handleDelete=function(t){this.editable&&w.prototype.handleDelete.call(this,t)},t.prototype.onGroupDoubleClicked=function(t,G,A){this.editable&&w.prototype.onGroupDoubleClicked.call(this,t,G,A)},t.prototype.onEdgeDoubleClicked=function(t,G,A){this.editable&&w.prototype.onEdgeDoubleClicked.call(this,t,G,A)},t.prototype.checkDoubleClickOnNote=function(t,G){return!!this.editable&&w.prototype.checkDoubleClickOnNote.call(this,t,G)},t.prototype.getToolTip=function(w){return kG.config.getToolTip(w,this)},t.prototype.$56$=function(w){var t=this;w.push({id:"copy",label:R("editor.copy"),action:function(){t.editor.copy()},visible:function(){return!!t.editor.ld}}),w.push({id:"paste",label:R("editor.paste"),action:function(){t.editor.paste(!1,t._rightClickPosition)},visible:function(){return t.editable&&t.editor.hasCopyInfo()}})},t.prototype.$55$=function(w){var t=this;w.push({separator:!0,visible:function(){return t.editable&&!!t.editor.ld}}),w.push({id:"bringToFront",label:R("editor.bringtofront"),action:function(){t.editor.bringToFront()},visible:function(){return t.editable&&!!t.editor.ld}}),w.push({id:"bringForward",label:R("editor.bringforward"),action:function(){t.editor.bringForward()},visible:function(){return t.editable&&!!t.editor.ld}}),w.push({id:"sendBackward",label:R("editor.sendbackward"),action:function(){t.editor.sendBackward()},visible:function(){return t.editable&&!!t.editor.ld}}),w.push({id:"sendToBack",label:R("editor.sendtoback"),action:function(){t.editor.sendToBack()},visible:function(){return t.editable&&!!t.editor.ld}})},t.prototype.initMenuItems=function(w){},t.prototype.onClosed=function(){l(this.editor.menus,this.menu)},t.prototype.$57$=function(w){return w&&this.copyMap[w._id]?w._id:w},t.prototype.$49$=function(w,t){return w instanceof ht.Data?this.dm().contains(w)?w:void 0:t[w]},t.prototype.getSelectWidth=function(w){return!this.isEditable(w)||w instanceof ht.Edge?w.s("select.width"):0},t.prototype.onSelectionChanged=function(w){if(1===this.sm().size()&&("set"===w.kind||"append"===w.kind)){var t=this.sm().ld();t&&document.activeElement===this.getView()&&this._dataModel.isAutoAdjustIndex()&&this.adjustIndex(t)}},t.prototype.getContentRect=function(){var t=w.prototype.getContentRect.call(this);if(!t.width||!t.height){var G=this.dm().a("width")||200,A=this.dm().a("height")||200;t={x:-G/2,y:-A/2,width:G,height:A,empty:!0}}return t},t.prototype.isDroppable=function(w,t){return!1},t.prototype.$58$=function(w){if(this.dragImage){var t=kG.config.dragImageSize,G=m(w);this.dragImage.style.left=G.x-t/2+"px",this.dragImage.style.top=G.y-t/2+"px"}},t.prototype.removeDragImage=function(){this.dragImage&&(h(this.dragImage),this.dragImage=null)},t.prototype.handleCrossDrag=function(w,t,G){var A=this,I=G.view,R=I.draggingData;if("enter"===t){if(this._topDiv.style.border="solid "+kG.config.color_select_dark+" 2px",!this.dragImage&&R){var _=void 0===R.a("dragImage")?R.getImage():R.a("dragImage");if(ht.Default.getImage(_)!==ht.Default.getImage("editor.unknown")){var r=kG.config.dragImageSize;this.dragImage=ht.Default.toCanvas(_,r,r,"centerUniform",R,G.view,null,ht.Default.devicePixelRatio),this.$58$(w),this.dragImage.style.opacity=kG.config.dragImageOpacity,this.dragImage.className="ht-editor-dnd-image",ht.Default.appendToScreen(this.dragImage)}}}else if("exit"===t||"cancel"===t)this._topDiv.style.border="",this.removeDragImage();else if("over"===t)this.$58$(w);else if("drop"===t)if(this._topDiv.style.border="",R){this.removeDragImage();var y=this.lp(w);I.isSelected(R)?I.sm().toSelection().each(function(t){I.handleDropToEditView?I.handleDropToEditView(A.editView,t,y,w):A.editor.$98$(t,y)}):I.handleDropToEditView?I.handleDropToEditView(this.editView,R,y,w):this.editor.$98$(R,y)}else I===this.editor.dndFromOutside&&this.editor.dropLocalFileOnView(w)},rG(t,[{key:"editable",get:function(){return this.editor.editable},set:function(w){}}]),t}(eG),iA=function(w){function t(G){return _G(this,t),lG(this,w.call(this,G))}return yG(t,w),t.prototype.handleDataModelChange=function(t){w.prototype.handleDataModelChange.call(this,t),this.editor&&this.editor.fireViewEvent(this.editView,"DataModelChanged",{event:t})},t.prototype.handleDataModelPropertyChange=function(t){w.prototype.handleDataModelPropertyChange.call(this,t),this.editor&&this.editor.fireViewEvent(this.editView,"DataModelPropertyChanged",{event:t})},t.prototype.handleDataPropertyChange=function(t){w.prototype.handleDataPropertyChange.call(this,t),this.editor&&this.editor.fireViewEvent(this.editView,"DataPropertyChanged",{event:t})},t.prototype.initMenuItems=function(t){this.$56$(t),this.$55$(t),this.addBlockItems(t),w.prototype.initMenuItems.call(this,t)},t.prototype.isDroppable=function(w,t){if(this.editor.editable)return!!t.view.isDroppableToDisplayView},t.prototype.isSelectable=function(t,G){return!t._refGraph&&w.prototype.isSelectable.call(this,t,G)},t.prototype.addBlockItems=function(w){var t=this,G=function(){return t.sm().size()>0},A=function(){for(var w=0;w<t.sm().size();w++){var G=t.sm().getSelection().get(w);if(G instanceof ht.Block&&!(G instanceof ht.RefGraph))return!0}return!1};w.push({separator:!0,visible:function(){return t.editable&&(G()||A())}}),w.push({id:"block",label:R("editor.block"),action:function(){t.editor.block()},visible:function(){return t.editable&&G()}}),w.push({id:"unblock",label:R("editor.unblock"),action:function(){t.editor.unblock()},visible:function(){return t.editable&&A()}})},t}(fA),FA=function(){function w(t,G,A){_G(this,w),this.canvas=t,this.editView=G,this.type=A,this.gv=G.graphView,this.hoverLine=null,this.setUp(),this.garbageImage=ht.Default.toCanvas("Icons.ConnectGuideDeletingImage",24,24)}return w.prototype.getView=function(){return this.canvas},w.prototype.setUp=function(){this.addListeners()},w.prototype.tearDown=function(){this.removeListeners(),this.clear()},w.prototype.clear=function(){},w.prototype.setCursor=function(w){ht.Default.isTouchable||(this.canvas.style.cursor=w)},w.prototype.checkHit=function(w){var t=this.editView,G=this.gv,A=this.existList,I=this.type,R=G.lp(w),_=G.getZoom();if(A.length){var r=1/0,y=R[I],l=void 0;if(A.forEach(function(w){var t=Math.abs(w.value-y);t<r&&(l=w,r=t)}),l&&r<6/_){var C=this.getRoundLogicalPoint(w);return this.setCursor("x"===I?"ew-resize":"ns-resize"),C[I]=l.value,t[this.hoverKey]=C,this.hoverLine=l,t.drawRuler(),t.gv.redraw(),l}}return null},w.prototype.handle_touchmove=function(w){this.handle_mousemove(w)},w.prototype.handle_mousemove=function(w){if(this.editable&&!this.editing&&!ht.Default.isDragging()){var t=this.editView;this.gv;this.checkHit(w)||(delete this.hoverLine,this.setCursor("default"),t[this.hoverKey]=this.getRoundLogicalPoint(w),t.drawRuler(),t.gv.redraw())}},w.prototype.handle_touchstart=function(w){this.handle_mousedown(w)},w.prototype.handle_mousedown=function(w){this.editable&&(ht.Default.preventDefault(w),this.checkHit(w)?(S(this,w),ht.Default.preventDefault(w),this.editing=!0,delete this.editView[this.hoverKey],this.editView.gv.redraw()):this.addGuide(this.getRoundLogicalPoint(w)))},w.prototype.handle_mouseleave=function(w){var t=this.editView,G=this.hoverKey;this.editing||ht.Default.isDragging()||(t[G]&&(delete t[G],t.iv(),this.editView.gv.redraw()),this.setCursor("default"))},w.prototype.handleWindowTouchMove=function(w){this.handleWindowMouseMove(w)},w.prototype.handleWindowMouseMove=function(w){var t=this.hoverLine,G=this.gv,A=this.type,I=this.editView,R=this.grid,_=G.lp(w);if(R){var r=t.id,y=G.getZoom()>5?parseFloat(_[A].toFixed(1)):Math.round(_[A]);this.showGarbageTip(w),(this._garbageAppended||this.editView[this.hoverKey])&&(R.adjustAlignmentGuide(r,y),t.value=y,I.iv())}},w.prototype.handleWindowMouseUp=function(w){this.editing=!1;var t=this.hoverLine,G=this.garbageImage,A=this.grid,I=this.existList;if(!this.containedInGv(w)){A.removeAlignmentGuide(t.id);var R=I.indexOf(t);I.splice(R,1)}G.parentNode&&G.parentNode.removeChild(G),delete this.editView[this.hoverKey],this.editView.iv(),this.update()},w.prototype.showGarbageTip=function(w){var t=this.editView,G=this.hoverKey,A=this.garbageImage,I=ht.Default.getClientPoint(w);this.containedInGv(w)?(A.parentNode&&A.parentNode.removeChild(A),t[G]=this.getRoundLogicalPoint(w)):(A.parentNode?delete this._garbageAppended:(ht.Default.appendToScreen(A),this._garbageAppended=!0),A.style.left=I.x+10+"px",A.style.top=I.y+10+"px",delete t[G])},w.prototype.containedInGv=function(w){var t=this.gv,G=this.type,A=t.getView().getBoundingClientRect(),I=A.x,R=A.y,_=A.width,r=A.height,y={x:I+_/2,y:R+r/2},l=N(w);return"x"===G?l.y=y.y:l.x=y.x,ht.Default.containsPoint(A,l)},w.prototype.addGuide=function(w){var t=(this.editView,this.type),G=this.grid,A=w[t];if(G){var I=G.addAlignmentGuide(t,A);this.editView.alignGuideMap[t].push({id:I,value:A}),this.update()}},w.prototype.getRoundLogicalPoint=function(w){var t=this.gv.lp(w);return this.gv.getZoom()>5?(t.x=parseFloat(t.x.toFixed(1)),t.y=parseFloat(t.y.toFixed(1))):(t.x=Math.round(t.x),t.y=Math.round(t.y)),t},w.prototype.update=function(){this.editView.updateAlignGuide()},rG(w,[{key:"grid",get:function(){return this.gv.getEditInteractor()?this.gv.getEditInteractor().gridGuide:null}},{key:"hoverKey",get:function(){return"hoverGuideLine"+this.type.toUpperCase()}},{key:"existList",get:function(){return this.editView.alignGuideMap[this.type]}},{key:"editable",get:function(){return this.editView.editable&&this.editView.dm.a("alignmentGuideEnabled")}}]),w}();ww(FA,{ms_listener:1});var SA={width:!0,height:!0,position:!0,rotation:!0,anchor:!0,scale:!0,expanded:!0};ht.Default.getMSMap().hteditor_editview=function(w,t){Object.defineProperties(w,{dirty:{get:function(){return this.tab.a("dirty")},set:function(w){ht.Default.loadingRefGraph||this.tab.a("dirty",w)}}}),w.setRulerEnabled=function(w){this.dm.a("rulerEnabled",w)},w.isRulerEnabled=function(){return this.dm.a("rulerEnabled")},w.reload=function(){if(this.url){var w={url:this.url};if(this.editor.fireViewEvent(this,"Reloading",w),w.preventDefault)return!1;this.parse(this.url)}},w.save=function(w,t){var G=this;if(!this.editable)return void(w&&w());var A=function(){w&&w(),G.editor.fireViewEvent(G,"Saved",{url:G.url}),G.editor.makeFileNodeVisible(G.url)};if(t)this._saveAs(A,t);else if(this.url)this._saveImpl(A);else{var I=this.editor._rightClickURL||this.editor[this.type+"s"].currentDir,_=R("editor.inputnew"+this.type+"name"),r=this.editor[this.type+"s"];if(r.isAccordionMode()&&r.rootDir===I)return void this.editor.showMessage(R("editor.createfolderfirst"),"error",2e3);this._saveNew(w,A,_,I)}},w._saveNew=function(w,t,G,A){var I=this,_=function(G,_){if("ok"===_){var r=Vw(G)?b(G):G,y=A+"/"+r+".json";I.editor.getFileNode(y)?tt(R("editor.filenameconflict"),y,function(){w&&w()}):(I.tab.setName(r),I.url=y,I.tab.setTag(I.url),I.editor.dataView.updateUrl(),I._saveImpl(t,!0))}else w&&w()},r={name:void 0};if(this.editor.fireViewEvent(this,"NewNameInputing",r),r.preventDefault)return!1;r.name?_(r.name,"ok"):wt(G,this.tab.getName(),{nullable:!1,trim:!0,maxLength:kG.config.maxFileNameLength,checkFunc:kG.config.checkFileName,$38$:this.editor.$38$},_)},w._saveAs=function(w,t){this.tab.setName(p(t)),this.url=t,this.tab.setTag(this.url),this.editor.dataView.updateUrl(),this._saveImpl(w)},w._saveImpl=function(w,t){var G=this,A=this.url,I={url:A};if("display"===this.type&&kG.config.settingDefaultValueBeforeSaving&&this.dm.each(function(w){if(w instanceof ht.Node){var t=ht.Default.getImage(w.getImage());t&&t.dataBindings&&t.dataBindings.forEach(function(t){var G=w.getAttrObject(),A=t.defaultValue;if(void 0!==A){var I=t.attr;G&&void 0!==G[I]||w.a(I,A)}})}}),this.editor.fireViewEvent(this,"Saving",I),I.preventDefault)return t&&(this.tab.setName(R("editor.untitled")),delete this.url,this.tab.setTag(void 0),this.editor.dataView.updateUrl()),!1;var _=this.parent_uuid,r=this.root_dir;I={path:I.url,content:H(this.content),parent_uuid:_,root_dir:r},this.editor.request("upload",I,function(t){t?G.editor.saveImage(G.dm.a("snapshotURL")||G.g3d||G.graphView,A.substr(0,A.length-5)+".png",function(){w&&w(),G.editor.showMessage(R("editor.savedsuccessfully"),"normal",1e3),G.dirty=!1},t.uuid,t.parent_uuid,t.root_dir||t.asset_type):(G.tab&&G.editor.mainTabView.removeTab(G.tab),delete G.tab,G.editor.showMessage(R("editor.savedfailed"),"error",1e3))})},w.parse=function(w,t){(w||t)&&(this.url=w,t?this.update(t):D(w,this.update.bind(this)))},w.update=function(w,t){var G=this;if(w){if(t){var A=H(this.content),I=w,R={undo:function(){G.updateImpl(A,!0)},redo:function(){G.updateImpl(I,!0)}};this.dm.disableHistoryManager(),this.updateImpl(w,t),this.dm.enableHistoryManager(),this.dm.addHistory(R)}else this.dm.disableHistoryManager(),this.updateImpl(w,t),this.dm.enableHistoryManager(),this.dm.clearHistoryManager();var _=void 0;t?_="Committed":this.isOpened?_="Reloaded":(_="Opened",this.isOpened=!0);var r={url:this.url,json:w};this.editor.fireViewEvent(this,_,r)}},w.$3$=function(){return this._interactionState},w.$4$=function(w,t,G,A){var I=this,R=this._interactionState;R!==w&&(this._interactionState=w,this.editor.pointsEditingMode=!1,[this.graphView,this.g3d].forEach(function(R){if(R){var _=[];if(R.getInteractors().each(function(t){t.keep?t.disabled="edit"!==w:_.push(t)}),_.forEach(function(w){w.tearDown(),R.getInteractors().remove(w)}),"edit"!==w){var r=R===I.g3d?I.create3dInteractor(t,G,A):I.createInteractor(t,G,A);r.setUp(),R.getInteractors().add(r)}R.invalidateSelection()}}),this.editor.mainToolbar.iv(),this.fp("interactionState",R,w),this.validateCanvas())},w.addData=function(w){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],G=arguments.length>2&&void 0!==arguments[2]&&arguments[2],A=arguments.length>3&&void 0!==arguments[3]&&arguments[3],I="symbol"===this.type?"compCreated":"dataCreated",R={data:w};if(G)return void this.editor.fireViewEvent(this,I,R,!1);this.dm.beginTransaction(),t||w.getParent()||w.setParent(this.graphView.getCurrentSubGraph()),this.dm.add(w),t||(A||this.dm.sm().ss(w),this.graphView.setFocus()),this.editor.fireViewEvent(this,I,R,!1),this.dm.endTransaction()},w.skewGrid=function(){this.dm.beginTransaction(),this.dm.a("gridAngle",2*Math.PI/3),this.dm.a("gridRotation",Math.PI/6),this.dm.endTransaction()},w.preview=function(){this.$64$("previews/"+this.type+".json",this.dm.a("previewURL")||kG.config[this.type+"PreviewURL"])},w.$64$=function(w,t){var G=this,A=this.tab.getTag();A&&(t+=(-1===t.indexOf("?")?"?":"&")+"tag="+encodeURI(A));var I={url:t};if(this.editor.fireViewEvent(this,"Previewing",I),I.preventDefault)return!1;t=I.url;var R=this.content;R.title=this.tab.getName();var _=this.parent_uuid,r=this.root_dir;I={path:kG.config.vision&&A?"previews/"+A:w,content:H(R),parent_uuid:_,root_dir:r},this.editor.request("upload",I,function(w){window.open(t,t.replace(/[^\u4E00-\u9FA5A-Za-z0-9]+/g,"_")),G.editor.fireViewEvent(G,"Preview",{url:t})})}};var NA=function(){function w(t,G,A,I,R,_,r){var y=this;_G(this,w),this.editor=t,this.tab=G,this.type=I,this.sceneView=R,this.parent_uuid=_,this.root_dir=r,G.setView(this);var l=this.gv=this.graphView=new A(this);this._view=e(!0,this),l.addViewListener(function(w){"validate"===w.kind&&y.validateCanvas()}),this._hRuler=o(),this._vRuler=o(),this._view.appendChild(l.getView()),this.$4$("edit"),l.isInteractive=function(){return!1},l.addPropertyChangeListener(function(){y.iv()}),l.addInteractorListener(function(w){y.handleInteractorEvent(w)}),this.dm.sm().addSelectionChangeListener(function(w){y.iv()}),this.dm.addDataModelChangeListener(function(w){y.handleDataModelChanged(w)}),this.dm.addDataPropertyChangeListener(function(w){y.handleDataPropertyChanged(w)}),this.dm.addPropertyChangeListener(function(w){y.handleDataModelPropertyChanged(w)}),this.dm.addHierarchyChangeListener(function(w){y.handleHierarchyChanged(w)}),this.dm.layout=function(w,t){y._autoLayout||(y._autoLayout=new ht.layout.AutoLayout(l)),y._autoLayout.options=t||{};var G=l.getZoom(),A=l.tx(),I=l.ty();y.dm.beginTransaction(),y._autoLayout.setAnimate(kG.config.animate);var R=function(){var w=l.getZoom(),t=l.tx(),R=l.ty(),_={undo:function(){l.setZoom(G),l.tx(A),l.ty(I)},redo:function(){l.setZoom(w),l.tx(t),l.ty(R)}};y.dm.addHistory(_),y.dm.endTransaction()};y._autoLayout.layout(w,function(){kG.config.animate?l.fitContent({finishFunc:R}):(l.fitContent(!1,kG.config.fitPadding),R())})},l.setEditable(!0),l.setEditStyle("moveDummyThreshold",kG.config.moveDummyThreshold),l.setEditStyle("smartGuideThreshold",kG.config.smartGuideThreshold),kG.SceneView&&l.setEditStyle("curveTipVisible",!1),l.getInteractors().each(function(w){w.keep=!0}),this.clear(),this.initRuler()}return w.prototype.setGridEnabled=function(w){this.dm.a("gridEnabled",w)},w.prototype.isGridEnabled=function(){return this.dm.a("gridEnabled")},w.prototype.initRuler=function(){var w=this._hRuler,t=this._vRuler,G=this.gv,A=this.type;if(this.alignGuideMap={x:[],y:[]},kG.SceneView){w.style.pointerEvents="auto",t.style.pointerEvents="auto";var I=this.dm.a("alignmentGuideColor");I||(I="symbol"===A?kG.config.symbolGridAlignmentGuideColor:kG.config.displayGridAlignmentGuideColor),G.setEditStyle("gridAlignmentGuideColor",I);new FA(this._hRuler,this,"x"),new FA(this._vRuler,this,"y")}},w.prototype.resetGrid=function(){},w.prototype.clear=function(){this.dm.beginTransaction(),this.dm.setName(void 0),this.dm.setBackground(void 0),this.dm.setHierarchicalRendering(!1),this.dm.setLayers(void 0),this.dm.clear(),this.dm.setAttrObject(void 0),this.resetGrid(),this.getGridGuide().removeAllAlignmentGuide(),this.dm.endTransaction()},w.prototype.handleInteractorEvent=function(w){var t=w.kind;"prepareMove"!==t&&"prepareEdit"!==t||!w.event.altKey?"selectPoint"===t&&(this.currentEditingPoint=void 0===w.x?null:{x:w.x,y:w.y,e:iw(w.e)?w.e:0},this.editor.updateInspectorPropertiesLater()):(this.editor.copy(),this.editor.paste(!0),this.editor.gv.validate())},w.prototype.handleDataModelChanged=function(w){this.dirty=!0},w.prototype.handleDataPropertyChanged=function(w){w.data.disableDirty||"*"!==w.property&&(SA[w.property]&&this.iv(),this.dirty=!0)},w.prototype.handleHierarchyChanged=function(w){this.dirty=!0},w.prototype.handleDataModelPropertyChanged=function(w){var t=this,G=w.property,A=w.newValue;if("a:rulerEnabled"===G)this.graphView.getEditInteractor().alignmentGuideEnabled=A,this.iv();else if("a:gridEnabled"===G)this.graphView.getEditInteractor().gridEnabled=A;else if("a:gridBlockSize"===G)this.graphView.setEditStyle("gridBlockSize",A);else if("a:gridThickLinesEvery"===G)this.graphView.setEditStyle("gridThickLinesEvery",A);else if("a:gridThickColor"===G)this.graphView.setEditStyle("gridThickColor",A);else if("a:gridLightColor"===G)this.graphView.setEditStyle("gridLightColor",A);else if("a:gridAngle"===G)this.graphView.setEditStyle("gridAngle",A);else if("a:gridRotation"===G)this.graphView.setEditStyle("gridRotation",A);else if("a:gridZoomThreshold"===G)this.graphView.setEditStyle("gridZoomThreshold",A);else if("a:anchorEnabled"===G)this.graphView.setEditStyle("anchorVisible",A);else if("a:guideLineEnabled"===G)this.graphView.setEditStyle("guideLineVisible",A);else if("a:highlightEnabled"===G)this.graphView.setEditStyle("hoverGuideVisible",A);else if("a:highlightColor"===G)this.graphView.setEditStyle("hoverGuideColor",A);else if("a:highlightBorderWidth"===G)this.graphView.setEditStyle("hoverGuideBorderWidth",A);else if("a:highlightBorderPattern"===G)this.graphView.setEditStyle("hoverGuideBorderPattern",A);else if("a:connectActionType"===G)this.graphView.setCurrentConnectActionType(A);else if("a:xAlignmentGuides"===G){var I=this.getGridGuide();I.removeAllAlignmentGuide("x"),this.alignGuideMap.x=[],A&&A.forEach(function(w){var G=I.addAlignmentGuide("x",w);t.alignGuideMap.x.push({id:G,value:w})}),this.drawRuler()}else if("a:yAlignmentGuides"===G){var R=this.getGridGuide();R.removeAllAlignmentGuide("y"),this.alignGuideMap.y=[],A&&A.forEach(function(w){var G=R.addAlignmentGuide("y",w);t.alignGuideMap.y.push({id:G,value:w})}),this.drawRuler()}else"a:alignmentGuideColor"===G?(this.graphView.setEditStyle("gridAlignmentGuideColor",A),this.drawRuler()):"a:alignmentGuideEnabled"===G&&(this.graphView.getEditInteractor().alignmentGuideEnabled=A,this.drawRuler());this.dirty=!0,this.validateCanvas()},w.prototype.onClosed=function(){this.graphView.onClosed()},w.prototype.validateCanvasLater=function(){var w=this;this._validateCanvasLater||(this._validateCanvasLater=!0,requestAnimationFrame(function(){w.validateCanvas()}))},w.prototype.validateCanvas=function(){this._validateCanvasLater=!1;var w=this.graphView._topCanvas,t=Y(w);t.clearRect(0,0,w.clientWidth,w.clientHeight),this.graphView.getInteractors().each(function(w){w.$0$&&w.$0$(t)}),this.$0$(t),t.restore()},w.prototype.redraw=function(){this._lastWidth=this._lastHeight=null,this.iv()},w.prototype.validateImpl=function(){var w=this._rulerSize,t=this.isRulerEnabled(),G=this.getWidth(),A=this.getHeight();if(G!==this._lastWidth||A!==this._lastHeight||w!==this._lastRulerSize||t!==this._lastRulerEnabled){if(this._lastWidth=G,this._lastHeight=A,this._lastRulerSize=w,this._lastRulerEnabled=t,t){this._hRuler.parentNode||(this._view.appendChild(this._hRuler),this._view.appendChild(this._vRuler));var I=Math.max(0,G-w),R=Math.max(0,A-w);u(this._hRuler,w,0,I,w),u(this._vRuler,0,w,w,R),u(this.graphView,w,w,I,R),u(this.graphView._topDiv,0,0,I,R),a(this.graphView._topCanvas,I,R),a(this._hRuler,I,w),a(this._vRuler,w,R)}else this._hRuler.parentNode&&(h(this._hRuler),h(this._vRuler)),u(this.graphView,0,0,G,A),u(this.graphView._topDiv,0,0,G,A),a(this.graphView._topCanvas,G,A);this.validateCanvas()}this._hRuler.style.background=this._rulerBackground,this._vRuler.style.background=this._rulerBackground,this.drawRuler()},w.prototype.$0$=function(w){var t=this.graphView.getZoom(),G=this.graphView.tx(),A=this.graphView.ty(),I=Math.round(this.dm.a("width")||0)*t,R=Math.round(this.dm.a("height")||0)*t,_=this.graphView.getWidth(),r=this.graphView.getHeight();!kG.config.mixMaskAndBackground&&this.dm.getBackground()||I>0&&R>0&&_>0&&r>0&&(w.beginPath(),G&&w.rect(0,0,G,r),A&&_-G&&w.rect(G,0,_-G,A),_-G-I&&R&&w.rect(G+I,A,_-G-I,R),_-G&&r-A-R&&w.rect(G,A+R,_-G,r-A-R),w.fillStyle=kG.config.color_mask,w.fill())},w.prototype.drawVerticalText=function(w,t,G){w.save(),w.translate(11,G+11),w.rotate(-Math.PI/2),j(w,t,this._rulerFont,this._rulerColor,11,-11,0,this._rulerSize,"right"),w.restore()},w.prototype.drawRuler=function(){if(this.isRulerEnabled()){var w=this._rulerFont,t=this._rulerSize,G=this._rulerColor,A=this.graphView,I=A.getUnionNodeRect(A.sm().getSelection()),R=A.getZoom(),_=Math.log(R)/Math.log(10),r=Math.floor(_),y=100/Math.pow(10,r)*R,l=y/10,C=r>1?40+10*(r-1):40,V=Math.round(A.tx()),q=Math.round(A.ty()),k={x:-V,y:-q,width:A.getWidth(),height:A.getHeight()},Z=Math.floor(k.x/y),z=Math.ceil((k.x+k.width)/y),x=Math.floor(k.y/y),L=Math.ceil((k.y+k.height)/y),Q=this.dm.a("alignmentGuideColor"),J=this.dm.a("alignmentGuideEnabled"),B=ht.Default.getTextSize,n=void 0,f=void 0,i=void 0,F=void 0,S=void 0,N=void 0;for(Q||(Q="symbol"===this.type?kG.config.symbolGridAlignmentGuideColor:kG.config.displayGridAlignmentGuideColor),Y(this._hRuler,0,0,1,{x:0,y:0,width:k.width,height:t}).restore(),F=Y(this._hRuler,V,0,1),F.lineWidth=1,F.strokeStyle=G,I&&(F.beginPath(),F.rect(I.x*R,0,I.width*R,t),F.fillStyle=kG.config.color_line,F.fill()),F.beginPath(),n=Z;n<=z;n++)S=n*y,N=r>1?(S/R).toFixed(r-1):Math.round(S/R),S=Math.round(S),F.moveTo(S,t),F.lineTo(S,0),j(F,N,w,G,S,0,1,t,"left");for(F.stroke(),F.beginPath(),n=Z;n<=z;n++)for(i=1;i<10;i++)S=n*y+i*l,N=r>1?(S/R).toFixed(r-1):Math.round(S/R),S=Math.round(S),F.moveTo(S,t),5===i?(F.lineTo(S,t-10),j(F,N,w,G,S,0,1,t,"left")):(F.lineTo(S,t-4),l>C&&j(F,N,w,G,S,0,1,t,"left"));F.stroke(),J&&this.alignGuideMap&&this.alignGuideMap.x.length&&(F.beginPath(),F.strokeStyle=Q,this.alignGuideMap.x.forEach(function(w){F.moveTo(R*w.value,0),F.lineTo(R*w.value,t)}),F.stroke());var T=this.hoverGuideLineX;if(J&&T){var m=R*T.x,U=B(w,T.x);F.fillStyle=kG.config.color_pane,F.fillRect(m,0,U.width,t),j(F,T.x,w,Q,m,0,U.width,t,"left","middle"),F.beginPath(),F.lineWidth=2,F.moveTo(m,0),F.lineTo(m,t),F.strokeStyle=ht.Default.brighter(Q),F.stroke()}for(F.restore(),Y(this._vRuler,0,0,1,{x:0,y:0,width:t,height:k.height}).restore(),F=Y(this._vRuler,0,q,1),F.lineWidth=1,F.strokeStyle=G,I&&(F.beginPath(),F.rect(0,I.y*R,t,I.height*R),F.fillStyle=kG.config.color_line,F.fill()),F.beginPath(),f=x;f<=L;f++)S=f*y,N=r>1?(S/R).toFixed(r-1):Math.round(S/R),S=Math.round(S),F.moveTo(t,S),F.lineTo(0,S),this.drawVerticalText(F,N,S);for(F.stroke(),F.beginPath(),f=x;f<=L;f++)for(i=1;i<10;i++)S=f*y+i*l,N=r>1?(S/R).toFixed(r-1):Math.round(S/R),S=Math.round(S),F.moveTo(t,S),5===i?(F.lineTo(t-10,S),this.drawVerticalText(F,N,S)):(F.lineTo(t-4,S),l>C&&this.drawVerticalText(F,N,S));F.stroke(),J&&this.alignGuideMap&&this.alignGuideMap.y.length&&(F.beginPath(),F.strokeStyle=Q,
this.alignGuideMap.y.forEach(function(w){F.moveTo(0,R*w.value),F.lineTo(t,R*w.value)}),F.stroke());var c=this.hoverGuideLineY;if(J&&c){var v=R*c.y,E=B(w,c.y);F.fillStyle=kG.config.color_pane,F.fillRect(0,v,t,E.width),F.save(),F.translate(0,v),F.rotate(-Math.PI/2),j(F,c.y,w,Q,-E.width,0,E.width,t,"right"),F.restore(),F.beginPath(),F.lineWidth=2,F.moveTo(0,v),F.lineTo(t,v),F.strokeStyle=ht.Default.brighter(Q),F.stroke()}F.restore()}},w.prototype.updateAlignGuide=function(){if(this.getGridGuide()){var w=this.dm,t=this.alignGuideMap,G=t.x,A=t.y;w.beginTransaction(),w.a({xAlignmentGuides:G&&G.length?G.map(function(w){return w.value}):void 0,yAlignmentGuides:A&&A.length?A.map(function(w){return w.value}):void 0}),w.endTransaction()}},w.prototype.getGridGuide=function(){return this.gv.getEditInteractor()?this.gv.getEditInteractor().gridGuide:null},rG(w,[{key:"editable",get:function(){return this.sceneView?this.sceneView.editable:this._editable},set:function(w){this.sceneView||w!==this._editable&&(this._editable=w,this.gv.invalidateSelection(),this.editor.mainToolbar.iv())}},{key:"dm",get:function(){return this.graphView.dm()}}]),w}();ww(NA,{ms_v:1,ms_fire:1,ms_ac:["rulerBackground","rulerFont","rulerColor","rulerSize","guideColor"],hteditor_editview:1,_rulerFont:kG.config.smallFont,_rulerBackground:kG.config.color_pane,_rulerColor:kG.config.color_dark,_rulerSize:kG.config.rulerSize,_guideColor:kG.config.color_transparent,_interactionState:void 0});var TA=function(w){function t(G,A,I){_G(this,t);var R=G.getView(),_=lG(this,w.call(this,R.graphView));return _.tab=G,_.editView=R,_.editor=_.editView.editor,_.clazz=A,_.type=I,_._disabled=!1,_}return yG(t,w),t.prototype.beginTransaction=function(){this._isBeginTransaction||(this._isBeginTransaction=!0,this.dm.beginTransaction())},t.prototype.endTransaction=function(){this._isBeginTransaction&&(this._isBeginTransaction=!1,this.dm.endTransaction())},t.prototype.getDataAt=function(w,t){return this.gv.getDataAt(w,t)},t.prototype.getNodeAt=function(w){var t=this.getDataAt(w);return t instanceof ht.Node?t:null},t.prototype.setUp=function(){w.prototype.setUp.call(this),this.sm.cs()},t.prototype.$0$=function(w){},t.prototype.drawDiamond=function(w,t,G,A){var I=arguments.length>4&&void 0!==arguments[4]?arguments[4]:4;t=this.toPoint(t),A&&(w.fillStyle=A),G&&(w.strokeStyle=G);var R=t,_=R.x,r=R.y;w.lineWidth=1,w.beginPath(),w.moveTo(_,r-I),w.lineTo(_+I,r),w.lineTo(_,r+I),w.lineTo(_-I,r),w.closePath(),A&&w.fill(),G&&w.stroke()},t.prototype.drawRect=function(w,t,G,A){t=this.toRect(t),A&&(w.fillStyle=A),G&&(w.strokeStyle=G),w.lineWidth=1,w.beginPath(),w.rect(t.x,t.y,t.width,t.height),w.stroke(),A&&w.fill(),G&&w.stroke()},t.prototype.drawPoint=function(w,t,G,A,I){t=this.toPoint(t),I&&(w.fillStyle=I),A&&(w.strokeStyle=A),w.lineWidth=1,w.beginPath(),w.arc(t.x,t.y,G,0,2*Math.PI,!0),I&&w.fill(),A&&w.stroke()},t.prototype.drawPoints=function(w,t,G,A,I){for(var R=0;R<t.length;R++)this.drawPoint(w,t[R],G,A,I)},t.prototype.drawLine=function(w,t,G,A){t=this.toPoint(t),G=this.toPoint(G),w.lineWidth=1,w.strokeStyle=A,w.beginPath(),w.moveTo(t.x,t.y),w.lineTo(G.x,G.y),w.stroke()},t.prototype.toRect=function(w){var t=this.zoom;return{x:w.x*t+this.tx,y:w.y*t+this.ty,width:w.width*t,height:w.height*t}},t.prototype.toPoint=function(w){return{x:w.x*this.zoom+this.tx,y:w.y*this.zoom+this.ty}},t.prototype.add=function(w){this.editView.addData(w)},t.prototype.remove=function(w){this.dm.remove(w)},t.prototype.lp=function(w){return this.gv.lp(w)},rG(t,[{key:"dm",get:function(){return this.gv.dm()}},{key:"sm",get:function(){return this.gv.dm().sm()}},{key:"zoom",get:function(){return this.gv.getZoom()}},{key:"tx",get:function(){return this.gv.tx()}},{key:"ty",get:function(){return this.gv.ty()}},{key:"disabled",get:function(){return!this.editor.editable||this._disabled},set:function(w){this._disabled=w}}]),t}(ht.graph.Interactor),mA=function(w){function t(G,A,I){return _G(this,t),lG(this,w.call(this,G,A,I))}return yG(t,w),t.prototype.tearDown=function(){w.prototype.tearDown.call(this),this.node=this.p1=this.p2=null},t.prototype.$48$=function(w){this.node?this.remove(this.node):this.editView.$4$("edit")},t.prototype.handle_mousedown=function(w){this.handle_touchstart(w)},t.prototype.handle_touchstart=function(w){Gw(w),i(w)&&(this.gv.setFocus(w),this.p1=this.lp(w),this.startDragging(w))},t.prototype.handleWindowMouseMove=function(w){this.handleWindowTouchMove(w)},t.prototype.handleWindowMouseUp=function(w){this.handleWindowTouchEnd(w)},t.prototype.handleWindowTouchMove=function(w){if(Gw(w),this.p1){this.p2=this.lp(w);var t=v(this.p1,this.p2);if(this.node)this.node.setRect(t);else{if(!t.width||!t.height)return;this.beginTransaction(),this.createNode(t,!1)}}},t.prototype.handleWindowTouchEnd=function(w){if(Gw(w),this.endTransaction(),!this.node&&this.p1&&this.createNode({x:this.p1.x-25,y:this.p1.y-25,width:50,height:50},!0),this.node){var t="symbol"===this.editView.type?"compCreated":"dataCreated",G={data:this.node};this.editor.fireViewEvent(this.editView,t,G,!1)}kG.config.continuousCreating?this.node=this.p1=this.p2=null:this.editView.$4$("edit")},t.prototype.createNode=function(w,t){Sw(this.type)?this.node=this.type(w,t):this.node=new this.clazz,t?this.node.setPosition(w.x+w.width/2,w.y+w.height/2):this.node.setRect(w),this.node.setParent(this.editView.graphView.getCurrentSubGraph()),this.dm.add(this.node),this.dm.sm().ss(this.node),this.editView.graphView.setFocus()},t.prototype.$0$=function(w){this.node&&this.drawRect(w,this.node.getRect(),kG.config.color_data_border)},t}(TA),UA=function(w){function t(G,A,I){return _G(this,t),lG(this,w.call(this,G,A,I))}return yG(t,w),t.prototype.tearDown=function(){w.prototype.tearDown.call(this),this.draggingPoint=this.n1=this.n2=null},t.prototype.$48$=function(w){this.n1?(this.draggingPoint=this.n1=this.n2=null,this.editView.validateCanvas()):this.editView.$4$("edit")},t.prototype.drawAttachPoints=function(w,t,G){var A=this,I=this.gv.getAttachPoints(t);I&&I.forEach(function(I,R){var _=I.x,r=I.y,y=I.offsetX,l=I.offsetY;R===G?A.drawDiamond(w,t.getAttachPosition(_,r,y,l),kG.config.color_select,kG.config.color_select,6):A.drawDiamond(w,t.getAttachPosition(_,r,y,l),kG.config.color_select,kG.config.color_light)})},t.prototype.drawCurve=function(w,t,G){var A=this.gv.getEditInteractor();if(!A)return null;var I=A.getSubModule("Curve");if(!I)return null;I.drawEdgeHostHighlight(w,t,G),this.editView.validateCanvasLater()},t.prototype.$0$=function(w){if(this.n1&&(this.n1 instanceof ht.Edge?this.drawCurve(w,this.n1,this.edgePosition1):(this.drawRect(w,this.gv.getNodeRect(this.n1),kG.config.color_data_border),this.drawAttachPoints(w,this.n1,this.attachIndex1)),this.draggingPoint)){var t=void 0,G=void 0;t=this.n1 instanceof ht.Edge?this.edgePosition1.point:this.attachIndex1||0===this.attachIndex1?this.getAttachPosition(this.n1,this.attachIndex1):this.n1.p(),this.n2 instanceof ht.Edge?G=this.edgePosition2.point:this.n2&&(this.attachIndex2||0===this.attachIndex2)&&(G=this.getAttachPosition(this.n2,this.attachIndex2)),this.drawLine(w,t,G||this.draggingPoint,kG.config.color_data_border)}if(this.n2)if(this.n2 instanceof ht.Edge)this.drawCurve(w,this.n2,this.edgePosition2);else{var A=this.gv.getNodeRect(this.n2);this.n1!==this.n2&&(this.drawRect(w,A,kG.config.color_data_border),this.drawAttachPoints(w,this.n2,this.attachIndex2));var I=this.toPoint({x:A.x,y:A.y});w.beginPath(),w.moveTo(I.x,I.y-15-3),w.lineTo(I.x+10,I.y-15-3),w.lineTo(I.x+10,I.y-3),w.lineTo(I.x+5,I.y-7-3),w.moveTo(I.x+10,I.y-3),w.lineTo(I.x+15,I.y-7-3),w.lineWidth=1,w.strokeStyle=kG.config.color_data_border,w.stroke()}},t.prototype.handle_mousemove=function(w){var t=this;if(Gw(w),!this.draggingPoint){var G=this.getDataAt(w,function(w){return t.gv.isSourceTargetEditable(null,w)});if(G instanceof ht.Edge)this.edgePosition1=this.gv.calculateEdgePosition(G,this.lp(w));else{var A=this.attachIndex1;if(G){var I=this.gv.calculateAttachPoint(G,this.lp(w));this.attachIndex1=I?I.index:null}else this.attachIndex1=null;if(G===this.n1&&A===this.attachIndex1)return}this.n1=G,this.editView.validateCanvas()}},t.prototype.handle_mousedown=function(w){this.handle_touchstart(w)},t.prototype.handle_touchstart=function(w){var t=this;Gw(w),i(w)&&(this.gv.setFocus(w),this.draggingPoint||(this.n1=this.getDataAt(w,function(w){return t.gv.isSourceTargetEditable(null,w)}),this.n1&&(this.draggingPoint=this.lp(w),this.startDragging(w))))},t.prototype.handleWindowMouseMove=function(w){this.handleWindowTouchMove(w)},t.prototype.handleWindowMouseUp=function(w){this.handleWindowTouchEnd(w)},t.prototype.handleWindowTouchMove=function(w){var t=this,G=this.getDataAt(w,function(w){return t.gv.isSourceTargetEditable(null,w,!0)});if(this.draggingPoint=this.lp(w),this.autoScroll(w),kG.config.edgeLoop||this.n1!==G){if(this.n2=G,G)if(G instanceof ht.Edge)this.edgePosition2=this.gv.calculateEdgePosition(G,this.lp(w));else{var A=this.gv.calculateAttachPoint(G,this.lp(w));this.attachIndex2=A?A.index:null}}else this.attachIndex2=null,this.edgePosition2=null;this.editView.validateCanvas()},t.prototype.handleWindowTouchEnd=function(w){if(this.n1&&this.n2){var t=void 0;fw(this.type)?(t=new this.clazz(this.n1,this.n2),t.s("edge.type",this.type)):t=Sw(this.type)?this.type(this.n1,this.n2):new this.clazz(this.n1,this.n2);var G=void 0,A=void 0;if(this.n1 instanceof ht.Edge)void 0!==this.edgePosition1.index?t.setStyle("edge.source.index",this.edgePosition1.index):void 0!==this.edgePosition1.percent&&t.setStyle("edge.source.percent",this.edgePosition1.percent);else if(G=this.getAttachPoint(this.n1,this.attachIndex1)){var I=G,R=I.x,_=I.y,r=I.offsetX,y=I.offsetY;t.s({"edge.source.anchor.x":R,"edge.source.anchor.y":_,"edge.source.offset.x":r,"edge.source.offset.y":y})}if(this.n2 instanceof ht.Edge)void 0!==this.edgePosition2.index?t.setStyle("edge.target.index",this.edgePosition2.index):void 0!==this.edgePosition2.percent&&t.setStyle("edge.target.percent",this.edgePosition2.percent);else if(A=this.getAttachPoint(this.n2,this.attachIndex2)){var l=A,C=l.x,V=l.y,q=l.offsetX,k=l.offsetY;t.s({"edge.target.anchor.x":C,"edge.target.anchor.y":V,"edge.target.offset.x":q,"edge.target.offset.y":k})}(G||A)&&t.s("edge.offset",0),this.add(t),kG.config.continuousCreating||this.editView.$4$("edit")}this.draggingPoint=this.n1=this.n2=null,this.editView.validateCanvas()},t.prototype.getAttachPoint=function(w,t){if(null===t||void 0===t)return null;var G=this.gv.getAttachPoints(w);return G&&0!==G.length?G[t]:null},t.prototype.getAttachPosition=function(w,t){var G=this.getAttachPoint(w,t),A=G.x,I=G.y,R=G.offsetX,_=G.offsetY;return w.getAttachPosition(A,I,R,_)},t}(TA),cA=function(w){function t(G,A,I,R){_G(this,t);var _=lG(this,w.call(this,G,A,I));return _.fill=R,_}return yG(t,w),t.prototype.setUp=function(){w.prototype.setUp.call(this),this.shapeHelper.reset()},t.prototype.tearDown=function(){w.prototype.tearDown.call(this)},t.prototype.$48$=function(w){var t=this.shapeHelper;t.isEditing3d()||(t.isBreak?this.createShape():(t.preCtrl=null,t.isBreak=!0,this.editView.validateCanvas()))},t.prototype.createShape=function(){var w=this.shapeHelper,t=w.points,G=w.segments,A=w.closePath;if(t.length>1){var I=void 0;Sw(this.type)?I=this.type(t,G):(I=new this.clazz,I.setPoints(t),I.setSegments(G)),A&&I.setClosePath&&I.setClosePath(!0),this.add(I)}this.editView.$4$("edit"),this.editor.pointsEditingMode=!0},t.prototype.handle_mousedown=function(w){this.handle_touchstart(w)},t.prototype.isCloseStart=function(w){var t=this.shapeHelper.points,G=t[0];return!!G&&c(G,this.lp(w))<5/this.gv.getZoom()},t.prototype.handle_touchstart=function(w){this.shapeHelper.setEditing3d(!1);var t=this.shapeHelper,G=t.points,A=t.segments,I=t.isBreak,R=t.preCtrl;if(Gw(w),i(w)){if(this.gv.setFocus(w),F(w))this.createShape();else{if(this.isCloseStart(w))return this.shapeHelper.closePath=!0,void this.createShape();var _=this.judgeNextPoint(w,!0);if(G.length){var r=G[G.length-1];if(Math.abs(r.x-_.x)<.01&&Math.abs(r.y-_.y)<.01)return}R?(G.push(R),G.push(_),G.push(_),A.push(4),this.shapeHelper.preCtrl=null):(I?(A.push(1),this.shapeHelper.isBreak=!1):A.push(G.length>0?2:1),G.push(_)),this.shapeHelper.nextPoint=this.lp(w),this.editView.validateCanvas()}this.shapeHelper.downPoint=this.lp(w),this.startDragging(w),this._dragging=!0}},t.prototype.judgeNextPoint=function(w,t){var G=this.shapeHelper,A=G.points,I=G.isBreak,R=this.lp(w);if(this._dragging||I&&!t)return null;if(ht.Default.isShiftDown()&&A.length>0){var _=A[A.length-1],r=R.x-_.x,y=R.y-_.y,l=Math.atan2(y,r),C=ht.Default.getDistance(_,R),V=l%(Math.PI/4);return l-=V,Math.abs(V)>Math.PI/8&&(V>0?l+=Math.PI/4:l-=Math.PI/4),{x:_.x+Math.cos(l)*C,y:_.y+Math.sin(l)*C}}var q=this.gv.getEditInteractor(),k=q.gridGuide.findClosest(R);return k&&(k.x&&(R.x+=k.x),k.y&&(R.y+=k.y)),R},t.prototype.handle_mousemove=function(w){this.shapeHelper.nextPoint=this.judgeNextPoint(w),this.editView.validateCanvas()},t.prototype.handle_touchend=function(w){},t.prototype.handle_mouseup=function(w){this.handle_touchend(w)},t.prototype.handleWindowTouchMove=function(w){return this.handleWindowMouseMove(w)},t.prototype.updateCtrl=function(w){var t=this.shapeHelper,G=t.points,A=t.segments,I=t.downPoint,R=G.length,_=G[R-1],r=this.lp(w),y=this.gv.getZoom(),l=ht.Default.getDistance(I,r),C=A[A.length-1];if(l*y>5){if(ht.Default.isShiftDown()){var V=Math.abs;V(_.x-r.x)>=V(_.y-r.y)?r.y=_.y:r.x=_.x}else{var q=this.gv.getEditInteractor(),k=q.gridGuide.findClosest(r);k&&(k.x&&(r.x+=k.x),k.y&&(r.y+=k.y))}var Z={x:2*_.x-r.x,y:2*_.y-r.y};4===C?G[R-2]=Z:1!==C&&(A.pop(),A.push(4),G.splice(R-1,0,Z),G.push(G[R-1])),this.shapeHelper.preCtrl=r}else 4===C&&(G[R-2]=G[R-1],this.shapeHelper.preCtrl=null)},t.prototype.handleWindowMouseMove=function(w){0!==this.shapeHelper.points.length&&(this.updateCtrl(w),this.editView.validateCanvas())},t.prototype.handleWindowTouchEnd=function(w){return this.handleWindowMouseUp(w)},t.prototype.handleWindowMouseUp=function(w){0!==this.shapeHelper.points.length&&(this._dragging=!1,this.updateCtrl(w),this.shapeHelper.nextPoint=this.judgeNextPoint(w,!0))},t.prototype.$0$=function(w){var t=this.shapeHelper,G=t.points,A=t.segments,I=(t.isBreak,t.preCtrl),R=(t.downPoint,t.nextPoint),_=[];w.beginPath();for(var r=0,y=void 0,l=void 0,C=void 0,V=0;V<A.length;V++){var q=A[V];1===q?(y=this.toPoint(G[r++]),w.moveTo(y.x,y.y)):2===q?(y=this.toPoint(G[r++]),w.lineTo(y.x,y.y)):3===q?(y=this.toPoint(G[r++]),l=this.toPoint(G[r++]),w.quadraticCurveTo(y.x,y.y,l.x,l.y)):4===q?(y=this.toPoint(G[r++]),l=this.toPoint(G[r++]),C=this.toPoint(G[r++]),w.bezierCurveTo(y.x,y.y,l.x,l.y,C.x,C.y)):5===q&&w.closePath(),_.push(G[r-1])}if(R)if(I)y=this.toPoint(I),l=this.toPoint(R),C=this.toPoint(R),w.bezierCurveTo(y.x,y.y,l.x,l.y,C.x,C.y);else{var k=this.toPoint(R);w.lineTo(k.x,k.y)}if(w.strokeStyle=kG.config.color_data_border,w.lineWidth=1,w.stroke(),this.fill&&(w.fillStyle=kG.config.color_transparent,w.fill()),this.drawPoints(w,_,4,kG.config.color_data_border,kG.config.color_data_background),I){var Z=G[G.length-1],z=this.gv.getZoom(),x=3/z,L=6/z,Q={x:2*Z.x-I.x,y:2*Z.y-I.y};this.drawLine(w,I,Q,kG.config.color_data_border),this.drawRect(w,{x:Q.x-x,y:Q.y-x,width:L,height:L},kG.config.color_data_border,kG.config.color_data_background),this.drawRect(w,{x:I.x-x,y:I.y-x,width:L,height:L},kG.config.color_data_border,kG.config.color_data_background)}},rG(t,[{key:"shapeHelper",get:function(){return this.editor.shapeHelper}}]),t}(TA),vA=function(w){function t(G,A,I,R,_,r,y,l){_G(this,t);var C=lG(this,w.call(this,G,A,iA,"display",r,y,l));C.displayTree=C.list=new(_||_A)(C),C.dm.setHierarchicalRendering(!0),C.dm.enableHistoryManager(kG.config.maxUndoRedoSteps),C.dirty=!1,C.parse(I,R);var V=G.getFileNode(I);return C.editable=!V||!1!==V.a("editable"),r||(I?R||C.editor.fireEvent("displayViewOpening",{displayView:C,url:I}):C.editor.fireEvent("displayViewCreated",{displayView:C,json:R})),kG.config.standaloneViewCounter&&C.initIdCounter&&C.initIdCounter(),C}return yG(t,w),t.prototype.onClosed=function(){w.prototype.onClosed.call(this),this.displayTree.onClosed()},t.prototype.handleDataModelChanged=function(w){"add"!==w.kind||this.dm.isDeserializing()||ht.Default.isIsolating()||w.data.setLayer(this.editor.currentLayer),this.dirty=!0},t.prototype.clear=function(){this.sceneView||(this.dm.beginTransaction(),w.prototype.clear.call(this),this.dm.a("connectActionType",kG.config.displayConnectActionType),this.dm.a("anchorEnabled",kG.config.displayAnchorEnabled),this.dm.a("guideLineEnabled",kG.config.displayGuideLineEnabled),this.dm.a("highlightEnabled",kG.config.displayHighlightEnabled),this.dm.a("highlightColor",kG.config.displayHighlightColor),this.dm.a("highlightBorderWidth",kG.config.displayHighlightBorderWidth),this.dm.a("highlightBorderPattern",kG.config.displayHighlightBorderPattern),this.dm.endTransaction())},t.prototype.resetGrid=function(){this.sceneView||(this.dm.beginTransaction(),this.dm.a("rulerEnabled",kG.config.displayRulerEnabled),this.dm.a("gridEnabled",kG.config.displayGridEnabled),this.dm.a("gridBlockSize",kG.config.displayGridBlockSize),this.dm.a("gridThickLinesEvery",kG.config.displayGridThickLinesEvery),this.dm.a("gridThickColor",kG.config.displayGridThickColor),this.dm.a("gridLightColor",kG.config.displayGridLightColor),this.dm.a("gridAngle",kG.config.displayGridAngle),this.dm.a("gridRotation",kG.config.displayGridRotation),this.dm.a("gridZoomThreshold",kG.config.displayGridZoomThreshold),this.dm.a("alignmentGuideEnabled",kG.config.displayGridAlignmentGuideEnabled),this.dm.a("alignmentGuideColor",kG.config.displayGridAlignmentGuideColor),this.dm.endTransaction())},t.prototype.updateImpl=function(w,t){var G=this,I=X(w);if(this.clear(),this.dm.deserialize(I,void 0,{setId:kG.config.setId,disableInit:!0,disableOnPreDeserialize:!0,disableOnPostDeserialize:!0}),this.dirty=!!t,!t&&kG.config.fitContentForDisplayView)if(I.contentRect){var R=A(I.contentRect);ht.Default.grow(R,kG.config.fitPadding),this.graphView.getWidth()&&this.graphView.getHeight()?this.graphView.fitRect(R,kG.config.animate):setTimeout(function(){G.graphView.fitRect(R,kG.config.animate)},600)}else this.graphView.fitContent(kG.config.animate,kG.config.fitPadding);return I},t.prototype.createInteractor=function(w,t,G){var A=new w;return A instanceof ht.Shape?new cA(this.tab,null,function(G,A){var I=new w;return I.setPoints(G),I.setSegments(A),t&&t(I),I},G):A instanceof ht.Edge?new UA(this.tab,null,function(w,G){var A=new ht.Edge(w,G);return t&&t(A),A}):A instanceof ht.Node?new mA(this.tab,null,function(G,A){var I=new w;return t&&t(I,G,A),I}):void 0},rG(t,[{key:"content",get:function(){var w=this.dm,t=w.toJSON();t.modified=(new Date).toString(),w.a("connectActionType")===kG.config.displayConnectActionType&&delete t.a.connectActionType,w.a("rulerEnabled")===kG.config.displayRulerEnabled&&delete t.a.rulerEnabled,w.a("gridEnabled")===kG.config.displayGridEnabled&&delete t.a.gridEnabled,w.a("gridBlockSize")===kG.config.displayGridBlockSize&&delete t.a.gridBlockSize,w.a("gridThickLinesEvery")===kG.config.displayGridThickLinesEvery&&delete t.a.gridThickLinesEvery,w.a("gridThickColor")===kG.config.displayGridThickColor&&delete t.a.gridThickColor,w.a("gridLightColor")===kG.config.displayGridLightColor&&delete t.a.gridLightColor,w.a("gridAngle")===kG.config.displayGridAngle&&delete t.a.gridAngle,w.a("gridRotation")===kG.config.displayGridRotation&&delete t.a.gridRotation,w.a("gridZoomThreshold")===kG.config.displayGridZoomThreshold&&delete t.a.gridZoomThreshold,w.a("anchorEnabled")===kG.config.displayAnchorEnabled&&delete t.a.anchorEnabled,w.a("guideLineEnabled")===kG.config.displayGuideLineEnabled&&delete t.a.guideLineEnabled,w.a("highlightEnabled")===kG.config.displayHighlightEnabled&&delete t.a.highlightEnabled,w.a("highlightColor")===kG.config.displayHighlightColor&&delete t.a.highlightColor,w.a("highlightBorderWidth")===kG.config.displayHighlightBorderWidth&&delete t.a.highlightBorderWidth,w.a("highlightBorderPattern")===kG.config.displayHighlightBorderPattern&&delete t.a.highlightBorderPattern,w.a("xAlignmentGuides")&&!w.a("xAlignmentGuides").length&&delete t.a.xAlignmentGuides,w.a("yAlignmentGuides")&&!w.a("yAlignmentGuides").length&&delete t.a.yAlignmentGuides,w.a("alignmentGuideEnabled")===kG.config.displayGridAlignmentGuideEnabled&&delete t.a.alignmentGuideEnabled,w.a("alignmentGuideColor")===kG.config.displayGridAlignmentGuideColor&&delete t.a.alignmentGuideColor;var G=this.graphView.getContentRect();return w.a("width")>0&&w.a("height")>0&&(t.contentRect={x:0,y:0,width:w.a("width"),height:w.a("height")}),w.size()&&G&&G.width&&G.height&&(t.contentRect=G),t}}]),t}(NA),EA=function(w){function t(G){return _G(this,t),lG(this,w.call(this,G))}return yG(t,w),t.prototype.setDataModel=function(w){var t=this,G=t._dataModel,A=t._selectionModel;G!==w&&(G&&(G.umm(t.handleDataModelChange,t),G.umd(t.handleDataPropertyChange,t),G.removeIndexChangeListener(t.handleIndexChange,t),A||G.sm().ums(t.handleSelectionChange,t)),t._dataModel=w,w.mm(t.handleDataModelChange,t),w.md(t.handleDataPropertyChange,t),w.addIndexChangeListener(t.handleIndexChange,t),A?A._setDataModel(w):w.sm().ms(t.handleSelectionChange,t),t.fp("dataModel",G,w))},t.prototype.handleIndexChange=function(w){this.ivm()},t.prototype.handleDataPropertyChange=function(w){this.invalidateData(w.data)},t.prototype.validateModel=function(){var w=this;w._rows.clear(),w._rowMap={};var t=w._rows=w._dataModel.toDatas(w.isVisible,w),G=0,A=w.getCurrentSortFunc(),I=t.size();for(A&&t.sort(A);G<I;G++)w._rowMap[t.get(G)._id]=G},t}(oG),OA=function(w){function t(G,A){var I=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];_G(this,t);var R=lG(this,w.call(this,A));return R.editor=G,R.editable=I,R.addTopPainter(R.drawDNDState.bind(R)),R}return yG(t,w),t.prototype.getLabelColor=function(t){return t!==this.draggingData||this.isSelected(t)?t.s("2d.visible")&&t.s("3d.visible")?w.prototype.getLabelColor.call(this,t):kG.config.color_disabled:kG.config.color_select},t.prototype.isEditable=function(w){return this.editable},t.prototype.handleDelete=function(){this.editable&&this.removeSelection()},t.prototype.handleDataDoubleSelect=function(w,t){if(this.isEditable(t)){var G=this.getIcon(t)?this.getIndent():0;this.lp(w).x>G&&this.beginEditing(t)}},t.prototype.rename=function(w,t){w.setName(t)},t.prototype.isDroppable=function(w,t){return!1},t.prototype._clearDragInfo=function(){this.editor.dnd.hideTip(),this._dragInfo&&(this._dragInfo=null,this.redraw())},t.prototype._endDrag=function(w,t){},t.prototype._endCrossDrag=function(w,t){},t.prototype.drawDNDState=function(w){kG.config.drawDNDState?w.drawDNDState=!0:(kG.config.texureImage3D&&(w.texureImage3D=!0),w.texureImage2D=!0);var t=void 0;if(this._dragInfo&&this._dragInfo.inView?t=this._dragInfo:this._crossDragInfo&&(t=this._crossDragInfo),t){var G=this.getWidth(),A=(this.getRowHeight(),t.type,kG.config.color_select_dark);if(t.refData){var I=t.y;w.beginPath(),w.arc(4,I,3,0,2*Math.PI,!0),w.moveTo(7,I),w.lineTo(G,I),w.lineWidth=2,w.strokeStyle=A,w.stroke()}else{var R=this.getViewRect();s(w,A,R.x,R.y,R.width,R.height,2)}}},t.prototype._dragging=function(w,t){var G=this.getRowHeight(),A=this.lp(w),I=A.y/G,R=Math.floor(I);R>this.getRowSize()-1||R<0?(t.refData=null,t.type=null,t.parent=null):(t.refData=this.getRowDatas().get(R),A.y-R*G<.5*G?(t.type="up",t.y=R*G):(t.type="down",t.y=(R+1)*G)),this.autoScroll(w),this.redraw()},t.prototype.$1$=function(){var w="";if(this.draggingData&&(w=this.getLabel(this.draggingData),this.isSelected(this.draggingData))){var t=this.sm().size();w+=t>1?" (+"+t+") ":""}return w},t.prototype.handleDragAndDrop=function(w,t){if(this.editable){if("prepare"===t)return void this._clearDragInfo();"begin"===t&&(this._dragInfo={tip:this.$1$(),view:this});var G=this._dragInfo;if(G){var A=this.editor.dnd;if("begin"===t||"between"===t){return this.getView().contains(T(w))?(G.inView=!0,this._dragging(w,G),A.clearDropView(w,G)):(G.inView&&this.redraw(),G.inView=!1,A.crossDrag(w,G)),void A.showTip(G.tip,w)}return"end"===t?(G.inView?this._endDrag(w,G):A.crossDrop(w,G),void this._clearDragInfo()):"cancel"===t?(G.inView||A.crossCancel(w,G),void this._clearDragInfo()):void 0}}},t.prototype.handleCrossDrag=function(w,t,G){if(this.editable)return"exit"===t||"cancel"===t?(this._crossDragInfo=null,void this.redraw()):"enter"===t||"over"===t?(this._crossDragInfo||(this._crossDragInfo={}),void this._dragging(w,this._crossDragInfo)):"drop"===t?(this._endCrossDrag(w,G),this._crossDragInfo=null,void this.redraw()):void 0},t.prototype.beginEditing=function(w){var t=this;this.cancelEditing(),this.makeVisible(w),this.validate();var G=this.getIcon(w)?this.getIndent():0,A=this.ty()+this.getRowIndex(w)*this.getRowHeight(),I=Math.max(1,this.getWidth()-G),R=this.getRowHeight();this._currentEditor=new ht.widget.TextField,this._currentEditor.data=w;var _=this._currentEditor.getElement(),r=this.getLabel(w);_.value=null==r?"":r,_.onblur=function(w){t.endEditing()},_.onkeydown=function(w){B(w)?t.endEditing():n(w)&&t.cancelEditing()},this.getView().appendChild(this._currentEditor.getView()),u(this._currentEditor,G,A,I,R),this._currentEditor.setFocus(),ht.Default.callLater(_.select,_)},t.prototype.endEditing=function(){var w=this._currentEditor;w&&(this.rename(w.data,w.getValue()),delete this._currentEditor,h(w.getView()),this.redraw())},t.prototype.cancelEditing=function(){var w=this._currentEditor;w&&(delete this._currentEditor,h(w.getView()),this.redraw())},t}(EA),HA=function(w){function t(G){_G(this,t);var A=lG(this,w.call(this,G.editor,G.dm));return A.symbolView=G,A.graphView=G.graphView,A.nodeIcon=jw(A),A.initMenu(),A.initStudio&&A.initStudio(),G.dm.addDataPropertyChangeListener(function(w){w.data.editorIcon=null}),A}return yG(t,w),t.prototype.getToolTip=function(w){return kG.config.getToolTip(w,this)},t.prototype.onDataDoubleClicked=function(w,t){this.editor.fitSelection()},t.prototype.onPropertyChanged=function(t){"filter"===t.property&&this.ivm(),w.prototype.onPropertyChanged.call(this,t)},t.prototype.handleDataPropertyChange=function(t){!this._filter||"displayName"!==t.property&&"s:text"!==t.property&&"s:type"!==t.property&&"s:image"!==t.property?w.prototype.handleDataPropertyChange.call(this,t):this.ivm()},t.prototype.isVisible=function(w){if("__renderHTML__"===w.getTag())return!1;if(!this._filter)return!0;var t=this.getVisibleFunc();if(t&&!t(w))return!1;if(kG.config.symbolListVisibleFunc)return kG.config.symbolListVisibleFunc(w,this._filter);var G=this.getLabel(w),A=(this._filter+"").toLowerCase();return null!=G&&(G=(G+"").toLowerCase(),G.indexOf(A)>=0)},t.prototype.validate=function(){this.graphView.validate(),w.prototype.validate.call(this)},t.prototype.validateModel=function(){var t=this;w.prototype.validateModel.call(this),kG.config.filterSymbolViewEnabled&&this.graphView.setVisibleFunc(function(w){return t.isVisible(w)})},t.prototype.getIcon=function(w){return w instanceof DG?"editor.restore.state":w instanceof ht.Text?w.getIcon():w instanceof ht.Shape?(w.editorIcon||(w.editorIcon=sw(w)),w.editorIcon):w instanceof ht.Node?this.nodeIcon:null},t.prototype.isDroppable=function(w,t){return!1},t.prototype._endCrossDrag=function(w,t){},t.prototype._endDrag=function(w,t){var G=this;this.editor.beginTransaction();var A=t.type,I=t.refData;if(this.isSelected(this.draggingData)){var R=this.getRowOrderSelection();"down"===A&&R.reverse(),R.each(function(w){G._dropData(w,A,I)})}else this._dropData(this.draggingData,A,I),this.sm().ss(this.draggingData);this.editor.endTransaction()},t.prototype._dropData=function(w,t,G){if(G){var A=this.dm().getDatas(),I=A.indexOf(G);"down"===t&&I++,A.indexOf(w)<I&&I--,this.dm().moveToIndex(w,I)}else this.dm().bringToFront(w)},t.prototype.rename=function(w,t){w.setDisplayName(t)},t.prototype.initMenu=function(){this.menu=new WG;var w=[];this.initMenuItems(w),this.menu.setItems(w),this.menu.addTo(this.getView()),this.editor.menus.push(this.menu)},t.prototype.onClosed=function(){l(this.editor.menus,this.menu)},t.prototype.initMenuItems=function(w){var t=this;w.push.apply(w,[{id:"copy",label:R("editor.copy"),action:function(){t.editor.copy()},visible:function(){return!!t.editor.ld}},{id:"paste",label:R("editor.paste"),action:function(){t.editor.paste()},visible:function(){return t.editable&&t.editor.hasCopyInfo()}},{id:"delete",label:R("editor.delete"),action:function(){t.editor.delete()},visible:function(){return t.editable&&!!t.editor.ld}},"separator",{id:"bringToFront",label:R("editor.bringtofront"),action:function(){t.editor.bringToFront()},visible:function(){return t.editable&&!!t.editor.ld}},{id:"bringForward",label:R("editor.bringforward"),action:function(){t.editor.bringForward()},visible:function(){return t.editable&&!!t.editor.ld}},{id:"sendBackward",label:R("editor.sendbackward"),action:function(){t.editor.sendBackward()},visible:function(){return t.editable&&!!t.editor.ld}},{id:"sendToBack",label:R("editor.sendtoback"),action:function(){t.editor.sendToBack()},visible:function(){return t.editable&&!!t.editor.ld}}])},rG(t,[{key:"editable",get:function(){return this.editor.editable},set:function(w){}}]),t}(OA);ww(HA,{ms_ac:["filter"]});var XA=function(w){function t(G){return _G(this,t),lG(this,w.call(this,G))}return yG(t,w),t.prototype.handleDataModelChange=function(t){w.prototype.handleDataModelChange.call(this,t),this.editor&&this.editor.fireViewEvent(this.editView,"DataModelChanged",{event:t})},t.prototype.handleDataModelPropertyChange=function(t){w.prototype.handleDataModelPropertyChange.call(this,t),this.editor&&this.editor.fireViewEvent(this.editView,"DataModelPropertyChanged",{event:t})},t.prototype.handleDataPropertyChange=function(t){w.prototype.handleDataPropertyChange.call(this,t),this.editor&&this.editor.fireViewEvent(this.editView,"DataPropertyChanged",{event:t})},t.prototype.isDroppable=function(w,t){if(this.editor.editable)return!!t.view.isDroppableToSymbolView},t.prototype.isPixelPerfect=function(w){return!0},t.prototype.initMenuItems=function(t){this.$56$(t),this.$55$(t),w.prototype.initMenuItems.call(this,t)},t.prototype.isVisible=function(t){var G=this.editor.symbolStatePane.currentState,A=t.s("state");return(void 0===A||A===G)&&w.prototype.isVisible.call(this,t)},t}(fA),bA=function(w){function t(G,A,I){_G(this,t);var R=lG(this,w.call(this));return R.setIcon("editor.func"),R.setImage("editor.func"),R.parse(G,A,I),R}return yG(t,w),t.prototype.toLabel=function(){return this.getDisplayName()||R("editor.comptype.func")},t.prototype.getClass=function(){return t},t.prototype.parse=function(w,t,G){w&&(this.a("type",w.type),pw(this,w,t,G))},t.prototype.toJSON=function(){var w={};return w.type=this.a("type"),$w(this,w),w},rG(t,[{key:"compType",get:function(){return"function"}}]),t}(ht.Node),pA=function(w){function t(G,A,I,R){_G(this,t);var _=lG(this,w.call(this));return _.newAdded=R,_.defaultValueMap={},_.parse(G,A,I),_}return yG(t,w),t.prototype.toLabel=function(){return this.getDisplayName()||this.s("type")||R("editor.comptype.comp")},t.prototype.getClass=function(){return t},t.prototype.getStyle=function(t,G){var A=w.prototype.getStyle.call(this,t,G);return void 0===A&&(A=this.defaultValueMap[t]),A},t.prototype.$60$=function(w){this.properties&&(this.properties=null),this.disableDirty=!0,this.defaultValueMap={};var t=this.s("type"),G=ht.Default.getCompType(t);if(G){G.events&&this._updateEvents(G.events),this.newAdded=!1,this.$59$=null;var A={cache:G,width:{value:100,isSafeFunc:!0,func:function(w){return w._width}},height:{value:100,isSafeFunc:!0,func:function(w){return w._height}},comps:[{type:{func:function(w){return w.compType},isSafeFunc:!0}}]};if(!G.width||this._width>0||this.setWidth(G.width),!G.height||this._height>0||this.setHeight(G.height),G.properties){this.properties=G.properties;for(var I in this.properties){var R=this.properties[I];A.comps[0][I]={func:"style@"+I},Mw(this,I,w?w[I]:void 0,R.defaultValue),this.defaultValueMap[I]=R.defaultValue}}
var _=kG.config.customProperties.comp;_&&_.length&&_.forEach(function(w){var t=w.property;A.comps[0][t]={func:"style@"+t}}),this.setImage(A),this.ivLater()}else this.$59$=w,"editor.comp"!==this.getImage()&&(this.setImage("editor.comp"),this.ivLater());this.disableDirty=!1},t.prototype.ivLater=function(){var w=this;ht.Default.callLater(function(){w.disableDirty=!0,w.iv(),w.disableDirty=!1})},t.prototype.onStyleChanged=function(t,G,A){w.prototype.onStyleChanged.call(this,t,G,A),"type"===t&&(this.newAdded=!0,this.$60$(this.parsingComp))},t.prototype.parse=function(w,t,G){w&&(this.parsingComp=w,pw(this,w,t,G),Mw(this,"type",w.type),this.parsingComp=null)},t.prototype._updateEvents=function(w){var t=this;ZG.forEach(function(w){return t.a(w,void 0)}),this.a(w)},t.prototype.toJSON=function(){var w={};if(Ew(this,w,"type","type",void 0),$w(this,w),this.properties)for(var t in this.properties)Ew(this,w,t,t,this.properties[t].defaultValue);return w},rG(t,[{key:"compType",get:function(){var w=this.s("type");return this.$59$?this.$60$(this.$59$):w&&ht.Default.getCompType(w)!==this.getImage().cache&&this.$60$(this.toJSON()),w}}]),t}(ht.Node),$A=function(w){function t(G,A,I){_G(this,t);var R=lG(this,w.call(this));return R.s({border_color:kG.config.color_dark,border_width:1}),R.setImage("border_image"),R.parse(G,A,I),R}return yG(t,w),t.prototype.getClass=function(){return t},t.prototype.toLabel=function(){return this.getDisplayName()||R("editor.comptype.border")},t.prototype.parse=function(w,t,G){w&&(Mw(this,"type",w.type,"border"),Mw(this,"border_color",w.color,kG.config.color_dark),Mw(this,"border_width",w.width,1),pw(this,w,t,G))},t.prototype.toJSON=function(){var w={};return Ew(this,w,"type","type",void 0),Ew(this,w,"border_color","color",void 0),Ew(this,w,"border_width","width",void 0),$w(this,w),w},rG(t,[{key:"compType",get:function(){return this.s("type")}}]),t}(ht.Node),MA=function(w){function t(G,A,I){_G(this,t);var R=lG(this,w.call(this));return R.setSize(100,100),R.setImage("pieChart_image"),R.s({"chart.label":!1,"chart.label.color":ht.Default.labelColor,"chart.label.font":ht.Default.labelFont,"chart.hollw":!1,"chart.start.angle":0,"chart.values":[],"chart.colors":void 0}),R.parse(G,A,I),R}return yG(t,w),t.prototype.getClass=function(){return t},t.prototype.toLabel=function(){return this.getDisplayName()||R("editor.comptype.piechart")},t.prototype.parse=function(w,t,G){w&&(Mw(this,"chart.type",w.type,"pieChart"),Mw(this,"chart.label",w.label,!1),Mw(this,"chart.label.color",w.labelColor,ht.Default.labelColor),Mw(this,"chart.label.font",w.labelFont,ht.Default.labelFont),Mw(this,"chart.hollow",w.hollow,!1),Mw(this,"chart.start.angle",w.startAngle,0),Mw(this,"chart.values",w.values,[]),Mw(this,"chart.colors",w.colors,void 0),pw(this,w,t,G))},t.prototype.toJSON=function(){var w={};return Ew(this,w,"chart.type","type",void 0),Ew(this,w,"chart.label","label",!1),Ew(this,w,"chart.label.color","labelColor",ht.Default.labelColor),Ew(this,w,"chart.label.font","labelFont",ht.Default.labelFont),Ew(this,w,"chart.hollow","hollow",!1),Ew(this,w,"chart.start.angle","startAngle",0),Ew(this,w,"chart.values","values",[]),Ew(this,w,"chart.colors","colors",void 0),$w(this,w),w},rG(t,[{key:"compType",get:function(){return this.s("chart.type")}}]),t}(ht.Node),uA=function(w){function t(G,A,I){_G(this,t);var R=lG(this,w.call(this));return R.setSize(100,100),R.setImage("columnChart_image"),R.s({"chart.label":!1,"chart.label.color":ht.Default.labelColor,"chart.label.font":ht.Default.labelFont,"chart.series":[],"chart.min.value":0,"chart.max.value":void 0}),R.parse(G,A,I),R}return yG(t,w),t.prototype.getClass=function(){return t},t.prototype.toLabel=function(){return this.getDisplayName()||R("editor.comptype.columnchart")},t.prototype.parse=function(w,t,G){w&&(Mw(this,"chart.type",w.type,void 0),Mw(this,"chart.label",w.label,!1),Mw(this,"chart.label.color",w.labelColor,ht.Default.labelColor),Mw(this,"chart.label.font",w.labelFont,ht.Default.labelFont),Mw(this,"chart.series",w.series,[]),Mw(this,"chart.min.value",w.minValue,0),Mw(this,"chart.max.value",w.maxValue,void 0),pw(this,w,t,G))},t.prototype.toJSON=function(){var w={};return Ew(this,w,"chart.type","type",void 0),Ew(this,w,"chart.label","label",!1),Ew(this,w,"chart.label.color","labelColor",ht.Default.labelColor),Ew(this,w,"chart.label.font","labelFont",ht.Default.labelFont),Ew(this,w,"chart.series","series",[]),Ew(this,w,"chart.min.value","minValue",0),Ew(this,w,"chart.max.value","maxValue",void 0),$w(this,w),w},rG(t,[{key:"compType",get:function(){return this.s("chart.type")}}]),t}(ht.Node),aA=function(w){function t(G,A,I){_G(this,t);var R=lG(this,w.call(this));return R.setSize(100,100),R.setImage("lineChart_image"),R.s({"chart.label":!1,"chart.label.color":ht.Default.labelColor,"chart.label.font":ht.Default.labelFont,"chart.series":[],"chart.min.value":0,"chart.max.value":void 0,"chart.line.point":!1,"chart.line.width":2,"chart.line.3d":!1}),R.parse(G,A,I),R}return yG(t,w),t.prototype.getClass=function(){return t},t.prototype.toLabel=function(){return this.getDisplayName()||R("editor.comptype.linechart")},t.prototype.parse=function(w,t,G){w&&(Mw(this,"chart.type",w.type,void 0),Mw(this,"chart.label",w.label,!1),Mw(this,"chart.label.color",w.labelColor,ht.Default.labelColor),Mw(this,"chart.label.font",w.labelFont,ht.Default.labelFont),Mw(this,"chart.series",w.series,[]),Mw(this,"chart.min.value",w.minValue,0),Mw(this,"chart.max.value",w.maxValue,void 0),Mw(this,"chart.line.point",w.linePoint,!1),Mw(this,"chart.line.width",w.lineWidth,2),Mw(this,"chart.line.3d",w.line3d,!1),pw(this,w,t,G))},t.prototype.toJSON=function(){var w={};return Ew(this,w,"chart.type","type",void 0),Ew(this,w,"chart.label","label",!1),Ew(this,w,"chart.label.color","labelColor",ht.Default.labelColor),Ew(this,w,"chart.label.font","labelFont",ht.Default.labelFont),Ew(this,w,"chart.series","series",[]),Ew(this,w,"chart.min.value","minValue",0),Ew(this,w,"chart.max.value","maxValue",void 0),Ew(this,w,"chart.line.point","linePoint",!1),Ew(this,w,"chart.line.width","lineWidth",2),Ew(this,w,"chart.line.3d","line3d",!1),$w(this,w),w},rG(t,[{key:"compType",get:function(){return this.s("chart.type")}}]),t}(ht.Node),hA={rect:$G,circle:$G,oval:$G,roundRect:$G,star:$G,triangle:$G,hexagon:$G,pentagon:$G,diamond:$G,rightTriangle:$G,parallelogram:$G,trapezoid:$G,polygon:$G,arc:$G,image:uG,shape:MG,text:aG,border:$A,pieChart:MA,oneDimensionalColumnChart:uA,columnChart:uA,percentageColumnChart:uA,stackedColumnChart:uA,lineChart:aA,comp:pA,clip:hG,restore:DG,endClip:DG};kG.toDatas=function(w,t){var G=[];return w.forEach(function(w){var A=gt(w);if(A){var I=at(A),R=Dt(I,t);R&&G.push(R)}}),G};var DA=function(w){function t(G,A,I,R,_,r){_G(this,t);var y=lG(this,w.call(this,G,A,XA,"symbol",void 0,_,r));y.graphView.vectorDataBindingDisabled=!0,y.graphView.getLabel=function(){return null},y.graphView.setVisibleFunc(function(w){return!(w instanceof DG)}),y.list=y.symbolList=new HA(y),y.dm.a({name:void 0,comps:[],width:100,height:100,boundExtend:0,fitSize:!1,scrollable:!1,interactive:!1,disableSelectedBorder:!1,pixelPerfect:!0,clip:!1,visible:!0,color:void 0,blendMode:"multiply",opacity:1});var l=kG.config.customProperties.symbol;l&&l.length&&l.forEach(function(w){y.dm.a(w.property,w.defaultValue)}),y.dm.addIndexChangeListener(function(){y.dirty=!0}),y.dirty=!1,y.dm.enableHistoryManager(kG.config.maxUndoRedoSteps);var C=["a:renderHTML","a:width","a:height","f:dataBindings"];y.dm.mp(function(w){C.indexOf(w.property)>=0&&y.updateRenderNode()}),y.parse(I,R);var V=G.getFileNode(I);return y.editable=!V||!1!==V.a("editable"),I?R||y.editor.fireEvent("symbolViewOpening",{symbolView:y,url:I}):y.editor.fireEvent("symbolViewCreated",{symbolView:y,json:R}),y}return yG(t,w),t.prototype.clear=function(){this.dm.beginTransaction(),w.prototype.clear.call(this),this.dm.a("connectActionType",kG.config.symbolConnectActionType),this.dm.a("anchorEnabled",kG.config.symbolAnchorEnabled),this.dm.a("guideLineEnabled",kG.config.symbolGuideLineEnabled),this.dm.a("highlightEnabled",kG.config.symbolHighlightEnabled),this.dm.a("highlightColor",kG.config.symbolHighlightColor),this.dm.a("highlightBorderWidth",kG.config.symbolHighlightBorderWidth),this.dm.a("highlightBorderPattern",kG.config.symbolHighlightBorderPattern),this.dm.setAutoAdjustIndex(!1),this.dm.endTransaction()},t.prototype.resetGrid=function(){this.dm.beginTransaction(),this.dm.a("rulerEnabled",kG.config.symbolRulerEnabled),this.dm.a("gridEnabled",kG.config.symbolGridEnabled),this.dm.a("gridBlockSize",kG.config.symbolGridBlockSize),this.dm.a("gridThickLinesEvery",kG.config.symbolGridThickLinesEvery),this.dm.a("gridThickColor",kG.config.symbolGridThickColor),this.dm.a("gridLightColor",kG.config.symbolGridLightColor),this.dm.a("gridAngle",kG.config.symbolGridAngle),this.dm.a("gridRotation",kG.config.symbolGridRotation),this.dm.a("gridZoomThreshold",kG.config.symbolGridZoomThreshold),this.dm.a("alignmentGuideEnabled",kG.config.symbolGridAlignmentGuideEnabled),this.dm.a("alignmentGuideColor",kG.config.symbolGridAlignmentGuideColor),this.dm.endTransaction()},t.prototype.onClosed=function(){w.prototype.onClosed.call(this),this.list.onClosed()},t.prototype.updateImpl=function(w,t){var G=this,A=this.dm,I=X(w);this.clear(),A.setBackground(I.background),A.a("previewURL",I.previewURL),A.a("snapshotURL",I.snapshotURL),A.dataBindings=I.dataBindings,this.attrObject=I.attrObject,A.a("xAlignmentGuides",I.xAlignmentGuides),A.a("yAlignmentGuides",I.yAlignmentGuides),null!=I.rulerEnabled&&A.a("rulerEnabled",I.rulerEnabled),null!=I.gridEnabled&&A.a("gridEnabled",I.gridEnabled),null!=I.gridBlockSize&&A.a("gridBlockSize",I.gridBlockSize),null!=I.gridThickLinesEvery&&A.a("gridThickLinesEvery",I.gridThickLinesEvery),null!=I.gridThickColor&&A.a("gridThickColor",I.gridThickColor),null!=I.gridLightColor&&A.a("gridLightColor",I.gridLightColor),null!=I.gridAngle&&A.a("gridAngle",I.gridAngle),null!=I.gridRotation&&A.a("gridRotation",I.gridRotation),null!=I.gridZoomThreshold&&A.a("gridZoomThreshold",I.gridZoomThreshold),null!=I.anchorEnabled&&A.a("anchorEnabled",I.anchorEnabled),null!=I.guideLineEnabled&&A.a("guideLineEnabled",I.guideLineEnabled),null!=I.highlightEnabled&&A.a("highlightEnabled",I.highlightEnabled),null!=I.highlightColor&&A.a("highlightColor",I.highlightColor),null!=I.highlightBorderWidth&&A.a("highlightBorderWidth",I.highlightBorderWidth),void 0!==I.highlightBorderPattern&&A.a("highlightBorderPattern",I.highlightBorderPattern),void 0!==I.alignmentGuideEnabled&&A.a("alignmentGuideEnabled",I.alignmentGuideEnabled),void 0!==I.alignmentGuideColor&&A.a("alignmentGuideColor",I.alignmentGuideColor),I.hasOwnProperty("connectActionType")&&A.a("connectActionType",I.connectActionType),ZG.forEach(function(w){A.a(w,I[w])}),A.a({name:I.name,renderHTML:I.renderHTML,layoutAttach:I.layoutAttach,layoutProperties:I.layoutProperties,comps:ew(I.comps,[]),width:ew(I.width,100),height:ew(I.height,100),boundExtend:ew(I.boundExtend,0),fitSize:ew(I.fitSize,!1),scrollable:ew(I.scrollable,!1),interactive:ew(I.interactive,!1),disableSelectedBorder:ew(I.disableSelectedBorder,!1),pixelPerfect:ew(I.pixelPerfect,!0),clip:ew(I.clip,!1),visible:ew(I.visible,!0),color:ew(I.color,void 0),blendMode:ew(I.blendMode,"multiply"),opacity:ew(I.opacity,1),attachPoints:ew(I.attachPoints,void 0),attachStyle:ew(I.attachStyle,void 0),cacheRule:ew(I.cacheRule,!1),textureCache:ew(I.textureCache,!1),state:ew(I.state,void 0),stateEnum:ew(I.stateEnum,void 0),comps_func:ow(I.comps),width_func:ow(I.width),height_func:ow(I.height),fitSize_func:ow(I.fitSize),scrollable_func:ow(I.scrollable),interactive_func:ow(I.interactive),disableSelectedBorder_func:ow(I.disableSelectedBorder),pixelPerfect_func:ow(I.pixelPerfect),visible_func:ow(I.visible),color_func:ow(I.color),blendMode_func:ow(I.blendMode),opacity_func:ow(I.opacity),attachPoints_func:ow(I.attachPoints),attachStyle_func:ow(I.attachStyle),cacheRule_func:ow(I.cacheRule),textureCache_func:ow(I.textureCache),state_func:ow(I.state)});var R=kG.config.customProperties.symbol;R&&R.length&&R.forEach(function(w){A.a(w.property,ew(I[w.property],w.defaultValue))});var _=this.editor.symbolStatePane;_.symbolViewUpdating=!0,A.a("comps").forEach(function(w){gt(w,G)}),_.symbolViewUpdating=!1,this.dirty=!!t,!t&&kG.config.fitContentForSymbolView&&this.graphView.fitContent(kG.config.animate,kG.config.fitPadding),this.updateRenderNode()},t.prototype.updateRenderNode=function(){if(kG.SceneView){var w=this.dm,t=w.a("renderHTML"),G=w.getDataByTag("__renderHTML__");if(!t)return void(G&&G.removeFromDataModel());var A={comps:[]};A.renderHTML=t,A.dataBindings=w.dataBindings,this.addValue(A,"width"),this.addValue(A,"height"),G||(G=new ht.Node,G.setTag("__renderHTML__"),G.s({"2d.selectable":!1}),this.dm.add(G)),G.setImage(A),G.setRect({x:0,y:0,width:A.width,height:A.height})}},t.prototype.addValue=function(w,t,G){var A=this.dm.a(t);bw(w,t,this.dm.a(t+"_func"),A,G)},t.prototype.createInteractor=function(w,t,G){var A=this,I=hA[w];return"shape"===w?new cA(this.tab,null,function(G,R){var _={type:"shape",background:null,borderColor:kG.config.color_data_border,borderWidth:1};t&&t(_,G,R);var r=new I(_);return r.setPoints(G),r.setSegments(R),A.editor.fireEvent("compInited",{type:w,data:r,symbolView:A.editor.symbolView}),r},G):new mA(this.tab,null,function(G,_){var r=void 0;r="arc"===w?{type:w,rect:[G.x,G.y,G.width,G.height],background:kG.config.color_data_background,borderWidth:1,borderColor:kG.config.color_data_border,arcFrom:0,arcTo:4.1888}:"border"===w?{type:w,rect:[G.x,G.y,G.width,G.height],border:1,color:kG.config.color_data_border}:"text"===w?{type:w,rect:[G.x,G.y,G.width,G.height],text:R("editor.text")}:"comp"===w||"image"===w?_?{rect:[G.x+G.width/2,G.y+G.height/2,-1,-1]}:{rect:[G.x,G.y,G.width,G.height]}:"pieChart"===w?{type:"pieChart",values:[10,20,40,60,80],colors:["#7EB6EA","#434348","#93EB82","#F5A262","#8087E6"]}:"oneDimensionalColumnChart"===w?{type:"columnChart",series:[{values:[10,20,40,60,80],colors:["#7EB6EA","#434348","#93EB82","#F5A262","#8087E6"]}]}:"columnChart"===w?{type:"columnChart",series:[{values:[30,40,60,70,80],color:"#7EB6EA"},{values:[20,40,50,80,90],color:"#434348"}]}:"lineChart"===w?{type:"lineChart",series:[{values:[10,40,30,60,70],color:"#7EB6EA"}]}:{type:w,rect:[G.x,G.y,G.width,G.height],background:kG.config.color_data_background,borderWidth:1,borderColor:kG.config.color_data_border},t&&t(r,G,_);var y=new I(r);return A.editor.fireEvent("compInited",{type:w,data:y,symbolView:A.editor.symbolView}),y})},rG(t,[{key:"attrObject",set:function(w){var t=this.editor.rightBottomTabView.getTabModel().sm();this._attrObject=w,this.editor.dataViewTab&&t.co(this.editor.dataViewTab)&&this.editor.dataView.updateContent()},get:function(){return this._attrObject}},{key:"content",get:function(){var w=this,t=this.graphView.getEditInteractor(),G=(t.gridGuide,this.dm),A=this.attrObject,I={modified:(new Date).toString()};void 0!==A&&(I.attrObject=A),G.getBackground()&&(I.background=G.getBackground()),G.dataBindings&&(I.dataBindings=X(H(G.dataBindings),{ignoreDataModel:1})),G.a("previewURL")&&(I.previewURL=G.a("previewURL")),G.a("snapshotURL")&&(I.snapshotURL=G.a("snapshotURL")),G.a("connectActionType")!==kG.config.symbolConnectActionType&&(I.connectActionType=G.a("connectActionType")),G.a("rulerEnabled")!==kG.config.symbolRulerEnabled&&(I.rulerEnabled=G.a("rulerEnabled")),G.a("gridEnabled")!==kG.config.symbolGridEnabled&&(I.gridEnabled=G.a("gridEnabled")),G.a("gridBlockSize")!==kG.config.symbolGridBlockSize&&(I.gridBlockSize=G.a("gridBlockSize")),G.a("gridThickLinesEvery")!==kG.config.symbolGridThickLinesEvery&&(I.gridThickLinesEvery=G.a("gridThickLinesEvery")),G.a("gridThickColor")!==kG.config.symbolGridThickColor&&(I.gridThickColor=G.a("gridThickColor")),G.a("gridLightColor")!==kG.config.symbolGridLightColor&&(I.gridLightColor=G.a("gridLightColor")),G.a("gridAngle")!==kG.config.symbolGridAngle&&(I.gridAngle=G.a("gridAngle")),G.a("gridRotation")!==kG.config.symbolGridRotation&&(I.gridRotation=G.a("gridRotation")),G.a("gridZoomThreshold")!==kG.config.symbolGridZoomThreshold&&(I.gridZoomThreshold=G.a("gridZoomThreshold")),G.a("anchorEnabled")!==kG.config.symbolAnchorEnabled&&(I.anchorEnabled=G.a("anchorEnabled")),G.a("guideLineEnabled")!==kG.config.symbolGuideLineEnabled&&(I.guideLineEnabled=G.a("guideLineEnabled")),G.a("highlightEnabled")!==kG.config.symbolHighlightEnabled&&(I.highlightEnabled=G.a("highlightEnabled")),G.a("highlightColor")!==kG.config.symbolHighlightColor&&(I.highlightColor=G.a("highlightColor")),G.a("highlightBorderWidth")!==kG.config.symbolHighlightBorderWidth&&(I.highlightBorderWidth=G.a("highlightBorderWidth")),G.a("highlightBorderPattern")!==kG.config.symbolHighlightBorderPattern&&(I.highlightBorderPattern=G.a("highlightBorderPattern")),G.a("xAlignmentGuides")&&G.a("xAlignmentGuides").length&&(I.xAlignmentGuides=G.a("xAlignmentGuides")),G.a("yAlignmentGuides")&&G.a("yAlignmentGuides").length&&(I.yAlignmentGuides=G.a("yAlignmentGuides")),G.a("cacheRule")&&this.addValue(I,"cacheRule"),G.a("textureCache")&&this.addValue(I,"textureCache"),null!=G.a("alignmentGuideEnabled")&&G.a("alignmentGuideEnabled")!==kG.config.symbolGridAlignmentGuideEnabled&&(I.alignmentGuideEnabled=G.a("alignmentGuideEnabled")),G.a("alignmentGuideColor")&&G.a("alignmentGuideColor")!==kG.config.symbolGridAlignmentGuideColor&&(I.alignmentGuideColor=G.a("alignmentGuideColor")),G.a("stateEnum")&&G.a("stateEnum").length&&(I.stateEnum=G.a("stateEnum"),this.addValue(I,"state")),ZG.forEach(function(w){G.a(w)&&(I[w]=G.a(w))}),G.a("renderHTML")&&(I.renderHTML=G.a("renderHTML")),G.a("layoutAttach")&&(I.layoutAttach=G.a("layoutAttach")),G.a("layoutProperties")&&(I.layoutProperties=G.a("layoutProperties")),this.addValue(I,"width"),this.addValue(I,"height"),this.addValue(I,"boundExtend",0),this.addValue(I,"fitSize",!1),this.addValue(I,"scrollable",!1),this.addValue(I,"interactive",!1),this.addValue(I,"disableSelectedBorder",!1),this.addValue(I,"pixelPerfect",!0),this.addValue(I,"name"),this.addValue(I,"clip",!1),this.addValue(I,"visible",!0),this.addValue(I,"color"),this.addValue(I,"blendMode","multiply"),this.addValue(I,"opacity",1),this.addValue(I,"attachPoints"),this.addValue(I,"attachStyle");var R=kG.config.customProperties.symbol,_=!!kG.config.saveSymbolCustomPropertyDefaultValue;R&&R.length&&R.forEach(function(t){_?w.addValue(I,t.property):w.addValue(I,t.property,t.defaultValue)});var r=[];return G.a("comps_func")?I.comps={values:r,func:G.a("comps_func")}:I.comps=r,G.each(function(w){"__renderHTML__"!==w.getTag()&&r.push(w.toJSON())}),I}}]),t}(NA),gA=function(w){function t(G){_G(this,t);var A=lG(this,w.call(this));A.editor=G,A.getTabModel().sm().ms(function(){var w=A.currentTab;A.editor.$5$(w),kG.config.uisVisible&&(w&&w._isUI?(w.getView().redraw(!0),G.mainSplitView.setStatus("cr")):G.mainSplitView.setStatus("normal"))});var I=function(){return!!A.getTabModel().size()};return A.menu=new WG([{id:"closeTab",label:R("editor.closetab"),action:function(){A.closeTab()},visible:I},{id:"closeOtherTabs",label:R("editor.closeothertabs"),action:function(){A.closeOtherTabs()},visible:I},{id:"closeTabsToTheRight",label:R("editor.closetabstotheright"),action:function(){A.closeTabsToTheRight()},visible:I}]),A.menu.beforeShow=function(w){A._rightClickTab=A.getTabAt(w)},A.menu.addTo(A.getTitleDiv()),A.editor.menus.push(A.menu),A.addTitleTipHandler(),A}return yG(t,w),t.prototype.drawCloseIcon=function(t,G,A,I){t.a("dirty")?(G.fillStyle=A,G.beginPath(),G.arc(I.x+I.width/2,I.y+I.height/2,3,0,2*Math.PI,!0),G.fill()):w.prototype.drawCloseIcon.call(this,t,G,A,I)},t.prototype.open=function(w){if(w){var t=w.fileType,G=t===BG,A=t===JG,I=t===FG,R=t===iG&&kG.SceneView;if(G||A||R||I){var _=w.url,r=this.getTabModel().getDataByTag(_);if(!r){if(kG.SceneView&&R&&this.hasTooManyOpenScenes())return;r=new ht.Tab,r.setTag(_),r.setClosable(!0),r.setName(b(w.getName())),r.a("uuid",w.uuid),G?(r.setIcon("editor.display"),new vA(this.editor,r,_,void 0,void 0,void 0,w.parent_uuid,w.root_dir)):A?(r.setIcon("editor.symbol"),new DA(this.editor,r,_,void 0,w.parent_uuid,w.root_dir)):R?(r.setIcon("editor.scene"),new kG.SceneView(this.editor,r,_,void 0,w.parent_uuid,w.root_dir)):I&&(r.setIcon("editor.ui-tab"),r._isUI=!0,new kG.UIView(this.editor,r,_,void 0,w.parent_uuid,w.root_dir)),this.editor.addTab(r)}this.getTabModel().sm().ss(r)}}},t.prototype.newDisplayView=function(w){var t=new ht.Tab;t.setClosable(!0),t.setIcon("editor.display"),t.setName(w||R("editor.untitled"));var G=new vA(this.editor,t);return this.editor.addTab(t,!0),G},t.prototype.newSymbolView=function(w){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],G=new ht.Tab;G.setClosable(!0),G.setIcon("editor.symbol"),G.setName(w||R("editor.untitled"));var A=new DA(this.editor,G);return this.editor.addTab(G,!0),t&&this.editor.zoomToFit(),A},t.prototype.newUIView=function(w){var t=new ht.Tab;t._isUI=!0,t.setClosable(!0),t.setIcon("editor.ui-tab"),t.setName(w||R("editor.untitled"));var G=new kG.UIView(this.editor,t);return this.editor.addTab(t,!0),G},t.prototype.$99$=function(w){var t=this;this.getTabModel().each(function(G){if(!G._isUI){var A=G.getView();A.graphView.invalidateAll();var I=A.g3d;if(I){I.deleteTexture(w);var R=void 0,_=t.editor.getFileNode(w);_&&(R=_.getFileUUID(),I.deleteTexture(R)),I.dm().each(function(w){I.invalidateCachedTexture(w)}),I.invalidateAll()}}})},t.prototype.updateUIRefs=function(w){this.getTabModel().each(function(t){if(t._isUI){t.getView().handleFileChanged(w)}})},t.prototype.reload=function(){this.currentTab&&this.currentTab.getView().reload()},t.prototype.save=function(w,t){this.currentTab&&this.currentTab.getView().save(w,t)},t.prototype.saveAll=function(w){var t=this.tabs,G=-1,A=function(){G++,G<t.length?t[G].getView().save(A):w()};A()},t.prototype.preview=function(){this.currentTab&&this.currentTab.getView().preview()},t.prototype.selectTab=function(w){w&&this.getTabModel().sm().ss(w)},t.prototype.onTabClosing=function(w,t){return this.closeTab(w),!1},t.prototype.closeTab=function(w,t,G){(w=w||this._rightClickTab||this.currentTab)&&this.closeTabs([w],t,G)},t.prototype.closeOtherTabs=function(w,t){var G=this._rightClickTab||this.currentTab;this.closeTabs(this.tabs.filter(function(w){return w!==G}),w,t)},t.prototype.closeTabsToTheRight=function(w,t){var G=this._rightClickTab||this.currentTab;if(G){var A=this.tabs.indexOf(G);this.closeTabs(this.tabs.slice(A+1),w,t)}},t.prototype.closeAllTabs=function(w,t){this.closeTabs(this.tabs,w,t)},t.prototype.closeTabs=function(w,t,G){var A=this,I=void 0,R=function(_){if("cancel"!==_&&w.length){var r=w.shift(0);void 0===I&&(I=A.tabs.indexOf(r)-1),A.$65$(r,R,G)}else{t&&t();var y=A.tabs.length;!A.currentTab&&y&&((void 0===I||I<0)&&(I=0),I>y-1&&(I=y-1),A.selectTab(A.tabs[I]))}};R(),this._rightClickTab=null},t.prototype.removeTab=function(w){var t=w.getView(),G={url:t.url};this.editor.fireViewEvent(t,"Closing",G),G.preventDefault||(t.onClosed(),this.getTabModel().remove(w),this.editor.fireEvent("tabClosed",{tab:w}),this.editor.fireViewEvent(t,"Closed",G))},t.prototype.$65$=function(w,t,G){var A=this,I=w.getView();if(!G&&I.dirty&&I.editable){var _={tab:w};if(this.editor.fireEvent("tabPrompting",_),"notSave"===_.action)this.removeTab(w),t&&t("notSave");else if("save"===_.action)I.save(function(){A.removeTab(w),t&&t("save")});else if("cancel"===_.action)t&&t("cancel");else{var r=[{label:R("editor.notsave"),action:function(){y.hide(),A.removeTab(w),t&&t("notSave")}},{label:R("editor.save"),action:function(){I.save(function(){y.hide(),A.removeTab(w),t&&t("save")})}},{label:R("editor.cancel"),action:function(){y.hide(),t&&t("cancel")}}],y=new CG({title:w.getName(),contentPadding:20,width:260,draggable:!0,content:'<p style="color: '+ht.Default.labelColor+'">'+R("editor.savechange")+"</p>",buttons:r});y.$48$=r[2].action,y.$47$=r[1].action,y.show(this.editor.$38$)}}else this.removeTab(w),t&&t()},t.prototype.addTitleTipHandler=function(){},rG(t,[{key:"currentTab",get:function(){return this.getTabModel().sm().ld()}},{key:"tabs",get:function(){return this.getTabModel().getRoots().toArray()}}]),t}(dG),WA=function(w){function t(G){_G(this,t);var A=lG(this,w.call(this));A.editor=G,A.buttons={};var I=[];return I.push(A.createItem("distributeHorizontal")),I.push(A.createItem("distributeVertical")),I.push(A.createItem("alignLeft")),I.push(A.createItem("alignHorizontal")),I.push(A.createItem("alignRight")),I.push(A.createItem("alignTop")),I.push(A.createItem("alignVertical")),I.push(A.createItem("alignBottom")),A.addSearchItem(I),A.addLastItem(I),A.updateItems(),A}return yG(t,w),t.prototype.addLastItem=function(w){var t=22,G=[t,t,t,t,t,t,t,t,.1];C(kG.config.compactFilter)||(this.addCompactItem(w),G.push(t)),this.addRow(w,G)},t.prototype.createItem=function(w){var t=this,G="editor.align."+w.toLocaleLowerCase();return this.buttons[w]=It(null,R(G),G,function(){t[w]()})},t.prototype.updateItems=function(){var w=this.buttons;if(this.dataModel){var t=[];this.dataModel.sm().each(function(w){w instanceof ht.Node&&t.push(w)}),t.length>2?(w.distributeHorizontal.setDisabled(!1),w.distributeVertical.setDisabled(!1),w.alignLeft.setDisabled(!1),w.alignHorizontal.setDisabled(!1),w.alignRight.setDisabled(!1),w.alignTop.setDisabled(!1),w.alignVertical.setDisabled(!1),w.alignBottom.setDisabled(!1)):t.length>1?(w.distributeHorizontal.setDisabled(!0),w.distributeVertical.setDisabled(!0),w.alignLeft.setDisabled(!1),w.alignHorizontal.setDisabled(!1),w.alignRight.setDisabled(!1),w.alignTop.setDisabled(!1),w.alignVertical.setDisabled(!1),w.alignBottom.setDisabled(!1)):(w.distributeHorizontal.setDisabled(!0),w.distributeVertical.setDisabled(!0),w.alignLeft.setDisabled(!0),w.alignHorizontal.setDisabled(!0),w.alignRight.setDisabled(!0),w.alignTop.setDisabled(!0),w.alignVertical.setDisabled(!0),w.alignBottom.setDisabled(!0))}else w.distributeHorizontal.setDisabled(!0),w.distributeVertical.setDisabled(!0),w.alignLeft.setDisabled(!0),w.alignHorizontal.setDisabled(!0),w.alignRight.setDisabled(!0),w.alignTop.setDisabled(!0),w.alignVertical.setDisabled(!0),w.alignBottom.setDisabled(!0)},t.prototype.$5$=function(w){if(this.dataModel&&this.dataModel.sm().ums(this.updateItems,this),w&&!w._isUI){var t=w.getView();this.dataModel=t.dm,this.dataModel.sm().ms(this.updateItems,this)}else this.dataModel=null;this.updateItems()},t.prototype.getUnionRect=function(w){return this.editor.gv?this.editor.gv.getUnionNodeRect(w):null},t.prototype.isSelected=function(w){return this.dataModel&&this.dataModel.sm().contains(w)},t.prototype.hasSelectedGroupParent=function(w){return w instanceof ht.Group&&(!!this.isSelected(w)||this.hasSelectedGroupParent(w.getParent()))},t.prototype.hasSelectedHost=function(w){var t=this,G=function(A){return A!==w&&(A instanceof ht.Node&&(!!t.isSelected(A)||G(A.getHost())))};return G(w.getHost())},t.prototype.distributeHorizontal=function(){if(this.editor.editable){this.editor.beginTransaction();var w=this.editor.gv,t=this.selection,G=this.getUnionRect(t);if(w&&G){t.sort(function(t,G){return w.getNodeRect(t).x-w.getNodeRect(G).x});var A={},I=0;t.forEach(function(t){var G=w.getNodeRect(t);A[t._id]=G,I+=G.width});var R=(G.width-I)/(t.length-1),_=G.x;t.forEach(function(t){var G=w.getNodeRect(t);t.translate(_-G.x,0),_+=G.width+R})}this.editor.endTransaction()}},t.prototype.distributeVertical=function(){if(this.editor.editable){this.editor.beginTransaction();var w=this.editor.gv,t=this.selection,G=this.getUnionRect(t);if(w&&G){t.sort(function(t,G){return w.getNodeRect(t).y-w.getNodeRect(G).y});var A={},I=0;t.forEach(function(t){var G=w.getNodeRect(t);A[t._id]=G,I+=G.height});var R=(G.height-I)/(t.length-1),_=G.y;t.forEach(function(t){var G=w.getNodeRect(t);t.translate(0,_-G.y),_+=G.height+R})}this.editor.endTransaction()}},t.prototype.alignLeft=function(){if(this.editor.editable){this.editor.beginTransaction();var w=this.editor.gv,t=this.selection,G=this.getUnionRect(t);w&&G&&t.forEach(function(t){var A=w.getNodeRect(t);t.translate(G.x-A.x,0)}),this.editor.endTransaction()}},t.prototype.alignHorizontal=function(){if(this.editor.editable){this.editor.beginTransaction();var w=this.editor.gv,t=this.selection,G=this.getUnionRect(t);w&&G&&t.forEach(function(t){var A=w.getNodeRect(t);t.translate(G.x+G.width/2-A.x-A.width/2,0)}),this.editor.endTransaction()}},t.prototype.alignRight=function(){if(this.editor.editable){this.editor.beginTransaction();var w=this.editor.gv,t=this.selection,G=this.getUnionRect(t);w&&G&&t.forEach(function(t){var A=w.getNodeRect(t);t.translate(G.x+G.width-A.x-A.width,0)}),this.editor.endTransaction()}},t.prototype.alignTop=function(){if(this.editor.editable){this.editor.beginTransaction();var w=this.editor.gv,t=this.selection,G=this.getUnionRect(t);w&&G&&t.forEach(function(t){var A=w.getNodeRect(t);t.translate(0,G.y-A.y)}),this.editor.endTransaction()}},t.prototype.alignVertical=function(){if(this.editor.editable){this.editor.beginTransaction();var w=this.editor.gv,t=this.selection,G=this.getUnionRect(t);w&&G&&t.forEach(function(t){var A=w.getNodeRect(t);t.translate(0,G.y+G.height/2-A.y-A.height/2)}),this.editor.endTransaction()}},t.prototype.alignBottom=function(){if(this.editor.editable){this.editor.beginTransaction();var w=this.editor.gv,t=this.selection,G=this.getUnionRect(t);w&&G&&t.forEach(function(t){var A=w.getNodeRect(t);t.translate(0,G.y+G.height-A.y-A.height)}),this.editor.endTransaction()}},t.prototype.addSearchItem=function(w){var t=this;this.searchField=new ht.widget.TextField;var G=this.searchField.getElement();G.onkeyup=function(w){n(w)&&(G.value=""),t.editor.filterProperties()},w.push(this.searchField)},t.prototype.addCompactItem=function(w){var t=this,G=Rt("editor.filter",function(){return kG.config.commonAndAdvancedFilterMode?!t.editor.inspectorCompact:t.editor.inspectorCompact}),A=function(){t.editor.inspectorCompact=!t.editor.inspectorCompact},I=R(kG.config.commonAndAdvancedFilterMode?"editor.commonadvanced":"editor.compactdetail");w.push(It(null,I,G,A))},rG(t,[{key:"selection",get:function(){var w=this,t=[];return this.dataModel&&this.dataModel.sm().each(function(G){G instanceof ht.Node&&(w.hasSelectedGroupParent(G.getParent())||w.hasSelectedHost(G)||t.push(G))}),t}},{key:"filter",get:function(){return this.searchField.getElement().value}}]),t}(VG),eA=function(w){function t(G){_G(this,t);var A=lG(this,w.call(this));return A.editor=G,A.initForm(),A.visible=!1,A.$5$(),A.oopsImageJSON=ht.Default.getImage("editor.oops"),A.oopsImage=ht.Default.toCanvas(A.oopsImageJSON,A.oopsImageJSON.width,A.oopsImageJSON.height,"fill",null,null,null,ht.Default.devicePixelRatio).toDataURL(),A}return yG(t,w),t.prototype.initForm=function(){var w=this,t=this.codeEditor=new qG({language:"json",lineNumbers:"off",readOnly:!0,minimap:{enabled:!1}});this.addRow([{id:"content",element:t}],[.1],.1),this.addRow([{id:"url",textField:{editable:!1}},{id:"edit",button:{onClicked:function(){w.editor.editable&&(w.editing=!w.editing)}}},{id:"commit",button:{label:R("editor.commit"),onClicked:function(){w.commit()}}}],[.1,50,50]),this.getView().style.background=kG.config.color_pane,this.editing=!1},t.prototype.commit=function(){this.editor.editable&&(this.currentView.update(this.content,!0),this.editing=!1)},t.prototype.$66$=function(w){var t=this;this.visible&&!this.editing&&(w&&"*"===w.property||(this._updateContentLater&&clearTimeout(this._updateContentLater),this._updateContentLater=setTimeout(function(){t.updateContent()},100)))},t.prototype.updateContent=function(){this.visible&&!this.editing&&(this._updateContentLater=null,this.content=this.currentView?H(this.currentView.content,null,!1):"")},t.prototype.updateUrl=function(){this.v("url",this.tab&&this.tab.getTag()||"")},t.prototype.$5$=function(w){this.editing=!1,this.dataModel&&(this.dataModel.removeDataModelChangeListener(this.$66$,this),this.dataModel.removeDataPropertyChangeListener(this.$66$,this),
this.dataModel.removePropertyChangeListener(this.$66$,this)),w&&!w._isUI?(this.currentView=w.getView(),this.dataModel=this.currentView.dm,this.dataModel.addDataModelChangeListener(this.$66$,this),this.dataModel.addDataPropertyChangeListener(this.$66$,this),this.dataModel.addPropertyChangeListener(this.$66$,this),this.setDisabled(!1)):(this.currentView=null,this.dataModel=null,this.setDisabled(!0)),this.tab=w,this.updateUrl(),this.$66$()},rG(t,[{key:"editing",get:function(){return this._editing},set:function(w){this._editing!==w&&(this._editing=w,this.getViewById("edit").setLabel(R(w?"editor.cancel":"editor.edit")),this.getViewById("commit").setDisabled(!w),this.getViewById("content").setEditable(w),w||this.$66$())}},{key:"visible",get:function(){return this._visible},set:function(w){this._visible!==w&&(this._visible=w,w?this.updateContent():this.editing||(this.content=""))}},{key:"content",get:function(){return this.v("content")},set:function(w){this.setDisabled(!1),this.v("content",w)}}]),t}(VG);kG.DataView=eA;var oA=function(w){function t(G){_G(this,t);var A=lG(this,w.call(this));A.editor=G,A._emptyDataModel=new ht.DataModel,A.centerPane=new gG,A.setCenterView(A.centerPane),A.controlPane=new VG,A.controlPane.addRow([{id:"filter",textField:{}}],[.1,ht.Default.isTouchable?32:18]),A.setBottomView(A.controlPane),A.setBottomHeight(ht.Default.widgetRowHeight+8);var I=A.controlPane.getViewById("filter"),R=I.setValue;I.setValue=function(w){R.call(I,w),A.updateCenterView(w)};var _=!1,r=A.input=I.getElement();return r.addEventListener("compositionstart",function(){return _=!0}),r.addEventListener("compositionend",function(){_=!1,A.updateCenterView(r.value)}),r.addEventListener("keyup",function(w){!_&&A.list&&(n(w)&&(r.value=""),A.updateCenterView(r.value))}),A}return yG(t,w),t.prototype.$5$=function(w){this.tab=w,this.list=w?w.getView().list:null,this.controlPane.v("filter",this.list?this.list.getFilter()||"":"")},t.prototype.initFilterList=function(){var w=this._filterListView=new oG;w.setFilter=function(w){var t=this._filter;this._filter=w,this.fp("filter",t,w),this.ivm()},w.getFilter=function(){return this._filter},w.isVisible=function(w){if("__renderHTML__"===w.getTag())return!1;if(!this._filter)return!0;var t=this.getVisibleFunc();if(t&&!t(w))return!1;var G=this.getLabel(w);if(null==G)return!1;var A=(this._filter+"").toLowerCase();return G=(G+"").toLowerCase(),G.indexOf(A)>=0}},t.prototype.updateCenterView=function(w){var t=this.list;t instanceof YG&&w&&(t=this._filterListView),this.centerPane.getCenterView()!==t&&this.centerPane.setCenterView(t),this.list&&this.list.setFilter(w),t===this._filterListView&&this._filterListView.setFilter(w)},rG(t,[{key:"list",get:function(){return this._list},set:function(w){if(this._list=w,this.centerPane.setCenterView(w),!(w&&w instanceof YG))return void(this._filterListView&&this._filterListView.dm(this._emptyDataModel));this._filterListView||this.initFilterList(),this._filterListView.getLabel=w.getLabel,this._filterListView.getIcon=w.getIcon,this._filterListView.dm(w.dm())}}]),t}(gG),KA=function(w){function t(G){_G(this,t);var A=lG(this,w.call(this));A.editor=G,A._layerNames=[],A.setDisabled(!0),A.tableModel=new ht.DataModel,A.tablePane=new jG(A.tableModel),A.tableView=A.tablePane.getTableView(),A.tableView.setEditable(!0);var I=A.tableView.isCellEditable;return A.tableView.isCellEditable=function(){return!!G.editable&&I.apply(this,arguments)},A.tablePane.getView().style.border=kG.config.color_line+" solid 1px",A.tablePane.addColumns([A.$73$("name",R("editor.name"),100),A.$73$("visible",R("editor.visible"),50),A.$73$("selectable",R("editor.selectable"),50),A.$73$("movable",R("editor.movable"),50),A.$73$("editable",R("editor.editable"),50)]),A.addRow([A.tablePane],[.1],.1),A.addRow([{button:{icon:"editor.add",toolTip:R("editor.add"),onClicked:function(){A.editor.editable&&(A.addLayer(ht.Data.prototype._layer,!0,!0,!0,!0),A.updateLayers())}}},{button:{icon:"editor.delete",toolTip:R("editor.delete"),onClicked:function(){A.editor.editable&&A.tableView.sm().size()&&(A.dataModel.beginTransaction(),A.removeSelectionLayers(),A.updateLayers(),A.dataModel.endTransaction())}}},null,{button:{icon:"editor.top",toolTip:R("editor.bringtofront"),onClicked:function(){A.editor.editable&&A.tableView.sm().size()&&(A.tableModel.moveSelectionToTop(),A.updateLayers())}}},{button:{icon:"editor.up",toolTip:R("editor.bringforward"),onClicked:function(){A.editor.editable&&A.tableView.sm().size()&&(A.tableModel.moveSelectionUp(),A.updateLayers())}}},{button:{icon:"editor.down",toolTip:R("editor.sendbackward"),onClicked:function(){A.editor.editable&&A.tableView.sm().size()&&(A.tableModel.moveSelectionDown(),A.updateLayers())}}},{button:{icon:"editor.bottom",toolTip:R("editor.sendtoback"),onClicked:function(){A.editor.editable&&A.tableView.sm().size()&&(A.tableModel.moveSelectionToBottom(),A.updateLayers())}}}],[20,20,.1,20,20,20,20]),A}return yG(t,w),t.prototype.addLayer=function(w,t,G,A,I){!1!==t&&(t=!0),!1!==G&&(G=!0),!1!==A&&(A=!0),!1!==I&&(I=!0);var R=new ht.Data;R.a({name:w,visible:t,selectable:G,movable:A,editable:I}),this.tableModel.add(R)},t.prototype.removeSelectionLayers=function(){var w=this.dataModel,t=this.tableModel.sm().getSelection(),G=this.tableModel.size(),A=t.toArray().map(function(w){return w.a("name")}),I=null;if(G>t.size())for(var R=this.tableModel.toDatas().toArray(),_=G-1;_>=0;_--){var r=R[_].a("name");if(A.indexOf(r)<0){I=r;break}}w.each(function(w){A.indexOf(w.getLayer())>=0&&w.setLayer(I)}),this.tableView.removeSelection()},t.prototype.$73$=function(w,t,G){var A=this;return{name:w,tag:w,accessType:"attr",width:G,displayName:t,align:"center",editable:!0,setValue:function(t,G,I){I!==t.a(w)&&(t.a(w,I),A.updateLayers())}}},t.prototype.$5$=function(w){this.dataModel&&this.dataModel.removePropertyChangeListener(this.handleDataModelPropertyChange,this);var t=this.editor.displayView||this.editor.sceneView;t?(this.dataModel=t.dm,this.dataModel.addPropertyChangeListener(this.handleDataModelPropertyChange,this),this.setDisabled(!1)):(this.dataModel=null,this.setDisabled(!0)),this.updateTable(),this.updateInspector()},t.prototype.handleDataModelPropertyChange=function(w){"layers"===w.property&&(this.updateTable(),this.updateInspector())},t.prototype.updateLayers=function(){if(this.dataModel){var w=this.tableModel.size()?[]:null;w&&this.tableModel.getRoots().forEach(function(t){w.push({name:t.a("name"),visible:t.a("visible"),selectable:t.a("selectable"),movable:t.a("movable"),editable:t.a("editable")})}),this.isSettingLayers=!0,this.dataModel.setLayers(w),this.isSettingLayers=!1,this.updateInspector()}},t.prototype.updateTable=function(){var w=this;if(!this.isSettingLayers&&(this.tableModel.clear(),this.dataModel)){var t=this.dataModel.getLayers();t&&t.forEach(function(t){Fw(t)?w.addLayer(t.name,t.visible,t.selectable,t.movable,t.editable):w.addLayer(t,!0,!0,!0,!0)})}},t.prototype.updateInspector=function(){var w=this;if(this.dataModel){var t=this.dataModel.getLayers(),G=this.editor.inspector;this._layerNames=[],t&&t.forEach(function(t){w._layerNames.push(Fw(t)?t.name:t)}),G&&(G.$34$(),G.filterPropertiesLater())}},rG(t,[{key:"currentLayer",get:function(){var w=this.tableModel.sm().ld();if(w)return w.a("name");var t=this.tableModel.getRoots();return t.size()?(w=t.get(t.size()-1),w.a("name")):ht.Data.prototype._layer}},{key:"layerNames",get:function(){return this._layerNames}}]),t}(VG),PA=function(w){function t(G){_G(this,t);var A=lG(this,w.call(this));A.editor=G,A.symbolViewUpdating=!1;var I=A.tableModel=new ht.DataModel,_=A.tablePane=new jG(I),r=A.tableView=_.getTableView();return I.mm(A.handleUpdate,A),I.md(A.handleTableDataPropertyChange,A),I.sm().setSelectionMode("single"),r.isEditable=function(){return G.editable},_.addColumns([{name:"stateName",displayName:R("editor.state"),accessType:"attr",editable:!0,valueType:"string",tag:"stateName"},{name:"stateDisplayName",displayName:R("editor.name"),accessType:"attr",editable:!0,valueType:"string",tag:"stateDisplayName"},{name:"isDefault",displayName:R("editor.default"),accessType:"attr",valueType:"boolean",editable:!0,width:48,setValue:function(w,t,G,I){A.setDefaultState(w.a("stateName"))}}]),_.addViewListener(function(w){if("beginValidate"===w.kind){var t=_.getColumnModel(),G=_.getWidth(),A=(G-80)/2;t.getDataByTag("stateName").setWidth(A),t.getDataByTag("stateDisplayName").setWidth(A)}}),A.addRow([A.tablePane],[.1],.1),A.addRow([{button:{icon:"editor.add",toolTip:R("editor.add"),onClicked:function(){if(A.editor.editable){var w=A.addState(null,null,!1,!0);A.tableModel.sm().ss(w)}}}},{button:{icon:"editor.delete",toolTip:R("editor.delete"),onClicked:function(){A.editor.editable&&A.removeState()}}},null,{button:{icon:"editor.top",toolTip:R("editor.bringtofront"),onClicked:function(){A.editor.editable&&A.tableView.sm().size()&&A.tableModel.moveSelectionToTop()}}},{button:{icon:"editor.up",toolTip:R("editor.bringforward"),onClicked:function(){A.editor.editable&&A.tableView.sm().size()&&A.tableModel.moveSelectionUp()}}},{button:{icon:"editor.down",toolTip:R("editor.sendbackward"),onClicked:function(){A.editor.editable&&A.tableView.sm().size()&&A.tableModel.moveSelectionDown()}}},{button:{icon:"editor.bottom",toolTip:R("editor.sendtoback"),onClicked:function(){A.editor.editable&&A.tableView.sm().size()&&A.tableModel.moveSelectionToBottom()}}}],[20,20,.1,20,20,20,20]),I.sm().ms(function(w){A.editor.gv.iv(),A.editor.rightBottomTabView.iv()}),A._index=0,A}return yG(t,w),t.prototype.handleUpdate=function(){if(!this.updatingClear){var w=[],t=void 0;this.tableModel.each(function(G){var A=G.a("stateName"),I=G.a("stateDisplayName"),R={};G.a("isDefault")&&(t=A),R.value=A,I&&(R.label=I),w.push(R)}),this.isSettingState=!0,this.editor.dm.a({stateEnum:w,state:t}),this.editor.inspector.filterPropertiesLater(),this.editor.inspector.updateProperties(),this.isSettingState=!1}},t.prototype.handleTableDataPropertyChange=function(w){if("a:stateName"!==w.property||this.renameRollback)this.handleUpdate();else{var t=w.oldValue,G=w.newValue;this.isStateExist(G,w.data)?(this.editor.showMessage(R("editor.statenameexist"),"error"),this.renameRollback=!0,w.data.a("stateName",t),this.renameRollback=!1):G?(this.editor.dm.each(function(w){t===w.s("state")&&w.s("state",G)}),this.handleUpdate(),this.editor.rightBottomTabView.iv()):(this.editor.showMessage(R("editor.statenameempty"),"error"),this.renameRollback=!0,w.data.a("stateName",t),this.renameRollback=!1)}},t.prototype.addState=function(w,t){var G=arguments.length>2&&void 0!==arguments[2]&&arguments[2],A=arguments[3],I=this.currentState,R=this.tableView.dm(),_=new ht.Data;if(!w){for(;this.isStateExist("state"+this._index);)this._index++;w="state"+this._index}if(_.a({stateName:w,isDefault:G,stateDisplayName:t}),R.add(_),G&&R.sm().ss(_),A&&kG.config.isCopyCompsWhenNewState&&I){var r=this.dataModel.toDatas(function(w){return w.s("state")===I});if(r.size()){var y=this.dataModel.sm();y.cs(),r.each(function(w){y.as(w)}),this.editor.copy(),this.editor.paste(!0),y.each(function(t){t.s("state",w)})}}return _},t.prototype.removeState=function(){var w=this,t=this.tableModel.sm().ld();if(t){var G=t.a("stateName"),A=this.editor.dm,I=A.toDatas(function(w){return G===w.s("state")}),_=I.size();_?this.editor.showConfirm(void 0,Zt(R("editor.retaincompafterdelete"),G),function(){I.each(function(w){w.s("state",void 0)}),w.tableModel.remove(t)},function(){for(var G=_-1;G>=0;G--)A.remove(I.get(G));w.tableModel.remove(t)}):this.tableModel.remove(t)}},t.prototype.handleDataModelPropertyChange=function(w){"a:stateEnum"!==w.property&&"a:state"!==w.property||this.updateTable()},t.prototype.handleDataModelChange=function(w){var t=this.currentState;if(!this.symbolViewUpdating&&"add"===w.kind){var G=w.data.s("state");t?w.data.s("state",t):G&&!this.isStateExist(G)&&w.data.s("state",void 0)}},t.prototype.updateTable=function(){var w=this;if(!this.isSettingState&&this.dataModel){this.updatingClear=!0,this.tableModel.clear();var t=this.dataModel.a("state"),G=this.dataModel.a("stateEnum");G&&G.forEach(function(G){w.addState(G.value,G.label,G.value===t)}),this.updatingClear=!1}},t.prototype.isStateExist=function(w,t){for(var G=this.tableModel.toDatas(function(w){return w!==t}),A=G.size(),I=0;I<A;I++)if(w===G.get(I).a("stateName"))return!0},t.prototype.setDefaultState=function(w){this.tableModel.each(function(t){t.a("isDefault",t.a("stateName")===w)})},t.prototype.$5$=function(w){var t=this;this.dataModel&&(this.dataModel.ump(this.handleDataModelPropertyChange,this),this.dataModel.umm(this.handleDataModelChange,this),this.dataModel._lastState=this.currentState);var G=this.editor.symbolView;if(G?(this.dataModel=G.dm,this.dataModel.mp(this.handleDataModelPropertyChange,this),this.dataModel.mm(this.handleDataModelChange,this)):this.dataModel=null,this.updateTable(),G){var A=this.dataModel._lastState;void 0!==A?this.tableModel.each(function(w){w.a("stateName")===A&&t.tableModel.sm().ss(w)}):this.tableModel.sm().cs()}},rG(t,[{key:"currentState",get:function(){var w=this.tableModel.sm().ld();return w?w.a("stateName"):void 0}}]),t}(VG),jA=function(w){function t(G){_G(this,t);var A=lG(this,w.call(this));return A.editor=G,A.editor.menus.push(A),A.setItems(A.createItems()),A}return yG(t,w),t.prototype.createItems=function(){return[{id:"file",label:R("editor.file"),items:[this.createItem("newDisplayView",R("editor.newdisplayview"),"newDisplayView",kG.config.displaysVisible),this.createItem("newSymbolView",R("editor.newsymbolview"),"newSymbolView",kG.config.symbolsVisible),this.createItem("newComponent",R("editor.newcomponent"),"newComponent",kG.config.componentsVisible)]}]},t.prototype.createItem=function(w,t,G){var A=this,I=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],R={id:w,label:t,visible:!(!this.editor[G]||!I)};return G&&(R.action=function(){A.editor[G]()}),R},t}(WG),dA=function(w){function t(G){_G(this,t);var A=lG(this,w.call(this));return A.editor=G,A.initMenu(),A.$68$(),A.enableToolTip(),A}return yG(t,w),t.prototype.$5$=function(){this.iv()},t.prototype.initMenu=function(){var w=this;this.editor.mainMenu=new jA(this.editor);var t=function(t){var G=w.editor.mainMenu;G.isShowing()&&!G.getView().contains(t.target)&&G.hide()};window.addEventListener("touchstart",t,!1),window.addEventListener("mousedown",t,!1)},t.prototype.$68$=function(){var w=[];this.$67$(w),this.createEditItem(w),this.createDisplayItems(w),this.createSymbolItems(w),this.createSceneItems(w),this.setItems(w)},t.prototype.$67$=function(w){var t=this,G=Gt("menu",R("editor.menu"),"editor.menu");G.action=function(w,G,A){t.editor.mainMenu.isShowing()||(t.editor.mainMenu.showOnView(t,4,20),A.preventDefault(),A.stopPropagation())},w.push(G)},t.prototype.createEditItem=function(w){var t=this,G=function(){return t.editor.currentView&&"edit"===t.editor.currentView.$3$()},A=Gt("edit",R("editor.edit"),"editor.edit",G);A.visible=function(){return(!t.editor.currentView||!t.editor.currentView.getPreferredSize)&&t.editor.editable},A.action=function(){var w=t.editor.currentView;w&&w.$4$("edit")},w.push(A)},t.prototype.createDisplayItems=function(w){var t=this,G=function(w){return function(G){"Node"===w||"SubGraph"===w||("Edge"===w?G.s({"edge.width":1,"edge.color":kG.config.color_data_border}):"Group"===w?G.setExpanded(!0):"arc"===w?G.s({shape:w,"shape.background":kG.config.color_data_background,"shape.border.width":1,"shape.border.color":kG.config.color_data_border,"shape.arc.from":0,"shape.arc.to":4.1888}):"Shape"===w?G.s({"shape.background":null,"shape.border.color":kG.config.color_data_border,"shape.border.width":1}):"Text"===w?G.s("text",R("editor.text")):G.s({shape:w,"shape.background":kG.config.color_data_background,"shape.border.width":1,"shape.border.color":kG.config.color_data_border})),t.editor.fireEvent("dataInited",{type:w,data:G,displayView:t.editor.displayView})}};w.push(this.editor.createDisplayItem("Shape",R("editor.shape"),"editor.display.shape",ht.Shape,G("Shape"))),w.push(this.editor.createDisplayItem("Oval",R("editor.oval"),"editor.display.oval",ht.Node,G("oval"))),w.push(this.editor.createDisplayItem("RoundRect",R("editor.roundrect"),"editor.display.roundrect",ht.Node,G("roundRect"))),w.push(this.editor.createDisplayItem("Rect",R("editor.rect"),"editor.display.rect",ht.Node,G("rect"))),w.push(this.editor.createDisplayItem("Polygon",R("editor.polygon"),"editor.display.polygon",ht.Node,G("polygon"))),w.push(this.editor.createDisplayItem("Triangle",R("editor.triangle"),"editor.display.triangle",ht.Node,G("triangle"))),w.push(this.editor.createDisplayItem("Star",R("editor.star"),"editor.display.star",ht.Node,G("star"))),w.push(this.editor.createDisplayItem("Arc",R("editor.arc"),"editor.display.arc",ht.Node,G("arc"))),w.push(this.editor.createDisplayItem("Text",R("editor.text"),"editor.display.text",ht.Text,G("Text"))),w.push(this.editor.createDisplayItem("Node",R("editor.node"),"editor.display.node",ht.Node,G("Node"))),w.push(this.editor.createDisplayItem("Group",R("editor.group"),"editor.display.group",ht.Group,G("Group"))),w.push(this.editor.createDisplayItem("SubGraph",R("editor.subgraph"),"editor.display.subgraph",ht.SubGraph,G("SubGraph"))),w.push(this.editor.createDisplayItem("Edge",R("editor.edge"),"editor.display.edge",ht.Edge,G("Edge")))},t.prototype.createSymbolItems=function(w){w.push(this.editor.createSymbolItem("shape",R("editor.shape"),"editor.symbol.shape","shape")),w.push(this.editor.createSymbolItem("oval",R("editor.oval"),"editor.symbol.oval","oval")),w.push(this.editor.createSymbolItem("roundRect",R("editor.roundrect"),"editor.symbol.roundrect","roundRect")),w.push(this.editor.createSymbolItem("rect",R("editor.rect"),"editor.symbol.rect","rect")),w.push(this.editor.createSymbolItem("polygon",R("editor.polygon"),"editor.symbol.polygon","polygon")),w.push(this.editor.createSymbolItem("triangle",R("editor.triangle"),"editor.symbol.triangle","triangle")),w.push(this.editor.createSymbolItem("star",R("editor.star"),"editor.symbol.star","star")),w.push(this.editor.createSymbolItem("arc",R("editor.arc"),"editor.symbol.arc","arc")),w.push(this.editor.createSymbolItem("text",R("editor.text"),"editor.symbol.text","text")),w.push(this.editor.createSymbolItem("border",R("editor.border"),"editor.symbol.border","border")),w.push(this.editor.createSymbolItem("piechart",R("editor.piechart"),"editor.symbol.piechart","pieChart")),w.push(this.editor.createSymbolItem("onedimensionalcolumnchart",R("editor.onedimensionalcolumnchart"),"editor.symbol.onedimensionalcolumnchart","oneDimensionalColumnChart")),w.push(this.editor.createSymbolItem("columnchart",R("editor.columnchart"),"editor.symbol.columnchart","columnChart")),w.push(this.editor.createSymbolItem("linechart",R("editor.linechart"),"editor.symbol.linechart","lineChart"))},t.prototype.createSceneItems=function(w){},t}(sG),sA=function(w){function t(G){_G(this,t);var A=lG(this,w.call(this));return A.editor=G,A.$68$(),A.enableToolTip(),A.setStickToRight(!0),A}return yG(t,w),t.prototype.handleGraphViewPropertyChange=function(w){"zoom"===w.property&&this.$69$()},t.prototype.handleDataModelPropertyChange=function(w){this.iv()},t.prototype.$69$=function(){this.label.innerHTML=this.graphView?parseInt(100*this.graphView.getZoom())+"%":""},t.prototype.$5$=function(w){if(this.dm&&this.dm.removePropertyChangeListener(this.handleDataModelPropertyChange,this),this.graphView&&this.graphView.removePropertyChangeListener(this.handleGraphViewPropertyChange,this),w){var t=w.getView();this.dm=t.dm,this.dm&&this.dm.addPropertyChangeListener(this.handleDataModelPropertyChange,this),this.graphView=t.graphView,this.graphView&&this.graphView.addPropertyChangeListener(this.handleGraphViewPropertyChange,this)}else this.dm=null,this.graphView=null;this.iv(),this.$69$()},t.prototype.$68$=function(){var w=this,t=void 0,G=function(){return!!w.graphView},A=[];t=Gt("undo",R("editor.undo"),"editor.undo"),t.action=function(){w.editor.undo()},t.visible=G,A.push(t),t=Gt("redo",R("editor.redo"),"editor.redo"),t.action=function(){w.editor.redo()},t.visible=G,A.push(t),A.push({separator:!0,visible:G}),kG.SceneView&&(t=Gt("debug",R("editor.debug"),"editor.debug",function(){return w.editor.isDebugTipShowing()}),t.action=function(){w.editor.toggleDebugTip()},t.visible=G,A.push(t)),t=Gt("rulers",R("editor.showrulers"),"editor.rulers",function(){return w.editor.isRulerEnabled()}),t.action=function(){w.editor.toggleRulerEnabled()},t.visible=G,A.push(t),t=Gt("grid",R("editor.showgrid"),"editor.grid",function(){return w.editor.isGridEnabled()}),t.action=function(){w.editor.toggleGridEnabled()},t.visible=G,A.push(t),A.push({separator:!0,visible:G}),t=Gt("save",R("editor.save"),"editor.save"),t.action=function(){w.editor.save()},t.visible=G,A.push(t),t=Gt("preview",R("editor.preview"),"editor.preview"),t.action=function(){w.editor.preview()},t.visible=G,A.push(t),t=Gt("reload",R("editor.reload"),"editor.reload"),t.action=function(){w.editor.reload()},t.visible=G,A.push(t),A.push({separator:!0,visible:G}),A.push(this.createZoomItem(G)),t=Gt("zoomToFit",R("editor.zoomtofit"),"editor.zoomtofit"),t.action=function(){w.editor.zoomToFit()},t.visible=G,A.push(t),A.push({separator:!0,visible:G}),t=Gt("toggleLeft",R("editor.toggleleft"),"editor.toggleleft"),t.action=function(){w.editor.toggleLeft()},A.push(t),t=Gt("toggleRight",R("editor.toggleright"),"editor.toggleright"),t.action=function(){w.editor.toggleRight()},A.push(t),this.setItems(A)},t.prototype.createZoomItem=function(w){var t=this,G=this.label=ht.Default.createDiv(!0);G.style.font=this.getLabelFont(),G.style.color=this.getLabelColor(),G.style.cursor="ew-resize",G.style.width="40px",G.style.height=ht.Default.widgetRowHeight+"px",G.style.lineHeight=ht.Default.widgetRowHeight+"px",G.style.whiteSpace="nowrap",G.style.textAlign="center";var A=function(w){w.preventDefault();var G=t.editor.gv;if(G){F(w)&&t.editor.zoomReset();var A=G.getZoom(),I=N(w).x,R=function(w){w.preventDefault();var t=N(w).x-I;G.setZoom(A*(1+.005*t))};window.addEventListener("mousemove",R,!1),window.addEventListener("touchmove",R,!1);var _=function(w){w.preventDefault(),window.removeEventListener("mousemove",R,!1),window.removeEventListener("touchmove",R,!1),window.removeEventListener("mouseup",_,!1),window.removeEventListener("touchend",_,!1)};window.addEventListener("mouseup",_,!1),window.addEventListener("touchend",_,!1)}};return G.addEventListener("mousedown",A,!1),G.addEventListener("touchstart",A,!1),{id:"zoom",unfocusable:!0,element:G,visible:w}},t}(sG),YA=function(w){function t(G){_G(this,t);var A=lG(this,w.call(this));A.editor=G,A._errorMsg=null,A.$71$(),A.$70$(),A.$72$(),A.splitView=new PG(A.inspectorPane,A.graphView,"v",-200),A.mainSplitView=new PG(A.funcPane,A.splitView,"h",-360),A._eventData=new ht.Data;var I=[];return I.push({label:R("editor.refresh"),action:function(){A.refresh()}}),I.push({label:R("editor.ok"),action:function(){A.ok()}}),I.push({label:R("editor.cancel"),action:function(){A.hide()}}),A.setConfig({closable:!0,draggable:!0,width:kG.config.componentViewSize.width,height:kG.config.componentViewSize.height,contentPadding:0,resizeMode:"wh",maximizable:!0,content:A.mainSplitView,buttons:I,buttonsAlign:"right"}),A}return yG(t,w),t.prototype.$48$=function(){this.hide()},t.prototype.$47$=function(){this.ok()},t.prototype.$71$=function(){var w=this;ht.Default.setCompType("_editingCompType_",{func:function(){}}),this.graphView=new eG,this.initOverviewNode(),this.graphView.mi(function(t){"doubleClickData"!==t.kind&&"doubleClickBackground"!==t.kind||w.graphView.fitContent(kG.config.animate,kG.config.fitPadding)});var t=this;ht.Default.drawCompType=function(w,G,A,I,_,r){var y="_editingCompType_"===I.type;try{y&&t.beforeDrawCompType(G),w(G,A,I,_,r),y&&t.afterDrawCompType(G)}catch(w){y&&(t.afterDrawCompType(G),t._errorMsg=R("editor.compfunctionerror")),console.error(w.stack||w)}}},t.prototype.initOverviewNode=function(){var w=this.node,t=this.graphView.dm();w&&t.contains(w)&&t.remove(w);var G=this.node=new ht.Node;G.setImage({width:100,height:100,fitSize:!0,comps:[{type:"_editingCompType_"}]}),t.add(G),t.sm().ss(G)},t.prototype.beforeDrawCompType=function(w){var t=this._restoreFlag;t||(t=this._restoreFlag=w.createLinearGradient(0,0,10,10),t.addColorStop(0,"black"),t.addColorStop(0,"black")),w.fillStyle=t,w.save(),w.fillStyle="#000000"},t.prototype.afterDrawCompType=function(w){if(w.restore(),w.fillStyle!==this._restoreFlag){for(var t=0;w.fillStyle!==this._restoreFlag&&(w.restore(),!(++t>=20)););w.fillStyle="black",this._errorMsg=R("editor.complosssaveorrestore")}else this._errorMsg=null},t.prototype.$72$=function(){this.funcPane=new VG,this.funcPane.addRow([{id:"head",element:"function(g, rect, comp, data, view) {"}],[.1]),this.funcPane.addRow([{id:"func",element:kt()}],[.1],.1),this.funcPane.addRow(["}"],[.1])},t.prototype.$70$=function(){var w=this,t=kG.config.indent;this.inspectorPane=new VG;var G=It(R("editor.eventhandlers"),null,null,function(){w.editor.eventView.open([w._eventData],null,w.resetEventButtonLabelColor.bind(w))});this.eventButton=G,this.inspectorPane.addRow([R("editor.name"),{id:"name",textField:{}},{element:R("editor.events"),align:"right"},{element:G}],[t,.1,t,.1]),this.inspectorPane.addRow([R("editor.width"),{id:"width",textField:{}},{element:R("editor.height"),align:"right"},{id:"height",textField:{}}],[t,.1,t,.1]),this.inspectorPane.addRow([R("editor.path"),{id:"path",textField:{editable:!1}}],[t,.1]),this.inspectorPane.addRow([R("editor.snapshoturl"),{id:"snapshotURL",textField:{}}],[t,.1]),this.createTable()},t.prototype.$73$=function(w,t,G,A){return{name:w,tag:w,accessType:"attr",width:G,displayName:t,align:"center",enum:A,editable:!0}},t.prototype.createTable=function(){var w=this,t=this.tableModel=new ht.DataModel;this.tablePane=new jG(this.tableModel),this.tableView=this.tablePane.getTableView(),this.tableView.setEditable(!0),this.tableView.isEditable=function(){return w.editable},this.tablePane.getView().style.border=kG.config.color_line+" solid 1px",this.tablePane.addColumns([this.$73$("property",R("editor.property"),150),this.$73$("valueType",R("editor.valuetype"),80,{values:kG.consts.valueTypes,labels:kG.consts.valueTypeLabels}),this.$73$("defaultValue",R("editor.defaultvalue"),90),this.$73$("name",R("editor.name"),80),this.$73$("group",R("editor.group"),80),this.$73$("description",R("editor.description"),120),this.$73$("extraInfo",R("editor.extrainfo"),100)]),this.$74$(),this.initExtraInfoColumn(),this.inspectorPane.addRow([this.tablePane],[.1],.1),this.inspectorPane.addRow([{button:{toolTip:R("editor.add"),icon:"editor.add",onClicked:function(){if(w.editable){var G=new ht.Data;G.a({property:"property",valueType:"String"});var A=void 0,I=t.sm().ld();I&&(A=t.getRoots().indexOf(I)+1),t.add(G,A),t.sm().ss(G),setTimeout(function(){w.tableView.tx(0),Bt(w.tableView,G,w.tableView.getColumnModel().getDataByTag("property"))},100)}}}},{button:{toolTip:R("editor.delete"),icon:"editor.delete",onClicked:function(){w.editable&&w.tableView.removeSelection()}}},null,{button:{icon:"editor.top",toolTip:R("editor.bringtofront"),onClicked:function(){w.editable&&w.tableView.sm().size()&&w.tableModel.moveSelectionToTop()}}},{button:{icon:"editor.up",toolTip:R("editor.bringforward"),onClicked:function(){w.editable&&w.tableView.sm().size()&&w.tableModel.moveSelectionUp()}}},{button:{icon:"editor.down",toolTip:R("editor.sendbackward"),onClicked:function(){w.editable&&w.tableView.sm().size()&&w.tableModel.moveSelectionDown()}}},{button:{icon:"editor.bottom",toolTip:R("editor.sendtoback"),onClicked:function(){w.editable&&w.tableView.sm().size()&&w.tableModel.moveSelectionToBottom()}}}],[20,20,.1,20,20,20,20])},t.prototype.$74$=function(){var w=this,t=this.tableView.getColumnModel().getDataByTag("defaultValue");t.getValue=function(w,t,G){var A=w.a("defaultValue");return"Angle"===w.a("valueType")&&A&&(A=A/Math.PI*180),A},t.setValue=function(w,t,G,A){"Angle"===w.a("valueType")&&(G=G*Math.PI/180),w.a("defaultValue",G)},t.getEnumValues=function(w){var t=w?kG.config.valueTypes[w.a("valueType")]:null;return t&&"enum"===t.type?t.values:null},t.getEnumLabels=function(w){var t=w?kG.config.valueTypes[w.a("valueType")]:null;return t&&"enum"===t.type?t.labels:null},t.getEnumIcons=function(w){var t=w?kG.config.valueTypes[w.a("valueType")]:null;return t&&"enum"===t.type?t.icons:null},t.getEnumDropDownWidth=function(w){var t=w?kG.config.valueTypes[w.a("valueType")]:null;return t&&"enum"===t.type?t.dropDownWidth:null},t.getValueType=function(w){var t=w?kG.config.valueTypes[w.a("valueType")]:null;return t?t.type:null},t.isCellEditable=function(t,G,A,I){var _=t?kG.config.valueTypes[t.a("valueType")]:null,r=_?_.type:null,y=t.a("extraInfo"),l=kG.config.handleDefaultVauleColumnEdit,C=function(w){t.a("defaultValue",w)};if(l&&l(C,_,r,y))return!1;if("function"===r){var V=R("editor.function")+" "+(t.a("property")||"");return w.editor.functionView.open(t.a("defaultValue"),C,V,y&&y.arguments),!1}if("multiline"===r)return w.editor.textView.open(t.a("defaultValue"),C,t.a("property")||"&nbsp;"),!1;if("font"===r)return w.editor.fontView.open(t.a("defaultValue"),C,t.a("property")||"&nbsp;"),!1;if("object"===r||"custom"===r||"stringArray"===r||"objectArray"===r||"numberArray"===r||"colorArray"===r){var q=R("editor.object")+" "+(t.a("property")||"");return w.editor.objectView.open(t.a("defaultValue"),C,q),!1}return"dataModel"!==r||(w.editor.dataModelView.open(t.a("defaultValue"),C,w.editable,y),!1)}},t.prototype.initExtraInfoColumn=function(){var w=this;this.tableView.getColumnModel().getDataByTag("extraInfo").isCellEditable=function(t,G,A,I){var _=R("editor.extrainfo")+" "+(t.a("property")||"");return w.editor.objectView.open(t.a("extraInfo"),function(w){t.a("extraInfo",w)},_),!1}},t.prototype.open=function(w,t){var G=this;this.fileNode=w,this.initOverviewNode(),w?D(w.url,function(t){G.update(w.url,w.path,b(w.getName()),t,w.a("editable"))}):this.update(void 0,t||this.editor.components.currentDir,R("editor.untitled"))},t.prototype.update=function(w,t,G,A,I){if(this.editable=!1!==I,this._eventData.setAttrObject({}),A){if(A=X(A),this.setTitle(R("editor.editcomponent")),this.node.setWidth(A.width||100),this.node.setHeight(A.height||100),this.inspectorPane.v("width",this.node.getWidth()),this.inspectorPane.v("height",this.node.getHeight()),this.inspectorPane.v("snapshotURL",A.snapshotURL||""),this.inspectorPane.getViewById("name").setEditable(!1),this.inspectorPane.v("name",G||""),this.inspectorPane.v("path",t||""),this.funcPane.v("func",q(A.func)),this.tableModel.clear(),A.properties)for(var _ in A.properties){var r=A.properties[_],y=new ht.Data;y.a({property:_,valueType:r.valueType,defaultValue:r.defaultValue,name:r.name,group:r.group,description:r.description,extraInfo:r.extraInfo}),this.tableModel.add(y)}if(this._eventData=new ht.Data,A.events)for(var l in A.events)this._eventData.a(l,A.events[l]);this.refresh(),this.show(this.editor.$38$),this.url=w,this.editor.fireEvent("componentViewOpened",{componentView:this,url:w,json:A})}else this.setTitle(R("editor.newcomponent")),this.node.setWidth(100),this.node.setHeight(100),this.inspectorPane.v("width",this.node.getWidth()),this.inspectorPane.v("height",this.node.getHeight()),this.inspectorPane.v("snapshotURL",""),this.inspectorPane.getViewById("name").setEditable(!0),this.inspectorPane.v("name",G),this.inspectorPane.v("path",t),this.funcPane.v("func",""),this.tableModel.clear(),this.refresh(),this.show(this.editor.$38$),this.url=w,this.editor.fireEvent("componentViewCreated",{componentView:this});this.resetEventButtonLabelColor()},t.prototype.$75$=function(){return k(this.funcPane.v("head")+"\n"+this.funcPane.v("func").trim()+"\n}")},t.prototype.$76$=function(w){var t={};return this.tableModel.getRoots().each(function(G){t[G.a("property")]={valueType:G.a("valueType"),defaultValue:w?Xw(G.a("defaultValue")):G.a("defaultValue"),name:G.a("name"),group:G.a("group"),description:G.a("description"),
extraInfo:G.a("extraInfo")}}),t},t.prototype.refresh=function(w){ht.Default.setCompType("_editingCompType_",{func:this.$75$(),properties:this.$76$()}),this.node.setWidth(parseFloat(this.inspectorPane.v("width"))),this.node.setHeight(parseFloat(this.inspectorPane.v("height"))),this.node.iv(),this.graphView.fitContent(kG.config.animate,kG.config.fitPadding);var t=function(G){"validate"===G.kind&&(w&&w(!this._errorMsg),this._errorMsg&&this.editor.showMessage(this._errorMsg,"error"),this.graphView.removeViewListener(t,this))};this.graphView.addViewListener(t,this)},t.prototype.createEvents=function(){var w=this._eventData,t=null;return ZG.forEach(function(G){w.a(G)&&(t||(t={}),t[G]=w.a(G))}),t},t.prototype.resetEventButtonLabelColor=function(){for(var w=!1,t=0;t<ZG.length;t++)if(this._eventData.a(ZG[t])){w=!0;break}this.eventButton.setLabelColor(w?kG.config.color_select:ht.Default.labelColor)},t.prototype.ok=function(){var w=this;if(!this.editable)return void this.hide();var t=this.inspectorPane.v("name").trim(),G=this.inspectorPane.v("path");if(!this.url){var A=this.editor.components;if(A.isAccordionMode()&&A.rootDir===G)return void this.editor.showMessage(R("editor.createfolderfirst"),"error",2e3)}var I=this.url||G+"/"+t+".json";if(!t)return void tt(null,R("editor.inputempty"),function(){});if(t.length>kG.config.maxFileNameLength)return void tt(null,R("editor.inputmax"),function(){});if(kG.config.checkFileName&&!(t=kG.config.checkFileName(t,I)))return void tt(null,R("editor.invalidfilename"),function(){});Vw(t)&&(t=b(t));var _=this.content,r={componentView:this,url:I,json:H(_)};this.editor.fireEvent("componentViewSaving",r),r.preventDefault||(r={path:r.url,content:r.json},kG.config.vision&&(r.root_dir=this.editor.components.rootDir,r.parent_uuid=this.editor.components.tree.sm().ld().uuid),this.refresh(function(A){A&&w.editor.request("upload",r,function(A){(kG.config.vision?A&&A.uuid:!0===A)&&(w.refresh(),w.graphView.sm().cs(),w.graphView.validate(),w.editor.saveImage(_.snapshotURL||w.graphView,G+"/"+t+".png",function(){w.editor.fireEvent("componentViewSaved",r)},A.uuid,A.parent_uuid,A.root_dir),w.hide(),w.editor.selectFileNode(r.path),r={componentView:w,url:r.path,json:r.content})})}))},rG(t,[{key:"content",get:function(){var w=this.inspectorPane,t={modified:(new Date).toString(),width:parseFloat(w.v("width")),height:parseFloat(w.v("height")),func:this.$75$()},G=w.v("snapshotURL"),A=this.createEvents();return this.tableModel.size()&&(t.properties=this.$76$(!0)),A&&(t.events=A),G&&(t.snapshotURL=G),t}}]),t}(CG),wI=460,tI=230,GI=function(w){function t(G){_G(this,t);var A=lG(this,w.call(this));A.editor=G;var I=[];I.push(R("editor.binding")),I.push({id:"compProperty",textField:{editable:!1}}),I.push({element:R("editor.type"),align:"right"}),I.push({id:"type",comboBox:{values:["attr","func"],onValueChanged:function(w,t){var G="func"===t,I=G?ht.Default.labelColor:kG.config.color_disabled;A.getViewById("func").setEditable(G),A.getItemById("head").color=I,A.getItemById("end").color=I,A.getViewById("property").setDisabled(G),G&&A.getViewById("property").setValue(""),A.iv()}}}),I.push({element:R("editor.property"),align:"right"});var _={id:"property"};kG.config.dataBindingsForSymbol.getComboBoxValues?_.comboBox={editable:!!kG.config.dataBindingsForSymbol.comboBoxEditable}:_.textField={},I.push(_);var r=[50,90,40,60,60,.1];if(kG.config.dataBindingsForSymbol.onButtonClicked){var y=It("...",void 0,void 0,function(){A.smartClose=!1,kG.config.dataBindingsForSymbol.onButtonClicked(A,A.v("compProperty"),A.editor)});I.push(y),r.push(20)}if(A.addRow(I,r),!kG.config.dataBindingsForSymbol.getComboBoxValues){A.getItemById("property").element.getElement().addEventListener("keydown",function(w){ht.Default.isEnter(w)&&A.hide(!0)})}A.addLine(),A.addRow([{id:"head",element:""}],[.1]),A.addRow([{id:"func",element:kt()}],[.1],.1),A.addRow([{id:"end",element:"}"},{button:{label:R("editor.ok"),onClicked:function(){A.hide(!0)}}},{button:{label:R("editor.cancel"),onClicked:function(){A.hide()}}}],[.1,50,50]),A.setWidth(wI),A.setHeight(tI),A.getView().className="ht-editor-databinding",A.getView().style.background=kG.config.color_pane,A.getView().style.border=kG.config.color_pane_dark+" solid 1px",A.getView().style.boxShadow="0px 0px 3px "+ht.Default.toolTipShadowColor,A.getView().style.overflow="visible";var l=A.handleWindowClick.bind(A);return window.addEventListener("mousedown",l,!1),window.addEventListener("touchstart",l,!1),A}return yG(t,w),t.prototype.handleWindowClick=function(w){if(this.smartClose&&this.getView().parentNode&&!this.button.getView().contains(w.target)){var t=this.getViewById("type");if(!t.getListView().getView().contains(w.target)){if((t=this.getViewById("property"))instanceof ht.widget.ComboBox){if(t.getListView().getView().contains(w.target))return;if(t.getInput()&&t.getInput().contains(w.target))return}this.getView().contains(w.target)||this.hide()}}},t.prototype.toggle=function(w,t,G,A,I,R){this.getView().parentNode?this.hide():this.show(w,t,G,A,I,R)},t.prototype.show=function(w,t,G,A,I,R){var _=this;kG.config.dataBindingsForSymbol.getComboBoxValues?kG.config.dataBindingsForSymbol.getComboBoxValues(function(r){_.getViewById("property").setValues(r),_.showImpl(w,t,G,A,I,R)}):this.showImpl(w,t,G,A,I,R)},t.prototype.showImpl=function(w,t,G,A,I,R){if(!this.getView().parentNode){this.smartClose=!0;var _=w.getView().getBoundingClientRect(),r=(this.getView().style,U());ht.Default.appendToScreen(this),_.bottom+tI+1>r.height?this.getView().style.top=r.top+_.top-tI-1+"px":this.getView().style.top=r.top+_.bottom+1+"px",this.getView().style.left=r.left+_.right-wI+"px",this.iv(),this.button=w,this.name=t,this.inspector=A,this.setter=R,this.v("compProperty",G||t);var y=void 0,l=!1;this.inspector.global?"clip"===t?(y=I?I():this.inspector.dataModel.a("clip"),this.v("head","function(g, width, height, data, view, image) {"),l=!0):(y=I?I():this.inspector.dataModel.a(t+"_func"),this.v("head","function(data, view) {")):(y=I?I():this.inspector.data.a(t),this.inspector.data instanceof bA&&"type"===t?(this.v("head","function(g, rect, comp, data, view) {"),l=!0):this.v("head","function(data, view) {"));fw(y)?(UG.test(y)?(this.v("type","attr"),this.v("property",y.slice(5))):(this.v("type","attr"),this.v("property",y)),this.v("func","")):Sw(y)?(this.v("type","func"),this.v("property",""),this.v("func",q(y))):(this.v("type","attr"),this.v("property",""),this.v("func","")),l?(this.v("type","func"),this.v("property",""),this.getViewById("type").setDisabled(!0)):this.getViewById("type").setDisabled(!1)}},t.prototype.hide=function(){var w=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.getView().parentNode&&(h(this.getView()),t)){var G=this.v("type"),A=this.v("property"),I=void 0;if("func"===G){var R=this.v("func").trim();(R||this.inspector.data instanceof bA&&"type"===this.name)&&(I=k(this.v("head")+"\n"+R+"\n}"))}else A&&"attr"===G&&(I="attr@"+A);this.setter?this.setter(I):this.inspector.global?"clip"===this.name?this.inspector.dataModel.a("clip",I):this.inspector.dataModel.a(this.name+"_func",I):this.inspector.setValue(function(t,G){t.a(w.name,G)},I)}},t}(VG),AI=function(w){function t(G){_G(this,t);var A=lG(this,w.call(this));A.editor=G,A.createTabView();var I=[];return I.push({label:R("editor.ok"),action:function(){A.ok()}}),I.push({label:R("editor.cancel"),action:function(){A.hide()}}),A.setConfig({title:R("editor.eventhandlers"),closable:!0,draggable:!0,width:kG.config.eventViewSize.width,height:kG.config.eventViewSize.height,contentPadding:6,resizeMode:"wh",maximizable:!0,content:A.tabView,buttons:I,buttonsAlign:"right"}),A.setModal(!1),A}return yG(t,w),t.prototype.$48$=function(){this.hide()},t.prototype.$47$=function(){this.ok()},t.prototype.ok=function(w){var t=this;this.target&&(this.editor.beginTransaction(),ZG.forEach(function(G){var A=t[G+"FormPane"],I=A.v("body").trim();if("data"===t.inspectorType||"data3d"===t.inspectorType){var R=w?null:I?k("function(event, data, view) {\n"+I+"\n}"):void 0;t.target.forEach(function(w){w.s(G,R)})}else{var _=w?null:I?k("function(event, data, view, point, width, height) {\n"+I+"\n}"):void 0;t.target.forEach(function(w){w.a(G,_)})}}),this.editor.endTransaction()),this.callback&&this.callback(),this.hide()},t.prototype.createTabView=function(){var w=this,t=this.tabView=new dG;ZG.forEach(function(G){var A=w[G+"FormPane"]=new VG;A.addRow([{id:"head",element:""}],[.1]),A.addRow([{id:"body",element:kt()}],[.1],.1),A.addRow(["}"],[.1]),w[G+"Tab"]=t.add(R("editor.event."+G.toLowerCase()),A)}),t.getTabModel().sm().ss(t.getTabModel().getDatas().get(0))},t.prototype.open=function(w,t,G){var A=this;w&&w.length&&(this.target=w,this.inspectorType=t,this.callback=G,ZG.forEach(function(G){var I=A[G+"FormPane"];"data"===t||"data3d"===t?(I.v("head",G+": function(event, data, view) {"),I.v("body",q(w[w.length-1].s(G)))):(I.v("head",G+": function(event, data, view, point, width, height) {"),I.v("body",q(w[w.length-1].a(G))))}),this.show(this.editor.$38$))},t}(CG);kG.EventView=AI;var II=function(w){function t(G){_G(this,t);var A=lG(this,w.call(this));A.editor=G,A.formPane=new VG;var I=A.raws=[],_=A.formPane.addRow([{id:"head",element:"function() {"}],[.1]);I.push(_),_=A.formPane.addRow([{id:"function",element:kt()}],[.1],.1),I.push(_),_=A.formPane.addRow(["}"],[.1]),I.push(_);var r=[];return r.push({label:R("editor.ok"),action:function(){A.ok()}}),r.push({label:R("editor.cancel"),action:function(){A.hide()}}),A.setConfig({title:R("editor.function"),closable:!0,draggable:!0,width:kG.config.functionViewSize.width,height:kG.config.functionViewSize.height,contentPadding:6,resizeMode:"wh",maximizable:!0,content:A.formPane,buttons:r,buttonsAlign:"right"}),A.setModal(!1),A}return yG(t,w),t.prototype.$48$=function(){this.hide()},t.prototype.$47$=function(){this.ok()},t.prototype.parse=function(w){if(w){var t=this.getFunctionHead();return w=w.trim(),t?w=""+t+w+"}":w.startsWith("function")||(w="function() {\n"+w+"\n}"),k(w)}},t.prototype.ok=function(){this.setValue&&this.setValue(this.parse(this.formPane.v("function"))),this.hide()},t.prototype.setFormRows=function(){var w=this.formPane,t=this.raws,G=this._argList;this._argList?w._rows=t:w._rows=[t[1]],w.iv(),G&&w.v("head",this.getFunctionHead())},t.prototype.getFunctionHead=function(){var w=this._argList;if(w)return"function("+(ht.Default.isArray(w)?w.join(", "):w)+") {"},t.prototype.stringifyFunction=function(w){var t=V(w);if(this._argList){var G=t.indexOf("{"),A=t.lastIndexOf("}");t=t.substring(G+1,A)}return t},t.prototype.open=function(w,t,G,A){this.setValue=t,this._argList=A,this.setTitle(G),this.setFormRows(),this.formPane.v("function",this.stringifyFunction(w)),this.show(this.editor.$38$)},t}(CG),RI=function(w){function G(t){_G(this,G);var A=lG(this,w.call(this));A.editor=t,A.formPane=new VG,A.formPane.addRow([{id:"object",element:kt()}],[.1],.1);var I=[];return I.push({label:R("editor.ok"),action:function(){A.ok()}}),I.push({label:R("editor.cancel"),action:function(){A.hide()}}),A.setConfig({title:R("editor.object"),closable:!0,draggable:!0,width:kG.config.objectViewSize.width,height:kG.config.objectViewSize.height,contentPadding:6,resizeMode:"wh",maximizable:!0,content:A.formPane,buttons:I,buttonsAlign:"right"}),A.setModal(!1),A}return yG(G,w),G.prototype.$48$=function(){this.hide()},G.prototype.$47$=function(){this.ok()},G.prototype.ok=function(){this.setValue&&this.setValue(t(this.formPane.v("object"))),this.hide()},G.prototype.open=function(w,t,G){if(this.setValue=t,this.setTitle(G),w=this.stringify(w,4)){this._funcMap;for(var A in this._funcMap)w=w.replace('"'+A+'"',V(this._funcMap[A]))}this.formPane.v("object",w),this.show(this.editor.$38$)},G.prototype.stringify=function(w,t){var G=this,A=Date.prototype.toJSON;Date.prototype.toJSON=function(){return"__ht__date"+this.getTime()},this._funcMap={};var I=JSON.stringify(w,function(w,t){if("function"==typeof t){var A=Math.random().toString().substring(3,16)+Date.now();return G._funcMap[A]=t,A}return t},null==t?2:t);return Date.prototype.toJSON=A,I},G}(CG),_I=function(w){function t(G){_G(this,t);var A=lG(this,w.call(this));A.editor=G,A.formPane=new VG,A.formPane.addRow([{id:"text",element:kt({value:"",language:"text",minimap:{enabled:!1}})}],[.1],.1);var I=[];return I.push({label:R("editor.ok"),action:function(){A.ok()}}),I.push({label:R("editor.cancel"),action:function(){A.hide()}}),A.setConfig({closable:!0,draggable:!0,width:kG.config.textViewSize.width,height:kG.config.textViewSize.height,contentPadding:6,resizeMode:"wh",maximizable:!0,content:A.formPane,buttons:I,buttonsAlign:"right"}),A.setModal(!1),A}return yG(t,w),t.prototype.$48$=function(){this.hide()},t.prototype.$47$=function(){this.ok()},t.prototype.ok=function(){this.setValue&&this.setValue(this.formPane.v("text").replace(/\r/g,"")),this.hide()},t.prototype.open=function(w,t,G){this.setValue=t,this.setTitle(G),this.formPane.v("text",w||""),this.show(this.editor.$38$)},t}(CG),rI=function(){function w(){_G(this,w)}return w.prototype.init=function(){var w=this.baseFonts=["monospace","sans-serif","serif"],t=this.testString="mmmmmmmmmmlli",G=this.testSize="72px",A=this.h=document.getElementsByTagName("body")[0],I=this.s=document.createElement("span");I.style.fontSize=G,I.innerHTML=t;var R=this.defaultWidth={},_=this.defaultHeight={};for(var r in w)I.style.fontFamily=w[r],A.appendChild(I),R[w[r]]=I.offsetWidth,_[w[r]]=I.offsetHeight,A.removeChild(I);this.initialized=!0},w.prototype.detect=function(w){this.initialized||this.init();var t=!1,G=this.baseFonts,A=this.s,I=this.h,R=this.defaultWidth,_=this.defaultHeight;for(var r in G){A.style.fontFamily=w+","+G[r],I.appendChild(A);var y=A.offsetWidth!=R[G[r]]||A.offsetHeight!=_[G[r]];I.removeChild(A),t=t||y}return t},w}(),yI=function(w){function t(G){_G(this,t);var A=lG(this,w.call(this));return A.editor=G,A}return yG(t,w),t.prototype.init=function(){var w=this;this._detector=new rI;var t=this.borderPane=new gG,G=this.rightBorder=new gG,A=this.previewGraph=new ht.graph.GraphView,I=this.listView=new oG,_=this.formPane=new VG;I.getView().style.borderRight="2px solid #f7f7f7",I.getLabelFont=function(w){return"14px "+w.getName()},t.setLeftView(I),t.setCenterView(G),t.setLeftWidth(180),G.setBottomView(A),G.setBottomHeight(120),G.setCenterView(_),A.adjustTranslateX=function(){return 0},A.adjustTranslateY=function(){return 0},A.handleScroll=function(){return!1},A.setScrollBarVisible(!1);var r=this.textNode=new ht.Text;r.s({"2d.selectable":!1,text:kG.config.fontPreview}),r.setAnchor(0,0),r.setSize(2e3,120),r.p(4,4),A.dm().add(r);_.setVPadding(32),_.setVGap(18),_.setHGap(0),_.addRow([{element:R("editor.font.style"),align:"right"},"",{id:"normal",button:this.createStyleButton(R("editor.font.normal"))},{id:"bold",button:this.createStyleButton(R("editor.font.bold"))},{id:"oblique",button:this.createStyleButton(R("editor.font.oblique"))},{id:"obliqueBold",button:this.createStyleButton(R("editor.font.obliquebold"))}],[60,8,.1,.1,.1,.1],32),_.addRow([{element:R("editor.font.size"),align:"right"},"",{id:"fontSize",slider:{max:72,min:12,step:1,onValueChanged:function(t,G){_.getItemById("fontSizeLabel").element=G+"",_.iv(),w._handleFontChange()}}},{id:"fontSizeLabel",element:"12"}],[60,8,.1,20],32),_.addRow([{element:R("editor.output"),align:"right"},"",{id:"fontOutput",textField:{editable:!1,value:this.getFontString()}}],[60,8,.1],32);var y=[];y.push({label:R("editor.ok"),action:function(){w.ok()}}),y.push({label:R("editor.cancel"),action:function(){w.hide()}}),this.initFontList(),this.setConfig({closable:!0,draggable:!0,width:kG.config.fontViewSize.width,height:kG.config.fontViewSize.height,contentPadding:6,resizeMode:"wh",maximizable:!0,content:t,buttons:y,buttonsAlign:"right"}),this._init=!0,this.setModal(!1)},t.prototype.createStyleButton=function(w){var t=this;return{label:w,groupId:"fontStyle",labelSelectColor:kG.config.color_select,labelColor:"#2c2c2c",borderSelectColor:"red",background:"rgb(247,247,247)",selectBackground:"rgb(247,247,247)",togglable:!0,borderColor:null,onClicked:function(w){t._handleFontChange()}}},t.prototype.initFontList=function(){var w=this,t=this.listView,G=t.getView().style,A=t.dm(),I=this._detector,R=kG.config.fontList,_=kG.config.ignoreFontDetection;return t.sm().ms(function(t){w._handleFontChange(t)}),R.forEach(function(w){if(_||I.detect(w)){var t=new ht.Node;t.setIcon(null),t.setName(w),A.add(t)}}),A.sm().setSelectionMode("multiple"),G.background="white",t},t.prototype.$48$=function(){this.hide()},t.prototype.$47$=function(){this.ok()},t.prototype._handleFontChange=function(){this.textNode.s("text.font",this.getFontString()),this.formPane.v("fontOutput",this.getFontString())},t.prototype.getFontString=function(){var w=this.listView,t=this.formPane,G=w.sm().getSelection().toArray(),A="",I=G.map(function(w){return w.getName()});return I.length||(I=["arial"]),["bold","oblique","obliqueBold"].forEach(function(w,G){t.getItemById(w).element.isSelected()&&(0===G?A="bold ":1===G?A="italic ":2===G&&(A="italic bold "))}),""+A+t.getValue("fontSize")+"px "+I.join(", ")},t.prototype.ok=function(){this.setValue&&this.setValue(this.getFontString()),this.hide()},t.prototype.analysisFontString=function(){var w=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ht.Default.labelFont;"string"!=typeof w&&(w=ht.Default.labelFont);var t=w.split(/px\s+/);t.length<2&&(t=ht.Default.labelFont.split(/px\s+/));var G=t[0].split(/\s+/),A=t[1].split(",").map(function(w){return w.trim()}),I=/\d+/,R=void 0,_=void 0,r=void 0;G.forEach(function(w){"bold"===w?R=!0:"oblique"===w||"italic"===w?_=!0:I.test(w)&&(r=parseInt(w))}),this.setFormValue(r,A,R,_)},t.prototype.setFormValue=function(w,t,G,A){var I=this.listView,R=this.formPane;I.sm().cs(),I.dm().each(function(w){t.forEach(function(t){w.getName().toLowerCase()===t.toLowerCase()&&I.sm().as(w)})});var _=0;G&&A?_=3:G?_=1:A&&(_=2),["normal","bold","oblique","obliqueBold"].forEach(function(w,t){R.getItemById(w).element.setSelected(_===t)}),R.getItemById("fontSizeLabel").element=w+"",R.setValue("fontSize",w)},t.prototype.open=function(w,t,G){this._init||this.init(),this.setValue=t,this.setTitle(G),this.analysisFontString(w),this.show(this.editor.$38$)},t}(CG),lI=300,CI=230,VI=function(w){function G(t){_G(this,G);var A=lG(this,w.call(this));A.editor=t,A.addRow([{id:"content",element:kt()}],[.1],.1),A.addRow([null,{button:{label:R("editor.ok"),onClicked:function(){A.hide(!0)}}},{button:{label:R("editor.cancel"),onClicked:function(){A.hide()}}}],[.1,50,50]),A.setWidth(lI),A.setHeight(CI),A.getView().className="ht-editor-styleicons",A.getView().style.background=kG.config.color_pane,A.getView().style.border=kG.config.color_pane_dark+" solid 1px",A.getView().style.boxShadow="0px 0px 3px "+ht.Default.toolTipShadowColor,A.getView().style.overflow="visible";var I=function(w){!A.getView().parentNode||A.button.getView().contains(w.target)||A.getView().contains(w.target)||A.hide()};return window.addEventListener("mousedown",I,!1),window.addEventListener("touchstart",I,!1),A}return yG(G,w),G.prototype.toggle=function(w,t){this.getView().parentNode?this.hide():this.show(w,t)},G.prototype.show=function(w,t){if(!this.getView().parentNode){var G=w.getView().getBoundingClientRect(),A=(this.getView().style,U());ht.Default.appendToScreen(this),this.getView().style.top=A.top+G.top+"px",this.getView().style.left=A.left+G.left-lI-4+"px",this.iv(),this.button=w,this.data=t;var I=t.s("icons");this.v("content",I?H(I,void 0,!1):"")}},G.prototype.hide=function(){var w=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.getView().parentNode&&(h(this.getView()),w&&this.data.s("icons",t(this.v("content"))))},G}(VG),qI=function(){function w(t){var G=this;_G(this,w),this.editor=t;var A=this.container=ht.Default.createDiv(),I=this.wrap=ht.Default.createDiv(),R=A.style;R.pointerEvents="none",R.position="absolute",R.left=0,R.right=0,R.top=0,R.bottom=0,A.appendChild(I),R=I.style,R.width="600px",R.position="absolute",R.left="50%",R.bottom="20px",R.marginLeft="-300px",R.pointerEvents="none",this._cache=[],this._visibleCount=0,this.layoutContainer(),window.addEventListener("resize",function(){G.layoutContainer()})}return w.prototype.layoutContainer=function(){var w=this.container,t=ht.Default.getWindowInfo(),G=w.style;G.width=t.width+"px",G.height=t.height+"px"},w.prototype.createMessage=function(w){var t=this._cache.pop();if(!t){t=document.createElement("div");var G=t.style;G.boxSizing="border-box",G.padding=0,G.backgroundColor="rgba(61,61,61,0.15)",G.color="rgb(247,247,247)",G.margin="5px auto",G.textAlign="center",G.borderRadius="19px",G.height=0,G.overflow="hidden",G.pointerEvents="none",G.webkitTransition="0.3s all",G.mozTransition="0.3s all",G.msTransition="0.3s all",G.oTransition="0.3s all",G.transition="0.3s all"}return t.innerText=w,t},w.prototype.show=function(w){var t=this,G=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"normal",A=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2e3,I=this.createMessage(w);this.wrap.appendChild(I),this._visibleCount||ht.Default.appendToScreen(this.container),this._visibleCount++,I.style.backgroundColor="normal"===G?"rgba(61,61,61,0.15)":"#FF7C7C",setTimeout(function(){I.style.height="",I.style.padding="8px 20px",t.hideLater(I,A)},10)},w.prototype.hideLater=function(w,t){var G=this;setTimeout(function(){w.style.height=0,w.style.padding=0,setTimeout(function(){if(G.wrap.removeChild(w),G._cache.push(w),!--G._visibleCount){G.container.parentNode.removeChild(G.container)}},500)},t)},w}(),kI=function(w){function t(G){_G(this,t);var A=lG(this,w.call(this));return A.editor=G,A}return yG(t,w),t.prototype.init=function(){var w=this,t=this.dm=new ht.DataModel,G=this.gv=new ht.graph.GraphView(t),A=this.rightFormPane=new VG,I=this.splitView=new PG(G,A,"h",.6),_=this.targetNode=new ht.Node;_.setAnchor(0,0),_.p(0,0),_.s("2d.selectable",!1),G.dm().add(_),G.setEditable(!0),G.addBottomPainter(function(w){var t=this.getViewRect();w.fillStyle="#cbd3d8",w.fillRect(t.x,t.y,t.width,t.height);var G=_.getRect();w.fillStyle="#fff",w.fillRect(G.x,G.y,G.width,G.height)});var r=[{label:R("editor.ok"),action:function(){w.editor.dm.a("attachPoints",w.toPointsData()),w.hide()}},{label:R("editor.cancel"),action:function(){w.hide()}}];this.setConfig({title:"\u5438\u9644\u70b9",content:I,closable:!0,draggable:!0,maximizable:!0,resizeMode:"wh",buttons:r,width:kG.config.attachPointsViewSize.width,height:kG.config.attachPointsViewSize.height}),this.$80$(),t.md(function(w){if("position"===w.property&&w.data!==_){var t=w.data,G=t.a("offsetX"),A=t.a("offsetY"),I=w.newValue.x-G,R=w.newValue.y-A;t.a({x:parseFloat((I/_.getWidth()).toFixed(2)),y:parseFloat((R/_.getHeight()).toFixed(2))})}}),G.mp(function(w){if("zoom"===w.property){var A=1/G.getZoom();t.each(function(w){w!==_&&w.setScale(A,A)})}}),this._init=!0},t.prototype.$80$=function(){var w=this,t=new jG(this.dm),G=this.tableView=t.getTableView();G.isVisible=function(t){return t!==w.targetNode},G.setEditable(!0),t.getView().style.border=kG.config.color_line+" solid 1px",t.addColumns([this.$73$("x",R("editor.attach.x"),70,function(t,G,A,I){var R=w.targetNode.getWidth();t.setX(R*A+(t.a("offsetX")||0))}),this.$73$("y",R("editor.attach.y"),70,function(t,G,A,I){var R=w.targetNode.getHeight();t.setY(R*A+(t.a("offsetY")||0))}),this.$73$("offsetX",R("editor.attach.offsetX"),70,function(t,G,A,I){t.a("offsetX",A);var R=w.targetNode.getWidth();t.setX(R*t.a("x")+A)}),this.$73$("offsetY",R("editor.attach.offsetY"),70,function(t,G,A,I){t.a("offsetY",A);var R=w.targetNode.getHeight();t.setY(R*t.a("y")+A)})]);var A=kG.config.customAttachPointsColumns;if(A&&A.length){var I=this.customColumns=A.map(function(t){return w.$73$(t.name,t.displayName,t.width||70,t.setter,"string")});t.addColumns(I)}this.rightFormPane.addRow([t],[.1],200),this.rightFormPane.addRow([{button:{icon:"editor.add",toolTip:R("editor.add"),onClicked:function(){w.add()}}},{button:{icon:"editor.delete",toolTip:R("editor.delete"),onClicked:function(){w.remove()}}}],[20,20],20)},t.prototype.add=function(){var w=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,G=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,A=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,I=arguments[4],R=new ht.Node,_=1/this.gv.getZoom();if(R.setImage("editor.attachPoint"),R.setScale(_,_),R.a({x:w,y:t,offsetX:G,offsetY:A}),R.s({"2d.editable":!1}),I)for(var r in I)"x"!==r&&"y"!==r&&"offsetX"!==r&&"offsetY"!==r&&R.a(r,I[r]);var y=this.targetNode.getWidth(),l=this.targetNode.getHeight();return R.p(w*y+G,t*l+A),this.gv.dm().add(R),R},t.prototype.remove=function(){for(var w=this.dm.sm().getSelection().toArray(),t=w.length-1;t>=0;t--)this.dm.remove(w[t])},t.prototype.$73$=function(w,t,G,A){var I=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"number";return{name:w,tag:w,width:G,displayName:t,align:"center",editable:!0,valueType:I,getValue:function(t){return t.a(w)},setValue:A}},t.prototype.toPointsData=function(){var w=this;return this.dm.toDatas(function(t){return t!==w.targetNode}).toArray().map(function(t){var G={x:t.a("x"),y:t.a("y")};return t.a("offsetX")&&(G.offsetX=t.a("offsetX")),t.a("offsetY")&&(G.offsetY=t.a("offsetY")),w.customColumns&&w.customColumns.forEach(function(w){var A=t.a(w.name);A&&(G[w.name]=A)}),G})},t.prototype.$48$=function(){this.hide()},t.prototype.createNodeByPointData=function(){var w=this,t=this.editor.dm.a("attachPoints");t&&t.forEach(function(t){w.add(t.x,t.y,t.offsetX,t.offsetY,t)})},t.prototype.show=function(t){this._init||this.init(),this.dm.clear(),this.dm.add(this.targetNode),this.targetNode.setImage(t),this.createNodeByPointData(),w.prototype.show.call(this,this.editor.$38$),this.gv.fitContent(!0)},t}(CG),ZI=function w(t,G){var A=this;_G(this,w),this.editor=t,this.inspector=G,["isDataTitleVisible","isDataPropertyVisible","isCompTitleVisible","isCompPropertyVisible","isDisplayTitleVisible","isDisplayPropertyVisible","isSymbolTitleVisible","isSymbolPropertyVisible","isData3dTitleVisible","isData3dPropertyVisible","isSceneTitleVisible","isScenePropertyVisible"].forEach(function(w){var I=kG.config.detailFilter,R=kG.config.compactFilter,_=C(R);A[w]=function(){if(I[w]&&!I[w].apply(G,arguments))return!1;if(kG.config.commonAndAdvancedFilterMode){if(t.inspectorCompact)return!(R[w]&&!R[w].apply(G,arguments));if(_)return!0;if(R[w]&&!R[w].apply(G,arguments))return!0;if(w.indexOf("Title")>0)return!0;var A=G._currentTitle;return!("isDataPropertyVisible"!==w||!R.isDataTitleVisible||R.isDataTitleVisible.call(G,arguments[0],arguments[1],A))||(!("isCompPropertyVisible"!==w||!R.isCompTitleVisible||R.isCompTitleVisible.call(G,arguments[0],arguments[1],A))||(!("isDisplayPropertyVisible"!==w||!R.isDisplayTitleVisible||R.isDisplayTitleVisible.call(G,arguments[0],A))||(!("isSymbolPropertyVisible"!==w||!R.isSymbolTitleVisible||R.isSymbolTitleVisible.call(G,arguments[0],A))||(!("isData3dPropertyVisible"!==w||!R.isData3dTitleVisible||R.isData3dTitleVisible.call(G,arguments[0],arguments[1],A))||!("isScenePropertyVisible"!==w||!R.isSceneTitleVisible||R.isSceneTitleVisible.call(G,arguments[0],A))))))}return!(t.inspectorCompact&&R[w]&&!R[w].apply(G,arguments))}})},zI=ht.Default.labelColor,xI=function(w){function t(G){_G(this,t);var A=lG(this,w.call(this,G)),I=A.gv=new ht.graph.GraphView,R=I.dm();I.setMovableFunc(function(){return!1}),I.setZoomable(!1),I.setPannable(!1),I.setPannable(!1),I.setRectSelectable(!1),I.setScrollBarVisible(!1),I.sm().setSelectionMode("single"),R.setBackground(kG.config.color_pane);for(var _=1;_<56;_++){var r=new ht.Node;r.setTag(_),r.setRect(80,60,300,160),r.s({label:"   "+_+"   ","label.position":_,"label.offset.x":0,"label.offset.y":0,"label.color":zI,"label.font":"18px Arial",shape:"rect","shape.background":null,"shape.border.width":1,"select.width":0,interactive:!0}),R.add(r)}I.sm().ms(function(w){!A._openSetting&&I.sm().ld()&&G.close()});var y=ht.Default.brighter(kG.config.color_select,50);return I.mi(function(w){var t=w.data,G=w.kind;"onEnter"===G?(t._hover=!0,t.iv()):"onLeave"===G&&(t._hover=!1,t.iv())}),I.getLabelBackground=function(w){return I.isSelected(w)?kG.config.color_select:w._hover?y:null},A}return yG(t,w),t.prototype.getView=function(){return this.gv.getView()},t.prototype.getValue=function(){var w=this.gv.sm().ld();return w?w.s("label.position"):this._sourceValue},t.prototype.getWidth=function(){return 360},t.prototype.getHeight=function(){return 220},t.prototype.onOpened=function(w){var t=this.gv,G=t.dm().getDataByTag(w);this._openSetting=!0,t.sm().ss(G),this._openSetting=!1,this._sourceValue=w,t.fitContent(!1,0)},t.prototype.onClosed=function(){},t}(ht.widget.BaseDropDownTemplate),LI=function(w){function t(G,A,I){var R=arguments.length>3&&void 0!==arguments[3]&&arguments[3];_G(this,t);var _=lG(this,w.call(this));_.setHPadding(8),_.setVPadding(0);var r=kG.config.indent,y=_.getHGap();return _.indent=r,_.indent2=kG.config.indent2,_.w1=[r,.1],_.w1w1=[r,.1,r,.1],_.wcc=[r,40+2*y+"+0.1",r,20,.1,20],_.w2=[r-20-y,20,.1,r,.1],_.w3=[r-20-y,20,.1,20,.1,20,.1],_.w20=20+y+"+0.1",_.global=R,_.editor=G,_.name=A,_.type=I,_.inspectorFilter=new ZI(G,_),_.updateHandlers=[],_.propertyChangeHandlers=[],_.editor.fireEvent("inspectorInitializing",{inspector:_}),_.initForm(),_.editor.fireEvent("inspectorInitialized",{inspector:_}),_.editor.fireEvent("inspectorCreated",{inspector:_}),_.$46$=_._rows,_}return yG(t,w),t.prototype.initForm=function(){},t.prototype.beginTransaction=function(){this.dataModel&&this.dataModel.beginTransaction()},t.prototype.endTransaction=function(){this.dataModel&&this.dataModel.endTransaction()},t.prototype.addUpdateHandler=function(w){this.updateHandlers.push(w)},t.prototype.removeUpdateHandler=function(w){l(this.updateHandlers,w)},t.prototype.addPropertyChangeHandler=function(w){this.propertyChangeHandlers.push(w)},t.prototype.removePropertyChangeHandler=function(w){l(this.propertyChangeHandlers,w)},t.prototype.$102$=function(){for(var w=this._rows,t=!0,G=w.length-1;G>=0;G--)w[G].title?t?this.removeRow(w[G]):t=!0:t=!1},t.prototype.isTitleVisible=function(w){return!1!==w.visible&&(!Sw(w.visible)||!1!==w.visible(this))},t.prototype.isPropertyVisible=function(w){if(!1===w.visible)return!1;if(Sw(w.visible)&&!w.visible(this))return!1;var t=this.editor.inspectorInputFilter;if(t){if(!w.keys)return!1;t=t.toLowerCase();var G=w.keys.name;if(G&&G.toLowerCase().indexOf(t)>=0)return!0;var A=w.keys.displayName;return!!(A&&A.toLowerCase().indexOf(t)>=0)}return!0},t.prototype.makeItemsHidden=function(w){var t=this;w.hidden=!0,w.forEach(function(w){var G=t.getItemView(w);G&&(G.style.display="none")})},t.prototype.makeItemsVisible=function(w){var t=this;w.hidden=!1,w.forEach(function(w){var G=t.getItemView(w);G&&(G.style.display="block")})},t.prototype.filterPropertiesLater=function(){var w=this;this._filterPropertiesLater||(this._filterPropertiesLater=!0,requestAnimationFrame(function(){w.filterProperties()}))},t.prototype.isTitleExpanded=function(w){return!(w&&!this.editor.inspectorInputFilter)||kG.config.expandedTitles[w]},t.prototype.filterProperties=function(){var w=this;this._filterPropertiesLater=!1;var t=[];this._currentTitle=null;var G=!1;this.$46$.forEach(function(A){var I=A.items;A.title?(!G&&"$$HTISFUCKINGAWESOME$$"!==w._currentTitle&&t.length&&t[t.length-1].title&&w.makeItemsHidden(t.pop().items),w.isTitleVisible(A)?(w._currentTitle=A.title,A.button.setIcon(w.isTitleExpanded(w._currentTitle)?"expandIcon":"collapseIcon"),t.push(A),w.makeItemsVisible(I)):(w._currentTitle="$$HTISFUCKINGAWESOME$$",w.makeItemsHidden(I)),G=!1):"$$HTISFUCKINGAWESOME$$"===w._currentTitle?w.makeItemsHidden(I):(w.isTitleExpanded(w._currentTitle)&&w.isPropertyVisible(A)?(t.push(A),w.makeItemsVisible(I)):w.makeItemsHidden(I),!G&&w.isPropertyVisible(A)&&(G=!0))}),
!G&&"$$HTISFUCKINGAWESOME$$"!==this._currentTitle&&t.length&&t[t.length-1].title&&this.makeItemsHidden(t.pop().items),this._currentTitle=null,this._rows=t,this.updateProperties(),this.iv()},t.prototype.addTitle=function(w,t){var G=this;t=t||{};var A=this._oldTitle;this.editor.fireEvent("titleCreating",{oldTitle:A,title:w,inspector:this});var I=function(){kG.config.expandedTitles[w]=!kG.config.expandedTitles[w],G.filterProperties()},_=[],r=this.addButton(_,null,null,null,I,!0);r.setBorderColor(null),t.icon&&this.addImage(_,function(){return t.icon});var y=R("editor."+w.toLowerCase(),!0)||R(w);_.push({element:y,font:kG.config.boldFont}),t.title=w,t.background||(t.background=kG.config.inspectorTitleBackground||kG.config.color_pane_dark),t.button=r;var l=[20,.1];t.icon&&(l=[20,20,.1]);var C=t.buttons;if(C){var V=void 0,q=void 0;if(Nw(C)?V=C:(V=C.items,q=C.widths),!q){q=[];for(var k=0,Z=V.length;k<Z;k++)q.push(20)}_.push.apply(_,V),l.push.apply(l,q)}var z=this.addRow(_,l,kG.config.inspectorTitleHeight||null,t);return this._oldTitle=w,this.editor.fireEvent("titleCreated",{oldTitle:A,title:w,inspector:this}),z},t.prototype.$34$=function(w){var t=this;w&&(this.propertyChangeHandlers.forEach(function(G){G(w,t)}),this.$46$.forEach(function(G){G.onPropertyChanged&&G.onPropertyChanged(w,t)})),this._updatePropertiesLater||(this._updatePropertiesLater=!0,requestAnimationFrame(function(){t.updateProperties()}))},t.prototype.updateProperties=function(){this._updating=!0,this.updateHandlers.forEach(function(w){w()}),this.editor.fireEvent("propertiesUpdated",{inspector:this}),this._updating=!1,this._updatePropertiesLater=!1},t.prototype.eachSelection=function(w){this.dataModel&&(this.beginTransaction(),this.dataModel.sm().each(function(t){w(t)}),this.endTransaction())},t.prototype.getPropertyValue=function(w,t){t=this.fixAccessType(t);var G=Z(t,w);return this.getValue(G)},t.prototype.setPropertyValue=function(w,t,G,A){G=this.fixAccessType(G);var I=z(G,w);I.once=A,this.setValue(I,t)},t.prototype.getValue=function(w){if(this.dataModel)return this.global?w(this.dataModel):this.data?w(this.data):void 0},t.prototype.setValue=function(w,t,G){!this._updating&&this.dataModel&&this.editor.editable&&(this.beginTransaction(),this.global?w(this.dataModel,G?G():t):w.once?this.data&&w(this.data):this.dataModel.sm().each(function(A){w(A,G?G():t)}),this.endTransaction())},t.prototype.addLabelArray=function(w,t,G,A,I,R){return this.addLabel(w,t,G,A,void 0,R),this.addArray(w,G,A,I)},t.prototype.addLabelTextArea=function(w,t,G,A,I){return this.addLabel(w,t,G,A,void 0,I),this.addTextArea(w,G,A)},t.prototype.addLabelMultiline=function(w,t,G,A,I){var R=this,_=this.addLabelInput(w,t,G,A,void 0,void 0,void 0,I);return this.addButton(w,"...",null,null,function(w){var I=function(w){R.setValue(A,w)};R.editor.textView.open(R.getValue(G),I,t)},!0),_},t.prototype.addLabelInput=function(w,t,G,A,I,R,_,r){return this.addLabel(w,t,G,A,R,r),this.addInput(w,G,A,I,_,R)},t.prototype.addLabelRange=function(w,t,G,A,I,R,_,r,y){var l=this,C=function(w){var t=G(w);return null==t?R:t};return this.addLabelInput(w,t,C,A?function(w,t){void 0!==R&&t>R&&(t=R),void 0!==I&&t<I&&(t=I);var G=C(w);A(w,t),G!==t||G!==R&&G!==I||l.updateProperties()}:null,r,_,void 0,y)},t.prototype.addLabelPosition=function(w,t,G,A,I){var R=this,_=function(w){var t=G(w);return null==t?1:t},r=function(w,t){t>55&&(t=55),t<1&&(t=1),A(w,t)};this.addLabel(w,t,_,r,1,I);var y=new ht.widget.MultiComboBox;return y.setEditable(!0),y.setDropDownComponent(xI),y.onValueChanged=function(w,t){R.setValue(A,t)},w.push(y),this.updateHandlers.push(function(){var w=R.getValue(_);y.setValue(w)}),y},t.prototype.addLabelColor=function(w,t,G,A,I){return this.addLabel(w,t,G,A,void 0,I),this.addColor(w,G,A)},t.prototype.addLabelCheckBox=function(w,t,G,A,I){return this.addLabel(w,t,G,A,void 0,I),this.addCheckBox(w,G,A)},t.prototype.addLabelFunction=function(w,t,G,A,I,R,_){return this.addLabel(w,t,G,A,void 0,_),this.addFunction(w,G,A,I,R)},t.prototype.addLabelDataModel=function(w,t,G,A,I,R,_){return this.addLabel(w,t,G,A,void 0,_),this.addDataModel(w,G,A,I,R)},t.prototype.addLabelObject=function(w,t,G,A,I,R){return this.addLabel(w,t,G,A,void 0,R),this.addObject(w,G,A,I)},t.prototype.addLabelComboBox=function(w,t,G,A,I,R,_,r){return this.addLabel(w,t,G,A,void 0,r),this.addComboBox(w,G,A,I,R,_)},t.prototype.addLabelComboBoxURL=function(w,t,G,A,I,R,_,r,y){var l=this;this.addLabel(w,t,G,A,void 0,y);var C=this.addComboBox(w,G,A,I,R,_);return A&&(C.setEditable(!0),ft(C,r||function(w,t){return!!t.view.draggingData},function(w){var t=C.getView().value=w.getFileUUID();l.setValue(A,t)})),C},t.prototype.addLabelURL=function(w,t,G,A,I,R){var _=this.addLabelInput(w,t,G,A,null,null,!1,R);return A&&ft(_,I||function(w,t){return!!t.view.draggingData},function(w){_.getElement().value=w.getFileUUID(),_.handleChange()}),_},t.prototype.addLabelImage=function(w,t,G,A,I){var R=function(w,t){if(!t.view.draggingData)return!1;var G=t.view.draggingData.fileType;return G===QG||G===JG};return this.addLabelURL(w,t,G,A,R,I),this.addImage(w,G,A)},t.prototype.addLabelData=function(w,t,G,A,I){var R=this,_=this.addLabelInput(w,t,function(w){var t=G(w);return t?t.toLabel()||t.getClassName():""},void 0,void 0,void 0,void 0,I);A&&(ft(_,function(w,t){return t.view.draggingData&&R.dataModel===t.view.draggingData.getDataModel()},function(w){R.setValue(A,w)}),_.getElement().onkeydown=function(w){f(w)&&R.setValue(A,null)});var r=new ht.widget.Image;return r.drawImage=function(w,t,G,A,I,_){var y=r.data,l=R.editor.list;y&&l&&l.dm().contains(y)&&(t=l.getIcon(y))&&d(w,ht.Default.getImage(t),"centerUniform",G,A,I,_,y,l)},this.updateHandlers.push(function(){if(!w.hidden){var t=r.data;r.data=R.getValue(G),r.fp("data",t,r.data)}}),w.push(r),_},t.prototype.addLabelGradient=function(w,t,G,A,I,R){var _=this,r=[],y=function(){return _.data&&_.data.s(I)||kG.config.color_light},l=function(){return _.data&&_.data.s(A)||kG.config.color_select};kG.consts.gradients.forEach(function(w){w?r.push({width:20,height:14,comps:[{type:"rect",rect:[0,0,20,14],gradient:w,gradientColor:{func:y},background:{func:l}}]}):r.push({width:20,height:14,comps:[]})});var C=this.addLabelComboBox(w,t,function(w){return w.s(G)},function(w,t){w.s(G,t)},kG.consts.gradients,null,r,R);return this.updateHandlers.push(function(){if(!w.hidden){var t=y(),G=l();C._lastGradientColor===t&&C._lastBackground===G||(C._lastGradientColor=t,C._lastBackground=G,C.iv())}}),C},t.prototype.addLabelFont=function(w,t,G,A,I){var R=this,_=this.addLabelInput(w,t,function(w){return G(w)||ht.Default.labelFont},A?function(w,t){A(w,t||void 0)}:null,void 0,void 0,void 0,I);return this.addButton(w,"...",null,null,function(w){var I=function(w){R.setValue(A,w)};R.editor.fontView.open(R.getValue(G),I,t)},!0),_},t.prototype.addLabelRotation=function(w,t,G,A,I,R,_,r){return this.addLabelInput(w,t,function(w){return null==G(w)?R:180/Math.PI*G(w)},A?function(w,t){t=t*Math.PI/180,void 0!==R&&t>R&&(t=R),void 0!==I&&t<I&&(t=I),A(w,t)}:null,"number",_||1,void 0,r)},t.prototype.addLabelAlign=function(w,t,G,A,I){return this.addLabelComboBox(w,t,function(w){return G(w)||"center"},A,kG.consts.aligns,kG.consts.alignLabels,void 0,I)},t.prototype.addLabelVAlign=function(w,t,G,A,I){return this.addLabelComboBox(w,t,function(w){return G(w)||"bottom"},A,kG.consts.vAligns,kG.consts.vAlignLabels,void 0,I)},t.prototype.addLabelStretch=function(w,t,G,A,I){return this.addLabelComboBox(w,t,function(w){return G(w)||"fill"},A,kG.consts.stretchs,kG.consts.stretchLabels,void 0,I)},t.prototype.addLabelOrientation=function(w,t,G,A,I){return this.addLabelComboBox(w,t,function(w){return G(w)||"top"},A,kG.consts.orientations,kG.consts.orientationLabels,void 0,I)},t.prototype.addLabelLabel=function(w,t,G,A,I){return this.addLabelInput(w,t,function(w){var t=G(w);return t&&t.replace&&(t=t.replace(/\n/g,"\\n")),t},A?function(w,t){t&&t.replace&&(t=t.replace(/\\n/g,"\n")),A(w,t)}:null,void 0,void 0,void 0,I)},t.prototype.toDisplayName=function(w){var t="";return w.forEach(function(w){if(w)if(fw(w))t+=w;else if(fw(w.element))t+=w.element;else{if(!w.element)return;w.element.innerHTML&&(t+=w.element.innerHTML)}}),t},t.prototype.addLabel=function(w,t,G,A,I,R){var _=this,r=void 0,y=!1,l=G&&A&&I,C=kG.config.dataBindings;if(R&&C.onButtonClicked&&(!C.filter||C.filter(R.accessType,R.name,this))&&(y=!0),y||l){r=At(t,w.length?"right":"left"),w.push(r),r.style.cursor=l?"ew-resize":"pointer";var V=function(w){w.preventDefault(),_.beginTransaction();var t=l?_.getValue(G)||0:0,r=N(w).x,C=!1,V=function(w){if(w.preventDefault(),l){var G=t+(N(w).x-r)*(Sw(I)?I():I);_.setValue(A,G),C=!0}};window.addEventListener("mousemove",V,!1),window.addEventListener("touchmove",V,!1);var q=function(w){_.endTransaction(),w.preventDefault(),window.removeEventListener("mousemove",V,!1),window.removeEventListener("touchmove",V,!1),window.removeEventListener("mouseup",q,!1),window.removeEventListener("touchend",q,!1),y&&!C&&kG.config.dataBindings.onButtonClicked(_.data,R.accessType,R.name,_.editor)};window.addEventListener("mouseup",q,!1),window.addEventListener("touchend",q,!1)};r.addEventListener("mousedown",V,!1),r.addEventListener("touchstart",V,!1)}else r={element:t,align:w.length?"right":"left"},w.push(r);return y&&this.updateHandlers.push(function(){if(_.data){var w=kG.config.isDataBound(_.data,R.accessType,R.name);r.style.color=w?kG.config.color_select:kG.config.color_dark}}),r},t.prototype.createHandleChange=function(w,t,G){var A=this;return function(){var I=w.value;if("pattern"===G)if(I=I.trim()){if(I.indexOf("[")<0||I.indexOf("]")<0)return;if(I=I.replace("[","").replace("]","").split(","),I.length){for(var R=[],_=0;_<I.length;_++){var r=parseFloat(I[_]);if(isNaN(r))return;R.push(r)}I=R}else I=void 0}else I=void 0;else if("number"===G){if(I=parseFloat(I),isNaN(I))return}else if("int"===G){if(I=parseInt(I),isNaN(I))return}else I||(I=void 0);A.setValue(t,I)}},t.prototype.createArrayIndexColumn=function(w,t,G,I){var _=this,r=w[t],y="object"===I?H(r,null,!1):r;return{name:t,width:50,align:"center",editable:!!G,sortable:!1,clickable:!1,getValueType:function(w){return I},getValue:function(w){return y},setValue:function(I,R,r,y){_.setValue(G,void 0,function(){var G=w.slice();return G[t]=A(r),G})},isCellEditable:function(w,G,A,y){if(!_.editor.editable)return!1;if("object"===I){var l=R("editor.object")+" ["+t+"]";return _.editor.objectView.open(r,function(t){G.setValue(w,G,t,y)},l),!1}return!0}}},t.prototype.addArray=function(w,t,G,A){var I=this,_=new jG;_.getTableHeader().setMovable(!1),_.getView().style.border=kG.config.color_line+" solid 1px";var r=_.getTableView();return r.getDataModel().add(new ht.Data),this.updateHandlers.push(function(){if(!w.hidden){var y=I.getValue(t);if(r.getColumnModel().clear(),_.addColumns([{name:R("editor.length"),width:50,align:"center",editable:!!G,sortable:!1,clickable:!1,valueType:"int",getValue:function(w){return y?y.length:0},setValue:function(w,t,R,_){I.setValue(G,void 0,function(){if(R>=0){var w=Ct(y,R);return"number"===A||"int"===A?yt(w):"color"===A&&lt(w),w}})}}]),y){for(var l=[],C=0;C<y.length;C++)l.push(I.createArrayIndexColumn(y,C,G,A));_.addColumns(l)}}}),w.push(_),_},t.prototype.addTextArea=function(w,t,G){var A=this,I=new ht.widget.TextArea,R=I.getElement();return G?(R.onblur=function(){A.setValue(G,R.value)},R.forceOnblur=R.onblur):I.setEditable(!1),this.updateHandlers.push(function(){if(!w.hidden){var G=A.getValue(t);null==G&&(G=""),R.value!==G&&(R.value=G)}}),w.push(I),I},t.prototype.addInput=function(w,t,G,A,R,_){var r=this,y=new ht.widget.TextField;"number"!==A&&"int"!==A||(y.setType("number"),iw(_)&&(y.getElement().step=_));var l=y.getElement();if(G){var C=this.createHandleChange(l,G,A);y.handleChange=C,R?(l.onkeyup=C,l.onchange=C):(l.onblur=C,l.forceOnblur=l.onblur,l.onkeydown=function(w){B(w)&&C()})}else y.setEditable(!1);return this.updateHandlers.push(function(){if(!w.hidden){var G=r.getValue(t);"pattern"===A?G=G?"["+G.join()+"]":"":"number"===A?G=I(parseFloat(G||0)):"int"===A?G=parseInt(G||0):null==G&&(G=""),l.value!==G&&(fw(G)&&G.length>1e3&&G.startsWith("data:image")&&(G=G.substr(0,10)+"[...]"),l.value=G)}}),w.push(y),y},t.prototype.addColor=function(w,t,G){var A=this,I=new ht.widget.ColorPicker;return G?(I.setInstant(!0),I.onValueChanged=function(){A.setValue(G,I.getValue())},I.addViewListener(function(w){"open"===w.kind?A.beginTransaction():"close"===w.kind&&A.endTransaction()})):I.setDisabled(!0),this.updateHandlers.push(function(){if(!w.hidden){var G=A.getValue(t);void 0===G&&(G=null),I.getValue()!=G&&I.setValue(G)}}),w.push(I),I},t.prototype.addImage=function(w,t,G){var A=this,I=new ht.widget.Image;return nt(I,this.editor),this.updateHandlers.push(function(){if(!w.hidden||w.forceToUpdate){var G=A.getValue(t);I.setExtraInfo(G)}}),w.push(I),I},t.prototype.addCheckBox=function(w,t,G){var A=this,I=new ht.widget.CheckBox;return G?(I.handleClick=function(){A.editor.editable&&I.setSelected(!I.isSelected())},I.onValueChanged=function(){A.setValue(G,I.getValue())}):I.setDisabled(!0),this.updateHandlers.push(function(){if(!w.hidden){var G=!!A.getValue(t);I.getValue()!==G&&I.setValue(G)}}),w.push(I),I},t.prototype.addFunction=function(w,t,G,A,I){var _=this,r=function(){var w=R("editor.function")+" - "+(A||""),r=function(w){_.setValue(G,w)};_.editor.functionView.open(_.getValue(t),r,w,I)},y=It(A,null,null,r);return w.push(y),this.updateHandlers.push(function(){if(!w.hidden){var G=_.getValue(t);y.setLabel(A||V(G)),y.setLabelColor(G?kG.config.color_select:ht.Default.labelColor)}}),y},t.prototype.addDataModel=function(w,t,G,A,I){var R=this,_=function(){var w=function(w){R.setValue(G,w)};R.editor.dataModelView.open(R.getValue(t),w,R.editor.editable,I)},r=It(A,null,null,_);return w.push(r),this.updateHandlers.push(function(){if(!w.hidden){var G=R.getValue(t);r.setLabel(A),r.setLabelColor(G?kG.config.color_select:ht.Default.labelColor)}}),r},t.prototype.addObject=function(w,t,G,A){var I=this,_=function(){var w=R("editor.object")+" - "+(A||""),_=function(w){I.setValue(G,w)};I.editor.objectView.open(I.getValue(t),_,w)},r=It(A,null,null,_);return w.push(r),this.updateHandlers.push(function(){if(!w.hidden){var G=I.getValue(t);r.setLabel(A||H(G,null,!1)),r.setLabelColor(void 0!==G?kG.config.color_select:ht.Default.labelColor)}}),r},t.prototype.addComboBox=function(w,t,G,A,I,R){var _=this,r=new ht.widget.ComboBox;return r.setValues(A),r.setLabels(I),r.setIcons(R),r.setDisabled(!G),G&&(r.onValueChanged=function(){_.setValue(G,r.getValue())}),this.updateHandlers.push(function(){if(!w.hidden){var G=_.getValue(t);r.getValue()!==G&&r.setValue(G)}}),R&&R[0].width&&r.setIndent(R[0].width+4),w.push(r),r},t.prototype.addButton=function(w,t,G,A,I,R){var _=this,r=function(){_.global||R?I():_.eachSelection(I)},y=It(t,G,A,r);return w.push(y),y},t.prototype.addDBRow=function(w,t,G,A,I,R,_){var r=this,y=w.length,l=this.indent,C=void 0;if(!kG.config.dataBindings.onButtonClicked||!1===_||kG.config.dataBindings.filter&&!kG.config.dataBindings.filter(t,G,this))R?C=this.addRow(w,R,I,A):2===y?C=this.addRow(w,[l,.1],I,A):3===y?C=this.addRow(w,[l,.1,20],I,A):4===y?C=this.addRow(w,[l,.1,20,20],I,A):5===y?C=this.addRow(w,[l,.1,20,20,20],I,A):1===y&&(C=this.addRow(w,[.1],I,A));else{var V=function(){kG.config.dataBindings.onButtonClicked(r.data,t,G,r.editor)},q=void 0;q=kG.config.dataBindings.getToolTip?kG.config.dataBindings.getToolTip(t,G,this):t+":"+G;var k=this.addButton(w,null,q,null,V,!0);this.updateHandlers.push(function(){if(!w.hidden&&r.data){var A=kG.config.isDataBound(r.data,t,G);k.setIcon(A?"editor.bind.state":"editor.unbind.state")}}),R?(R=R.slice(),R.push(20),C=this.addRow(w,R,I,A)):2===y?C=this.addRow(w,[l,.1,20],I,A):3===y?C=this.addRow(w,[l,.1,20,20],I,A):4===y?C=this.addRow(w,[l,.1,20,20,20],I,A):5===y?C=this.addRow(w,[l,.1,20,20,20,20],I,A):1===y&&(C=this.addRow(w,[.1,20],I,A))}return C.keys={name:G,displayName:this.toDisplayName(w),accessType:t},!this.addingCustomProperties&&HG[this.type]&&HG[this.type][t+":"+G]&&this.removeRows([C]),C},t.prototype.addFuncRow=function(w,t,G,A,I){var R=this,_=this.indent,r=void 0,y=void 0;if(!kG.config.dataBindingsForSymbol.filter||kG.config.dataBindingsForSymbol.filter(G||t,this)){var l=function(){R.dataModel&&R.editor.funcView.toggle(r,t,G,R)},C=void 0;C=kG.config.dataBindingsForSymbol.getToolTip?kG.config.dataBindingsForSymbol.getToolTip(G||t,this):(G||t)+": { func: ... }",r=this.addButton(w,null,C,null,l,!0),this.updateHandlers.push(function(){if(!w.hidden){var G=!1;R.global?R.dataModel&&(G="clip"===t?Sw(R.dataModel.a(t)):!!R.dataModel.a(t+"_func")):R.data&&(G=!!R.data.a(t)),r.setIcon(G?"editor.bind.state":"editor.unbind.state")}});var V=w.length;I?(I=I.slice(),I.push(20),y=this.addRow(w,I,A)):3===V?y=this.addRow(w,[_,.1,20],A):4===V?y=this.addRow(w,[_,.1,20,20],A):5===V?y=this.addRow(w,[_,.1,20,20,20],A):6===V&&(y=this.addRow(w,[_,.1,20,20,20,20],A))}else{var q=w.length;I?y=this.addRow(w,I,A):2===q?y=this.addRow(w,[_,.1],A):3===q?y=this.addRow(w,[_,.1,20],A):4===q?y=this.addRow(w,[_,.1,20,20],A):5===q?y=this.addRow(w,[_,.1,20,20,20],A):6===q&&(y=this.addRow(w,[_,.1,20,20,20,20],A))}return y.keys={name:G||t,displayName:this.toDisplayName(w)},!this.addingCustomProperties&&HG[this.type]&&HG[this.type][G||t]&&this.removeRows([y]),y},t.prototype.addNameRow=function(w,t,G,A,I){var R=this.indent,_=w.length,r=void 0;return I?r=this.addRow(w,I,A):2==_?r=this.addRow(w,[R,.1],A):3===_?r=this.addRow(w,[R,.1,20],A):4===_?r=this.addRow(w,[R,.1,20,20],A):5===_&&(r=this.addRow(w,[R,.1,20,20,20],A)),r.keys={name:t,displayName:this.toDisplayName(w),accessType:G},t=(G?G+":":"")+t,!this.addingCustomProperties&&HG[this.type]&&HG[this.type][t]&&this.removeRows([r]),r},t.prototype.$77$=function(){var w=this;this.addTitle("TitleGridsGuides");var t=[];this.addLabelCheckBox(t,R("editor.gridenabled"),function(w){return w.a("gridEnabled")},function(w,t){w.a("gridEnabled",t)}),this.addButton(t,R("editor.skew"),null,null,function(){w.editor.currentView&&w.editor.currentView.skewGrid&&w.editor.currentView.skewGrid()}),this.addButton(t,R("editor.reset"),null,null,function(){w.editor.currentView&&w.editor.currentView.resetGrid&&w.editor.currentView.resetGrid()}),this.addNameRow(t,"gridEnabled","a",void 0,[this.indent,20,.1,.1]),t=[],this.addLabelInput(t,R("editor.gridblocksize"),function(w){return w.a("gridBlockSize")},function(w,t){t>0&&w.a("gridBlockSize",t)},"int",1),this.addNameRow(t,"gridBlockSize","a"),t=[],this.addLabelInput(t,R("editor.gridthicklinesevery"),function(w){return w.a("gridThickLinesEvery")},function(w,t){t>0&&w.a("gridThickLinesEvery",t)},"int",1),this.addNameRow(t,"gridThickLinesEvery","a"),t=[],this.addLabelColor(t,R("editor.gridlightcolor"),function(w){return w.a("gridLightColor")},function(w,t){w.a("gridLightColor",t)}),this.addNameRow(t,"gridLightColor","a"),t=[],this.addLabelColor(t,R("editor.gridthickcolor"),function(w){return w.a("gridThickColor")},function(w,t){w.a("gridThickColor",t)}),this.addNameRow(t,"gridThickColor","a"),t=[],this.addLabelInput(t,R("editor.gridangle"),function(w){return 180/Math.PI*w.a("gridAngle")},function(w,t){w.a("gridAngle",t*Math.PI/180)},"number",1),this.addNameRow(t,"gridAngle","a"),t=[],this.addLabelInput(t,R("editor.gridrotation"),function(w){return 180/Math.PI*w.a("gridRotation")},function(w,t){w.a("gridRotation",t*Math.PI/180)},"number",1),this.addNameRow(t,"gridRotation","a"),t=[],this.addLabelInput(t,R("editor.gridzoomthreshold"),function(w){return w.a("gridZoomThreshold")},function(w,t){t>0&&w.a("gridZoomThreshold",t)},"number",.01),this.addNameRow(t,"gridZoomThreshold","a")},t.prototype.addHighlightProperties=function(){},t.prototype.$26$=function(){var w=this;this.addTitle("TitleEditingPoint");var t={Mirrored:0,Straight:1,Disconnected:2,Asymmetric:3};this.editingPointButtons=[];var G=function(G,A){var I=R("editor.editingpoint."+A.toLowerCase()),_="editor.point."+A.toLowerCase(),r=It(I,null,_,function(){w.editor.editInteractor.getSubModule("Curve").setCurrentSelectionStatus(r.statusValue)});r.setOrientation("v"),r.setTogglable(!0),r.setGroupId("editingPoint"),r.statusValue=t[A],w.editingPointButtons.push(r),G.push(r)},A=[];G(A,"Straight"),G(A,"Mirrored"),this.addRow(A,[.1,.1],60),A=[],G(A,"Disconnected"),G(A,"Asymmetric"),this.addRow(A,[.1,.1],60),kG.SceneView&&(A=[],A.push(R("editor.point")),this.addLabelInput(A,"X",function(t){return w.editor.getCurrentEditingPointValue("x")},function(t,G){return w.editor.setCurrentEditingPointValue("x",G)},"number",1),this.addLabelInput(A,"Y",function(t){return w.editor.getCurrentEditingPointValue("y")},function(t,G){return w.editor.setCurrentEditingPointValue("y",G)},"number",1),this.addNameRow(A,"currentEditingPoint.x.y",void 0,void 0,this.w2).visible=function(){return!(w.currentView instanceof kG.SceneView)},A=[],A.push(R("editor.point")),this.addLabelInput(A,"X",function(t){return w.editor.getCurrentEditingPointValue("x")},function(t,G){return w.editor.setCurrentEditingPointValue("x",G)},"number",1),this.addLabelInput(A,"Y",function(t){return w.editor.getCurrentEditingPointValue("e")},function(t,G){return w.editor.setCurrentEditingPointValue("e",G)},"number",1),this.addLabelInput(A,"Z",function(t){return w.editor.getCurrentEditingPointValue("y")},function(t,G){return w.editor.setCurrentEditingPointValue("y",G)},"number",1),this.addNameRow(A,"currentEditingPoint.x.y.z",void 0,void 0,this.w3).visible=function(){return w.currentView instanceof kG.SceneView})},t.prototype.addCustomProperties=function(){var w=this,t=kG.config.customProperties[this.type];t&&t.length&&(this.addTitle("TitleCustom"),t.forEach(function(t){w.addCustomProperty(t)}))},t.prototype.fixAccessType=function(w){return w=w||"a","symbol"===this.type?w="a":"comp"===this.type&&(w="s"),w},t.prototype.addEventProperties=function(w){var t=this,G=void 0;w?G=!1:(w=[],G=!0);var A=function(){var w=t.global?t.dataModel:t.data;w&&(w=t.global?[t.dataModel]:t.dataModel.sm().getSelection().toArray()),t.editor.eventView.open(w,t.type)};this.addLabel(w,R("editor.events"));var I=this.addButton(w,R("editor.eventhandlers"),null,null,A,!0);G&&("data"===this.type||"data3d"===this.type?(this.addLabel(w,R("editor.interactive")),this.addCheckBox(w,function(w){return!!w&&w.s("interactive")},function(w,t){w&&w.s("interactive",t)}),this.addRow(w,this.w1w1).keys={name:"eventHandlers",displayName:R("editor.eventhandlers")}):this.addRow(w,this.w1).keys={name:"eventHandlers",displayName:R("editor.eventhandlers")}),this.updateHandlers.push(function(){if(!w.hidden){var G=!1,A=t.global?t.dataModel:t.data;ZG.forEach(function(w){G||(G="data"===t.type||"data3d"===t.type?A.s(w):A.a(w))}),I.setLabelColor(G?kG.config.color_select:ht.Default.labelColor)}})},t.prototype.addCustomProperty=function(w){var t=w.name,G=w.valueType,A=!1!==w.editable,I=w.defaultValue,l=this.fixAccessType(w.accessType),C=w.property;if(!(G=kG.config.valueTypes[G]))return!1;this.addingCustomProperties=!0;var V=[],q=R(t)||C,k=Z(l,C),x=z(l,C),L=function(w){var t=k(w);return void 0===t&&(t=I),t},Q=A?x:null,J=w.extraInfo,B=void 0,n=void 0,f=void 0;J&&J.enum&&(B=J.enum.values,n=y(J.enum.labels,J.enum.i18nLabels),f=J.enum.icons);var i=w.dataBinding||w.bindable,F=kG.SceneView&&i&&("data"===this.type||"data3d"===this.type),S=void 0;J&&J.buildUI?(S=J.buildUI(this,V,q,L,Q,J),F=!1):B?F?this.addActionLabelComboBox(V,q,l,C,B,n,f,L,Q):this.addLabelComboBox(V,q,L,Q,B,n,f):"int"===G.type||"number"===G.type?G.angle?F?this.addActionLabelRotation(V,q,l,C,G.min,G.max,G.step,L,Q):this.addLabelRotation(V,q,L,Q,G.min,G.max,G.step):F?this.addActionLabelRange(V,q,l,C,G.min,G.max,G.step,G.type,L,Q):this.addLabelRange(V,q,L,Q,G.min,G.max,G.step,G.type):"color"===G.type?F?this.addActionLabelColor(V,q,l,C,L,Q):this.addLabelColor(V,q,L,Q):"boolean"===G.type?F?this.addActionLabelCheckBox(V,q,l,C,L,Q):this.addLabelCheckBox(V,q,L,Q):"enum"===G.type?F?this.addActionLabelComboBox(V,q,l,C,G.values,G.labels,G.icons,L,Q):this.addLabelComboBox(V,q,L,Q,G.values,G.labels,G.icons):"image"===G.type?F?this.addActionLabelImage(V,q,l,C,L,Q):this.addLabelImage(V,q,L,Q):"url"===G.type?F?this.addActionLabelURL(V,q,l,C,void 0,L,Q):this.addLabelURL(V,q,L,Q):"multiline"===G.type?F?this.addActionLabelMultiline(V,q,l,C,L,Q):this.addLabelMultiline(V,q,L,Q):"colorArray"===G.type?F?this.addActionLabelArray(V,q,l,C,"color",L,Q):this.addLabelArray(V,q,L,Q,"color"):"numberArray"===G.type?F?this.addActionLabelArray(V,q,l,C,"number",L,Q):this.addLabelArray(V,q,L,Q,"number"):"stringArray"===G.type?F?this.addActionLabelArray(V,q,l,C,"string",L,Q):this.addLabelArray(V,q,L,Q,"string"):"objectArray"===G.type?F?this.addActionLabelArray(V,q,l,C,"object",L,Q):this.addLabelArray(V,q,L,Q,"object"):"function"===G.type?F?this.addActionLabelFunction(V,q,l,C,C,J&&J.arguments,L,Q):this.addLabelFunction(V,q,L,Q,C,J&&J.arguments):"dataModel"===G.type?this.addActionLabelDataModel(V,q,l,C,C,L,Q):"object"===G.type?F?this.addActionLabelObject(V,q,l,C,C,L,Q):this.addLabelObject(V,q,L,Q,C):"font"===G.type?F?this.addActionLabelFont(V,q,l,C,L,Q):this.addLabelFont(V,q,L,Q):"custom"===G.type?(S=G.buildUI(this,V,q,L,Q,J),F=!1):F?this.addActionLabelInput(V,q,l,C,void 0,void 0,void 0,L,Q):this.addLabelInput(V,q,L,Q);var N=void 0;"display"===this.type||"scene"===this.type||F||!i?N=this.addNameRow(V,C,l,_(S,G),r(S,G)):"data"===this.type||"data3d"===this.type?N=this.addDBRow(V,l,C,null,_(S,G),r(S,G)):"symbol"!==this.type&&"comp"!==this.type||(N=this.addFuncRow(V,C,null,_(S,G),r(S,G))),N&&J&&(N.visible=J.visible,N.onPropertyChanged=J.onPropertyChanged),this.addingCustomProperties=!1},t.prototype.addLabelLayer=function(w,t){var G=this,A=Z("p","layer"),I=z("p","layer");this.addLabel(w,R("editor.layer"),void 0,void 0,void 0,t);var _=new ht.widget.ComboBox;return _.onValueChanged=function(){G.setValue(I,_.getValue())},this.updateHandlers.push(function(){if(!w.hidden){_.setValues(G.editor.layerPane.layerNames);var t=G.getValue(A);_.getValue()!==t&&_.setValue(t)}}),w.push(_),_},t.prototype.addLabelIcons=function(w,t){var G=this;this.addLabel(w,R("editor.icons"),void 0,void 0,void 0,t);var A=function(){G.data&&G.editor.iconsView.toggle(I,G.data)},I=this.addButton(w,"Icons","s:icons",null,A,!0);return this.updateHandlers.push(function(){w.hidden||I.setLabelColor(G.data.s("icons")?kG.config.color_select:ht.Default.labelColor)}),I},t.prototype.addLabelBatch=function(w,t){var G=this,A=Z("s","batch"),I=z("s","batch");this.addLabel(w,R("editor.batch"),void 0,void 0,void 0,t);var _=new ht.widget.ComboBox;return _.onValueChanged=function(){G.setValue(I,_.getValue())},this.updateHandlers.push(function(){if(!w.hidden){_.setValues(G.editor.batchView.batchNames);var t=G.getValue(A);_.getValue()!==t&&_.setValue(t)}}),w.push(_),_},t.prototype.addActionLabel=function(w,t,G,A){this.addLabel(w,t,void 0,void 0,void 0,{accessType:G,name:A})},t.prototype.addActionLabelInput=function(w,t,G,A,I,R,_,r,y){this.addLabelInput(w,t,Z(G,A,r),z(G,A,y),I,R,_,{accessType:G,name:A})},t.prototype.addActionLabelData=function(w,t,G,A,I,R){this.addLabelData(w,t,Z(G,A,I),z(G,A,R),{accessType:G,name:A})},t.prototype.addActionLabelRange=function(w,t,G,A,I,R,_,r,y,l){void 0===_&&(_="int"===r?1:.1),this.addLabelRange(w,t,Z(G,A,y),z(G,A,l),I,R,_,r,{accessType:G,name:A})},t.prototype.addActionLabelCheckBox=function(w,t,G,A,I,R){this.addLabelCheckBox(w,t,Z(G,A,I),z(G,A,R),{accessType:G,name:A})},t.prototype.addActionLabelColor=function(w,t,G,A,I,R){this.addLabelColor(w,t,Z(G,A,I),z(G,A,R),{accessType:G,name:A})},t.prototype.addActionLabelImage=function(w,t,G,A,I,R){this.addLabelImage(w,t,Z(G,A,I),z(G,A,R),{accessType:G,name:A})},t.prototype.addActionLabelObject=function(w,t,G,A,I,R,_){this.addLabelObject(w,t,Z(G,A,R),z(G,A,_),I,{accessType:G,name:A})},t.prototype.addActionLabelComboBox=function(w,t,G,A,I,R,_,r,y){this.addLabelComboBox(w,t,Z(G,A,r),z(G,A,y),I,R,_,{accessType:G,name:A})},t.prototype.addActionLabelComboBoxURL=function(w,t,G,A,I,R,_,r,y,l){this.addLabelComboBoxURL(w,t,Z(G,A,y),z(G,A,l),I,R,_,r,{accessType:G,name:A})},t.prototype.addActionLabelFont=function(w,t,G,A,I,R){this.addLabelFont(w,t,Z(G,A,I),z(G,A,R),{accessType:G,name:A})},t.prototype.addActionLabelPosition=function(w,t,G,A,I,R){this.addLabelPosition(w,t,Z(G,A,I),z(G,A,R),{accessType:G,name:A})},t.prototype.addActionLabelMultiline=function(w,t,G,A,I,R){this.addLabelMultiline(w,t,Z(G,A,I),z(G,A,R),{accessType:G,name:A})},t.prototype.addActionLabelRotation=function(w,t,G,A,I,R,_,r,y){this.addLabelRotation(w,t,Z(G,A,r),z(G,A,y),I,R,_,{accessType:G,name:A})},t.prototype.addActionLabelAlign=function(w,t,G,A,I,R){this.addLabelAlign(w,t,Z(G,A,I),z(G,A,R),{accessType:G,name:A})},t.prototype.addActionLabelVAlign=function(w,t,G,A,I,R){this.addLabelVAlign(w,t,Z(G,A,I),z(G,A,R),{accessType:G,name:A})},t.prototype.addActionLabelStretch=function(w,t,G,A,I,R){this.addLabelStretch(w,t,Z(G,A,I),z(G,A,R),{accessType:G,name:A})},t.prototype.addActionLabelGradient=function(w,t,G,A,I){this.addLabelGradient(w,t,G,A,I,{accessType:"s",name:G})},t.prototype.addActionLabelOrientation=function(w,t,G,A,I,R){this.addLabelOrientation(w,t,Z(G,A,I),z(G,A,R),{accessType:G,name:A})},t.prototype.addActionLabelURL=function(w,t,G,A,I,R,_){this.addLabelURL(w,t,Z(G,A,R),z(G,A,_),I,{accessType:G,name:A})},t.prototype.addActionLabelArray=function(w,t,G,A,I,R,_){this.addLabelArray(w,t,Z(G,A,R),z(G,A,_),I,{accessType:G,name:A})},t.prototype.addActionLabelFunction=function(w,t,G,A,I,R,_,r){this.addLabelFunction(w,t,Z(G,A,_),z(G,A,r),I,R,{accessType:G,name:A})},t.prototype.addActionLabelDataModel=function(w,t,G,A,I,R,_,r){this.addLabelDataModel(w,t,Z(G,A,_),z(G,A,r),I,R,{accessType:G,name:A})},t.prototype.addActionLabelLayer=function(w){this.addLabelLayer(w,{accessType:"p",name:"layer"})},t.prototype.addActionLabelIcons=function(w){this.addLabelIcons(w,{accessType:"s",name:"icons"})},t.prototype.addActionLabelBatch=function(w){this.addLabelBatch(w,{accessType:"s",name:"batch"})},t}(VG),QI=function(w){function t(G,A){return _G(this,t),lG(this,w.call(this,G,A,"display",!0))}return yG(t,w),t.prototype.initForm=function(){this.addCustomProperties(),this.$11$(),this.addHighlightProperties(),this.$77$()},t.prototype.isTitleVisible=function(t){return!!this.inspectorFilter.isDisplayTitleVisible(this.editor,t.title)&&w.prototype.isTitleVisible.call(this,t)},t.prototype.isPropertyVisible=function(t){return!!this.inspectorFilter.isDisplayPropertyVisible(this.editor,t.keys&&t.keys.name)&&w.prototype.isPropertyVisible.call(this,t)},t.prototype.$11$=function(){this.addTitle("TitleBasic");var w=[];this.addLabelInput(w,R("editor.previewurl"),function(w){return w.a("previewURL")},function(w,t){w.a("previewURL",t)}),this.addNameRow(w,"previewURL","a"),w=[],this.addLabelImage(w,R("editor.snapshoturl"),function(w){return w.a("snapshotURL")},function(w,t){w.a("snapshotURL",t)}),this.addNameRow(w,"snapshotURL","a"),w=[],this.addLabelColor(w,R("editor.background"),function(w){return w.getBackground()},function(w,t){w.setBackground(t)}),this.addNameRow(w,"background","p"),w=[],this.addLabelInput(w,R("editor.width"),function(w){return w.a("width")},function(w,t){w.a("width",t)},"number",1),this.addNameRow(w,"width","a"),w=[],this.addLabelInput(w,R("editor.height"),function(w){return w.a("height")},function(w,t){w.a("height",t)},"number",1),this.addNameRow(w,"height","a"),w=[];var t=["json","dm","view"];this.addLabelFunction(w,R("editor.onpredeserialize"),function(w){return w.a("onPreDeserialize")},function(w,t){w.a("onPreDeserialize",t)},"onPreDeserialize",t),this.addNameRow(w,"onPreDeserialize","a"),w=[],t=["json","dm","view","datas"],this.addLabelFunction(w,R("editor.onpostdeserialize"),function(w){return w.a("onPostDeserialize")},function(w,t){w.a("onPostDeserialize",t)},"onPostDeserialize",t),this.addNameRow(w,"onPostDeserialize","a"),w=[],this.addLabelComboBox(w,R("editor.connectactiontype"),function(w){return w.a("connectActionType")},function(w,t){w.a("connectActionType",t)
},kG.consts.displayConnectActionTypes,kG.consts.displayConnectActionTypeLabels),this.addNameRow(w,"connectActionType","a"),w=[],this.addLabelCheckBox(w,R("editor.hierarchicalrendering"),function(w){return w.isHierarchicalRendering()},function(w,t){w.setHierarchicalRendering(t)}),this.addNameRow(w,"hierarchicalRendering","p"),w=[],this.addLabelCheckBox(w,R("editor.zoomable"),function(w){return null==w.a("zoomable")||w.a("zoomable")},function(w,t){w.a("zoomable",t)}),this.addNameRow(w,"zoomable","a"),w=[],this.addLabelCheckBox(w,R("editor.pannable"),function(w){return null==w.a("pannable")||w.a("pannable")},function(w,t){w.a("pannable",t)}),this.addNameRow(w,"pannable","a"),w=[],this.addLabelCheckBox(w,R("editor.rectselectable"),function(w){return null==w.a("rectSelectable")||w.a("rectSelectable")},function(w,t){w.a("rectSelectable",t)}),this.addNameRow(w,"rectSelectable","a"),w=[],this.addLabelCheckBox(w,R("editor.fitcontent"),function(w){return null!=w.a("fitContent")&&w.a("fitContent")},function(w,t){w.a("fitContent",t)}),this.addNameRow(w,"fitContent","a"),this.addLayoutProperties()},t.prototype.addLayoutProperties=function(){var w=[R("editor.layout")];this.$79$(w,"circular"),this.$79$(w,"symmetric"),this.$79$(w,"hierarchical"),this.$79$(w,"towardnorth"),this.$79$(w,"towardsouth"),this.$79$(w,"towardeast"),this.$79$(w,"towardwest"),this.addRow(w,[this.indent,.1,.1,.1,.1,.1,.1,.1]).keys={name:"layouts"}},t.prototype.$79$=function(w,t){var G=this,A=function(){G.editor.editable&&G.dataModel&&G.dataModel.layout(t)};return this.addButton(w,null,R("editor.layout."+t),"editor.layout."+t+".state",A)},t}(LI),JI={visible:"Boolean",selectable:"Boolean",movable:"Boolean",editable:"Boolean",opacity:"Opacity",clipPercentage:"Percentage",clipDirection:"ClipDirection",shadow:"Boolean",shadowColor:"Color",shadowBlur:"PositiveNumber",shadowOffsetX:"PositiveNumber",shadowOffsetY:"PositiveNumber",type:"String",background:"Color",repeatImage:"String",borderWidth:"PositiveNumber",borderColor:"Color",border3d:"Boolean",border3dColor:"Color",border3dAccuracy:"PositiveNumber",borderCap:"CapStyle",borderJoin:"JoinStyle",gradient:"Gradient",gradientColor:"Color",dash:"Boolean",dashOffset:"Number",dashColor:"Color",dashWidth:"PositiveNumber",dash3d:"Boolean",dash3dColor:"Color",dash3dAccuracy:"PositiveNumber",borderWidthAbsolute:"Boolean",fillClipPercentage:"Percentage",fillClipDirection:"ClipDirection",depth:"Number",cornerRadius:"PositiveNumber",polygonSide:"Int",arcFrom:"Number",arcTo:"Number",arcClose:"Boolean",arcOval:"Boolean",displayName:"String",scaleX:"Number",scaleY:"Number",anchorX:"Number",anchorY:"Number",rotation:"Number",color:"Color",width:"PositiveNumber",label:"Boolean",labelColor:"Color",labelFont:"String",minValue:"Number",maxValue:"Number",linePoint:"Boolean",lineWidth:"PositiveNumber",line3d:"Boolean",text:"String",align:"Align",vAlign:"VAlign",closePath:"Boolean",fillRule:"FillRule",name:"Image",stretch:"Stretch",values:"NumberArray",colors:"ColorArray",hollow:"Boolean",layoutV:"String",layoutH:"String"},BI=function(w){function t(G,A){return _G(this,t),lG(this,w.call(this,G,A,"symbol",!0))}return yG(t,w),t.prototype.initForm=function(){this.addCustomProperties(),this.addControlProperties(),this.$11$(),this.addHighlightProperties(),this.$77$(),this.addDataBindingProperties()},t.prototype.isTitleVisible=function(t){return!!this.inspectorFilter.isSymbolTitleVisible(this.editor,t.title)&&w.prototype.isTitleVisible.call(this,t)},t.prototype.isPropertyVisible=function(t){return!!this.inspectorFilter.isSymbolPropertyVisible(this.editor,t.keys&&t.keys.name)&&w.prototype.isPropertyVisible.call(this,t)},t.prototype.$11$=function(){var w=this.indent,t=void 0;this.addTitle("TitleBasic"),t=[],this.addLabelInput(t,R("editor.previewurl"),function(w){return w.a("previewURL")},function(w,t){w.a("previewURL",t)}),this.addLabelImage(t,R("editor.snapshoturl"),function(w){return w.a("snapshotURL")},function(w,t){w.a("snapshotURL",t)}),this.addNameRow(t,"previewURL.snapshotURL",void 0,void 0,[w,this.w20,w,.1,20]),t=[],this.addLabelColor(t,R("editor.background"),function(w){return w.getBackground()},function(w,t){w.setBackground(t)}),this.addLabelComboBox(t,R("editor.connectactiontype"),function(w){return w.a("connectActionType")},function(w,t){w.a("connectActionType",t)},kG.consts.symbolConnectActionTypes,kG.consts.symbolConnectActionTypeLabels),this.addNameRow(t,"background.connectActionType",void 0,void 0,this.w1w1),t=[],this.addLabelInput(t,R("editor.width"),function(w){return w.a("width")},function(w,t){w.a("width",t)},"number",1),this.addFuncRow(t,"width"),t=[],this.addLabelInput(t,R("editor.height"),function(w){return w.a("height")},function(w,t){w.a("height",t)},"number",1),this.addFuncRow(t,"height"),t=[],this.addLabelInput(t,R("editor.boundextend"),function(w){return w.a("boundExtend")},function(w,t){w.a("boundExtend",t)},"number",1),this.addFuncRow(t,"boundExtend"),this.addStateProperty(),this.addAttachPointsProperties(),t=[],this.addLabelComboBox(t,R("editor.blendmode"),function(w){return w.a("blendMode")},function(w,t){w.a("blendMode",t)},["multiply","override","override_rgb","override_a"],[R("editor.blendmode.multiply"),R("editor.blendmode.override"),R("editor.blendmode.override_rgb"),R("editor.blendmode.override_a")]),this.addFuncRow(t,"blendMode")},t.prototype.addEventsAndRenderHTMLProperties=function(){var w=this,t=[];this.addEventProperties(t);var G=function(){w.editor.functionView.open(w.dataModel.a("renderHTML"),function(t){w.dataModel.a("renderHTML",t)},R("editor.renderhtml"),["data","gv","cache"])},A=this.addButton(t,R("editor.renderhtml"),null,null,G,!0);this.updateHandlers.push(function(){if(!t.hidden){var G=w.dataModel.a("renderHTML");A.setLabelColor(G?kG.config.color_select:ht.Default.labelColor)}}),this.addNameRow(t,"eventHandlers.renderhtml",void 0,void 0,[this.indent,.1,.1])},t.prototype.addControlProperties=function(){var w=this;this.addTitle("TitleControl"),this.addEventsAndRenderHTMLProperties();var t=[];if(this.addLabelCheckBox(t,R("editor.visible"),function(w){return w.a("visible")},function(w,t){w.a("visible",t)}),this.addFuncRow(t,"visible"),t=[],this.addLabelCheckBox(t,R("editor.clip"),function(w){return w.a("clip")},function(w,t){w.a("clip",t)}).onValueChanged=function(t,G){w.dataModel&&(G?w.dataModel.a("clip")||w.dataModel.a("clip",!0):w.dataModel.a("clip",!1))},this.addFuncRow(t,"clip"),t=[],this.addLabelCheckBox(t,R("editor.scrollable"),function(w){return w.a("scrollable")},function(w,t){w.a("scrollable",t)}),this.addFuncRow(t,"scrollable"),t=[],this.addLabelCheckBox(t,R("editor.interactive"),function(w){return w.a("interactive")},function(w,t){w.a("interactive",t)}),this.addFuncRow(t,"interactive"),t=[],this.addLabelCheckBox(t,R("editor.disableselectedborder"),function(w){return w.a("disableSelectedBorder")},function(w,t){w.a("disableSelectedBorder",t)}),this.addFuncRow(t,"disableSelectedBorder"),t=[],this.addLabelCheckBox(t,R("editor.pixelperfect"),function(w){return w.a("pixelPerfect")},function(w,t){w.a("pixelPerfect",t)}),this.addFuncRow(t,"pixelPerfect"),t=[],this.addLabelCheckBox(t,R("editor.cacherule"),function(w){return w.a("cacheRule")},function(w,t){w.a("cacheRule",t)}),this.addFuncRow(t,"cacheRule"),t=[],this.addLabelCheckBox(t,R("editor.texturecache"),function(w){return w.a("textureCache")},function(w,t){w.a("textureCache",t)}),this.addFuncRow(t,"textureCache"),t=[],this.addLabelCheckBox(t,R("editor.fitsize"),function(w){return w.a("fitSize")},function(w,t){w.a("fitSize",t)}),this.addFuncRow(t,"fitSize"),kG.SceneView){t=[];var G=function(){w.editor.symbolLayoutView.open(w.dataModel.a("layoutAttach"),w.dataModel.a("layoutProperties"),function(t){w.beginTransaction(),w.dataModel.a("layoutAttach",t.func),w.dataModel.a("layoutProperties",t.properties),w.beginTransaction()})};this.addLabel(t,R("editor.layout"));var A=this.addButton(t,R("editor.layoutattach"),null,null,G,!0);this.addRow(t,this.w1),this.updateHandlers.push(function(){if(!t.hidden){var G=w.dataModel.a("layoutAttach");A.setLabelColor(G?kG.config.color_select:ht.Default.labelColor)}})}},t.prototype.addDataBindingProperties=function(){this.addTitle("TitleDataBinding"),this.$80$(),this.$81$()},t.prototype.$73$=function(w,t,G,A,I){var R=this;return{name:w,tag:w,width:G,displayName:t,align:"center",enum:A,editable:!0,valueType:I,getValue:function(t){var G=t.dataBinding[w];return"bindable"===w&&null==G&&(G=!0),G},setValue:function(t,G,A,I){t.dataBinding[w]!==A&&R.modifyDataBindings(function(){"valueType"===w&&delete t.dataBinding.defaultValue,t.dataBinding[w]=A})}}},t.prototype.$74$=function(){var w=this,t=this.tableView.getColumnModel().getDataByTag("defaultValue");t.getValue=function(w,t,G){var A=w.dataBinding.defaultValue;return"Angle"===w.dataBinding.valueType&&A&&(A=A/Math.PI*180),A},t.setValue=function(t,G,A,I){w.modifyDataBindings(function(){"Angle"===t.dataBinding.valueType&&(A=A*Math.PI/180),t.dataBinding.defaultValue=A})},t.getEnumValues=function(w){var t=w?kG.config.valueTypes[w.dataBinding.valueType]:null;return t&&"enum"===t.type?t.values:null},t.getEnumLabels=function(w){var t=w?kG.config.valueTypes[w.dataBinding.valueType]:null;return t&&"enum"===t.type?t.labels:null},t.getEnumIcons=function(w){var t=w?kG.config.valueTypes[w.dataBinding.valueType]:null;return t&&"enum"===t.type?t.icons:null},t.getEnumDropDownWidth=function(w){var t=w?kG.config.valueTypes[w.dataBinding.valueType]:null;return t&&"enum"===t.type?t.dropDownWidth:null},t.getValueType=function(w){var t=w?kG.config.valueTypes[w.dataBinding.valueType]:null;return t?t.type:null},t.isCellEditable=function(t,G,A,I){var _=kG.config.valueTypes[t.dataBinding.valueType],r=_?_.type:null,y=t.dataBinding.extraInfo,l=kG.config.handleDefaultVauleColumnEdit,C=function(G){w.modifyDataBindings(function(){t.dataBinding.defaultValue=G,w.tableView.redraw()})};if(l&&l(C,_,r,y))return!1;if("function"===r){var V=R("editor.function")+" "+(t.dataBinding.attr||"");return w.editor.functionView.open(t.dataBinding.defaultValue,C,V,y&&y.arguments),!1}if("multiline"===r)return w.editor.textView.open(t.dataBinding.defaultValue,C,t.dataBinding.attr||"&nbsp;"),!1;if("font"===r)return w.editor.fontView.open(t.dataBinding.defaultValue,C,t.dataBinding.attr||"&nbsp;"),!1;if("object"===r||"stringArray"===r||"custom"===r||"objectArray"===r||"numberArray"===r||"colorArray"===r){var q=R("editor.object")+" "+(t.dataBinding.attr||"");return w.editor.objectView.open(t.dataBinding.defaultValue,C,q),!1}return"dataModel"!==r||(w.editor.dataModelView.open(t.dataBinding.defaultValue,C,w.editor.editable,y),!1)}},t.prototype.initExtraInfoColumn=function(){var w=this;this.tableView.getColumnModel().getDataByTag("extraInfo").isCellEditable=function(t,G,A,I){var _=R("editor.object")+" "+(t.dataBinding.attr||"");return w.editor.objectView.open(t.dataBinding.extraInfo,function(G){w.modifyDataBindings(function(){t.dataBinding.extraInfo=G,w.tableView.redraw()})},_),!1}},t.prototype.$80$=function(){var w=this,t=this.tableModel=new ht.DataModel,G=this.tablePane=new jG(t),A=this.tableView=G.getTableView();A.setEditable(!0),A.isEditable=function(){return w.editor.editable},G.getView().style.border=kG.config.color_line+" solid 1px",G.addColumns([this.$73$("attr",R("editor.attr"),90),this.$73$("valueType",R("editor.valuetype"),80,{values:kG.consts.valueTypes,labels:kG.consts.valueTypeLabels}),this.$73$("defaultValue",R("editor.defaultvalue"),90),this.$73$("name",R("editor.name"),80),this.$73$("group",R("editor.group"),80),this.$73$("bindable",R("editor.bindable"),50,void 0,"boolean"),this.$73$("description",R("editor.description"),120),this.$73$("extraInfo",R("editor.extrainfo"),100)]),this.$74$(),this.initExtraInfoColumn();var I=[G];this.addRow(I,[.1],"120+0.1");var _=null;this.updateHandlers.push(function(){if(!I.hidden&&w.dataModel&&(!_||w.dataModel.dataBindings!==_)){_=w.dataModel.dataBindings;var G=t.sm().toSelection().toArray();if(t.clear(),w.dataModel.dataBindings){var A=void 0;w.dataModel.dataBindings.forEach(function(I,R){var _=new ht.Data;_.dataBinding=I,t.add(_),R===w.newDataBindingIndex&&(w.tableView.sm().ss(_),A=_,delete w.newDataBindingIndex,delete w.addingDataBindingByButton);for(var r=0;r<G.length;r++)if(Hw(G[r].dataBinding,I)){l(G,G[r]),t.sm().as(_);break}}),setTimeout(function(){A&&(w.tableView.tx(0),Bt(w.tableView,A,w.tableView.getColumnModel().getDataByTag("attr")))},100)}}})},t.prototype.modifyDataBindings=function(w){var t=A(this.dataModel.dataBindings);w();var G=A(this.dataModel.dataBindings);this.dataModel.dataBindings=G,this.dataModel.fp("f:dataBindings",t,G)},t.prototype.$82$=function(w,t,G,A,I,R){var _=new ht.Data;_.dataBinding={attr:w||"",valueType:t||"String",defaultValue:G,name:A,description:I,extraInfo:R};var r={symbolView:this.editor.symbolView,dataBinding:_.dataBinding};if(this.editor.fireEvent("dataBindingAdding",r),r.preventDefault)return!1;_.dataBinding=r.dataBinding,this.dataModel.dataBindings||(this.dataModel.dataBindings=[]);var y=this.tableModel.sm().ld(),l=void 0;if(y){var C=this.tableModel.getRoots().indexOf(y);this.dataModel.dataBindings.splice(C+1,0,_.dataBinding),l=C+1}else this.dataModel.dataBindings.push(_.dataBinding),l=this.tableModel.size();this.addingDataBindingByButton&&(this.newDataBindingIndex=l)},t.prototype.add=function(){var w=this;this.modifyDataBindings(function(){w.addingDataBindingByButton=!0,w.$82$()})},t.prototype.delete=function(){var w=this;this.tableView.sm().ld()&&this.modifyDataBindings(function(){w.tableView.sm().each(function(t){l(w.dataModel.dataBindings,t.dataBinding)})})},t.prototype.reorder=function(){var w=this;this.dataModel.dataBindings=[],this.tableModel.getRoots().each(function(t){w.dataModel.dataBindings.push(t.dataBinding)})},t.prototype.import=function(){var w=this;this.modifyDataBindings(function(){kG.config.clearDataBindingsBeforeImporting&&(w.dataModel.dataBindings=[]);var t=w.editor.symbolView.content,G={};w.prefixStack=[],t.dataBindings&&t.dataBindings.forEach(function(w){G[w.attr]=!0}),w.addCompDataBinding(t,G),w.prefixStack=[]})},t.prototype.addCompDataBinding=function(w,t,G){var A=this,I=void 0;for(var R in w)if("comps"!==R){var _=w[R];Fw(_)&&this.addPropertyDataBinding(null,R,_,t)}G&&w.dataBindings&&w.dataBindings.forEach(function(w){var G=w.attr,I=w.valueType,R=w.defaultValue,_=w.name,r=w.description,y=w.extraInfo;G=A.currentPrefix+G,t[G]||(A.$82$(G,I,R,_,r,y),t[G]=!0)}),w.comps&&w.comps.forEach(function(w){var G=w.prefix;G&&A.prefixStack.push(G);for(var R in w){var _=w[R];Fw(_)&&A.addPropertyDataBinding(w,R,_,t)}"image"===w.type&&(I=ht.Default.getImage(w.name))&&A.addCompDataBinding(I,t,!0),G&&A.prefixStack.pop()})},t.prototype.addPropertyDataBinding=function(w,t,G,A){if(fw(G.func)&&UG.test(G.func)){var I=this.currentPrefix+G.func.slice(5);if(!A[I]){var R=void 0,_=void 0,r=void 0,y=void 0;if(w&&Vw(w.type)){var l=ht.Default.getCompType(w.type);if(l){var C=l.properties[t];C?(R=C.valueType,_=C.name,r=C.description,y=C.extraInfo):R=JI[t]}}else R=JI[t];this.$82$(I,R,void 0,_,r,y),A[I]=!0}}else{var V={};qt(G,V);for(var q in V)A[q]||this.$82$(q,JI[V[q]])}},t.prototype.$81$=function(){var w=this,t=kG.config.importDataBindingsButtonVisible?{button:{icon:"editor.import",toolTip:R("editor.import"),onClicked:function(){w.editor.editable&&w.import()}}}:null;this.addRow([{button:{icon:"editor.add",toolTip:R("editor.add"),onClicked:function(){w.editor.editable&&w.add()}}},{button:{icon:"editor.delete",toolTip:R("editor.delete"),onClicked:function(){w.editor.editable&&w.delete()}}},t,null,{button:{icon:"editor.top",toolTip:R("editor.bringtofront"),onClicked:function(){w.editor.editable&&w.tableView.sm().size()&&w.modifyDataBindings(function(){w.tableModel.moveSelectionToTop(),w.reorder()})}}},{button:{icon:"editor.up",toolTip:R("editor.bringforward"),onClicked:function(){w.editor.editable&&w.tableView.sm().size()&&w.modifyDataBindings(function(){w.tableModel.moveSelectionUp(),w.reorder()})}}},{button:{icon:"editor.down",toolTip:R("editor.sendbackward"),onClicked:function(){w.editor.editable&&w.tableView.sm().size()&&w.modifyDataBindings(function(){w.tableModel.moveSelectionDown(),w.reorder()})}}},{button:{icon:"editor.bottom",toolTip:R("editor.sendtoback"),onClicked:function(){w.editor.editable&&w.tableView.sm().size()&&w.modifyDataBindings(function(){w.tableModel.moveSelectionToBottom(),w.reorder()})}}}],[20,20,20,.1,20,20,20,20])},t.prototype.addAttachPointsProperties=function(){var w=this,t=[],G=function(){w.editor.attachPointsView.show(w.editor.symbolView.content)};this.addLabel(t,R("editor.attach.points"));var A=this.addButton(t,R("editor.attach.edit"),null,null,G,!0);this.addFuncRow(t,"attachPoints"),this.updateHandlers.push(function(){if(!t.hidden){var G=w.dataModel.a("attachPoints");A.setLabelColor(G&&G.length?kG.config.color_select:ht.Default.labelColor)}}),t=[],this.addLabelComboBox(t,R("editor.attach.style"),function(w){return w.a("attachStyle")||"close"},function(w,t){w.a("attachStyle",t)},["close","strict"],[R("editor.attach.close"),R("editor.attach.strict")]),this.addFuncRow(t,"attachStyle")},t.prototype.addStateProperty=function(){var w=this;if(kG.SceneView){var t=[];this.addLabel(t,R("editor.state"));var G=new ht.widget.ComboBox;G.onValueChanged=function(){w.editor.dm.a("state",G.getValue())},this.updateHandlers.push(function(){if(!t.hidden){var A=w.editor.dm.a("state"),I=w.editor.dm.a("stateEnum"),R=[],_=[];I&&I.length&&(R=I.map(function(w){return w.value}),_=I.map(function(w){return w.label||w.value}),R.unshift(void 0),_.unshift("")),G.setValues(R),G.setLabels(_),G.getValue()!==A&&G.setValue(A)}}),t.push(G),this.addFuncRow(t,"state")}},rG(t,[{key:"currentPrefix",get:function(){var w=this.prefixStack,t="";return w&&w.length&&(t=w.join(".")+"."),t}}]),t}(LI),nI=function(w){function t(G,A){return _G(this,t),lG(this,w.call(this,G,A,"data"))}return yG(t,w),t.prototype.isTitleVisible=function(t){return!!this.inspectorFilter.isDataTitleVisible(this.editor,this.data,t.title)&&w.prototype.isTitleVisible.call(this,t)},t.prototype.isPropertyVisible=function(t){return!!this.inspectorFilter.isDataPropertyVisible(this.editor,this.data,t.keys&&t.keys.accessType,t.keys&&t.keys.name)&&w.prototype.isPropertyVisible.call(this,t)},t.prototype.addDBInput=function(w,t,G,A,I){var R=[];return this.addLabelInput(R,t,Z(w,G),z(w,G),A,I),this.addDBRow(R,w,G)},t.prototype.addDBLabel=function(w,t,G){var A=[];return this.addLabelLabel(A,t,Z(w,G),z(w,G)),this.addDBRow(A,w,G)},t.prototype.addDBCheckBox=function(w,t,G){var A=[];return this.addLabelCheckBox(A,t,Z(w,G),z(w,G)),this.addDBRow(A,w,G)},t.prototype.addDBImage=function(w,t,G){var A=[];return this.addLabelImage(A,t,Z(w,G),z(w,G)),this.addDBRow(A,w,G)},t.prototype.addDBColor=function(w,t,G){var A=[],I=function(t,A){"shape.background"===G&&t.s("shape.gradient.pack")&&t.s("shape.gradient.pack",void 0),z(w,G)(t,A)};return this.addLabelColor(A,t,Z(w,G),I),this.addDBRow(A,w,G)},t.prototype.addDBFont=function(w,t,G){var A=[];return this.addLabelFont(A,t,Z(w,G),z(w,G)),this.addDBRow(A,w,G)},t.prototype.addDBPattern=function(w,t,G){var A=[];return this.addLabelInput(A,t,Z(w,G),z(w,G),"pattern"),this.addDBRow(A,w,G)},t.prototype.addDBRotation=function(w,t,G){var A=[];return this.addLabelRotation(A,t,Z(w,G),z(w,G)),this.addDBRow(A,w,G)},t.prototype.addDBAlign=function(w,t,G){var A=[];return this.addLabelAlign(A,t,Z(w,G),z(w,G)),this.addDBRow(A,w,G)},t.prototype.addDBVAlign=function(w,t,G){var A=[];return this.addLabelVAlign(A,t,Z(w,G),z(w,G)),this.addDBRow(A,w,G)},t.prototype.addDBOrientation=function(w,t,G){var A=[];return this.addLabelOrientation(A,t,Z(w,G),z(w,G)),this.addDBRow(A,w,G)},t.prototype.addDBComboBox=function(w,t,G,A,I,R){var _=[];return this.addLabelComboBox(_,t,Z(w,G),z(w,G),A,I,R),this.addDBRow(_,w,G)},t.prototype.addDBStretch=function(w,t,G){var A=[];return this.addLabelStretch(A,t,Z(w,G),z(w,G)),this.addDBRow(A,w,G)},t.prototype.addDBZeroToOne=function(w,t,G){var A=[];return this.addLabelRange(A,t,Z(w,G),z(w,G),0,1,.01,"number"),this.addDBRow(A,w,G)},t.prototype.addDBPosition=function(w,t,G){var A=[];return this.addLabelPosition(A,t,Z(w,G),z(w,G)),this.addDBRow(A,w,G)},t.prototype.addDBRange=function(w,t,G,A,I,R,_){var r=[];return this.addLabelRange(r,t,Z(w,G),z(w,G),A,I,R,_),this.addDBRow(r,w,G)},t.prototype.addDBGradient=function(w,t,G,A){var I=[];return this.addLabelGradient(I,w,t,G,A),this.addDBRow(I,"s",t)},t.prototype.addDBBodyColorProperty=function(){this.addDBColor("s",R("editor.bodycolor"),"body.color")},t.prototype.addDBOpacityProperty=function(){this.addDBZeroToOne("s",R("editor.opacity"),"opacity")},t.prototype.$83$=function(){var w=[];return this.addLabelIcons(w),this.addDBRow(w,"s","icons")},t.prototype.addDBData=function(w,t,G,A){var I=[];return this.addLabelData(I,t,Z(w,G),A||z(w,G)),this.addDBRow(I,w,G)},t.prototype.addDBMultiline=function(w,t,G){var A=[];return this.addLabelMultiline(A,t,Z(w,G),z(w,G)),this.addDBRow(A,w,G)},t.prototype.$27$=function(){this.addTitle("TitleBasic");var w=[];this.addLabelInput(w,R("editor.classname"),function(w){return w.getClassName()}),this.addRow(w,this.w1).keys={accessType:"p",name:"className"},this.addDBInput("p",R("editor.name"),"displayName"),this.addDBInput("p",R("editor.tag"),"tag"),this.addDBImage("p",R("editor.icon"),"icon"),this.addDBData("p",R("editor.parent"),"parent")},t.prototype.$29$=function(){this.addTitle("TitleLabel"),this.addDBMultiline("s",R("editor.content"),"label"),this.addDBFont("s",R("editor.font"),"label.font"),this.addDBColor("s",R("editor.color"),"label.color"),this.addDBColor("s",R("editor.background"),"label.background"),this.addDBPosition("s",R("editor.position"),"label.position"),this.addDBInput("s",R("editor.offsetx"),"label.offset.x","number",1),this.addDBInput("s",R("editor.offsety"),"label.offset.y","number",1),this.addDBInput("s",R("editor.maxlength"),"label.max","number",1),this.addDBRotation("s",R("editor.rotation"),"label.rotation"),this.addDBZeroToOne("s",R("editor.opacity"),"label.opacity"),this.addDBRange("s",R("editor.scale"),"label.scale",.01,100,.1,"number"),this.addDBAlign("s",R("editor.align"),"label.align"),this.addDBCheckBox("s",R("editor.fixed"),"label.position.fixed")},t.prototype.$30$=function(){this.addTitle("TitleNote"),this.addDBMultiline("s",R("editor.content"),"note"),this.addDBFont("s",R("editor.font"),"note.font"),this.addDBColor("s",R("editor.color"),"note.color"),this.addDBColor("s",R("editor.background"),"note.background"),this.addDBInput("s",R("editor.borderwidth"),"note.border.width","number",1),this.addDBColor("s",R("editor.bordercolor"),"note.border.color"),this.addDBPosition("s",R("editor.position"),"note.position"),this.addDBInput("s",R("editor.offsetx"),"note.offset.x","number",1),this.addDBInput("s",R("editor.offsety"),"note.offset.y","number",1),this.addDBZeroToOne("s",R("editor.opacity"),"note.opacity"),this.addDBRange("s",R("editor.scale"),"note.scale",.01,100,.1,"number"),this.addDBInput("s",R("editor.maxlength"),"note.max","number",1),this.addDBAlign("s",R("editor.align"),"note.align"),this.addDBCheckBox("s",R("editor.toggleable"),"note.toggleable"),this.addDBCheckBox("s",R("editor.expanded"),"note.expanded")},t.prototype.addDBLayer=function(){var w=[];this.addLabelLayer(w);var t=this.addDBRow(w,"p","layer");return t.items.tag="layer",t},t.prototype.addDBGray=function(){this.addDBCheckBox("s",R("editor.gray"),"2d.gray")},t}(LI),fI={TitleShapeBackground:!0,TitleShapeForeground:!0,TitleShapeBorder:!0,TitleShapeDash:!0},iI=function(w){function t(G,A){return _G(this,t),lG(this,w.call(this,G,A))}return yG(t,w),t.prototype.initForm=function(){this.addCustomProperties(),this.addControlProperties(),this.addLayoutProperties(),this.$27$(),this.$91$(),this.$28$(),this.$29$(),this.$30$(),this.$25$()},t.prototype.addControlProperties=function(){this.addTitle("TitleControl"),this.addEventProperties(),this.addDBComboBox("s",R("editor.movemode"),"2d.move.mode",[void 0,"x","y"],["",R("editor.horizontal"),R("editor.vertical")]),this.addDBCheckBox("s",R("editor.ingroup"),"ingroup"),this.addDBCheckBox("s",R("editor.visible"),"2d.visible"),this.addDBCheckBox("s",R("editor.selectable"),"2d.selectable"),this.addDBCheckBox("s",R("editor.movable"),"2d.movable"),this.addDBCheckBox("s",R("editor.editable"),"2d.editable"),this.addDBCheckBox("s",R("editor.pixelperfect"),"pixelPerfect")},t.prototype.$27$=function(){w.prototype.$27$.call(this),this.addDBGray(),this.addDBLayer(),this.addDBInput("p",R("editor.tooltip"),"toolTip"),this.addDBBodyColorProperty(),this.addDBOpacityProperty(),this.$83$(),this.addDBState(),this.$84$()},t.prototype.addDBState=function(){var w=this,t=[];this.addLabelState(t);var G=this.addDBRow(t,"s","state");return G.visible=function(){var t=w.getStateEnum();return t&&t.length},G},t.prototype.getStateEnum=function(){var w=ht.Default.getImage(this.data.getImage());return w?w.stateEnum:null},t.prototype.addActionLabelState=function(w){this.addLabelState(w,{accessType:"s",name:"state"})},t.prototype.addLabelState=function(w,t){var G=this,A=new ht.widget.ComboBox,I=function(w){var t=w.s("state");if(t)return t;if(w.getImage){var G=ht.Default.getImage(w.getImage());return G?G.state:void 0}},_=z("s","state");return this.addLabel(w,R("editor.state"),void 0,void 0,void 0,t),A.onValueChanged=function(){G.setValue(_,A.getValue())},this.updateHandlers.push(function(){if(!w.hidden){var t=G.getStateEnum();if(!t||0===!t)return void(A.getValues()&&A.getValues().length&&(A.setValues(),A.setLabels(),A.setValue()));var R=G.getValue(I),_=t.map(function(w){return w.value}),r=t.map(function(w){return w.label||w.value});_.unshift(void 0),r.unshift(""),A.setValues(_),A.setLabels(r),A.getValue()!==R&&"object"!=typeof R&&A.setValue(R)}}),w.push(A),A},t.prototype.addActionLabelNodeImage=function(w){this.addLabelNodeImage(w,{accessType:"p",name:"image"})},t.prototype.addLabelNodeImage=function(w,t){var G=this;w.forceToUpdate=!0,this.addLabelImage(w,R("editor.image"),function(w){var t=w.getImage(),A=ht.Default.getImage(t);return G.$85$(Fw(A)?A.dataBindings:null,A),t},function(w,t){w.setImage&&(fw(t)&&t.endsWith("[...]")||w.setImage(t))},t),this.addButton(w,null,R("editor.resetsize"),"editor.resetsize.state",function(w){w instanceof ht.Node&&w.setSize(-1,-1)})},t.prototype.$91$=function(){this.addDBStretch("s",R("editor.stretch"),"image.stretch").items.tag="imageRelative",this.addDBComboBox("s",R("editor.shape"),"shape",kG.consts.shapes,kG.consts.shapeLabels,kG.consts.shapeIcons);var w=[];this.addLabelNodeImage(w),this.imageRow=this.addDBRow(w,"p","image"),this.imageRow.items.tag="imageRelative"},t.prototype.addLayoutProperties=function(){var w=this;this.addTitle("TitleLayout"),this.addDBInput("p",R("editor.posx"),"x","number",1),this.addDBInput("p",R("editor.posy"),"y","number",1),this.addDBInput("p",R("editor.width"),"width","number",1),this.addDBInput("p",R("editor.height"),"height","number",1),this.addDBRotation("p",R("editor.rotation"),"rotation");var t=[],G=void 0;this.addLabelInput(t,R("editor.scalex"),Z("p","scaleX"),z("p","scaleX"),"number",.01),this.addButton(t,null,R("editor.flipx"),"editor.flipx",function(w){w instanceof ht.Node&&w.setScaleX(-w.getScaleX())}),this.addDBRow(t,"p","scaleX"),t=[],this.addLabelInput(t,R("editor.scaley"),Z("p","scaleY"),z("p","scaleY"),"number",.01),this.addButton(t,null,R("editor.flipy"),"editor.flipy",function(w){w instanceof ht.Node&&w.setScaleY(-w.getScaleY())}),this.addDBRow(t,"p","scaleY"),t=[],this.addLabelInput(t,R("editor.anchorx"),function(w){return w.getAnchor().x},function(w,t){w instanceof ht.Node&&w.setAnchor(t,w.getAnchor().y,!0)},"number",.01),this.addDBRow(t,"p","anchorX"),t=[],this.addLabelInput(t,R("editor.anchory"),function(w){return w.getAnchor().y},function(w,t){w instanceof ht.Node&&w.setAnchor(w.getAnchor().x,t,!0)},"number",.01),this.addDBRow(t,"p","anchorY"),this.addDBData("p",R("editor.host"),"host",function(w,t){!w.s("fullscreen")&&w instanceof ht.Node&&(null==t||t instanceof ht.Node)&&w.setHost(t)}).items.tag="host",this.addUpdateHandler(function(){w.updateSymbolLayoutProperties()}),kG.config.layoutEnabled&&(this.addDBComboBox("s",R("editor.fullscreen"),"fullscreen",kG.consts.fullscreenValues,kG.consts.fullscreenLabels).items.tag="fullscreen",this.addDBComboBox("s",R("editor.fullscreen.lock"),"fullscreen.lock",kG.consts.fullscreenLockValues,kG.consts.fullscreenLockLabels).items.tag="fullscreenDetail",this.addDBInput("s",R("editor.fullscreen.gap"),"fullscreen.gap","number",1).items.tag="fullscreenDetail",this.addNameRow([null,{element:this.addLayoutView()},null],"layoutView",void 0,100,[.1,100,.1]).items.tag="nodeLayout",G=this.addDBComboBox("s",R("editor.nodeLayout.h"),"layout.h",kG.consts.hLayoutValues,kG.consts.hLayoutLabels),G.items.tag="nodeLayout",this.layoutVRow=G=this.addDBComboBox("s",R("editor.nodeLayout.v"),"layout.v",kG.consts.vLayoutValues,kG.consts.vLayoutLabels),G.items.tag="nodeLayout")},t.prototype.addLayoutView=function(){var w=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,G=this.layoutGv=new ht.graph.GraphView,A=this.layoutNode=new ht.Node,I=!1;return A.setImage("editor.layout.helper"),A.a("selectColor",kG.config.color_select),A.setSize(t,t),G.dm().add(A),G.tx(t/2),G.ty(t/2),G.handleScroll=function(){},G.handlePinch=function(){},G.setScrollBarVisible(!1),G.setRectSelectable(!1),G.setPannable(!1),G.setMovableFunc(function(){return!1}),G.dm().md(function(t){I||(w.beginTransaction(),w.dataModel.sm().getSelection().each(function(w){"a:layout.v"===t.property?w.s("layout.v",t.newValue):"a:layout.h"===t.property&&w.s("layout.h",t.newValue)}),w.endTransaction())}),this.addUpdateHandler(function(){var t=w.data;I=!0,A.a({"layout.v":t.s("layout.v"),"layout.h":t.s("layout.h")}),I=!1}),G},t.prototype.$84$=function(){this.addDBZeroToOne("s",R("editor.clippercentage"),"clip.percentage"),this.addDBComboBox("s",R("editor.clipdirection"),"clip.direction",kG.consts.clipDirections,kG.consts.clipDirectionLabels)},t.prototype.$28$=function(){this.$24$(),this.addShapeForegroundProperties(),this.$32$(),this.addShapeDashProperties()},t.prototype.$24$=function(){this.addTitle("TitleShapeBackground"),this.addDBColor("s",R("editor.background"),"shape.background"),this.addDBGradient(R("editor.gradient"),"shape.gradient","shape.background","shape.gradient.color"),this.addDBColor("s",R("editor.gradientcolor"),"shape.gradient.color"),this.addDBImage("s",R("editor.repeatimage"),"shape.repeat.image"),this.addDBZeroToOne("s",R("editor.clippercentage"),"shape.fill.clip.percentage"),this.addDBComboBox("s",R("editor.clipdirection"),"shape.fill.clip.direction",kG.consts.clipDirections,kG.consts.clipDirectionLabels)},t.prototype.addShapeForegroundProperties=function(){this.addTitle("TitleShapeForeground"),this.addDBColor("s",R("editor.foreground"),"shape.foreground"),this.addDBGradient(R("editor.gradient"),"shape.foreground.gradient","shape.foreground","shape.foreground.gradient.color"),this.addDBColor("s",R("editor.gradientcolor"),"shape.foreground.gradient.color"),this.addDBZeroToOne("s",R("editor.clippercentage"),"shape.foreground.clip.percentage"),this.addDBComboBox("s",R("editor.clipdirection"),"shape.foreground.clip.direction",kG.consts.clipDirections,kG.consts.clipDirectionLabels)},t.prototype.$32$=function(){this.addTitle("TitleShapeBorder"),this.addDBInput("s",R("editor.width"),"shape.border.width","number",1),this.addDBCheckBox("s",R("editor.widthabsolute"),"shape.border.width.absolute"),this.addDBPattern("s",R("editor.pattern"),"shape.border.pattern"),this.addDBColor("s",R("editor.color"),"shape.border.color"),this.addDBCheckBox("s",R("editor.threed"),"shape.border.3d"),this.addDBColor("s",R("editor.threedcolor"),"shape.border.3d.color"),this.addDBComboBox("s",R("editor.join"),"shape.border.join",kG.consts.joins,kG.consts.joinLabels),this.addDBComboBox("s",R("editor.cap"),"shape.border.cap",kG.consts.caps,kG.consts.capLabels),this.$23$()},t.prototype.$23$=function(){
this.addDBInput("s",R("editor.depth"),"shape.depth","int",1).items.tag="shapeDepth",this.addDBInput("s",R("editor.sides"),"shape.polygon.side","int",1).items.tag="shapeSide",this.addDBInput("s",R("editor.radius"),"shape.corner.radius","number",1).items.tag="shapeRadius",this.addDBCheckBox("s",R("editor.arcoval"),"shape.arc.oval").items.tag="shapeArc",this.addDBCheckBox("s",R("editor.closed"),"shape.arc.close").items.tag="shapeArc",this.addDBRotation("s",R("editor.arcfrom"),"shape.arc.from").items.tag="shapeArc",this.addDBRotation("s",R("editor.arcto"),"shape.arc.to").items.tag="shapeArc"},t.prototype.addShapeDashProperties=function(){this.addTitle("TitleShapeDash"),this.addDBPattern("s",R("editor.pattern"),"shape.dash.pattern"),this.addDBCheckBox("s",R("editor.dash"),"shape.dash"),this.addDBColor("s",R("editor.color"),"shape.dash.color"),this.addDBInput("s",R("editor.offset"),"shape.dash.offset","number",1),this.addDBInput("s",R("editor.width"),"shape.dash.width","number",1),this.addDBCheckBox("s",R("editor.threed"),"shape.dash.3d"),this.addDBColor("s",R("editor.threedcolor"),"shape.dash.3d.color")},t.prototype.$34$=function(t){if(this._updateDataBindingsLater&&this.$86$(),t){if("s:shape"===t.property||"host"===t.property||"s:fullscreen"===t.property)return void this.filterPropertiesLater();if("s:select.type"===t.property&&("shadow"===t.oldValue||"shadow"===t.newValue))return void this.filterPropertiesLater()}w.prototype.$34$.call(this,t)},t.prototype.isTitleVisible=function(t){return!(!(!this.data||this.data instanceof ht.Shape||this.data.s("shape"))&&fI[t.title])&&w.prototype.isTitleVisible.call(this,t)},t.prototype.isPropertyVisible=function(t){if(this.data){var G=t.items.tag;if(G)if("selectShadow"===G){if("shadow"!==this.data.s("select.type"))return!1}else if("shapeDepth"===G){if("rect"!==this.data.s("shape"))return!1}else if("shapeSide"===G){if("polygon"!==this.data.s("shape"))return!1}else if("shapeRadius"===G){if("roundRect"!==this.data.s("shape"))return!1}else if("shapeArc"===G){if("arc"!==this.data.s("shape"))return!1}else if("imageRelative"===G){if(this.data.s("shape"))return!1}else if("layer"===G){if(!this.editor.layerPane.layerNames.length)return!1}else if("fullscreen"===G){if(this.data.getHost())return!1}else if("fullscreenDetail"===G){if(!this.data.s("fullscreen"))return!1}else if("host"===G){if(this.data.s("fullscreen"))return!1}else if("nodeLayout"===G&&!this.data.getHost())return!1}return w.prototype.isPropertyVisible.call(this,t)},t.prototype.$85$=function(w,t){var G=this;this.dataBindings!==w&&(this.$45$=w,this.pendingImage=t,this._updateDataBindingsLater||(this._updateDataBindingsLater=!0,requestAnimationFrame(function(){G._updateDataBindingsLater&&G.$86$()})))},t.prototype.$86$=function(){var w=this;if(this._updateDataBindingsLater=!1,this.dataBindings===this.$45$)return this.$45$=null,void(this.pendingImage=null);if(this._rows=this.$46$,this.removeRows(this.$44$),this.dataBindingHandlers&&this.dataBindingHandlers.length&&this.dataBindingHandlers.forEach(this.removeUpdateHandler,this),this.$44$=[],this.dataBindingHandlers=[],this.dataBindings=this.$45$,this.dataBindings){var t=this.updateHandlers.length,G={},A={},I={};this.pendingImage.comps.forEach(function(w){if(Vw(w.type)){var t=ht.Default.getCompType(w.type);if(t)for(var R in t.properties)G[R]=t.properties[R].defaultValue}qt(w,A,I)});for(var R in A)void 0===I[R]&&(I[R]=G[A[R]]);var _=void 0,r=this._rows.indexOf(this.imageRow)+1;this.dataBindings.forEach(function(t){if(t.group&&_!==t.group){_=t.group;var G=w.addTitle(_,{index:r});G.items.tag="imageRelative",w.$44$.push(G),r++}w.$87$(t,r,I)&&r++}),this.dataBindingHandlers=this.updateHandlers.slice(t)}this.$46$=this._rows,this.filterProperties()},t.prototype.$87$=function(w,t,G,A,I){var l=[],C=w.attr,V=kG.config.valueTypes[w.valueType];if(!V)return this.editor.fireEvent("error",{message:"Wrong value type:"+w.valueType}),!1;var q=R(w.name)||C,k=function(w){var t=w.a(C);return void 0===t&&(t=G[C]),t},Z=function(w,t){w.a(C,t)},z=w.extraInfo,x=void 0,L=void 0,Q=void 0;z&&z.enum&&(x=z.enum.values,L=y(z.enum.labels,z.enum.i18nLabels),Q=z.enum.icons);var J=null==w.bindable||w.bindable,B=kG.SceneView&&J,n=void 0;z&&z.buildUI?(n=z.buildUI(this,l,q,k,Z,z),B=!1):x?B?this.addActionLabelComboBox(l,q,"a",C,x,L,Q,k,Z):this.addLabelComboBox(l,q,k,Z,x,L,Q):"int"===V.type||"number"===V.type?V.angle?B?this.addActionLabelRotation(l,q,"a",C,V.min,V.max,V.step,k,Z):this.addLabelRotation(l,q,k,Z,V.min,V.max,V.step):B?this.addActionLabelRange(l,q,"a",C,V.min,V.max,V.step,V.type,k,Z):this.addLabelRange(l,q,k,Z,V.min,V.max,V.step,V.type):"color"===V.type?B?this.addActionLabelColor(l,q,"a",C,k,Z):this.addLabelColor(l,q,k,Z):"boolean"===V.type?B?this.addActionLabelCheckBox(l,q,"a",C,k,Z):this.addLabelCheckBox(l,q,k,Z):"enum"===V.type?B?this.addActionLabelComboBox(l,q,"a",C,V.values,V.labels,V.icons,k,Z):this.addLabelComboBox(l,q,k,Z,V.values,V.labels,V.icons):"multiline"===V.type?B?this.addActionLabelMultiline(l,q,"a",C,k,Z):this.addLabelMultiline(l,q,k,Z):"font"===V.type?B?this.addActionLabelFont(l,q,"a",C,k,Z):this.addLabelFont(l,q,k,Z):"image"===V.type?B?this.addActionLabelImage(l,q,"a",C,k,Z):this.addLabelImage(l,q,k,Z):"url"===V.type?B?this.addActionLabelURL(l,q,"a",C,void 0,k,Z):this.addLabelURL(l,q,k,Z):"colorArray"===V.type?B?this.addActionLabelArray(l,q,"a",C,"color",k,Z):this.addLabelArray(l,q,k,Z,"color"):"numberArray"===V.type?B?this.addActionLabelArray(l,q,"a",C,"number",k,Z):this.addLabelArray(l,q,k,Z,"number"):"stringArray"===V.type?B?this.addActionLabelArray(l,q,"a",C,"string",k,Z):this.addLabelArray(l,q,k,Z,"string"):"objectArray"===V.type?B?this.addActionLabelArray(l,q,"a",C,"object",k,Z):this.addLabelArray(l,q,k,Z,"object"):"function"===V.type?B?this.addActionLabelFunction(l,q,"a",C,C,z&&z.arguments,k,Z):this.addLabelFunction(l,q,k,Z,C,z&&z.arguments):"object"===V.type?B?this.addActionLabelObject(l,q,"a",C,C,k,Z):this.addLabelObject(l,q,k,Z,C):"custom"===V.type?(n=V.buildUI(this,l,q,k,Z,z),B=!1):"dataModel"===V.type?B?this.addActionLabelDataModel(l,q,"a",C,C,z,k,Z):this.addLabelDataModel(l,q,k,Z,C,z):B?this.addActionLabelInput(l,q,"a",C,void 0,void 0,void 0,k,Z):this.addLabelInput(l,q,k,Z);var f=this.addDBRow(l,"a",C,{index:t},_(n,V),r(n,V),J&&!B);return z&&(f.visible=z.visible,f.onPropertyChanged=z.onPropertyChanged),A||(A=this.$44$),A.push(f),null!==I&&(l.tag=I||"imageRelative"),!0},t.prototype.$25$=function(){this.addTitle("TitleSelect"),this.addDBColor("s",R("editor.color"),"select.color"),this.addDBInput("s",R("editor.width"),"select.width","number",1),this.addDBInput("s",R("editor.padding"),"select.padding","number",1),this.addDBComboBox("s",R("editor.selecttype"),"select.type",kG.consts.selectTypes,kG.consts.selectTypeLabels,kG.consts.selectTypeIcons),this.addDBInput("s",R("editor.shadowblur"),"shadow.blur","number",1).items.tag="selectShadow",this.addDBInput("s",R("editor.shadowoffsetx"),"shadow.offset.x","number",1).items.tag="selectShadow",this.addDBInput("s",R("editor.shadowoffsety"),"shadow.offset.y","number",1).items.tag="selectShadow"},t.prototype.updateSymbolLayoutProperties=function(){var w=this,t=this.data.getHost(),G=void 0,A=void 0;if(t&&t.getImage&&(G=t.getImage())&&(G=ht.Default.getImage(G),Fw(G)&&(A=G.layoutProperties)),this.layoutProperties!==A){if(this._rows=this.$46$,this.removeRows(this.layoutPropertiesRows),this.layoutPropertiesHandlers&&this.layoutPropertiesHandlers.length&&this.layoutPropertiesHandlers.forEach(this.removeUpdateHandler,this),this.layoutPropertiesRows=[],this.layoutPropertiesHandlers=[],this.layoutProperties=A,this.layoutProperties){var I=this.updateHandlers.length,R=void 0,_=this._rows.indexOf(this.layoutVRow)+1;this.layoutProperties.forEach(function(t){if(t.group&&R!==t.group){R=t.group;var G=w.addTitle(R,{index:_});G.items.tag="layoutRelative",w.layoutPropertiesRows.push(G),_++}w.$87$(t,_,{},w.layoutPropertiesRows,"layoutRelative")&&_++}),this.layoutPropertiesHandlers=this.updateHandlers.slice(I)}this.$46$=this._rows}},t}(nI),FI={"h.v":!0,"v.h":!0,ortho:!0,flex:!0,"extend.east":!0,"extend.west":!0,"extend.north":!0,"extend.south":!0,ortho2:!0,flex2:!0,"extend.north2":!0,"extend.south2":!0,"extend.west2":!0,"extend.east2":!0,"v.h2":!0,"h.v2":!0},SI={"extend.east":!0,"extend.west":!0,"extend.north":!0,"extend.south":!0,"extend.north2":!0,"extend.south2":!0,"extend.west2":!0,"extend.east2":!0},NI=function(w){function t(G,A){return _G(this,t),lG(this,w.call(this,G,A))}return yG(t,w),t.prototype.initForm=function(){this.$26$(),this.addCustomProperties(),this.addControlProperties(),this.$27$(),this.addDBGray(),this.$88$(),this.addEdgeEndpointProperties(),this.$90$(),this.$29$(),this.$30$(),this.$25$()},t.prototype.addControlProperties=function(){this.addTitle("TitleControl"),this.addEventProperties(),this.addDBCheckBox("s",R("editor.visible"),"2d.visible"),this.addDBCheckBox("s",R("editor.selectable"),"2d.selectable"),this.addDBCheckBox("s",R("editor.editable"),"2d.editable"),this.addDBCheckBox("s",R("editor.independent"),"edge.independent"),this.addDBCheckBox("s",R("editor.toggleable"),"edge.toggleable")},t.prototype.isTitleVisible=function(t){return!("TitleEditingPoint"===t.title&&!this.editor.pointsEditingMode)&&w.prototype.isTitleVisible.call(this,t)},t.prototype.$34$=function(t){if(t){var G=t.property;if("s:edge.type"===G||"source"===G||"target"===G||"s:select.type"===G)return void this.filterPropertiesLater()}w.prototype.$34$.call(this,t)},t.prototype.isPropertyVisible=function(t){if(this.data){var G=t.items.tag;if(G){var A=this.data.s("edge.type");if("edgeRipple"===G){if("ripple"!==A)return!1}else if("edgeRadius"===G){if(!FI[A])return!1}else if("edgeOrtho"===G){if("ortho"!==A&&"ortho2"!==A)return!1}else if("edgeFlex"===G){if("flex"!==A&&"flex2"!==A)return!1}else if("edgeExtend"===G){if(!SI[A])return!1}else if("layer"===G){if(!this.editor.layerPane.layerNames.length)return!1}else{if(!("edgeSourceIsEdge"!==G||this.data.getSource()instanceof ht.Edge))return!1;if(!("edgeTargetIsEdge"!==G||this.data.getTarget()instanceof ht.Edge))return!1;if(!("edgeSourceIsNode"!==G||this.data.getSource()instanceof ht.Node))return!1;if("edgeTargetIsNode"===G&&!(this.data.getTarget()instanceof ht.Node))return!1}}}return w.prototype.isPropertyVisible.call(this,t)},t.prototype.$27$=function(){w.prototype.$27$.call(this),this.addDBLayer(),this.addDBInput("p",R("editor.tooltip"),"toolTip"),this.addDBOpacityProperty(),this.$83$()},t.prototype.$25$=function(){this.addTitle("TitleSelect"),this.addDBColor("s",R("editor.color"),"select.color"),this.addDBInput("s",R("editor.width"),"select.width","number",1);var w=[];this.addLabelCheckBox(w,R("editor.shadow"),function(w){return"shadow"===w.s("select.type")},function(w,t){w.s("select.type",t?"shadow":null)}),this.addDBRow(w,"s","select.type"),this.addDBInput("s",R("editor.shadowblur"),"shadow.blur","number",1),this.addDBInput("s",R("editor.shadowoffsetx"),"shadow.offset.x","number",1),this.addDBInput("s",R("editor.shadowoffsety"),"shadow.offset.y","number",1)},t.prototype.$88$=function(){this.addTitle("TitleEdgeBasic"),this.addDBInput("s",R("editor.width"),"edge.width","number",1),this.addDBCheckBox("s",R("editor.widthabsolute"),"edge.width.absolute"),this.addDBPattern("s",R("editor.pattern"),"edge.pattern"),this.addDBColor("s",R("editor.color"),"edge.color"),this.addDBCheckBox("s",R("editor.threed"),"edge.3d"),this.addDBColor("s",R("editor.threedcolor"),"edge.3d.color"),this.addDBComboBox("s",R("editor.join"),"edge.join",kG.consts.joins,kG.consts.joinLabels),this.addDBComboBox("s",R("editor.cap"),"edge.cap",kG.consts.caps,kG.consts.capLabels),this.addDBInput("s",R("editor.group"),"edge.group"),this.addDBInput("s",R("editor.offset"),"edge.offset","number",1),this.addDBInput("s",R("editor.gap"),"edge.gap","number",1),this.addDBComboBox("s",R("editor.type"),"edge.type",kG.consts.edgeTypes,kG.consts.edgeTypeLabels),this.addDBInput("s",R("editor.radius"),"edge.corner.radius","number",1).items.tag="edgeRadius",this.addDBZeroToOne("s",R("editor.ortho"),"edge.ortho").items.tag="edgeOrtho",this.addDBInput("s",R("editor.flex"),"edge.flex","number",1).items.tag="edgeFlex",this.addDBInput("s",R("editor.extend"),"edge.extend","number",1).items.tag="edgeExtend",this.addDBInput("s",R("editor.ripplesize"),"edge.ripple.size","int",1).items.tag="edgeRipple",this.addDBInput("s",R("editor.ripplelength"),"edge.ripple.length","number",1).items.tag="edgeRipple",this.addDBInput("s",R("editor.rippleelevation"),"edge.ripple.elevation","number",1).items.tag="edgeRipple",this.addDBCheckBox("s",R("editor.rippleboth"),"edge.ripple.both").items.tag="edgeRipple",this.addDBCheckBox("s",R("editor.ripplestraight"),"edge.ripple.straight").items.tag="edgeRipple",this.addDBCheckBox("s",R("editor.center"),"edge.center");var w=[],t=function(w,t){w instanceof ht.Edge&&w.toggle()};t.once=!0,this.addLabelCheckBox(w,R("editor.expanded"),function(w){return w.s("edge.expanded")},t),this.addDBRow(w,"s","edge.expanded")},t.prototype.$90$=function(){this.addTitle("TitleEdgeDash"),this.addDBCheckBox("s",R("editor.dash"),"edge.dash"),this.addDBPattern("s",R("editor.pattern"),"edge.dash.pattern"),this.addDBColor("s",R("editor.color"),"edge.dash.color"),this.addDBInput("s",R("editor.offset"),"edge.dash.offset","number",1),this.addDBInput("s",R("editor.width"),"edge.dash.width","number",1),this.addDBCheckBox("s",R("editor.threed"),"edge.dash.3d"),this.addDBColor("s",R("editor.threedcolor"),"edge.dash.3d.color")},t.prototype.addEdgeEndpointProperties=function(){this.addTitle("TitleEdgeEndpoint"),this.addDBData("p",R("editor.sourcedata"),"source",function(w,t){w instanceof ht.Edge&&(null==t||t instanceof ht.Node||t instanceof ht.Edge)&&(w.setSource(t),w.s("edge.source.percent",.5))}),this.addDBData("p",R("editor.targetdata"),"target",function(w,t){w instanceof ht.Edge&&(null==t||t instanceof ht.Node||t instanceof ht.Edge)&&(w.setTarget(t),w.s("edge.target.percent",.5))});var w=void 0;w=this.addDBZeroToOne("s",R("editor.sourcepercent"),"edge.source.percent"),w.items.tag="edgeSourceIsEdge",w=this.addDBRange("s",R("editor.sourceindex"),"edge.source.index",-1,void 0,1,"int"),w.items.tag="edgeSourceIsEdge",w=this.addDBPosition("s",R("editor.sourceposition"),"edge.source.position"),w.items.tag="edgeSourceIsNode",w=this.addDBInput("s",R("editor.sourceoffsetx"),"edge.source.offset.x","number",1),w.items.tag="edgeSourceIsNode",w=this.addDBInput("s",R("editor.sourceoffsety"),"edge.source.offset.y","number",1),w.items.tag="edgeSourceIsNode",w=this.addDBInput("s",R("editor.sourceanchorx"),"edge.source.anchor.x","number",.01),w.items.tag="edgeSourceIsNode",w=this.addDBInput("s",R("editor.sourceanchory"),"edge.source.anchor.y","number",.01),w.items.tag="edgeSourceIsNode",w=this.addDBZeroToOne("s",R("editor.targetpercent"),"edge.target.percent"),w.items.tag="edgeTargetIsEdge",w=this.addDBRange("s",R("editor.targetindex"),"edge.target.index",-1,void 0,1,"int"),w.items.tag="edgeTargetIsEdge",w=this.addDBPosition("s",R("editor.targetposition"),"edge.target.position"),w.items.tag="edgeTargetIsNode",w=this.addDBInput("s",R("editor.targetoffsetx"),"edge.target.offset.x","number",1),w.items.tag="edgeTargetIsNode",w=this.addDBInput("s",R("editor.targetoffsety"),"edge.target.offset.y","number",1),w.items.tag="edgeTargetIsNode",w=this.addDBInput("s",R("editor.targetanchorx"),"edge.target.anchor.x","number",.01),w.items.tag="edgeTargetIsNode",w=this.addDBInput("s",R("editor.targetanchory"),"edge.target.anchor.y","number",.01),w.items.tag="edgeTargetIsNode"},t}(nI),TI=function(w){function t(G,A){return _G(this,t),lG(this,w.call(this,G,A))}return yG(t,w),t.prototype.initForm=function(){this.addCustomProperties(),this.addControlProperties(),this.addLayoutProperties(),this.$27$(),this.$91$(),this.$31$(),this.$93$(),this.$92$(),this.$28$(),this.$29$(),this.$30$(),this.$25$()},t.prototype.$34$=function(t){if(t&&"s:group.type"===t.property)return void this.filterPropertiesLater();w.prototype.$34$.call(this,t)},t.prototype.isTitleVisible=function(t){return(!this.data||!this.data.s("group.type")||"TitleGroupTitle"!==t.title)&&w.prototype.isTitleVisible.call(this,t)},t.prototype.isPropertyVisible=function(t){if(this.data){var G=t.items.tag;if(G&&"groupDepth"===G){var A=this.data.s("group.type");if(A&&"rect"!==A)return!1}}return w.prototype.isPropertyVisible.call(this,t)},t.prototype.$31$=function(){this.addTitle("TitleGroupBasic"),this.addDBComboBox("s",R("editor.type"),"group.type",[void 0,"rect","oval","circle","roundRect"],["",R("editor.grouptype.rect"),R("editor.grouptype.oval"),R("editor.grouptype.circle"),R("editor.grouptype.roundrect")]),this.addDBPosition("s",R("editor.position"),"group.position"),this.addDBColor("s",R("editor.background"),"group.background"),this.addDBGradient(R("editor.gradient"),"group.gradient","group.background","group.gradient.color"),this.addDBColor("s",R("editor.gradientcolor"),"group.gradient.color"),this.addDBImage("s",R("editor.image"),"group.image"),this.addDBStretch("s",R("editor.stretch"),"group.image.stretch"),this.addDBImage("s",R("editor.repeatimage"),"group.repeat.image"),this.addDBCheckBox("s",R("editor.toggleable"),"group.toggleable"),this.addDBCheckBox("p",R("editor.expanded"),"expanded"),this.addDBInput("s",R("editor.depth"),"group.depth","number",1).items.tag="groupDepth"},t.prototype.$93$=function(){this.addTitle("TitleGroupTitle"),this.addDBLabel("s",R("editor.content"),"label"),this.addDBFont("s",R("editor.font"),"group.title.font"),this.addDBColor("s",R("editor.color"),"group.title.color"),this.addDBColor("s",R("editor.background"),"group.title.background"),this.addDBAlign("s",R("editor.align"),"group.title.align"),this.addDBOrientation("s",R("editor.valuetype.orientation"),"group.title.orientation"),this.addDBCheckBox("s",R("editor.splitline"),"group.splitLine")},t.prototype.$92$=function(){this.addTitle("TitleGroupBorder"),this.addDBInput("s",R("editor.width"),"group.border.width","number",1),this.addDBPattern("s",R("editor.pattern"),"group.border.pattern"),this.addDBColor("s",R("editor.color"),"group.border.color"),this.addDBComboBox("s",R("editor.join"),"group.border.join",kG.consts.joins,kG.consts.joinLabels),this.addDBComboBox("s",R("editor.cap"),"group.border.cap",kG.consts.caps,kG.consts.capLabels),this.addDBInput("s",R("editor.radius"),"group.border.radius","number",1),this.addDBInput("s",R("editor.padding"),"group.padding","number",1),this.addDBInput("s",R("editor.paddingleft"),"group.padding.left","number",1),this.addDBInput("s",R("editor.paddingright"),"group.padding.right","number",1),this.addDBInput("s",R("editor.paddingtop"),"group.padding.top","number",1),this.addDBInput("s",R("editor.paddingbottom"),"group.padding.bottom","number",1)},t}(iI),mI=function(w){function t(G,A){return _G(this,t),lG(this,w.call(this,G,A))}return yG(t,w),t.prototype.initForm=function(){this.$26$(),this.addCustomProperties(),this.addControlProperties(),this.addLayoutProperties(),this.$27$(),this.$28$(),this.$29$(),this.$30$(),this.$25$()},t.prototype.isTitleVisible=function(t){return!("TitleEditingPoint"===t.title&&!this.editor.pointsEditingMode)&&w.prototype.isTitleVisible.call(this,t)},t.prototype.$23$=function(){this.addDBCheckBox("p",R("editor.closed"),"closePath"),this.addDBColor("s",R("editor.outlinecolor"),"border.color"),this.addDBInput("s",R("editor.outlinewidth"),"border.width","number",1)},t.prototype.$24$=function(){w.prototype.$24$.call(this),this.addDBComboBox("s",R("editor.fillrule"),"shape.fill.rule",kG.consts.fillRules,kG.consts.fillRuleLabels)},t.prototype.$25$=function(){this.addTitle("TitleSelect"),this.addDBColor("s",R("editor.color"),"select.color"),this.addDBInput("s",R("editor.width"),"select.width","number",1);var w=[];this.addLabelCheckBox(w,R("editor.shadow"),function(w){return"shadow"===w.s("select.type")},function(w,t){w.s("select.type",t?"shadow":null)}),this.addDBRow(w,"s","select.type"),this.addDBInput("s",R("editor.shadowblur"),"shadow.blur","number",1),this.addDBInput("s",R("editor.shadowoffsetx"),"shadow.offset.x","number",1),this.addDBInput("s",R("editor.shadowoffsety"),"shadow.offset.y","number",1)},t}(iI),UI=function(w){function t(G,A){return _G(this,t),lG(this,w.call(this,G,A))}return yG(t,w),t.prototype.addControlProperties=function(){w.prototype.addControlProperties.call(this),this.addDBCheckBox("p",R("editor.clickthroughenabled"),"clickThroughEnabled");var t=[];this.addLabelCheckBox(t,R("editor.syncsize"),function(w){return w.isSyncSize()},function(w,t){w instanceof ht.Block&&(w.setSyncSize(t),w instanceof ht.RefGraph&&(w.p(0,0),w.setRotation(0),w.setAnchor(.5,.5),w.setScale(1,1),w.setSize(20,20),w.setRef(w.getRef())))}),this.addDBRow(t,"p","syncSize")},t.prototype.addDBGray=function(){},t.prototype.addDBBodyColorProperty=function(){},t.prototype.addDBOpacityProperty=function(){},t.prototype.$91$=function(){},t.prototype.$28$=function(){},t.prototype.$84$=function(){},t}(iI),cI=function(w){function t(G,A){return _G(this,t),lG(this,w.call(this,G,A))}return yG(t,w),t.prototype.$27$=function(){w.prototype.$27$.call(this),this.addDBRef()},t.prototype.addDBRef=function(){var w=this,t=[],G=function(w){return w.getRef()},A=function(w,t){w instanceof ht.RefGraph&&(w.p(0,0),w.setRotation(0),w.setAnchor(.5,.5),w.setScale(1,1),w.setSize(20,20),w.setRef(t))},I=function(t,G){var A=G.view.draggingData;return!!A&&(w.editor.url!==A.url&&A.fileType===BG)};return this.addLabelURL(t,R("editor.ref"),G,A,I),this.addDBRow(t,"p","ref")},t.prototype.addDBGray=function(){},t}(UI),vI=function(w){function t(G,A){return _G(this,t),lG(this,w.call(this,G,A))}return yG(t,w),t.prototype.initForm=function(){this.addCustomProperties(),this.addControlProperties(),this.addLayoutProperties(),this.$27$(),this.$21$(),this.$25$()},t.prototype.$21$=function(){this.addTitle("TitleText"),this.addDBInput("s",R("editor.content"),"text"),this.addDBAlign("s",R("editor.align"),"text.align"),this.addDBVAlign("s",R("editor.valign"),"text.vAlign"),this.addDBColor("s",R("editor.color"),"text.color"),this.addDBFont("s",R("editor.font"),"text.font"),this.addDBCheckBox("s",R("editor.shadow"),"text.shadow"),this.addDBColor("s",R("editor.shadowcolor"),"text.shadow.color"),this.addDBInput("s",R("editor.shadowblur"),"text.shadow.blur","number",1),this.addDBInput("s",R("editor.shadowoffsetx"),"text.shadow.offset.x","number",1),this.addDBInput("s",R("editor.shadowoffsety"),"text.shadow.offset.y","number",1)},t}(iI),EI=function(w){function t(G,A){return _G(this,t),lG(this,w.call(this,G,A,"comp"))}return yG(t,w),t.prototype.initForm=function(){this.addCustomProperties(),this.addControlProperties(),this.addLayoutProperties(),this.$11$(),this.$19$()},t.prototype.isTitleVisible=function(t){return!!this.inspectorFilter.isCompTitleVisible(this.editor,this.data?this.data.compType:null,t.title)&&w.prototype.isTitleVisible.call(this,t)},t.prototype.isPropertyVisible=function(t){return!!this.inspectorFilter.isCompPropertyVisible(this.editor,this.data?this.data.compType:null,t.keys&&t.keys.name)&&w.prototype.isPropertyVisible.call(this,t)},t.prototype.addControlProperties=function(){this.addTitle("TitleControl"),this.addEventProperties(),this.addStyleCheckBox(R("editor.visible"),"2d.visible","visible"),this.addStyleCheckBox(R("editor.selectable"),"2d.selectable","selectable"),this.addStyleCheckBox(R("editor.movable"),"2d.movable","movable"),this.addStyleCheckBox(R("editor.editable"),"2d.editable","editable"),this.addStyleCheckBox(R("editor.pixelperfect"),"pixelPerfect","pixelPerfect")},t.prototype.$11$=function(){this.addTitle("TitleBasic"),this.$13$(),this.$14$(),this.addStyleInput(R("editor.prefix"),"prefix","prefix"),this.$18$(),this.addStyleZeroToOne(R("editor.opacity"),"opacity","opacity"),this.addState()},t.prototype.addState=function(){var w=this,t=[],G=new ht.widget.ComboBox,A=Z("s","state"),I=z("s","state");this.addLabel(t,R("editor.state"),A,I),G.onValueChanged=function(){w.setValue(I,G.getValue())},this.updateHandlers.push(function(){if(!t.hidden){var I=w.getValue(A),R=w.editor.dm.a("stateEnum");if(R&&R.length){var _=R.map(function(w){return w.value}),r=R.map(function(w){return w.label||w.value});_.unshift(void 0),r.unshift(""),G.setValues(_),G.setLabels(r),G.getValue()!==I&&G.setValue(I)}}}),t.push(G);var _=this.addFuncRow(t,"state");return _.visible=function(){return w.editor.dm.a("stateEnum")&&w.editor.dm.a("stateEnum").length},_},t.prototype.$12$=function(){var w=[];this.addLabelInput(w,R("editor.area"),function(w){return"["+I(w.p().x-w.getWidth()*w.getAnchor().x)+","+I(w.p().y-w.getHeight()*w.getAnchor().y)+","+I(w.getWidth())+","+I(w.getHeight())+"]"}),this.addFuncRow(w,"rect")},t.prototype.$13$=function(){var w=[];this.addLabelInput(w,R("editor.type"),function(w){return w.compType}),this.addRow(w,this.w1).keys={name:"type"}},t.prototype.$14$=function(){var w=[];this.addLabelInput(w,R("editor.name"),function(w){return w.getDisplayName()},function(w,t){w.setDisplayName(t)}),this.addFuncRow(w,"displayName")},t.prototype.$15$=function(){var w=[];this.addLabelInput(w,R("editor.rotation"),function(w){return 180/Math.PI*w.getRotation()},function(w,t){w instanceof ht.Node&&w.setRotation(t*Math.PI/180)},"number",1),this.addFuncRow(w,"rotation")},t.prototype.$16$=function(){var w=[];this.addLabelInput(w,R("editor.anchorx"),function(w){return w.getAnchor().x},function(w,t){w instanceof ht.Node&&w.setAnchor(t,w.getAnchor().y,!0)},"number",.01),this.addFuncRow(w,"anchorX"),w=[],this.addLabelInput(w,R("editor.anchory"),function(w){return w.getAnchor().y},function(w,t){w instanceof ht.Node&&w.setAnchor(w.getAnchor().x,t,!0)},"number",.01),this.addFuncRow(w,"anchorY")},t.prototype.$17$=function(){var w=[];this.addLabelInput(w,R("editor.scalex"),function(w){return w.getScale().x},function(w,t){w instanceof ht.Node&&w.setScale(t,w.getScale().y)},"number",.01),this.addFuncRow(w,"scaleX"),w=[],this.addLabelInput(w,R("editor.scaley"),function(w){return w.getScale().y},function(w,t){w instanceof ht.Node&&w.setScale(w.getScale().x,t)},"number",.01),this.addFuncRow(w,"scaleY")},t.prototype.$18$=function(){this.addStyleZeroToOne(R("editor.clippercentage"),"clip.percentage","clipPercentage"),this.addStyleComboBox(R("editor.clipdirection"),"clip.direction",kG.consts.clipDirections,kG.consts.clipDirectionLabels,null,"clipDirection")},t.prototype.$19$=function(){this.addTitle("TitleShadow"),this.addStyleCheckBox(R("editor.shadow"),"shadow","shadow"),this.addStyleColor(R("editor.shadowcolor"),"select.color","shadowColor"),this.addStyleInput(R("editor.shadowblur"),"shadow.blur","number",1,"shadowblur"),this.addStyleInput(R("editor.shadowoffsetx"),"shadow.offset.x","number",1,"shadowOffsetX"),this.addStyleInput(R("editor.shadowoffsety"),"shadow.offset.y","number",1,"shadowOffsetYs")},t.prototype.$20$=function(){var w=[];return this.addLabelInput(w,R("editor.posx"),function(w){return w.p().x},function(w,t){w instanceof ht.Node&&w.p(t,w.p().y)},"number",1),this.addLabelInput(w,R("editor.posy"),function(w){return w.p().y},function(w,t){w instanceof ht.Node&&w.p(w.p().x,t)},"number",1),this.addRow(w,this.w1w1).keys={name:"position"},w=[],this.addLabelInput(w,R("editor.width"),function(w){return w.getWidth()},function(w,t){w instanceof ht.Node&&w.setWidth(t)},"number",1),this.addLabelInput(w,R("editor.height"),function(w){return w.getHeight()},function(w,t){w instanceof ht.Node&&w.setHeight(t)},"number",1),this.addRow(w,this.w1w1).keys={name:"size"},w},t.prototype.addStyleColor=function(w,t,G,A){var I=[];return this.addLabelColor(I,w,function(w){return w.s(t)},function(w,G){"shape.background"===t&&w.s("shape.gradient.pack")&&w.s("shape.gradient.pack",void 0),w.s(t,G)}),this.addFuncRow(I,t,G,A)},t.prototype.addStyleFunction=function(w,t,G,A,I){var R=[];return this.addLabelFunction(R,w,function(w){return w.s(t)},function(w,G){w.s(t,G)},G,A),this.addFuncRow(R,t,G,I)},t.prototype.addStyleDataModel=function(w,t,G,A,I){var R=[];return this.addLabelDataModel(R,w,function(w){return w.s(t)},function(w,G){w.s(t,G)},G,A),this.addFuncRow(R,t,G,I)},t.prototype.addStyleObject=function(w,t,G,A){var I=[];return this.addLabelObject(I,w,function(w){return w.s(t)},function(w,G){w.s(t,G)},G),this.addFuncRow(I,t,G,A)},t.prototype.addStyleLabel=function(w,t,G,A){var I=[];return this.addLabelInput(I,w,function(w){var G=w.s(t);return G&&G.replace&&(G=G.replace(/\n/g,"\\n")),G},function(w,G){G&&G.replace&&(G=G.replace(/\\n/g,"\n")),w.s(t,G)}),this.addFuncRow(I,t,G,A)},t.prototype.addStyleArray=function(w,t,G,A,I){var R=[];return this.addLabelArray(R,w,function(w){return w.s(t)},function(w,G){w.s(t,G)},A),this.addFuncRow(R,t,G,I)},t.prototype.addStyleMultiline=function(w,t,G,A){var I=[];return this.addLabelMultiline(I,w,function(w){return w.s(t)},function(w,G){w.s(t,G)}),this.addFuncRow(I,t,G,A)},t.prototype.addStyleFont=function(w,t,G,A){var I=[];return this.addLabelFont(I,w,function(w){return w.s(t)},function(w,G){w.s(t,G)}),this.addFuncRow(I,t,G,A)},t.prototype.addStyleTextArea=function(w,t,G,A){var I=[];return this.addLabelTextArea(I,w,function(w){return w.s(t)},function(w,G){w.s(t,G)}),this.addFuncRow(I,t,G,A)},t.prototype.addStyleInput=function(w,t,G,A,I,R){var _=[];return this.addLabelInput(_,w,function(w){return w.s(t)},function(w,G){w.s(t,G)},G,A),this.addFuncRow(_,t,I,R)},t.prototype.addStyleCheckBox=function(w,t,G,A){var I=[];return this.addLabelCheckBox(I,w,function(w){return w.s(t)},function(w,G){w.s(t,G)}),this.addFuncRow(I,t,G,A)},t.prototype.addStyleAlign=function(w,t,G,A){var I=[];return this.addLabelComboBox(I,w,function(w){return w.s(t)||"center"},function(w,G){w.s(t,G)},["left","center","right"],[R("editor.align.left"),R("editor.align.center"),R("editor.align.right")]),this.addFuncRow(I,t,G,A)},t.prototype.addStyleVAlign=function(w,t,G,A){var I=[];return this.addLabelComboBox(I,w,function(w){return w.s(t)||"bottom"},function(w,G){w.s(t,G)},["top","middle","bottom"],[R("editor.valign.top"),R("editor.valign.middle"),R("editor.valign.bottom")]),this.addFuncRow(I,t,G,A)},t.prototype.addStyleStretch=function(w,t,G,A){var I=[];return this.addLabelComboBox(I,w,function(w){return w.s(t)||"fill"},function(w,G){w.s(t,G)},["fill","uniform","centerUniform"],[R("editor.stretch.fill"),R("editor.stretch.uniform"),R("editor.stretch.centeruniform")]),this.addFuncRow(I,t,G,A)},t.prototype.addStyleComboBox=function(w,t,G,A,I,R,_){var r=[];return this.addLabelComboBox(r,w,function(w){return w.s(t)},function(w,G){w.s(t,G)},G,A,I),this.addFuncRow(r,t,R,_)},t.prototype.addStyleImage=function(w,t,G,A){var I=[];return this.addLabelImage(I,w,function(w){return w.s(t)},function(w,G){w.s(t,G)}),this.addFuncRow(I,t,G,A)},t.prototype.addStyleURL=function(w,t,G,A){var I=[];return this.addLabelURL(I,w,function(w){return w.s(t)},function(w,G){w.s(t,G)}),this.addFuncRow(I,t,G,A)},t.prototype.addStylePattern=function(w,t,G,A){var I=[];return this.addLabelInput(I,w,function(w){return w.s(t)},function(w,G){w.s(t,G)},"pattern"),this.addFuncRow(I,t,G,A)},t.prototype.addStyleZeroToOne=function(w,t,G){return this.addStyleRange(w,t,0,1,.01,G)},t.prototype.addStylePosition=function(w,t,G){return this.addStyleRange(w,t,1,55,1,G)},t.prototype.addStyleRange=function(w,t,G,A,I,R){var _=[];return this.addLabelInput(_,w,function(w){var G=w.s(t);return null==G?A:G},function(w,I){void 0!==A&&I>A&&(I=A),void 0!==G&&I<G&&(I=G),w.s(t,I)},"number",I),this.addFuncRow(_,t,R)},t.prototype.addStyleRotation=function(w,t,G,A,I,R){var _=[];return this.addLabelInput(_,w,function(w){var G=w.s(t);return null==G?I:180/Math.PI*G},function(w,G){G=G*Math.PI/180,void 0!==I&&G>I&&(G=I),void 0!==A&&G<A&&(G=A),w.s(t,G)},"number",R||1),this.addFuncRow(_,t,G)},t.prototype.addStyleGradient=function(w,t,G,A,I){var R=[];return this.addLabelGradient(R,w,t,G,A),this.addFuncRow(R,t,I)},t.prototype.addLayoutProperties=function(){var w=this;this.addTitle("TitleLayout"),this.$12$(),this.$20$(),this.$15$(),this.$16$(),this.$17$();var t=function(w){return!!w.dataModel.a("fitSize")
},G=this.layoutGv=new ht.graph.GraphView,A=this.layoutNode=new ht.Node,I=!1;if(A.setImage("editor.layout.helper"),A.a("selectColor",kG.config.color_select),G.dm().add(A),G.tx(50),G.ty(50),G.handleScroll=function(){},G.handlePinck=function(){},G.setScrollBarVisible(!1),G.setRectSelectable(!1),G.setPannable(!1),G.setMovableFunc(function(){return!1}),G.dm().md(function(t){I||(w.beginTransaction(),w.dataModel.sm().getSelection().each(function(w){"a:layout.v"===t.property?w.s("layout.v",t.newValue):"a:layout.h"===t.property&&w.s("layout.h",t.newValue)}),w.endTransaction())}),kG.config.layoutEnabled){this.addRow(["",{element:G},""],[.1,100,.1],100).visible=t,this.addUpdateHandler(function(t,G){var R=w.data;I=!0,A.a({"layout.v":R.s("layout.v"),"layout.h":R.s("layout.h")}),I=!1});var _=[];this.addLabelComboBox(_,R("editor.nodeLayout.h"),function(w){return w.s("layout.h")},function(w,t){w.s("layout.h",t)},kG.consts.hLayoutValues,kG.consts.hLayoutLabels),this.addFuncRow(_,"layout.h").visible=t,_=[],this.addLabelComboBox(_,R("editor.nodeLayout.v"),function(w){return w.s("layout.v")},function(w,t){w.s("layout.v",t)},kG.consts.vLayoutValues,kG.consts.vLayoutLabels),this.addFuncRow(_,"layout.v").visible=t}},t}(LI),OI=function(w){function t(G,A){return _G(this,t),lG(this,w.call(this,G,A))}return yG(t,w),t.prototype.$34$=function(t){if(t&&"s:shape"===t.property)return void this.filterPropertiesLater();w.prototype.$34$.call(this,t)},t.prototype.isTitleVisible=function(t){if(this.data){var G=this.data.s("shape");if("TitleArc"===t.title&&"arc"!==G)return!1}return w.prototype.isTitleVisible.call(this,t)},t.prototype.isPropertyVisible=function(t){if(this.data){var G=t.items.tag;if(G){var A=this.data.s("shape");if("shapeDepth"===G&&"rect"!==A)return!1;if("shapeCornerRadius"===G&&"roundRect"!==A)return!1;if("shapePolygonSide"===G&&"polygon"!==A)return!1}}return w.prototype.isPropertyVisible.call(this,t)},t.prototype.initForm=function(){w.prototype.initForm.call(this),this.$36$(),this.$37$(),this.addDashProperties(),this.addArcProperties()},t.prototype.$13$=function(){this.addStyleComboBox(R("editor.type"),"shape",kG.consts.shapes.slice(1),kG.consts.shapeLabels.slice(1),kG.consts.shapeIcons.slice(1),"type")},t.prototype.$36$=function(){this.addTitle("TitleBackground"),this.addStyleColor(R("editor.background"),"shape.background","background"),this.addStyleImage(R("editor.repeatimage"),"shape.repeat.image","repeatImage"),this.addStyleGradient(R("editor.gradient"),"shape.gradient","shape.background","shape.gradient.color","gradient"),this.addStyleColor(R("editor.gradientcolor"),"shape.gradient.color","gradientColor"),this.addStyleZeroToOne(R("editor.clippercentage"),"shape.fill.clip.percentage","fillClipPercentage"),this.addStyleComboBox(R("editor.clipdirection"),"shape.fill.clip.direction",kG.consts.clipDirections,kG.consts.clipDirectionLabels,null,"fillClipDirection"),this.addStyleInput(R("editor.depth"),"shape.depth","int",1,"depth").items.tag="shapeDepth"},t.prototype.$37$=function(){this.addTitle("TitleBorder"),this.addStyleInput(R("editor.width"),"shape.border.width","number",1,"borderWidth"),this.addStyleCheckBox(R("editor.widthabsolute"),"shape.border.width.absolute","borderWidthAbsolute"),this.addStyleColor(R("editor.color"),"shape.border.color","borderColor"),this.addStylePattern(R("editor.pattern"),"shape.border.pattern","borderPattern"),this.addStyleCheckBox(R("editor.threed"),"shape.border.3d","border3d"),this.addStyleColor(R("editor.threedcolor"),"shape.border.3d.color","border3dColor"),this.addStyleComboBox(R("editor.cap"),"shape.border.cap",kG.consts.caps,kG.consts.capLabels,null,"borderCap"),this.addStyleComboBox(R("editor.join"),"shape.border.join",kG.consts.joins,kG.consts.joinLabels,null,"borderJoin"),this.addStyleInput(R("editor.radius"),"shape.corner.radius","number",1,"cornerRadius").items.tag="shapeCornerRadius",this.addStyleInput(R("editor.sides"),"shape.polygon.side","int",1,"polygonSide").items.tag="shapePolygonSide"},t.prototype.addDashProperties=function(){this.addTitle("TitleDash"),this.addStyleCheckBox(R("editor.dash"),"shape.dash","dash"),this.addStylePattern(R("editor.pattern"),"shape.dash.pattern","dashPattern"),this.addStyleColor(R("editor.color"),"shape.dash.color","dashColor"),this.addStyleInput(R("editor.offset"),"shape.dash.offset","number",1,"dashOffset"),this.addStyleInput(R("editor.width"),"shape.dash.width","number",1,"dashWidth"),this.addStyleCheckBox(R("editor.threed"),"shape.dash.3d","dash3d"),this.addStyleColor(R("editor.threedcolor"),"shape.dash.3d.color","dash3dColor")},t.prototype.addArcProperties=function(){this.addTitle("TitleArc"),this.addStyleCheckBox(R("editor.arcoval"),"shape.arc.oval","arcOval"),this.addStyleCheckBox(R("editor.closed"),"shape.arc.close","arcClose"),this.addStyleRotation(R("editor.arcfrom"),"shape.arc.from","arcFrom"),this.addStyleRotation(R("editor.arcto"),"shape.arc.to","arcTo")},t}(EI),HI=function(w){function t(G,A){return _G(this,t),lG(this,w.call(this,G,A))}return yG(t,w),t.prototype.initForm=function(){w.prototype.initForm.call(this),this.addTitle("TitleImage");var t=[];this.addLabelImage(t,R("editor.name"),function(w){return w.s("image")},function(w,t){fw(t)&&t.endsWith("[...]")||w.s("image",t)}),this.addButton(t,null,R("editor.resetsize"),"editor.resetsize.state",function(w){w instanceof ht.Node&&w.setSize(-1,-1)}),this.addFuncRow(t,"image","name"),this.addStyleColor(R("editor.color"),"body.color","color"),this.addStyleStretch(R("editor.stretch"),"image.stretch","stretch")},t}(EI),XI=function(w){function t(G,A){return _G(this,t),lG(this,w.call(this,G,A))}return yG(t,w),t.prototype.initForm=function(){w.prototype.initForm.call(this),this.$43$()},t.prototype.$43$=function(){this.addTitle("TitleBorder"),this.addStyleInput(R("editor.width"),"border_width","number",1,"border"),this.addStyleColor(R("editor.color"),"border_color","color")},t}(EI),bI=function(w){function t(G,A){return _G(this,t),lG(this,w.call(this,G,A))}return yG(t,w),t.prototype.initForm=function(){w.prototype.initForm.call(this),this.addBasicChartProperties()},t.prototype.addBasicChartProperties=function(){this.addTitle("TitleChart"),this.addStyleCheckBox(R("editor.text"),"chart.label","label"),this.addStyleColor(R("editor.color"),"chart.label.color","labelColor"),this.addStyleFont(R("editor.font"),"chart.label.font","labelFont")},t}(EI),pI=function(w){function t(G,A){return _G(this,t),lG(this,w.call(this,G,A))}return yG(t,w),t.prototype.initForm=function(){w.prototype.initForm.call(this),this.addPieChartProperties()},t.prototype.addBasicChartProperties=function(){w.prototype.addBasicChartProperties.call(this),this.addStyleRotation(R("editor.rotation"),"chart.start.angle","startAngle"),this.addStyleCheckBox(R("editor.hollow"),"chart.hollow","hollow")},t.prototype.createChartIndexColumn=function(w){var t=this;return{name:w,width:50,align:"center",editable:!0,sortable:!1,clickable:!1,getValueType:function(w){return"chart.values"===w.getTag()?"number":"color"},getValue:function(G){if(t.data){var A=t.data.s(G.getTag());return A?A[w]:void 0}},setValue:function(G,A,I,R){var _=G.getTag(),r=function(t,G){var A=Ct(t.s(_));A[w]=G,"chart.values"===_?yt(A):lt(A),t.s(_,A)};t.setValue(r,I)}}},t.prototype.addPieChartProperties=function(){var w=this,t=this.tableModel=new ht.DataModel,G=this.tablePane=new jG(t),A=this.tableView=G.getTableView();G.getTableHeader().setMovable(!1),A.setEditable(!0),A.isEditable=function(){return w.editor.editable},G.getView().style.border=kG.config.color_line+" solid 1px";var I=[G];this.addRow(I,[.1],ht.Default.widgetRowHeight+4*A.getRowHeight()).keys={name:"chartTable"};var _=new ht.Data,r=new ht.Data;_.setTag("chart.values"),r.setTag("chart.colors"),t.add(_),t.add(r),this.updateHandlers.push(function(){if(!I.hidden&&w.data){A.getColumnModel().clear(),G.addColumns([{name:R("editor.length"),width:50,align:"center",editable:!0,sortable:!1,clickable:!1,valueType:"int",getValue:function(t){if(!w.data)return 0;var G=w.data.s("chart.values");return G?G.length:0},setValue:function(t,G,A,I){var R=function(w,t){if(t>=0){var G=Ct(w.s("chart.values"),t);yt(G),w.s("chart.values",G),G=Ct(w.s("chart.colors"),t),lt(G),w.s("chart.colors",G)}};w.setValue(R,A)}},{tag:"binding",name:R("editor.binding"),width:50,align:"center",editable:!0,sortable:!1,clickable:!1,isCellEditable:function(t,A,I,R){var _="chart.values"===t.getTag()?"values":"colors";return w.editor.funcView.toggle(G,t.getTag(),_,w),!1},drawCell:function(t,G,A,I,R,_,r,y,l){var C=!!w.data.a(G.getTag());d(t,ht.Default.getImage(C?"editor.bind":"editor.unbind"),"centerUniform",R,_,r,y,G,l,C&&!A?kG.config.color_select:kG.config.color_dark)}}]);for(var t=w.data.s("chart.values"),_=t?t.length:0,r=0;r<_;r++)G.addColumns([w.createChartIndexColumn(r)])}})},t}(bI),$I=function(w){function t(G,A){return _G(this,t),lG(this,w.call(this,G,A))}return yG(t,w),t.prototype.initForm=function(){w.prototype.initForm.call(this),this.addOneDimensionalProperties()},t.prototype.createChartIndexColumn=function(w){var t=this;return{name:w,width:50,align:"center",editable:!0,sortable:!1,clickable:!1,getValueType:function(w){return"values"===w.getTag()?"number":"color"},getValue:function(G){if(t.data){var A=ew(t.data.s("chart.series"));if(A&&A[0]){var I=ew(A[0][G.getTag()]);return I?I[w]:void 0}}},setValue:function(G,I,R,_){var r=G.getTag(),y=function(t,G){var I=t.s("chart.series");if(I){var R=A(I),_=ew(R);if(_[0]){var y=ew(_[0][r]);y&&y[w]!==G&&(y[w]=G,"values"===r?yt(y):lt(y),t.s("chart.series",R))}}};t.setValue(y,R)}}},t.prototype.addOneDimensionalProperties=function(){var w=this,t=this.tableModel=new ht.DataModel,G=this.tablePane=new jG(t),I=this.tableView=G.getTableView();G.getTableHeader().setMovable(!1),I.setEditable(!0),I.isEditable=function(){return w.editor.editable},G.getView().style.border=kG.config.color_line+" solid 1px";var _=[G];this.addRow(_,[.1],ht.Default.widgetRowHeight+4*I.getRowHeight()).keys={name:"chartTable"};var r=new ht.Data,y=new ht.Data;r.setTag("values"),y.setTag("colors"),t.add(r),t.add(y),this.updateHandlers.push(function(){if(!_.hidden&&w.data){I.getColumnModel().clear(),G.addColumns([{name:R("editor.length"),width:50,align:"center",editable:!0,sortable:!1,clickable:!1,valueType:"int",getValue:function(t){if(!w.data)return 0;var G=ew(w.data.s("chart.series"));if(!G)return 0;if(!G[0])return 0;var A=ew(G[0].values);return A?A.length:0},setValue:function(t,G,I,R){var _=function(w,t){if(t>=0){var G=w.s("chart.series"),I=G?A(G):[],R=ew(I);R[0]||(R[0]={});var _=R[0];_.values||(_.values=[]),_.colors||(_.colors=[]);var r=ew(_.values),y=ew(_.colors);t===r.length&&t===y.length||(r.length=t,y.length=t,yt(r),lt(y),w.s("chart.series",I))}};w.setValue(_,I)}},{tag:"binding",name:R("editor.binding"),width:50,align:"center",editable:!0,sortable:!1,clickable:!1,isCellEditable:function(t,I,R,_){var r=t.getTag(),y=function(){return ot(w.data,r)},l=function(t){w.setValue(function(w,G){var I=w.s("chart.series");if(I){var R=A(I),_=ew(R);if(_[0]){var y=ew(_[0][r]);_[0][r]=t?{value:y,func:t}:y,w.s("chart.series",R)}}},t)};return w.editor.funcView.toggle(G,r,r,w,y,l),!1},drawCell:function(t,G,A,I,R,_,r,y,l){var C=!!ot(w.data,G.getTag());d(t,ht.Default.getImage(C?"editor.bind":"editor.unbind"),"centerUniform",R,_,r,y,G,l,C&&!A?kG.config.color_select:kG.config.color_dark)}}]);for(var t=et(w.data,"values"),r=t?t.length:0,y=0;y<r;y++)G.addColumns([w.createChartIndexColumn(y)])}})},t}(bI),MI=function(w){function t(G,A){return _G(this,t),lG(this,w.call(this,G,A))}return yG(t,w),t.prototype.initForm=function(){w.prototype.initForm.call(this),this.addSeriesChartProperties()},t.prototype.addSeriesChartProperties=function(){var w=this,t=[],G=function(w){var t=w.s("chart.series");return t?t.length:0},I=function(w,t){if(t>=0){var G=w.s("chart.series"),I=G?A(G):[],R=ew(I);if(R.length!==t){R.length=t;for(var _=void 0,r=0;r<t;r++){R[r]||(R[r]={});var y=R[r];y.values||(y.values=[]),y.color||(y.color=ht.Color.chart[r%ht.Color.chart.length]);var l=ew(y.values);ew(y.colors);0===r?_=l.length:l.length=_,yt(l)}w.s("chart.series",I)}}};this.addLabelInput(t,R("editor.series"),G,I,"int",1),G=function(w){var t=w.s("chart.series");if(t){var G=t[0];if(G){var A=ew(G.values);return A?A.length:0}}return 0},I=function(w,t){if(t>=0){var G=w.s("chart.series"),I=G?A(G):[],R=ew(I);if(R.length){for(var _=0;_<R.length;_++){R[_]||(R[_]={});var r=R[_];r.values||(r.values=[]);var y=ew(r.values);if(y.length===t)return;r.color||(r.color=ht.Color.chart[_%ht.Color.chart.length]);ew(r.colors);y.length=t,yt(y)}w.s("chart.series",I)}}},this.addLabelInput(t,R("editor.length"),G,I,"int",1),this.addRow(t,this.w1w1).keys={name:"chartSeries"};var _=this.tableModel=new ht.DataModel,r=this.tablePane=new jG(_),y=this.tableView=r.getTableView();r.getTableHeader().setMovable(!1),y.setEditable(!0),y.isEditable=function(){return w.editor.editable},r.getView().style.border=kG.config.color_line+" solid 1px";var l=[r];this.addRow(l,[.1],160).keys={name:"chartTable"},this.updateHandlers.push(function(){if(!l.hidden&&w.data){_.clear(),y.getColumnModel().clear();var t=w.data.s("chart.series");if(t)for(var G=0;G<t.length;G++){var I=new ht.Data;I.serie=t[G],I.index=G,_.add(I)}if(r.addColumns([{name:R("editor.index"),width:50,align:"center",sortable:!1,clickable:!1,valueType:"int",getValue:function(w){return w.index}},{tag:"binding",name:R("editor.colorbinding"),width:50,align:"center",editable:!0,sortable:!1,clickable:!1,isCellEditable:function(t,G,I,R){var _=t.index,y=function(){return ow(t.serie.color)},l=function(t){w.setValue(function(w,G){var I=w.s("chart.series");if(I){var R=A(I),r=ew(R),y=r[_];if(y){var l=ew(y.color);y.color=t?{value:l,func:t}:l,w.s("chart.series",R)}}},t)};return w.editor.funcView.toggle(r,"values","values",w,y,l),!1},drawCell:function(w,t,G,A,I,R,_,r,y){var l=!!ow(t.serie.color);d(w,ht.Default.getImage(l?"editor.bind":"editor.unbind"),"centerUniform",I,R,_,r,t,y,l&&!G?kG.config.color_select:kG.config.color_dark)}},{name:R("editor.color"),width:50,align:"center",editable:!0,sortable:!1,clickable:!1,valueType:"color",getValue:function(w){return ew(w.serie.color)},setValue:function(t,G,I,R){var _=t.index,r=ew(t.serie.color);if(I&&r!==I){var y=function(w,t){var G=w.s("chart.series");if(G){var I=A(G),R=ew(I),r=R[_];if(r){var y=ow(r.color);r.color=y?{value:t,func:y}:t,w.s("chart.series",I)}}};w.setValue(y,I)}}},{tag:"binding",name:R("editor.valuebinding"),width:50,align:"center",editable:!0,sortable:!1,clickable:!1,isCellEditable:function(t,G,I,R){var _=t.index,y=function(){return ow(t.serie.values)},l=function(t){w.setValue(function(w,G){var I=w.s("chart.series");if(I){var R=A(I),r=ew(R),y=r[_];if(y){var l=ew(y.values);y.values=t?{value:l,func:t}:l,w.s("chart.series",R)}}},t)};return w.editor.funcView.toggle(r,"values","values",w,y,l),!1},drawCell:function(w,t,G,A,I,R,_,r,y){var l=!!ow(t.serie.values);d(w,ht.Default.getImage(l?"editor.bind":"editor.unbind"),"centerUniform",I,R,_,r,t,y,l&&!G?kG.config.color_select:kG.config.color_dark)}}]),t){var C=t[0];if(C){var V=ew(C.values);if(V)for(var q=0;q<V.length;q++)r.addColumns([w.createChartIndexColumn(q)])}}}})},t.prototype.createChartIndexColumn=function(w){var t=this;return{name:w,width:50,align:"center",editable:!0,sortable:!1,clickable:!1,valueType:"number",getValue:function(t){var G=ew(t.serie.values);return G?G[w]:void 0},setValue:function(G,I,R,_){var r=G.index,y=function(t,G){var I=t.s("chart.series");if(I){var R=A(I),_=ew(R);if(_[r]){var y=ew(_[r].values);y&&y[w]!==G&&(y[w]=G,t.s("chart.series",R))}}};t.setValue(y,R)}}},t}(bI),uI=function(w){function t(G,A){return _G(this,t),lG(this,w.call(this,G,A))}return yG(t,w),t.prototype.addBasicChartProperties=function(){w.prototype.addBasicChartProperties.call(this),this.addStyleComboBox(R("editor.type"),"chart.type",kG.consts.columnChartTypes,kG.consts.columnChartTypeLabels,null,"type")},t.prototype.$13$=function(){},t}(MI),aI=function(w){function t(G,A){return _G(this,t),lG(this,w.call(this,G,A))}return yG(t,w),t.prototype.initForm=function(){w.prototype.initForm.call(this)},t}(MI),hI=function(w){function t(G,A){return _G(this,t),lG(this,w.call(this,G,A))}return yG(t,w),t.prototype.initForm=function(){this.$26$(),w.prototype.initForm.call(this)},t.prototype.isTitleVisible=function(t){return!("TitleEditingPoint"===t.title&&!this.editor.pointsEditingMode)&&w.prototype.isTitleVisible.call(this,t)},t.prototype.$13$=function(){var w=[];this.addLabelInput(w,R("editor.type"),function(w){return w.compType}),this.addRow(w,this.w1).keys={name:"type"}},t.prototype.$36$=function(){w.prototype.$36$.call(this),this.addStyleComboBox(R("editor.fillrule"),"shape.fill.rule",kG.consts.fillRules,kG.consts.fillRuleLabels,null,"fillRule")},t.prototype.$37$=function(){w.prototype.$37$.call(this);var t=[];this.addLabelCheckBox(t,R("editor.closed"),function(w){return w.isClosePath()},function(w,t){w instanceof ht.Shape&&w.setClosePath(t)}),this.addFuncRow(t,"name")},t}(OI),DI=function(w){function t(G,A){return _G(this,t),lG(this,w.call(this,G,A))}return yG(t,w),t.prototype.initForm=function(){w.prototype.initForm.call(this),this.addTitle("TitleText"),this.addStyleLabel(R("editor.text"),"text","text"),this.addStyleAlign(R("editor.align"),"text.align","align"),this.addStyleVAlign(R("editor.valign"),"text.vAlign","vAlign"),this.addStyleColor(R("editor.color"),"text.color","color"),this.addStyleFont(R("editor.font"),"text.font","font")},t.prototype.$19$=function(){this.addTitle("TitleShadow"),this.addStyleCheckBox(R("editor.shadow"),"text.shadow","shadow"),this.addStyleColor(R("editor.shadowcolor"),"text.shadow.color","shadowColor"),this.addStyleInput(R("editor.shadowblur"),"text.shadow.blur","number",1,"shadowblur"),this.addStyleInput(R("editor.shadowoffsetx"),"text.shadow.offset.x","number",1,"shadowOffsetX"),this.addStyleInput(R("editor.shadowoffsety"),"text.shadow.offset.y","number",1,"shadowOffsetYs")},t}(EI),gI=function(w){function t(G,A){return _G(this,t),lG(this,w.call(this,G,A))}return yG(t,w),t.prototype.$13$=function(){var w=[];this.addLabelInput(w,R("editor.type"),function(w){return"function"}),this.addFuncRow(w,"type")},t}(EI),WI=function(w){function t(G,A){return _G(this,t),lG(this,w.call(this,G,A))}return yG(t,w),t.prototype.initForm=function(){w.prototype.initForm.call(this),this.addComponent()},t.prototype.$13$=function(){},t.prototype.addComponent=function(){var w=this;this.addTitle("TitleComponent");var t=[];t.forceToUpdate=!0;var G=function(w,t){return!!t.view.draggingData&&t.view.draggingData.fileType===nG};this.addLabelURL(t,R("editor.type"),function(t){var G=t.s("type");return w.$42$(t.properties),G},function(w,t){w.s("type",t)},G);var A=new ht.widget.Image;A.vectorDataBindingDisabled=!0,this.updateHandlers.push(function(){if(!t.hidden){var G=w.data?w.data.s("type"):null;w.$42$(w.data.properties),A.setIcon(G?nw(G):null),A.compType=G}});var I=A.getView();I.style.cursor="pointer";var _=function(t){t.preventDefault(),F(t)?w.editor.open(A.compType):w.editor.selectFileNode(A.compType)};I.addEventListener("mousedown",_,!1),I.addEventListener("touchstart",_,!1),t.push(A),this.addFuncRow(t,"type")},t.prototype.$42$=function(w){var t=this;this.properties!==w&&(this.pendingProperties=w,this._updateComponentLater||(this._updateComponentLater=!0,requestAnimationFrame(function(){t.$60$()})))},t.prototype.$60$=function(){if(this._updateComponentLater=!1,this.properties===this.pendingProperties)return void(this.pendingProperties=null);if(this._rows=this.$46$,this.removeRows(this.$35$),this.propertiesHandlers&&this.propertiesHandlers.length&&this.propertiesHandlers.forEach(this.removeUpdateHandler,this),this.$35$=[],this.properties=this.pendingProperties,this.properties){var w=this.updateHandlers.length,t=void 0;for(var G in this.properties){var A=this.properties[G];if(A.group&&t!==A.group){t=A.group;var I=this.addTitle(t);this.$35$.push(I)}this.addProperty(G,A)}this.propertiesHandlers=this.updateHandlers.slice(w)}this.$46$=this._rows,this.filterProperties()},t.prototype.addProperty=function(w,t){var G=kG.config.valueTypes[t.valueType];if(!G)return this.editor.fireEvent("error",{message:"Wrong value type:"+t.valueType}),!1;var A=R(t.name)||w,I=t.extraInfo,l=void 0,C=void 0,V=void 0;I&&I.enum&&(l=I.enum.values,C=y(I.enum.labels,I.enum.i18nLabels),V=I.enum.icons);var q=void 0;if(I&&I.buildUI){var k=function(t){return t.s(w)},Z=function(t,G){t.s(w,G)},z=[];q=I.buildUI(this,z,A,k,Z,I),this.addFuncRow(z,w,w,_(q,G),r(q,G))}else if(l)this.addStyleComboBox(A,w,l,C,V,w);else if("int"===G.type||"number"===G.type){var x=(G.max,G.min,function(t){return t.s(w)}),L=function(t,G){t.s(w,G)},Q=[];G.angle?this.addLabelRotation(Q,A,x,L,G.min,G.max,G.step):this.addLabelRange(Q,A,x,L,G.min,G.max,G.step,G.type),this.addFuncRow(Q,w,w,_(q,G))}else if("color"===G.type)this.addStyleColor(A,w,w,_(q,G));else if("boolean"===G.type)this.addStyleCheckBox(A,w,w,_(q,G));else if("enum"===G.type)this.addStyleComboBox(A,w,G.values,G.labels,G.icons,w);else if("multiline"===G.type)this.addStyleMultiline(A,w,w,_(q,G));else if("font"===G.type)this.addStyleFont(A,w,w,_(q,G));else if("image"===G.type)this.addStyleImage(A,w,w,_(q,G));else if("url"===G.type)this.addStyleURL(A,w,w,_(q,G));else if("colorArray"===G.type)this.addStyleArray(A,w,w,"color",_(q,G));else if("numberArray"===G.type)this.addStyleArray(A,w,w,"number",_(q,G));else if("stringArray"===G.type)this.addStyleArray(A,w,w,"string",_(q,G));else if("objectArray"===G.type)this.addStyleArray(A,w,w,"object",_(q,G));else if("function"===G.type){var J=void 0;I&&I.arguments&&(J=I.arguments),this.addStyleFunction(A,w,w,J,_(q,G))}else if("dataModel"===G.type)this.addStyleDataModel(A,w,w,I,_(q,G));else if("custom"===G.type){var B=function(t){return t.s(w)},n=function(t,G){t.s(w,G)},f=[];q=G.buildUI(this,f,A,B,n,I),this.addFuncRow(f,w,w,_(q,G),r(q,G))}else"object"===G.type?this.addStyleObject(A,w,w,_(q,G)):this.addStyleInput(A,w,null,null,w,_(q,G));return this.$35$.push(this._rows[this._rows.length-1]),!0},t}(EI),eI=function(w){function t(G,A){return _G(this,t),lG(this,w.call(this,G,A))}return yG(t,w),t.prototype.initForm=function(){this.$26$(),this.addTitle("TitleBasic"),this.$13$(),this.$14$()},t.prototype.isTitleVisible=function(t){return!("TitleEditingPoint"===t.title&&!this.editor.pointsEditingMode)&&w.prototype.isTitleVisible.call(this,t)},t}(EI),oI=function(w){function t(G,A){return _G(this,t),lG(this,w.call(this,G,A))}return yG(t,w),t.prototype.initForm=function(){this.addTitle("TitleBasic"),this.$13$(),this.$14$()},t}(EI),KI=function(w){function t(G){_G(this,t);var A=lG(this,w.call(this));return A.editor=G,A.getView().style.background=kG.config.color_pane,A}return yG(t,w),t.prototype.handleDataModelPropertyChange=function(w){var t=this.inspector;t&&t.global&&t.$34$(w)},t.prototype.handleDataModelChange=function(w){var t=this.inspector;t&&t.global&&t.$34$()},t.prototype.handleDataPropertyChange=function(w){var t=this.inspector;t&&!t.global&&t.data===w.data&&t.$34$(w)},t.prototype.handleSelectionChange=function(w){this.updateInspector(),this.inspector&&this.inspector.updateProperties()},t.prototype.handleGraphViewInteractorChange=function(w){var t=this.inspector;t&&("pointsEditingMode"===w.property?t.filterPropertiesLater():"shapePointStatus"===w.property&&t.editingPointButtons&&t.editingPointButtons.forEach(function(t){t.setSelected(t.statusValue===w.newValue),t.setBorderColor(t.isSelected()?kG.config.color_line:null)}))},t.prototype.$5$=function(w){if(this.dataModel&&(this.dataModel.removeDataModelChangeListener(this.handleDataModelChange,this),this.dataModel.removePropertyChangeListener(this.handleDataModelPropertyChange,this),this.dataModel.removeDataPropertyChangeListener(this.handleDataPropertyChange,this),this.dataModel.sm().ums(this.handleSelectionChange,this),this.currentView.graphView.getEditInteractor().ump(this.handleGraphViewInteractorChange,this)),w){if(w._isUI)return;this.currentView=w.getView(),this.dataModel=this.currentView.dm,this.dataModel.addDataModelChangeListener(this.handleDataModelChange,this),this.dataModel.addPropertyChangeListener(this.handleDataModelPropertyChange,this),this.dataModel.addDataPropertyChangeListener(this.handleDataPropertyChange,this),this.dataModel.sm().ms(this.handleSelectionChange,this),this.currentView.graphView.getEditInteractor().mp(this.handleGraphViewInteractorChange,this),this.g3d=this.currentView.g3d}else this.dataModel=null,this.currentView=null,this.g3d=null;this.updateInspector()},t.prototype.getDataInspector=function(w){return w instanceof ht.Shape?this.htShapeInspector:w instanceof ht.Edge?this.htEdgeInspector:w instanceof ht.Group?this.htGroupInspector:w instanceof ht.Text?this.htTextInspector:w instanceof ht.RefGraph?this.htRefGraphInspector:w instanceof ht.Block?this.htBlockInspector:w instanceof ht.Node?this.htNodeInspector:this.htDataInspector},t.prototype.getCompInspector=function(w){if(w instanceof hG)return this.clipInspector;if(w instanceof DG)return this.restoreInspector;if(w instanceof $G)return this.basicInspector;if(w instanceof $A)return this.borderInspector;if(w instanceof uG)return this.imageInspector;if(w instanceof MA)return this.pieChartInspector;if(w instanceof uA){var t=ew(w.s("chart.series"));return t&&t.length<=1&&t[0].colors?this.oneDimensionalColumnChartInspector:this.columnChartInspector}return w instanceof aA?this.lineChartInspector:w instanceof MG?this.shapeInspector:w instanceof aG?this.textInspector:w instanceof bA?this.funcTypeInspector:w instanceof pA?this.compTypeInspector:null},t.prototype.updateInspector=function(){if(this.dataModel){var w=this.dataModel.sm().ld();w?this.currentView instanceof DA?this.inspector=this.getCompInspector(w):this.currentView instanceof vA?this.inspector=this.getDataInspector(w):this.currentView instanceof kG.SceneView&&(this.inspector=this.getData3dInspector(w)):this.currentView instanceof DA?this.inspector=this.symbolInspector:this.currentView instanceof vA?this.inspector=this.displayInspector:this.currentView instanceof kG.SceneView&&(this.inspector=this.sceneInspector),this.inspector&&(this.inspector.currentView=this.currentView)}else this.inspector=null},rG(t,[{key:"basicInspector",get:function(){return this._basicInspector||(this._basicInspector=new OI(this.editor,"basic")),this._basicInspector}},{key:"borderInspector",get:function(){return this._borderInspector||(this._borderInspector=new XI(this.editor,"border")),this._borderInspector}},{key:"clipInspector",get:function(){return this._clipInspector||(this._clipInspector=new eI(this.editor,"clip")),this._clipInspector}},{key:"restoreInspector",get:function(){return this._restoreInspector||(this._restoreInspector=new oI(this.editor,"restore")),this._restoreInspector}},{key:"imageInspector",get:function(){return this._imageInspector||(this._imageInspector=new HI(this.editor,"image")),this._imageInspector}},{key:"pieChartInspector",get:function(){return this._pieChartInspector||(this._pieChartInspector=new pI(this.editor,"pieChart")),this._pieChartInspector}},{key:"oneDimensionalColumnChartInspector",get:function(){return this._oneDimensionalColumnChartInspector||(this._oneDimensionalColumnChartInspector=new $I(this.editor,"oneDimensionalColumnChartInspector")),this._oneDimensionalColumnChartInspector}},{key:"columnChartInspector",get:function(){return this._columnChartInspector||(this._columnChartInspector=new uI(this.editor,"columnChart")),this._columnChartInspector}},{key:"lineChartInspector",get:function(){return this._lineChartInspector||(this._lineChartInspector=new aI(this.editor,"lineChart")),this._lineChartInspector}},{key:"shapeInspector",get:function(){return this._shapeInspector||(this._shapeInspector=new hI(this.editor,"shape")),this._shapeInspector}},{key:"textInspector",get:function(){return this._textInspector||(this._textInspector=new DI(this.editor,"text")),this._textInspector}},{key:"funcTypeInspector",get:function(){return this._funcTypeInspector||(this._funcTypeInspector=new gI(this.editor,"func")),this._funcTypeInspector}},{key:"compTypeInspector",get:function(){return this._compTypeInspector||(this._compTypeInspector=new WI(this.editor,"comp")),this._compTypeInspector}},{key:"htShapeInspector",get:function(){return this._htShapeInspector||(this._htShapeInspector=new mI(this.editor,"Shape")),this._htShapeInspector}},{key:"htBlockInspector",get:function(){return this._htBlockInspector||(this._htBlockInspector=new UI(this.editor,"Block")),this._htBlockInspector}},{key:"htRefGraphInspector",get:function(){return this._htRefGraphInspector||(this._htRefGraphInspector=new cI(this.editor,"RefGraph")),this._htRefGraphInspector}},{key:"htGroupInspector",get:function(){return this._htGroupInspector||(this._htGroupInspector=new TI(this.editor,"Group")),this._htGroupInspector}},{key:"htEdgeInspector",get:function(){return this._htEdgeInspector||(this._htEdgeInspector=new NI(this.editor,"Edge")),this._htEdgeInspector}},{key:"htNodeInspector",get:function(){return this._htNodeInspector||(this._htNodeInspector=new iI(this.editor,"Node")),this._htNodeInspector}},{key:"htTextInspector",get:function(){return this._htTextInspector||(this._htTextInspector=new vI(this.editor,"Text")),this._htTextInspector}},{key:"htDataInspector",get:function(){return this._htDataInspector||(this._htDataInspector=new nI(this.editor,"Data")),this._htDataInspector}},{key:"displayInspector",get:function(){return this._displayInspector||(this._displayInspector=new QI(this.editor,"display")),this._displayInspector}},{key:"symbolInspector",get:function(){return this._symbolInspector||(this._symbolInspector=new BI(this.editor,"symbol")),this._symbolInspector}},{key:"inspector",get:function(){return this.getCenterView()},set:function(w){var t=this.getCenterView();w?(w.dataModel=this.dataModel,this.dataModel&&(w.data=this.dataModel.sm().ld()),w.g3d=this.g3d,this.getCenterView()!==w&&this.setCenterView(w),w.filterPropertiesLater()):this.setCenterView(null),w===t||null==w&&null==t||this.editor.fireEvent("inspectorUpdated",{inspector:w,oldInspector:t})}}]),t}(gG),PI=function(){function w(t){_G(this,w),this.editor=t}return w.prototype.showTip=function(w,t){this.tip.innerHTML=w,this.tip.parentNode!==document.body&&ht.Default.appendToScreen(this.tip);var G=m(t);this.tip.style.left=G.x+15+"px",this.tip.style.top=G.y+"px"},w.prototype.hideTip=function(){h(this.tip)},w.prototype.clearDropView=function(w,t){this._dropView&&(this._dropView.handleCrossDrag(w,"exit",t),this._dropView=null)},w.prototype.crossDrag=function(w,t){var G=this._dropView,A=this.$94$(w,t);G!==A?(G&&G.handleCrossDrag(w,"exit",t),A&&A.handleCrossDrag(w,"enter",t)):A&&A.handleCrossDrag(w,"over",t),this._dropView=A},w.prototype.crossDrop=function(w,t){this._dropView&&(this._dropView.handleCrossDrag(w,"drop",t),this._dropView=null)},w.prototype.crossCancel=function(w,t){this._dropView&&(this._dropView.handleCrossDrag(w,"cancel",t),this._dropView=null)},w.prototype.$94$=function(w,t){for(var G=T(w);G&&(!G._ht||!G._ht.isDroppable||t&&!G._ht.isDroppable(w,t));)G=G.parentNode;return G?G._ht:null},rG(w,[{key:"tip",get:function(){if(!this._tip){this._tip=K(),this._tip.className="ht-editor-dnd-tip";var w=this._tip.style;w.whiteSpace="nowrap",w.color=kG.config.color_light,w.background=kG.config.color_transparent,w.font=ht.Default.labelFont,w.padding="4px",w.borderRadius="4px",w.position="absolute",w.zIndex=1e4}return this._tip}}]),w}(),jI=function(){function w(t,G){_G(this,w),this.editor=t,this.dnd=t.dnd,this._dragInfo={view:this},G&&(G.addEventListener("dragenter",this.handle_dragenter.bind(this),!1),G.addEventListener("dragover",this.handle_dragover.bind(this),!1),G.addEventListener("dragleave",this.handle_dragleave.bind(this),!1),G.addEventListener("drop",this.handle_drop.bind(this),!1),G.addEventListener("dragexit",this.handle_dragexit.bind(this),!1),G.addEventListener("dragend",this.handle_dragend.bind(this),!1)),this.isDroppableToDisplayView=!0,this.isDroppableToSymbolView=!0,
this.isDroppableToSceneView=!0}return w.prototype.handle_dragenter=function(w){Gw(w),w.stopPropagation(),this.dnd.crossDrag(w,this._dragInfo)},w.prototype.handle_dragover=function(w){Gw(w),w.stopPropagation(),this.dnd.crossDrag(w,this._dragInfo)},w.prototype.handle_dragleave=function(w){Gw(w),w.stopPropagation(),this.dnd.crossCancel(w,this._dragInfo)},w.prototype.handle_dragexit=function(w){Gw(w),w.stopPropagation(),this.dnd.crossCancel(w,this._dragInfo)},w.prototype.handle_dragend=function(w){Gw(w),w.stopPropagation(),this.dnd.crossCancel(w,this._dragInfo)},w.prototype.handle_drop=function(w){Gw(w),w.stopPropagation(),this.dnd.crossDrop(w,this._dragInfo)},w}(),dI=function(w){function t(G){_G(this,t);var A=lG(this,w.call(this));return A.editor=G,A}return yG(t,w),t.prototype.init=function(){var w=this,t=this.contentDiv=ht.Default.createDiv();t.style.lineHeight="28px",t.style.textAlign="center",t.style.fontSize="14px",t.style.color=ht.Default.labelColor,this.setConfig({closable:!0,draggable:!0,width:320,height:120,content:t,buttons:[{label:R("editor.yes"),action:function(){w.onYes&&w.onYes(),w.hide()}},{label:R("editor.no"),action:function(){w.onNo&&w.onNo(),w.hide()}},{label:R("editor.cancel"),action:function(){w.hide()}}]}),this._init=!0},t.prototype.show=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R("editor.tooltip"),G=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",A=arguments[2],I=arguments[3];this._init||this.init(),this.setTitle(t),this.contentDiv.innerHTML=G,this.onYes=A,this.onNo=I,w.prototype.show.call(this,this.editor.$38$)},t}(CG),sI=function(w){function t(G){_G(this,t);var A=lG(this,w.call(this));return A.editor=G,A.editable=!0,A}return yG(t,w),t.prototype.init=function(){var w=this;this.$72$(),this.$70$();var t=new PG(this.funcPane,this.inspectorPane,"h",.5);this.setConfig({title:R("editor.layoutattach"),closable:!0,draggable:!0,width:kG.config.attachPointsViewSize.width,height:kG.config.attachPointsViewSize.height,resizeMode:"wh",maximizable:!0,content:t,buttons:[{label:R("editor.ok"),action:function(){w.ok()}},{label:R("editor.cancel"),action:function(){w.hide()}}],buttonsAlign:"right"})},t.prototype.$72$=function(){this.funcPane=new VG,this.funcPane.addRow([{id:"head",element:"function(host, attach) {"}],[.1]),this.funcPane.addRow([{id:"func",element:kt()}],[.1],.1),this.funcPane.addRow(["}"],[.1])},t.prototype.$73$=function(w,t,G,A){return{name:w,tag:w,accessType:"attr",width:G,displayName:t,align:"center",enum:A,editable:!0}},t.prototype.$70$=function(){var w=this;this.inspectorPane=new VG,this.tableModel=new ht.DataModel,this.tablePane=new jG(this.tableModel),this.tableView=this.tablePane.getTableView(),this.tableView.setEditable(!0),this.tableView.isEditable=function(){return w.editable},this.tablePane.getView().style.border=kG.config.color_line+" solid 1px",this.tablePane.addColumns([this.$73$("attr",R("editor.property"),90),this.$73$("valueType",R("editor.valuetype"),80,{values:kG.consts.valueTypes,labels:kG.consts.valueTypeLabels}),this.$73$("defaultValue",R("editor.defaultvalue"),90),this.$73$("name",R("editor.name"),80),this.$73$("group",R("editor.group"),80),this.$73$("description",R("editor.description"),120),this.$73$("extraInfo",R("editor.extrainfo"),100)]),this.$74$(),this.initExtraInfoColumn(),this.inspectorPane.addRow([this.tablePane],[.1],.1),this.inspectorPane.addRow([{button:{toolTip:R("editor.add"),icon:"editor.add",onClicked:function(){w.editable&&w.addProperties({attr:"layout."},!0)}}},{button:{toolTip:R("editor.delete"),icon:"editor.delete",onClicked:function(){w.editable&&w.tableView.removeSelection()}}},null,{button:{icon:"editor.top",toolTip:R("editor.bringtofront"),onClicked:function(){w.editable&&w.tableView.sm().size()&&w.tableModel.moveSelectionToTop()}}},{button:{icon:"editor.up",toolTip:R("editor.bringforward"),onClicked:function(){w.editable&&w.tableView.sm().size()&&w.tableModel.moveSelectionUp()}}},{button:{icon:"editor.down",toolTip:R("editor.sendbackward"),onClicked:function(){w.editable&&w.tableView.sm().size()&&w.tableModel.moveSelectionDown()}}},{button:{icon:"editor.bottom",toolTip:R("editor.sendtoback"),onClicked:function(){w.editable&&w.tableView.sm().size()&&w.tableModel.moveSelectionToBottom()}}}],[20,20,.1,20,20,20,20])},t.prototype.$74$=function(){var w=this,t=this.tableView.getColumnModel().getDataByTag("defaultValue");t.getValue=function(w,t,G){var A=w.a("defaultValue");return"Angle"===w.a("valueType")&&A&&(A=A/Math.PI*180),A},t.setValue=function(w,t,G,A){"Angle"===w.a("valueType")&&(G=G*Math.PI/180),w.a("defaultValue",G)},t.getEnumValues=function(w){var t=w?kG.config.valueTypes[w.a("valueType")]:null;return t&&"enum"===t.type?t.values:null},t.getEnumLabels=function(w){var t=w?kG.config.valueTypes[w.a("valueType")]:null;return t&&"enum"===t.type?t.labels:null},t.getEnumIcons=function(w){var t=w?kG.config.valueTypes[w.a("valueType")]:null;return t&&"enum"===t.type?t.icons:null},t.getEnumDropDownWidth=function(w){var t=w?kG.config.valueTypes[w.a("valueType")]:null;return t&&"enum"===t.type?t.dropDownWidth:null},t.getValueType=function(w){var t=w?kG.config.valueTypes[w.a("valueType")]:null;return t?t.type:null},t.isCellEditable=function(t,G,A,I){var _=t?kG.config.valueTypes[t.a("valueType")]:null,r=_?_.type:null,y=t.a("extraInfo"),l=kG.config.handleDefaultVauleColumnEdit,C=function(w){t.a("defaultValue",w)};if(l&&l(C,_,r,y))return!1;if("function"===r){var V=R("editor.function")+" "+(t.a("property")||"");return w.editor.functionView.open(t.a("defaultValue"),C,V,y&&y.arguments),!1}if("multiline"===r)return w.editor.textView.open(t.a("defaultValue"),C,t.a("property")||"&nbsp;"),!1;if("font"===r)return w.editor.fontView.open(t.a("defaultValue"),C,t.a("property")||"&nbsp;"),!1;if("object"===r||"custom"===r||"stringArray"===r||"objectArray"===r||"numberArray"===r||"colorArray"===r){var q=R("editor.object")+" "+(t.a("property")||"");return w.editor.objectView.open(t.a("defaultValue"),C,q),!1}return!0}},t.prototype.initExtraInfoColumn=function(){var w=this;this.tableView.getColumnModel().getDataByTag("extraInfo").isCellEditable=function(t,G,A,I){var _=R("editor.extrainfo")+" "+(t.a("property")||"");return w.editor.objectView.open(t.a("extraInfo"),function(w){t.a("extraInfo",w)},_),!1}},t.prototype.addProperties=function(w,t){var G=this,A=w.attr,I=w.valueType,R=w.defaultValue,_=w.name,r=w.description,y=w.extraInfo,l=new ht.Data;l.a({attr:A||"",valueType:I||"String",defaultValue:R,name:_,description:r,extraInfo:y}),this.tableModel.add(l),this.tableModel.sm().ss(l),t&&setTimeout(function(){G.tableView.tx(0),Bt(G.tableView,l,G.tableView.getColumnModel().getDataByTag("attr"),A)},100)},t.prototype.update=function(w,t){var G=this,A="";if(w){A=V(w);var I=A.indexOf("{"),R=A.lastIndexOf("}");A=A.substring(I+1,R)}this.funcPane.v("func",A),this.tableModel.clear(),t&&t.forEach(function(w){G.addProperties(w)})},t.prototype.open=function(w,t,G){this._init||this.init(),this.setValue=G,this.update(w,t),this.show(this.editor.$38$)},t.prototype.ok=function(){var w=this.setValue,t={},G=this.funcPane.v("func");G&&(t.func=k("function(host, attach) {"+G+"}")),this.tableModel.size()&&(t.properties=[],this.tableModel.each(function(w){t.properties.push(A(w.getAttrObject()))})),w(t),this.hide()},t}(CG),YI=function(){function w(t){_G(this,w),this.editor=t,this.editing3d=!1,this.reset()}return w.prototype.reset=function(){this.points=[],this.segments=[],this.isBreak=!1,this.nextPoint=null,this.closePath=!1,this.preCtrl=null,this.nextPoint=null,this.drawPoint=null,this.downPoint=null,this.shape=null},w.prototype.setShape=function(w){this.shape=w},w.prototype.setPoint=function(w,t){this.points[w]=t},w.prototype.setSegment=function(w,t){this.segments[w]=t},w.prototype.setEditing3d=function(w){this.editing3d=w},w.prototype.isEditing3d=function(){return this.editing3d},w}(),wR=function(){function w(t){_G(this,w),this.params=t||{},this.$38$=this.params.$38$,this._eventNotifier=new ht.Notifier;var G=ht.Default.getClass(kG.config.serviceClass)||GA;this.$39$=new G(this.handleServiceEvent.bind(this),this),this.emptyFunc=function(){}}return w.prototype.addEventListener=function(w,t,G){this._eventNotifier.add(w,t,G)},w.prototype.removeEventListener=function(w,t){this._eventNotifier.remove(w,t)},w.prototype.fireViewEvent=function(w,t,G){var A=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];G=G||{},w.sceneView?(A&&(t="sceneView"+t),G.sceneView=w.sceneView):"symbol"===w.type?(A&&(t="symbolView"+t),G.symbolView=w):"display"===w.type?(A&&(t="displayView"+t),G.displayView=w):"scene"===w.type&&(A&&(t="sceneView"+t),G.sceneView=w),this.fireEvent(t,G)},w.prototype.fireEvent=function(w,t){t=t||{},kG.config.handleEvent&&kG.config.handleEvent(this,w,t);var G="on"+w.charAt(0).toUpperCase()+w.slice(1);kG.config[G]&&kG.config[G](this,t),this.params&&this.params[G]&&this.params[G](this,t),this._eventNotifier.fire({editor:this,type:w,params:t})},w.prototype.handleServiceEvent=function(w){if("connected"===w.type)this.init&&(this.init(),this.init=null);else if("fileChanged"===w.type){var t=w.path;this.updateUIRefs(t);var G=E(t),A=this.getFileNode(t);A&&(G=E(A.getFileUUID())||G),G&&this.$99$(t),Aw(t)?this.requestDisplays():Iw(t)?this.requestSymbols():Rw(t)?this.requestComponents():_w(t)?this.requestScenes():rw(t)?this.requestModels():yw(t)?this.requestUIs():lw(t)&&this.requestAssets()}else"download"===w.type?this.downloadFile(w.path):"confirm"===w.type&&this.requestImport(w.path);this.fireEvent(w.type,w)},w.prototype.init=function(){this._inspectorCompact=!C(kG.config.compactFilter),this.menus=[],this.cloneInfo={type:null,funcArray:[],jsonArray:[]},this.shapeHelper=new YI(this),this.initSID(),this.$6$(),this.requestDisplays(),this.requestSymbols(),this.requestComponents(),this.requestScenes(),this.requestModels(),this.requestUIs(),this.requestAssets(),this.$38$&&this.$38$.addEventListener("keydown",this.handleKeydown.bind(this),!1),this.dnd=new PI(this),this.dndFromOutside=new jI(this,this.mainPane.getView()),this.fireEvent("editorCreated"),this.fireEvent("mainMenuCreated"),this.fireEvent("mainToolbarCreated"),this.fireEvent("rightToolbarCreated");var w=this.params.open||G("hteditor");if(w){var t=kG.config.paramHandlers[w];if(t&&!t(this))return;Vw(w)?this._pendingOpenJSON=w:"newdisplay"===w?this.newDisplayView():"newsymbol"===w?this.newSymbolView():"newcomponent"===w&&this.newComponent()}},w.prototype.$6$=function(){this.mainTabView=new gA(this),this.funcView=new GI(this),this.eventView=new AI(this),this.functionView=new II(this),this.objectView=new RI(this),this.textView=new _I(this),this.fontView=new yI(this),this.iconsView=new VI(this),this.componentView=new YA(this),this.messageView=new qI(this),this.confirmView=new dI(this),this.attachPointsView=new kI(this),this.symbolLayoutView=new sI(this),this.$7$(),this.$8$(),this.$10$(),this.$9$(),this.leftSplitView=new PG(this.leftTopTabView,this.mainTabView,"h",kG.config.leftSplitViewPosition),this.rightSplitView=new PG(this.rightTopBorderPane,this.rightBottomTabView,"v",kG.config.rightSplitViewPosition),this.mainSplitView=new PG(this.leftSplitView,this.rightSplitView,"h",kG.config.mainSplitViewPosition),this.mainPane=new gG,this.mainPane.setTopView(this.topBorderPane),this.mainPane.setCenterView(this.mainSplitView),rt(this.mainPane,this.$38$),this.mainPane.validateImpl()},w.prototype.initSID=function(){var w=window.location.href.match("sid=([0-9a-z-]*)");w&&(this.sid=w[1])},w.prototype.$7$=function(){var w=this;this.mainToolbar=new dA(this),this.rightToolbar=new sA(this),this.topBorderPane=new gG,this.topBorderPane.setCenterView(this.mainToolbar),this.topBorderPane.setRightView(this.rightToolbar),this.topBorderPane.setHeight(28),this.rightToolbar.onSumWidthChanged=function(){w.topBorderPane.setRightWidth(w.rightToolbar.getSumWidth())}},w.prototype.$8$=function(){this.displays=new ZA(this,kG.config.displaysEditable),this.symbols=new zA(this,kG.config.symbolsEditable),this.components=new xA(this,kG.config.componentsEditable),this.scenes=new LA(this,kG.config.scenesEditable),this.models=new QA(this,kG.config.modelsEditable),this.uis=new JA(this,kG.config.uisEditable),this.assets=new BA(this,kG.config.assetsEditable),this.leftTopTabView=new dG,this.scenesTab=this.leftTopTabView.add(R("editor.scenes"),this.scenes,!1,kG.config.scenesVisible),this.displaysTab=this.leftTopTabView.add(R("editor.displays"),this.displays,!1,kG.config.displaysVisible),this.symbolsTab=this.leftTopTabView.add(R("editor.symbols"),this.symbols,!1,kG.config.symbolsVisible),this.componentsTab=this.leftTopTabView.add(R("editor.components"),this.components,!1,kG.config.componentsVisible),this.modelsTab=this.leftTopTabView.add(R("editor.models"),this.models,!1,kG.config.modelsVisible),this.uisTab=this.leftTopTabView.add(R("editor.uis"),this.uis,!1,kG.config.uisVisible),this.assetsTab=this.leftTopTabView.add(R("editor.assets"),this.assets,!1,kG.config.assetsVisible),this.leftTopTabView.select(kG.config.scenesVisible?this.scenesTab:this.displaysTab)},w.prototype.$9$=function(){this.inspectorTool=new WA(this),this.inspectorPane=new KI(this),this.rightTopBorderPane=new gG,this.rightTopBorderPane.setTopView(this.inspectorTool),this.rightTopBorderPane.setCenterView(this.inspectorPane),this.rightTopBorderPane.setTopHeight(ht.Default.widgetHeaderHeight+6)},w.prototype.$10$=function(){var w=this;this.listPane=new oA(this),this.layerPane=new KA(this),this.overview=new nA(this),this.dataView=new eA(this),this.symbolStatePane=new PA(this),kG.BatchView&&(this.batchView=new kG.BatchView(this)),kG.ProblemsPane&&(this.problemsView=new kG.ProblemsPane(this));var t=this.rightBottomTabView=new dG;this.listPaneTab=this.rightBottomTabView.add(R("editor.list"),this.listPane,!0),kG.config.layerEnabled&&(this.layerTab=this.rightBottomTabView.add(R("editor.layer"),this.layerPane,!1,!1)),kG.config.symbolStateEnabled&&(this.symbolStateTab=this.rightBottomTabView.add(R("editor.state"),this.symbolStatePane,!1,!1)),kG.config.overviewEnabled&&(this.overviewTab=this.rightBottomTabView.add(R("editor.overview"),this.overview)),kG.config.batchViewEnabled&&kG.BatchView&&(this.batchViewTab=this.rightBottomTabView.add(R("editor.batch"),this.batchView)),kG.config.problemsEnabled&&kG.ProblemsPane&&(this.problemsTab=this.rightBottomTabView.add(R("editor.problems"),this.problemsView,!1,!0)),kG.config.dataViewEnabled&&(this.dataViewTab=this.rightBottomTabView.add(R("editor.data"),this.dataView));var G=this.rightBottomTabView.getTabModel().sm();G.ms(function(){var t=G.ld();t&&(w.dataView.visible=t.getView()===w.dataView,w.overview.setAutoUpdate(t.getView()===w.overview))}),t.getLabel=function(t){var G=t.toLabel();if(t===w.symbolStateTab){var A=w.symbolStatePane.tableModel.sm().ld();if(A){var I=A.a("stateDisplayName")||A.a("stateName");return G+(I?" - "+I:"")}}return G}},w.prototype.newFolder=function(w){var t=this,G=this.explorer;if(G){var A=w.sm().ld();w!==w.explorer.list||A&&A.fileType===LG||(A=w.explorer.tree.sm().ld()),A&&!G.isAccordionMode()||(A=w.explorer.rootNode);wt(R("editor.inputnewfoldername"),"",{nullable:!1,trim:!0,maxLength:kG.config.maxFileNameLength,checkFunc:kG.config.checkFileName,$38$:this.$38$},function(w,I){if("ok"===I){var _=(A?A.url:G.rootDir)+"/"+w;if(t.getFileNode(_))return void tt(R("editor.filenameconflict"),_,function(){});t.request("mkdir",kG.config.vision?{dir:_,parent_uuid:A.uuid,root_dir:A.rootDir}:_,function(w){})}})}},w.prototype.getFileNode=function(w){for(var t=this.leftTopTabView.getTabModel().getDatas(),G=0;G<t.size();G++){var A=t.get(G);if(A.getView()instanceof kA){var I=A.getView().findFileNode(w);if(I)return I}}return null},w.prototype.selectFileNode=function(w){for(var t=this,G=this.leftTopTabView.getTabModel().getDatas(),A=0;A<G.size();A++){var I=G.get(A);if(I.isVisible()&&I.getView()instanceof kA){var R=function(){var G=I.getView(),A=G.findFileNode(w);if(A)return t.leftTopTabView.getTabModel().sm().ss(I),G.isAccordionMode()?(A.fileType===LG?G.accordion.sm().ss(A):(A.getParent().expanded=!0,G.accordion.sm().ss(A)),G.accordion.ivm()):A.fileType===LG?(G.tree.sm().ss(A),setTimeout(function(){G.tree.makeVisible(A)},500)):(G.tree.sm().ss(A.getParent()),G.list.sm().ss(A),setTimeout(function(){G.tree.makeVisible(A.getParent()),G.list.makeVisible(A)},500)),delete t._pendingSelectURL,{v:void 0}}();if("object"==typeof R)return R.v}}this._pendingSelectURL=w},w.prototype.makeFileNodeVisible=function(w){for(var t=this.leftTopTabView.getTabModel().getDatas(),G=0;G<t.size();G++){var A=t.get(G),I=A.getView();if(I instanceof kA){var R=I.findFileNode(w);if(R){var _=R.getParent();I.tree.sm().ss(_),I.tree.makeVisible(_),I.list.makeVisible(R)}}}},w.prototype.renameFile=function(w,t,G){var I=this;if(!w||w.$33$||!1===w.a("editable")||!t)return!1;var _=t;Vw(w.getName())&&!Vw(t)&&(t+=".json");var r=w.path+"/"+t;if(!(t=kG.config.checkFileName(t,r)))return tt(R("editor.invalidinput"),_,function(){}),!1;if(t.length>kG.config.maxFileNameLength+5)return tt(R("editor.inputmax"),t,function(){}),!1;if(w.getName()===t)return!1;if(this.getFileNode(r))return tt(R("editor.filenameconflict"),r,function(){}),!1;w.$33$=r;var y={old:w.url,new:w.$33$,fileType:w.fileType};Vw(y.old)&&this.request("rename",{old:nw(y.old),new:nw(y.new),fileType:QG},function(w){}),this.request("rename",y,function(R){if(R){I.mainTabView.getTabModel().each(function(G){if(G.getTag()===w.url){G.setTag(w.$33$);G.getView().url=w.$33$,G.setName(b(t))}}),G();var _=A(y);return _.data=w,I.fireEvent("fileRenamed",_),!0}return delete w.$33$,!1})},w.prototype.moveFile=function(w,t){if(w&&!1!==w.a("editable")&&t&&!w.$33$&&!t.$33$){var G={data:w,url:w.url,parent:t};if(this.fireEvent("fileMoving",G),!G.preventDefault){var A=w.getParent();if(w.setParent(t),A!==w.getParent()){w.$33$=t.url+"/"+w.getName();var I={old:w.url,new:w.$33$};Vw(I.old)&&this.request("rename",{old:nw(I.old),new:nw(I.new)},function(w){}),this.request("rename",I,function(w){})}}}},w.prototype.removeFiles=function(w){var t=this;w.forEach(function(w){if(!w.$33$&&!1!==w.a("editable")){var G=w.url||w;Vw(G)&&t.request("remove",kG.config.vision?{path:nw(G),uuid:w.uuid,root_dir:w.rootDir}:nw(G),function(w){}),t.request("remove",kG.config.vision?{path:G,uuid:w.uuid,root_dir:w.rootDir}:G,function(A){t.fireEvent("fileDeleted",{data:w,url:G})})}})},w.prototype.requestBase64=function(w,t){this.request("source",{url:w,encoding:"base64",prefix:"data:;base64,"},t)},w.prototype.request=function(w,t,G,A){var I=this;G=G||this.emptyFunc,A?setTimeout(function(){I.$39$.request(w,t,G)},A):this.$39$.request(w,t,G)},w.prototype.requestDisplays=function(){var w=this;this._requestingDisplays||(this.request("explore","/displays",function(t){w._requestingDisplays=!1,w.displays.parse(t),w._pendingOpenJSON&&Aw(w._pendingOpenJSON)&&(w.displays.findFileNode(w._pendingOpenJSON)?(w.open(w._pendingOpenJSON),w.selectFileNode(w._pendingOpenJSON)):kG.config.newIfFailToOpen&&(w.newDisplayView(),w.save(null,w._pendingOpenJSON)),delete w._pendingOpenJSON),w._pendingSelectURL&&Aw(w._pendingSelectURL)&&w.selectFileNode(w._pendingSelectURL)},kG.config.requestDelay),this._requestingDisplays=!0)},w.prototype.requestSymbols=function(){var w=this;this._requestingSymbols||(this.request("explore","/symbols",function(t){w._requestingSymbols=!1,w.symbols.parse(t),w._pendingOpenJSON&&Iw(w._pendingOpenJSON)&&(w.symbols.findFileNode(w._pendingOpenJSON)?(w.open(w._pendingOpenJSON),w.selectFileNode(w._pendingOpenJSON)):kG.config.newIfFailToOpen&&(w.newSymbolView(),w.save(null,w._pendingOpenJSON)),delete w._pendingOpenJSON),w._pendingSelectURL&&Iw(w._pendingSelectURL)&&w.selectFileNode(w._pendingSelectURL)},kG.config.requestDelay),this._requestingSymbols=!0)},w.prototype.requestComponents=function(){var w=this;this._requestingComponents||(this.request("explore","/components",function(t){w._requestingComponents=!1,w.components.parse(t),w._pendingOpenJSON&&Rw(w._pendingOpenJSON)&&(w.components.findFileNode(w._pendingOpenJSON)?w.open(w._pendingOpenJSON):kG.config.newIfFailToOpen&&w.newComponent(),delete w._pendingOpenJSON),w._pendingSelectURL&&Rw(w._pendingSelectURL)&&w.selectFileNode(w._pendingSelectURL)},kG.config.requestDelay),this._requestingComponents=!0)},w.prototype.requestScenes=function(){var w=this;kG.config.scenesVisible&&(this._requestingScenes||(this.request("explore","/scenes",function(t){w._requestingScenes=!1,w.scenes.parse(t),w._pendingOpenJSON&&_w(w._pendingOpenJSON)&&(w.scenes.findFileNode(w._pendingOpenJSON)?(w.open(w._pendingOpenJSON),w.selectFileNode(w._pendingOpenJSON)):kG.config.newIfFailToOpen&&(w.newSceneView(),w.save(null,w._pendingOpenJSON)),delete w._pendingOpenJSON),w._pendingSelectURL&&_w(w._pendingSelectURL)&&w.selectFileNode(w._pendingSelectURL)},kG.config.requestDelay),this._requestingScenes=!0))},w.prototype.requestModels=function(){var w=this;this._requestingModels||(this.request("explore","/models",function(t){w._requestingModels=!1,w.models.parse(t),w._pendingOpenJSON&&rw(w._pendingOpenJSON)&&(w.open(w._pendingOpenJSON),delete w._pendingOpenJSON),w._pendingSelectURL&&rw(w._pendingSelectURL)&&w.selectFileNode(w._pendingSelectURL)},kG.config.requestDelay),this._requestingModels=!0)},w.prototype.requestUIs=function(){var w=this;kG.config.uisVisible&&(this._requestingUIs||(this.request("explore","/uis",function(t){w._requestingUIs=!1,w.uis.parse(t),w._pendingOpenJSON&&yw(w._pendingOpenJSON)&&(w.uis.findFileNode(w._pendingOpenJSON)?(w.open(w._pendingOpenJSON),w.selectFileNode(w._pendingOpenJSON)):kG.config.newIfFailToOpen&&(w.newUIView(),w.save(null,w._pendingOpenJSON))),w._pendingSelectURL&&yw(w._pendingSelectURL)&&w.selectFileNode(w._pendingSelectURL)},kG.config.requestDelay),this._requestingUIs=!0))},w.prototype.requestAssets=function(){var w=this;this._requestingAssets||(this.request("explore","/assets",function(t){w._requestingAssets=!1,w.assets.parse(t),w._pendingOpenJSON&&lw(w._pendingOpenJSON)&&(w.open(w._pendingOpenJSON),delete w._pendingOpenJSON),w._pendingSelectURL&&lw(w._pendingSelectURL)&&w.selectFileNode(w._pendingSelectURL)},kG.config.requestDelay),this._requestingAssets=!0)},w.prototype.requestImport=function(w){var t=this;kG.config.importConfirm?tt("",R("editor.importconfirm"),function(){t.request("import",{path:w,move:!0})},function(){t.request("import",{path:w,move:!1})}):this.request("import",{path:w,move:!0})},w.prototype.downloadFile=function(w){try{var t=window.location.hostname,G=window.location.port,A=window.location.protocol+"//"+t+":"+G+"/"+w,I=document.createElement("iframe");I.src=A,I.style.display="none",document.body.appendChild(I)}catch(w){}},w.prototype.$5$=function(w){var t=this._currentTab,G=this.rightBottomTabView.getTabModel().sm();this._currentTab=w,this.inspectorPane.$5$(w),this.listPane.$5$(w),kG.config.overviewEnabled&&this.overview.$5$(w),kG.config.dataViewEnabled&&this.dataView.$5$(w),kG.config.layerEnabled&&this.layerPane.$5$(w),kG.config.symbolStateEnabled&&this.symbolStatePane.$5$(w),kG.config.batchViewEnabled&&kG.BatchView&&this.batchView.$5$(w),kG.config.problemsEnabled&&this.problemsView.$5$(w),this.mainToolbar.$5$(w),this.rightToolbar.$5$(w),this.inspectorTool.$5$(w),kG.config.layerEnabled&&this.layerTab.setVisible(!!this.displayView||!!this.sceneView),kG.config.symbolStateEnabled&&this.symbolStateTab.setVisible(!!this.symbolView),kG.config.batchViewEnabled&&kG.BatchView&&this.batchViewTab.setVisible(!!this.sceneView),(!this.symbolView&&this.symbolStateTab&&G.co(this.symbolStateTab)||this.symbolView&&this.layerTab&&G.co(this.layerTab)||!this.sceneView&&this.batchViewTab&&G.co(this.batchViewTab)||!w&&(this.symbolStateTab&&G.co(this.symbolStateTab)||this.layerTab&&G.co(this.layerTab)||this.batchViewTab&&G.co(this.batchViewTab)||this.problemsTab&&G.co(this.problemsTab)))&&G.ss(this.listPaneTab),this.fireEvent("tabUpdated",{tab:w,oldTab:t})},w.prototype.updateInspectorPropertiesLater=function(){this.inspector&&this.inspector.$34$()},w.prototype.beginTransaction=function(){this.dm&&this.dm.beginTransaction()},w.prototype.endTransaction=function(){this.dm&&this.dm.endTransaction()},w.prototype.getCurrentEditingPointValue=function(w){var t=this.currentEditingPoint;return t?t[w]:0},w.prototype.setCurrentEditingPointValue=function(w,t){var G=this.gv;G&&G.getEditInteractor().getSubModule("Curve").setCurrentPoint(w,t)},w.prototype.$99$=function(w){this.mainTabView.$99$(w)},w.prototype.updateUIRefs=function(w){this.mainTabView.updateUIRefs(w)},w.prototype.getDragPoint=function(w){return this.dnd.$94$(w)instanceof ht.graph3d.Graph3dView?this.sceneView.lp(w):this.gv.lp(w)},w.prototype.dropLocalFileOnView=function(w){if(this.currentView){var t={event:w};if(this.fireViewEvent(this.currentView,"OutsideDropping",t),!t.preventDefault)for(var G=w.dataTransfer.files,A=0;A<G.length;A++){var I=G[A],R=I.name;Cw(R)?this.insertLocalImageFile(w,I):Vw(R)&&this.insertLocalJSONFile(w,I)}}},w.prototype.insertLocalImageFile=function(w,t){var G=this;_t(t,function(A){if(G.sceneView){var I=new ht.Node;I.setAnchor3d(.5,0,.5),I.s({shape3d:"billboard","shape3d.image":A,autorotate:!0}),I.p(G.getDragPoint(w)),I.setDisplayName(p(t.name)),G.sceneView.addData(I)}else if(G.displayView){var R=new ht.Node;R.setImage(A),R.p(G.gv.lp(w)),R.setDisplayName(p(t.name)),G.displayView.addData(R)}else if(G.symbolView){var _=G.gv.lp(w),r=new uG({type:"image",name:A,rect:[_.x,_.y,-1,-1]});r.setDisplayName(p(t.name)),G.symbolView.addData(r)}},!0)},w.prototype.insertLocalJSONFile=function(w,t){var G=this;_t(t,function(w){G.$97$(w)})},w.prototype.$97$=function(w){var t=this;if(w){this.beginTransaction(),w=X(w);var G=this.sceneView||this.displayView;if(G&&Nw(w.d)){var A=this.gv,I=A.dm().deserialize(w,A.getCurrentSubGraph(),{justDatas:!0});A.sm().ss(I.toList(A.isSelectable,A)),I.each(function(w){G.addData(w,!0,!0)})}else this.symbolView&&Nw(w.comps)&&w.comps.forEach(function(w){gt(w,t.symbolView)});this.gv.setFocus(),this.endTransaction()}},w.prototype.dropLocalFileOnDir=function(w,t){for(var G=w.dataTransfer.files,A=t.url,I=0;I<G.length;I++){var _=G[I].name;if(!kG.config.checkFileName(_,A+"/"+_))return void tt(R("editor.invalidfilename"),_,function(){})}for(var r=0;r<G.length;r++)this.uploadLocalFile(G[r],A,t.uuid,t.rootDir)},w.prototype.uploadLocalFile=function(w,t,G,A){var I=this,R=kG.config.checkFileName(w.name,t+"/"+w.name);R&&_t(w,function(w){var _={path:t+"/"+R,content:w,parent_uuid:G,root_dir:A};I.request(kG.config.vision?"drag":"upload",_)},!0)},w.prototype.addTab=function(w,t){this.mainTabView.add(w),this.fireEvent("tabCreated",{tab:w}),t&&this.mainTabView.getTabModel().sm().ss(w),this.mainTabView.validate()},w.prototype.openByJSON=function(w,t,G,A,I){this.mainTabView.getTabModel();if(w===BG){var R=this.mainTabView.getTabModel().getDataByTag(t);R||(R=new ht.Tab,R.setTag(t),R.setIcon("editor.display"),R.setClosable(!0),R.setName(G),new vA(this,R,t,A),this.addTab(R)),this.mainTabView.getTabModel().sm().ss(R)}else if(w===JG){var _=this.mainTabView.getTabModel().getDataByTag(t);_||(_=new ht.Tab,_.setTag(t),_.setIcon("editor.symbol"),_.setClosable(!0),_.setName(G),new DA(this,_,t,A),this.addTab(_)),this.mainTabView.getTabModel().sm().ss(_)}else if(w===nG)this.componentView.update(t,I,G,A);else if(w===FG){var r=this.mainTabView.getTabModel().getDataByTag(t);r||(r=new ht.Tab,r._isUI=!0,r.setTag(t),r.setIcon("editor.ui-tab"),r.setClosable(!0),r.setName(G),new UIView(this,r,t,A),this.addTab(r)),this.mainTabView.getTabModel().sm().ss(r)}},w.prototype.isOpenable=function(w){return!kG.config.isOpenable||kG.config.isOpenable(w)},w.prototype.open=function(w,t,G){var A=this;if(fw(w)&&(w=this.getFileNode(w)),w&&!w.$33$&&this.isOpenable(w))if(w.fileType===BG||w.fileType===JG||w.fileType===iG||w.fileType===FG)this.mainTabView.open(w);else if(w.fileType===nG)this.componentView.open(w);else if(w.fileType===fG)this.openModel&&this.openModel(w);else if(w.fileType===QG){var I=w.url,R=M(I),_=kG.config.fileOpeners[R];if(_&&!_(this,w,t,G))return;if(Zw(I))D(I,function(G){var I=ht.Default.svgToShape(G,{segments:kG.config.svgSegments,minimumFontSize:kG.config.svgMinimumFontSize});setTimeout(function(){var G=I.output,R=I.converter;R._canvas&&(G.width=R._canvas.width,G.height=R._canvas.height);var _=b(w.getName());t?A.newSymbolView(_,!1):A.newDisplayView(_),G.comps.forEach(function(w){delete w.repeatImage}),A.beginTransaction(),kG.toDatas(G.comps,t).forEach(function(w){A.currentView.addData(w,!0)}),t&&(G.width&&A.dm.a("width",G.width),G.height&&A.dm.a("height",G.height)),A.zoomToFit(),A.endTransaction()},kG.config.svgWaitingTime)});else if(zw(I))D(I,function(G){var I=b(w.getName()),R=ht.Default.cadToShape(G,{boundingType:t?kG.config.cadToSymbolBoundingType:kG.config.cadToDisplayBoundingType}),_={},r=Object.keys(R.blockDef).length,y=function(){t?A.newSymbolView(I,!1):A.newDisplayView(I),A.beginTransaction(),R.comps.forEach(function(w){"image"===w.type&&_[w.name]&&(w.name=_[w.name])}),kG.toDatas(R.comps,t).forEach(function(w){A.currentView.addData(w,!0)}),t&&(R.width&&A.dm.a("width",R.width),R.height&&A.dm.a("height",R.height)),A.zoomToFit(),A.endTransaction()};r?function(){var t=function(){0===--r&&y()},G="symbols/"+w.path.substr("assets/".length)+"/"+I+"/";for(var l in R.blockDef){R.blockDef[l].comps.forEach(function(w){"image"===w.type&&(w.name=G+w.name+".json")});var C={path:_[l]=G+l+".json",content:H(R.blockDef[l]),parent_uuid:w.uuid,root_dir:w.rootDir};A.request("upload",C,t)}}():y()});else if(Qw(I)||Jw(I)){if(!kG.FontConverterOptionView||!this.openFont)return;this.openFont(w)}}},w.prototype.$98$=function(w,t){var G=this;if(w){if(!this.tab)return void this.open(w);if(this.editable)if(w.fileType!==BG){if(this.url!==w.url)if(w.fileType!==nG)if(w.fileType===JG||Cw(w.url)){if(this.displayView){var A=new ht.Node;if(A.setImage(w.getFileUUID()),t)A.p(t.x,t.y);else{var I=this.gv.getViewRect();I&&A.p(I.x+I.width/2,I.y+I.height/2)}A.setDisplayName(p(w.url)),this.displayView.addData(A)}else if(this.symbolView){var R=ht.Default.getImage(w.getFileUUID()),_=R?R.width:-1,r=R?R.height:-1,y=t?t.x:(this.dm.a("width")||0)/2,l=t?t.y:(this.dm.a("height")||0)/2,C=new uG({type:"image",name:w.getFileUUID(),rect:[y-(_>0?_/2:0),l-(r>0?r/2:0),_,r]});C.setDisplayName(p(w.url)),this.symbolView.addData(C)}else if(this.sceneView){var V=w.getFileUUID(),q=new ht.Node;if(q.setAnchor3d(.5,0,.5),q.s({shape3d:"billboard","shape3d.image":V,autorotate:!0}),q.a("image2d.url",V),t)q.p(t.x,t.y);else{var k=this.gv.getViewRect();k&&q.p(k.x+k.width/2,k.y+k.height/2)}q.setDisplayName(p(w.url)),this.sceneView.addData(q)}}else{if(w.fileType===iG)return void(this.displayView&&kG.config.handleInsertSceneFileToDisplayView&&kG.config.handleInsertSceneFileToDisplayView(this.displayView,w,t));if(w.fileType!==fG);else if(this.displayView)kG.config.handleInsertModelFileToDisplayView&&kG.config.handleInsertModelFileToDisplayView(this.displayView,w,t);else if(this.sceneView){var Z=new ht.Node;if(Z.setAnchor3d(.5,0,.5),Z.s({shape3d:w.getFileUUID()}),t)Z.p(t.x,t.y);else{var z=this.gv.getViewRect();z&&Z.p(z.x+z.width/2,z.y+z.height/2)}Z.setDisplayName(p(w.url)),this.sceneView.addData(Z)}}else if(this.symbolView){var x=new pA({type:w.getFileUUID(),rect:[t?t.x:(this.dm.a("width")||0)/2,t?t.y:(this.dm.a("height")||0)/2,-1,-1]},void 0,void 0,!0);x.setDisplayName(p(w.url)),this.symbolView.addData(x)}}else if(this.displayView)if(kG.config.insertDisplayViewAsRefGraph){var L=new ht.RefGraph;L.setRef(w.getFileUUID()),L.onPendingUpdated=function(){L.onPendingUpdated=null,L.p(t)},L.setDisplayName(p(w.url)),this.displayView.addData(L)}else D(w.url,function(w){G.$97$(w,t)})}},w.prototype.newDisplayView=function(w){return this.mainTabView.newDisplayView(w)},w.prototype.newSymbolView=function(w,t){return this.mainTabView.newSymbolView(w,t)},w.prototype.newUIView=function(w){return this.mainTabView.newUIView(w)},w.prototype.newComponent=function(w){this.componentView.open(null,w)},w.prototype.isDebugTipShowing=function(){var w=this.g3d||this.gv
;return w&&w.isDebugTipShowing()},w.prototype.toggleDebugTip=function(){var w=this.g3d||this.gv;w&&(w.isDebugTipShowing()?(w.hideDebugTip(),w.disableToolTip(),this.list.disableToolTip()):(w.showDebugTip(),w.enableToolTip(),this.list.enableToolTip()))},w.prototype.save=function(w,t){if(vG){var G=document.activeElement;G&&G.blur&&G.blur()}this.mainTabView.save(w,t)},w.prototype.saveAll=function(w){this.mainTabView.saveAll(w)},w.prototype.reload=function(){this.mainTabView.reload()},w.prototype.preview=function(){this.mainTabView.preview()},w.prototype.closeTab=function(w,t,G){this.mainTabView.closeTab(w,t,G)},w.prototype.closeOtherTabs=function(w,t){this.mainTabView.closeOtherTabs(w,t)},w.prototype.closeTabsToTheRight=function(w,t){this.mainTabView.closeTabsToTheRight(w,t)},w.prototype.closeAllTabs=function(w,t){this.mainTabView.closeAllTabs(w,t)},w.prototype.filterProperties=function(){this.inspector&&this.inspector.filterPropertiesLater()},w.prototype.isRulerEnabled=function(){return!!this.currentView&&this.currentView.isRulerEnabled()},w.prototype.setRulerEnabled=function(w){this.currentView&&this.currentView.setRulerEnabled(w)},w.prototype.toggleRulerEnabled=function(){this.setRulerEnabled(!this.isRulerEnabled())},w.prototype.isGridEnabled=function(){return!!this.currentView&&this.currentView.isGridEnabled()},w.prototype.setGridEnabled=function(w){this.currentView&&this.currentView.setGridEnabled(w)},w.prototype.toggleGridEnabled=function(){this.setGridEnabled(!this.isGridEnabled())},w.prototype.toggleLeft=function(){"normal"===this.leftSplitView.getStatus()?this.leftSplitView.setStatus("cl"):this.leftSplitView.setStatus("normal")},w.prototype.toggleRight=function(){if(this.currentView&&this.currentView.getPreferredSize){var w=this.currentView;w.isRightExpanded()?w.setRightExpanded(!1):w.setRightExpanded(!0)}else"normal"===this.mainSplitView.getStatus()?this.mainSplitView.setStatus("cr"):this.mainSplitView.setStatus("normal")},w.prototype.toggleBoth=function(){if("normal"===this.mainSplitView.getStatus()||"normal"===this.leftSplitView.getStatus())if(this.leftSplitView.setStatus("cl"),this.currentView&&this.currentView.getPreferredSize){var w=this.currentView;w.setRightExpanded(!1)}else this.mainSplitView.setStatus("cr");else if(this.leftSplitView.setStatus("normal"),this.currentView&&this.currentView.getPreferredSize){var w=this.currentView;w.setRightExpanded(!0)}else this.mainSplitView.setStatus("normal")},w.prototype.zoomIn=function(){this.gv&&this.gv.zoomIn(kG.config.animate)},w.prototype.zoomOut=function(){this.gv&&this.gv.zoomOut(kG.config.animate)},w.prototype.zoomReset=function(){this.gv&&this.gv.zoomReset(kG.config.animate)},w.prototype.zoomToFit=function(){this.gv&&this.gv.fitContent(kG.config.animate,kG.config.fitPadding),this.g3d&&this.g3d.flyTo(this.dm.getDatas(),{animation:kG.config.animate})},w.prototype.fitSelection=function(){var w=this.gv,t=this.sm,G=this.g3d;G&&G.flyTo(t.getSelection(),{animation:kG.config.animate}),w&&w.fitSelection(kG.config.fitPadding,kG.config.animate)},w.prototype.delete=function(){this.gv&&this.gv.removeSelection()},w.prototype.copyFiles=function(){this.explorer.copyFiles()},w.prototype.pasteFiles=function(){this.explorer.pasteFiles()},w.prototype.copy=function(){var w=this;if(this.ld){var t=this.cloneInfo;if(t.funcArray.length=0,t.jsonArray.length=0,t.offset={x:0,y:0,e:0},t.lastCheck=null,t.lastView=this.gv,t.sourceView=this.gv,this.displayView)t.type="display";else if(this.symbolView)t.type="symbol";else{if(!this.sceneView)return void(t.type=null);t.type="scene"}var G=0,A=void 0,I={};this.selection.forEach(function(t){if(!t._refGraph){I[t._id]=t,t instanceof ht.Block&&!(t instanceof ht.RefGraph)&&tw(t,I);var R=it(w.gv.dm(),t);G=Math.max(G,R),G===R&&(A=t)}}),t.lastData=A;var R=[],_=void 0;this.gv.each(function(w){I[w._id]&&(R.push(w),w instanceof ht.Node&&(_=_?ht.Default.unionRect(_,w.getRect()):w.getRect()))}),t.rect=_,this.gv.copyMap=I,R.forEach(function(G){var A=w.gv.isSelected(G),I=G.$50$(w.gv);if(0!==I.length){t.funcArray.push([G._id,A].concat(I));var R=at(G);R&&t.jsonArray.push([A,R])}}),this.fireEvent("copy",{datas:R,info:t}),this.gv.copyMap=null}},w.prototype.hasCopyInfo=function(){return this.cloneInfo.funcArray.length>0},w.prototype.paste=function(w,t){var G=this;if(this.editable){var A=this.gv,I=this.currentView,_=this.cloneInfo;if(_.funcArray.length&&A){var r=[],y=[];if(this.beginTransaction(),ht.Default.setIsolating(!0),"display"===_.type&&this.displayView||"display"===_.type&&this.sceneView||"symbol"===_.type&&this.symbolView||"scene"===_.type&&this.sceneView||"scene"===_.type&&this.displayView){var l={},C=[];_.funcArray.forEach(function(w){var t=w[0],G=w[1],R=w[2],_=w[3],V=_(R,A);I.addData(V,!0),l[t]=V,r.push(V),C.push(R),G&&y.push(V)});for(var V=0;V<r.length;V++)r[V].$49$(C[V],A,l);if(kG.config.pasteToLastSelectedIndex&&_.sourceView===A)for(var q=A.dm(),k=_.lastData,Z=k.getParent(),z=q.getSiblings(k).indexOf(k)+1,x=0,L=r.length;x<L;x++){var Q=C[x];if(!l[Q.parent]){var J=r[x];J.setParent(Z),q.moveTo(J,z++)}}}else _.jsonArray.length&&_.jsonArray.forEach(function(w,t){var I=w[0],l=w[1],C=_.funcArray[t][2];if("symbol"===_.type&&!G.symbolView&&C.clazz===pA)return void G.showMessage(R("editor.componentsusederror"),"error");var V=Dt(l,!!G.symbolView);V&&(V.setParent(A.getCurrentSubGraph()),G.currentView.addData(V,!0),r.push(V),I&&y.push(V))});ht.Default.setIsolating(!1);var B=kG.config.pasteOffset,n=0,f=0,i=0;if(iw(B)?n=f=B:Nw(B)?3===B.length?(n=B[0],i=B[1],f=B[2]):2===B.length&&(n=B[0],f=B[1]):B&&("x"in B&&(n=B.x),"y"in B&&(i=B.y),"z"in B&&(f=B.z)),y.length&&this.sm.ss(y),_.lastView!==A&&(_.offset.x=-n,_.offset.y=-f,_.offset.e=-i),!w&&r.length){var F=_.rect;if(t&&F?(_.offset.x=t.x-F.x-F.width/2,_.offset.y=t.y-F.y-F.height/2):(_.offset.x+=n,_.offset.y+=f),_.offset.e+=i,ht.Default.moveDatas(r,_.offset.x,_.offset.e,_.offset.y),!t&&!this.g3d){var S=A.$63$(r);S&&(_.offset.x+=S.x,_.offset.y+=S.y,_.lastCheck||(ht.Default.moveDatas(r,-n,-i,-f),_.offset.x-=n,_.offset.y-=f,_.offset.e-=i)),_.lastCheck=S}}_.lastView=A,this.fireEvent("paste",{datas:r,info:_}),A.setFocus(),this.endTransaction()}}},w.prototype.block=function(){if(this.editable){var w=this.displayView||this.sceneView;if(w){var t=this.selection;if(t.length){this.beginTransaction();var G=new ht.Block;t.forEach(function(w){w.setHost&&w.setHost(void 0),w.setParent(G)}),w.addData(G),this.endTransaction()}}}},w.prototype.unblock=function(){var w=this;if(this.editable){if(this.displayView||this.sceneView){this.beginTransaction();var t=[];this.selection.forEach(function(G){if(G instanceof ht.Block&&!(G instanceof ht.RefGraph)){var A=G.getParent();G.getChildren().toArray().forEach(function(w){w.setParent(A),t.push(w)}),w.dm.remove(G)}}),t.length&&(this.sm.ss(t),this.gv.setFocus()),this.endTransaction()}}},w.prototype.bringForward=function(){this.editable&&this.dm&&(this.dm.isHierarchicalRendering()?this.dm.moveSelectionDown():this.dm.bringSelectionForward())},w.prototype.bringToFront=function(){this.editable&&this.dm&&(this.dm.isHierarchicalRendering()?this.dm.moveSelectionToBottom():this.dm.bringSelectionToFront())},w.prototype.sendBackward=function(){this.editable&&this.dm&&(this.dm.isHierarchicalRendering()?this.dm.moveSelectionUp():this.dm.sendSelectionBackward())},w.prototype.sendToBack=function(){this.editable&&this.dm&&(this.dm.isHierarchicalRendering()?this.dm.moveSelectionToTop():this.dm.sendSelectionToBack())},w.prototype.undo=function(){this.pointsEditingMode=!1,this.editable&&(this._currentTab&&this._currentTab._isUI?this._currentTab.getView().undo():this.dm.getHistoryManager()&&this.dm.getHistoryManager().canUndo()&&(this.dm.undo(),this.fireEvent("undo",{})))},w.prototype.redo=function(){this.pointsEditingMode=!1,this.editable&&(this._currentTab&&this._currentTab._isUI?this._currentTab.getView().undo():this.dm.getHistoryManager()&&this.dm.getHistoryManager().canRedo()&&(this.dm.redo(),this.fireEvent("redo",{})))},w.prototype.distributeHorizontal=function(){this.editable&&this.inspectorTool.distributeHorizontal()},w.prototype.distributeVertical=function(){this.editable&&this.inspectorTool.distributeVertical()},w.prototype.alignLeft=function(){this.editable&&this.inspectorTool.alignLeft()},w.prototype.alignHorizontal=function(){this.editable&&this.inspectorTool.alignHorizontal()},w.prototype.alignRight=function(){this.editable&&this.inspectorTool.alignRight()},w.prototype.alignTop=function(){this.editable&&this.inspectorTool.alignTop()},w.prototype.alignVertical=function(){this.editable&&this.inspectorTool.alignVertical()},w.prototype.alignBottom=function(){this.editable&&this.inspectorTool.alignBottom()},w.prototype.folder=function(){if(this.editable&&this.displayView){this.beginTransaction();var w=new ht.Data;w.s("editor.folder",!0),this.dm.add(w);this.list.getTopRowOrderSelection().each(function(t){w.addChild(t)}),this.sm.ss(w),this.endTransaction()}},w.prototype.unfolder=function(){var w=this;if(this.editable&&this.displayView){this.beginTransaction();var t=this.sm.toSelection(function(w){return w.s("editor.folder")});t.forEach(function(w){w.toChildren().forEach(function(t){t.setParent(w.getParent())})}),t.forEach(function(t){w.dm.remove(t)}),this.endTransaction()}},w.prototype.locate=function(w){w&&this.request("locate",w.url||w)},w.prototype.saveImage=function(w,t,G,A,I,R){var _=this,r=function(){var r={uuid:A,path:t,content:Vt(w),parent_uuid:I,root_dir:R};_.request("upload",r,G)};if(fw(w)&&!ht.Default.getImage(w))if(/.json$/.test(w))ht.Default.xhrLoad(w,function(t){t&&(ht.Default.setImage(w,ht.Default.parse(t)),r())});else{var y=new window.Image;y.onload=function(){ht.Default.setImage(w,y),r()},y.src=w}else r()},w.prototype.handleKeydown=function(w){var t=w.keyCode;if(W(w)&&83===t&&w.preventDefault(),EG.length){if((w.target._ignore||!Yw(w.target))&&!ht.Default.popup){var G=EG[EG.length-1];n(w)&&G.$48$?G.$48$():B(w)&&G.$47$&&G.$47$()}}else{var A={event:w};if(this.fireEvent("keydown",A),!A.preventDefault){if(W(w)&&83===t)return void this.save();if(!Yw(w.target)){if(w.preventDefault(),n(w)){for(var I=0;I<this.menus.length;I++)if(this.menus[I].isShowing())return void this.menus[I].hide();if(this.funcView&&this.funcView.smartClose&&this.funcView.getView().parentNode)return void this.funcView.hide();if(this.iconsView&&this.iconsView.getView().parentNode)return void this.iconsView.hide();if(this.tab){var R=this.tab.getView();[R.graphView,R.g3d].forEach(function(t){if(t){var G=t.getInteractors();G&&G.each(function(t){!t.disabled&&t.$48$&&t.$48$(w)})}})}}80===t?this.preview():187===t?this.zoomIn():189===t?this.zoomOut():48===t?this.zoomToFit():57===t?this.zoomReset():W(w)&&67===t?this.copy():W(w)&&86===t?this.paste():W(w)&&g(w)&&90===t?this.redo():W(w)&&90===t?this.undo():w.altKey&&W(w)&&221===t?this.bringToFront():w.altKey&&W(w)&&219===t?this.sendToBack():W(w)&&221===t?this.bringForward():W(w)&&219===t?this.sendBackward():90===t?this.fitSelection():W(w)&&g(w)&&71===t?this.unblock():W(w)&&71===t&&this.block()}}}},w.prototype.createDisplayItem=function(w,t,G,A,I,R){var _=this,r=function(){return _.displayView&&_.displayView.$3$()===w},y=Gt(w,t,G,r);return y.visible=function(){return!!_.displayView&&_.editable},y.action=function(){_.displayView&&_.displayView.$4$(w,A,I,R)},y},w.prototype.createSymbolItem=function(w,t,G,A,I,R){var _=this,r=function(){return _.symbolView&&_.symbolView.$3$()===w},y=Gt(w,t,G,r);return y.visible=function(){return!!_.symbolView&&_.editable},y.action=function(){_.symbolView&&_.symbolView.$4$(w,A,I,R)},y},w.prototype.showMessage=function(w,t,G){this.messageView.show(w,t,G)},w.prototype.showConfirm=function(w,t,G,A){this.confirmView.show(w,t,G,A)},w.prototype.batchConvertSVG=function(w){var t=this,G=[],A=[];w.forEach(function(w){Zw(w.url)&&(G.push(w.url),A.push(w))});var I=2*G.length,_=0,r=function(){++_===I&&t.showMessage(Zt(R("editor.batchconvertsuccess"),G.length+""))};D(G,function(w){w.forEach(function(w,G){var I=A[G],R=ht.Default.svgToShape(w,{segments:kG.config.svgSegments,minimumFontSize:kG.config.svgMinimumFontSize}),_=I.path.replace(/^assets/g,"symbols"),y=I.getName().replace(/svg$/g,"json");setTimeout(function(){var w=R.output,G=R.converter;G._canvas&&(w.width=G._canvas.width,w.height=G._canvas.height),t.request("upload",{path:_+"/"+y,content:H(w)},r),y=I.getName().replace(/svg$/g,"png"),t.request("upload",{path:_+"/"+y,content:Vt(w)},r)},kG.config.svgWaitingTime)})})},rG(w,[{key:"editable",get:function(){return!!this.currentView&&this.currentView.editable},set:function(w){this.currentView&&(this.currentView.editable=w)}},{key:"dm",get:function(){return this.gv?this.gv.dm():null}},{key:"gv",get:function(){var w=this.mainTabView.getTabModel().sm().ld();if(w){return w.getView().graphView}return null}},{key:"editInteractor",get:function(){return this.gv?this.gv.getEditInteractor():null}},{key:"pointsEditingMode",get:function(){return!!this.editInteractor&&this.editInteractor.pointsEditingMode},set:function(w){this.editInteractor&&(this.editInteractor.pointsEditingMode=w)}},{key:"anchorVisible",get:function(){return!!this.gv&&this.gv.getEditStyle("anchorVisible")},set:function(w){this.gv&&this.gv.setEditStyle("anchorVisible",w)}},{key:"sm",get:function(){return this.gv?this.gv.sm():null}},{key:"ld",get:function(){return this.sm?this.sm.ld():null}},{key:"selection",get:function(){var w=this,t=[];return this.gv&&this.gv.each(function(G){w.gv.isSelected(G)&&t.push(G)}),t}},{key:"tabs",get:function(){return this.mainTabView.tabs}},{key:"inspector",get:function(){return this.inspectorPane.inspector}},{key:"list",get:function(){return this.listPane.list}},{key:"tab",get:function(){return this.mainTabView.currentTab}},{key:"url",get:function(){return this.tab?this.tab.getTag():null}},{key:"explorer",get:function(){return this.leftTopTabView.getCurrentTab().getView()}},{key:"dir",get:function(){return this.explorer?this.explorer.tree.getSelectionModel().getLastData():null}},{key:"file",get:function(){return this.explorer?this.explorer.getFileListView().getSelectionModel().getLastData():null}},{key:"currentLayer",get:function(){return this.layerPane.currentLayer}},{key:"currentView",get:function(){var w=this.tab;return w?w.getView():null}},{key:"displayTree",get:function(){return this.displayView?this.displayView.displayTree:null}},{key:"displayView",get:function(){var w=this.currentView;return w instanceof vA?w:null}},{key:"symbolList",get:function(){return this.symbolView?this.symbolView.symbolList:null}},{key:"symbolView",get:function(){var w=this.currentView;return w instanceof DA?w:null}},{key:"currentEditingPoint",get:function(){var w=this.currentView;return w?w.currentEditingPoint:null}},{key:"inspectorCompact",get:function(){return this._inspectorCompact},set:function(w){this._inspectorCompact=w,this.filterProperties(),this.inspectorTool.iv()}},{key:"inspectorInputFilter",get:function(){return this.inspectorTool.searchField.getValue()},set:function(w){this.inspectorTool.searchField.setValue(w),this.filterProperties()}}]),w}();ww(wR,{ms_fire:1}),kG.Editor=wR;var tR=function(){function w(t,G){var A=this;_G(this,w),this.editor=G,this.handler=t,this.cookie=0,this.callbacks={},this.cmds={},this.fileChangeVersion=String((new Date).getTime());var I=kG.config.host||window.location.hostname,R=kG.config.port||window.location.port,_=this.url=window.location.protocol+"//"+I+":"+R;setTimeout(function(){A.handler({type:"connected",message:_})},1),kG.config.checkForFileChanges&&kG.config.checkForFileChangesInterval&&this.fileChangedEvent()}return w.prototype.request=function(w,t,G){var A=++this.cookie;this.callbacks[A]=G,this.cmds[A]=w;var I=this.editor.sid;this[w](A,t,I||null,G);var R=w;t&&(fw(t)?R=w+": "+t:t.path&&(R=w+": "+t.path)),this.handler({type:"request",message:R,cmd:w,data:t})},w.prototype.fileChangedEvent=function(){var w=this,t=this.url+"/fileVersion";t+="/"+w.fileChangeVersion,t+="?sid="+this.editor.sid,w.send("GET",t,null,function(t){w.fileChangeVersion=String((new Date).getTime());var G=t.target.response;if(G){G=JSON.parse(G);Object.keys(G).forEach(function(t){w.handler({type:"fileChanged",path:t})})}}),setTimeout(function(){w.fileChangedEvent()},kG.config.checkForFileChangesInterval)},w.prototype.export=function(w,t,G){var A=this,I=new ht.Request,R={},_=new FormData,r=this.url+"/export";r+="?sid="+G,_.append("dir",t),R.url=encodeURI(r),R.method="POST",R.data=_,I.setResponseType("blob"),I.onload=function(t){var G=t.target;if(200==G.status||0===G.status){var I=G.response,R=G.getResponseHeader("Content-Disposition").split(";"),_=R[1].split("=")[1],r=new Blob([I],{type:"application/zip"}),y=document.createElement("a");y.href=window.URL.createObjectURL(r),y.download=decodeURI(_),y.click(),A.handleRespone(w,!0)}},I.send(R)},w.prototype.mkdir=function(w,t,G){var A=this,I=new ht.Request,R={},_=new FormData,r=this.url+"/mkdir";r+="?sid="+G,kG.config.vision?(_.append("path",t.dir),_.append("parent_uuid",t.parent_uuid)):_.append("path",t),R.url=encodeURI(r),R.method="POST",R.data=_,I.onload=function(t){var G=t.target;if(200==G.status||0===G.status){var I=G.response||G.responseText;A.handleRespone(w,"true"===I),A.handler({type:"fileChanged",path:dir})}},I.send(R)},w.prototype.explore=function(w,t,G){var A=this,I=new ht.Request,R={},_=this.url+"/explore";_+=t,_+="?sid="+G,R.url=encodeURI(_),I.onload=function(t){var G=t.target;if(200==G.status||0===G.status){var I=G.response||G.responseText;A.handleRespone(w,JSON.parse(I))}},I.send(R)},w.prototype.upload=function(w,t,G){var A=this,I=new FormData,R=this.url+"/upload",_=t.path;R+="?sid="+G,I.append("path",t.path),I.append("content",t.content),A.send("POST",R,I,function(t){var G=t.target;if(200==G.status||0===G.status){var I=G.response;if(A.handleRespone(w,!0),I){var R=JSON.parse(I);A.handler({type:"confirm",path:R.tempName,datas:R.paths})}else A.handler({type:"fileChanged",path:_})}})},w.prototype.rename=function(w,t,G){var A=this,I=new FormData,R=t.new,_=t.old,r=this.url+"/rename";r+="?sid="+G,I.append("newPath",R),I.append("oldPath",_),A.send("POST",r,I,function(t){var G=t.target;if(200==G.status||0===G.status){var I=G.response||G.responseText;A.handleRespone(w,"true"===I),"true"===I&&(A.handler({type:"fileChanged",path:R}),A.handler({type:"fileChanged",path:_}))}})},w.prototype.remove=function(w,t,G){var A=this,I=new FormData,R=this.url+"/remove";R+="?sid="+G,I.append("path",t),A.send("POST",R,I,function(G){var I=G.target;if(200==I.status||0===I.status){var R=I.response||I.responseText;A.handleRespone(w,"true"===R),"true"===R&&A.handler({type:"fileChanged",path:t})}})},w.prototype.locate=function(w,t,G){var A=this,I=this.url+"/locate";I+="?dir="+t,I+="&sid="+G,A.send("GET",I,null,function(t){var G=t.target;200!=G.status&&0!=G.status||A.handleRespone(w,!0)})},w.prototype.open=function(w,t,G){var A=this,I=this.url+"/open";I+="?url="+t,I+="&sid="+G,A.send("GET",I,null,function(t){var G=t.target;200!=G.status&&0!=G.status||A.handleRespone(w,!0)})},w.prototype.source=function(w,t,G){var A=this,I=new FormData,R=this.url+"/source";R+="?sid="+G,I.append("url",t.url),I.append("encoding",t.encoding),I.append("prefix",t.prefix),A.send("POST",R,I,function(t){var G=t.target;if(200==G.status||0===G.status){var I=G.response||G.responseText;A.handleRespone(w,I)}})},w.prototype.import=function(w,t,G){var A=this,I=new FormData,R=this.url+"/import";R+="?sid="+G,I.append("path",t.path),I.append("move",t.move),A.send("POST",R,I,function(t){var G=t.target;200!=G.status&&0!==G.status||A.handleRespone(w,!0)})},w.prototype.paste=function(w,t,G){var A=this,I=new FormData,R=this.url+"/paste";R+="?sid="+G,I.append("destDir",t.destDir),I.append("fileList",t.fileList),A.send("POST",R,I,function(t){var G=t.target;if(200==G.status||0===G.status){var I=G.response||G.responseText;A.handleRespone(w,I)}})},w.prototype.send=function(w,t,G,A){var I=new ht.Request,R={};R.url=encodeURI(t),R.method=w,R.data=G,A&&(I.onload=A),I.send(R)},w.prototype.handleRespone=function(w,t){var G=this.callbacks[w],A=this.cmds[w];delete this.callbacks[w],delete this.cmds[w],this.handler({type:"response",message:A,cmd:A,data:t}),G&&G(t)},w}();return kG.config.logEditorInfo&&console.log("HT Editor v0.3.8 powered by HT for Web v"+ht.Default.getVersion()+" from www.hightopo.com"),!window.onbeforeunload&&kG.config.promptBeforeClosing&&(window.onbeforeunload=function(w){return w.returnValue=R("editor.closetip"),w.returnValue}),kG.version="0.3.8",kG.FILE_TYPE_UNKNOWN=zG,kG.FILE_TYPE_ROOT=xG,kG.FILE_TYPE_DIR=LG,kG.FILE_TYPE_ASSET=QG,kG.FILE_TYPE_SYMBOL=JG,kG.FILE_TYPE_DISPLAY=BG,kG.FILE_TYPE_COMPONENT=nG,kG.FILE_TYPE_MODEL=fG,kG.FILE_TYPE_UI=FG,kG.FILE_TYPE_SCENE=iG,kG.FILE_LAYOUT_LIST=NG,kG.MESSAGE_TYPE_NORMAL="normal",kG.MESSAGE_TYPE_ERROR="error",kG.getString=R,kG.stringifyFunction=V,kG.parseFunction=k,kG.createButton=It,kG.createItem=Gt,kG.layoutMainView=rt,kG.msClass=ww,kG.initContext=Y,kG.getInput=wt,kG.trimExtension=b,kG.fileNameToDisplayName=p,kG.isJSON=Vw,kG.isOBJ=xw,kG.isDisplay=Aw,kG.isScene=_w,kG.isSymbol=Iw,kG.isAsset=lw,kG.isComponent=Rw,kG.isUI=yw,kG.isImage=Cw,kG.isModel=rw,kG.isMTL=Lw,kG.getter=Z,kG.setter=z,kG.snapshot=Vt,kG.CodeEditor=qG,kG.createCodeEditor=kt,kG.ContextMenu=WG,kG.Dialog=CG,kG.SplitView=PG,kG.FormPane=VG,kG.TablePane=jG,kG.DND=PI,kG.DNDFromOutside=jI,kG.DNDTree=AA,kG.DNDIndexList=OA,kG.EditGraphView=fA,kG.DisplayGraphView=iA,kG.SymbolList=HA,kG.FileTree=IA,kG.FileList=lA,kG.DisplayTree=_A,kG.DisplayView=vA,kG.MainTabView=gA,kG.MainToolbar=dA,kG.MainMenu=jA,kG.MessageView=qI,kG.ObjectView=RI,kG.EditView=NA,kG.FontView=yI,kG.FunctionView=II,kG.ComponentView=YA,kG.SymbolView=DA,kG.InspectorTool=WA,kG.Inspector=LI,kG.HTDataInspector=nI,kG.HTNodeInspector=iI,kG.HTTextInspector=vI,kG.HTShapeInspector=mI,kG.HTGroupInspector=TI,kG.HTBlockInspector=UI,kG.HTRefGraphInspector=cI,kG.HTEdgeInspector=NI,kG.DisplayInspector=QI,kG.SymbolInspector=BI,kG.InspectorPane=KI,kG.Explorer=kA,kG.Scenes=LA,kG.Models=QA,kG.Assets=BA,kG.Components=xA,kG.Displays=ZA,kG.Symbols=zA,kG.WebSocketService=GA,kG.HTTPService=tR,kG.CreateNodeInteractor=mA,kG.CreateEdgeInteractor=UA,kG.CreateShapeInteractor=cA,kG.combineShapes=Lt,kG.splitShape=Qt,kG.removeItem=l,kG.alert=tt,kG.initImageIcon=nt,kG.initInputDND=ft,kG.jsonToPNG=nw,kG.getDataBindingMap=qt,kG.isAllShape=Jt,kG.reverseShapes=xt,kG.readLocalFile=_t,kG.removeCache=E,kG.DIRECTORY_TYPE_NORMAL=1,kG.DIRECTORY_TYPE_PROJECT=2,kG.DIRECTORY_TYPE_ROOT=3,kG.DIRECTORY_TYPE_SYSTEM=4,kG.symbol={Image:uG},kG.createEditor=function(w){if(window.location.host.indexOf("hightopo")>=0){var t="https:"==document.location.protocol?" https://":" http://";document.write(unescape("%3Cdiv style='display:none'%3E%3Cspan id='cnzz_stat_icon_1000279011'%3E%3C/span%3E%3Cscript src='"+t+"s23.cnzz.com/z_stat.php%3Fid%3D1000279011%26show%3Dpic' type='text/javascript'%3E%3C/script%3E%3C/div%3E")),document.body.style.margin="0px",document.body.style.padding="0px"}w&&(ht.Default.isString(w)?w={container:w}:w.tagName&&w.appendChild&&(w={container:w})),w=w||{};var G=void 0,A=void 0===w.container?kG.config.container:w.container;return null===A?G=null:A?ht.Default.isString(A)?G=document.getElementById(A):A.length?(G=ht.Default.createDiv(),G.style.left=A[0]+"px",G.style.top=A[1]+"px",G.style.width=A[2]+"px",G.style.height=A[3]+"px",document.body.appendChild(G)):G=A:G=document.body,w.$38$=G,new wR(w)},kG.init=function(){if(!kG.consts){var w=R("MAX_INDENT_TEST_STRING",!0);w&&(kG.config.indent=ht.Default.getTextSize(void 0,w).width),w=R("MAX_INDENT2_TEST_STRING",!0),w&&(kG.config.indent2=ht.Default.getTextSize(void 0,w).width),jt(),Pt(),Kt(),kG.config.initStudio&&kG.config.initStudio()}},kG}();
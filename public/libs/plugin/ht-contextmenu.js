!function(N,n){"use strict";var Q="ht",s=N[Q],f="position",P="absolute",A="px",i="left",O="top",x="innerHTML",Y="className",S="width",w="height",M="0",_="display",C="none",z="visibility",h="user-select",D="margin",H="padding",g=null,k=s.Color,W=s.Default,q=W.getInternal(),e=N.setTimeout,v=N.setInterval,E=N.clearTimeout,b=N.clearInterval,F=N.parseInt,L=W.isLeftButton,I=W.isDragging,m=W.startDragging,K=W.getDistance,X=W.isTouchable,c=W.isTouchEvent,u=W.getPagePoint,t=W.isRightButton,G=k.widgetIconHighlight,l=k.widgetIconBorder,B=k.widgetIconGradient,a=function(){return document},j=function(b,T){return b.querySelectorAll(T)},Z=function(P){var E=a().createElement(P);return"ul"===P&&(V(E,f,"relative"),V(E,D,M),V(E,H,M),V(E,"list-style",C),V(E,"box-sizing","border-box"),V(E,"-moz-box-sizing","border-box"),V(E,_,"inline-block"),V(E,"vertical-align","text-bottom"),V(E,"border","1px solid "+W.contextMenuBorderColor),V(E,"box-shadow","0 0 16px 1px "+W.contextMenuShadowColor),V(E,"overflow","hidden"),W.contextMenuBorderRadius&&V(E,"border-radius",W.contextMenuBorderRadius+A)),E},J=function(c){var e=c.touches[0];return e?e:c.changedTouches[0]},R=function(){return Z("div")},U=function(){return Z("canvas")},V=function(d,s,F){d.style.setProperty(s,F,g)},T=function(Q,D,A){W.def(s.widget[Q],D,A)},y=function(b,W){b.appendChild(W)},$=function(W,y){W.removeChild(y)},p=q.addEventListener,o=q.removeEventListener;q.addMethod(W,{contextMenuCheckIcon:{width:16,height:16,comps:[{type:"border",rect:[1,1,14,14],width:1,color:l},{type:"shape",points:[13,3,7,12,4,8],borderWidth:2,borderColor:G}]},contextMenuRadioIcon:{width:16,height:16,comps:[{type:"circle",rect:[2,2,12,12],borderWidth:1,borderColor:l},{type:"circle",rect:[4,4,8,8],borderWidth:1,borderColor:G,gradient:W.imageGradient,gradientColor:B,background:G}]},contextMenuLabelFont:(X?"16":"13")+"px arial, sans-serif",contextMenuLabelColor:"#000",contextMenuBackground:"#fff",contextMenuDisabledLabelColor:"#888",contextMenuHoverBackground:"#648BFE",contextMenuHoverLabelColor:"#fff",contextMenuSeparatorWidth:1,contextMenuSeparatorColor:"#E5E5E5",contextMenuScrollerColor1:"#FDFDFD",contextMenuScrollerColor2:"#D3D3D3",contextMenuScrollerBorderColor:"#C3C3C3",contextMenuBorderColor:"#C3C3C3",contextMenuShadowColor:"rgba(128, 128, 128, 0.5)",contextMenuBorderRadius:5,contextMenuSubmenuMark:"▶"},!0);var d=function(k){var U=this,t=k._view;U.$11b=k,U.addListeners(),p(t,"contextmenu",function(X){X.preventDefault()});var D=U.$37b=U.$36b.bind(U);p(t,"mouseover",D),p(t,"mouseout",D)};W.def(d,n,{ms_listener:1,getView:function(){return this.$11b._view},handle_touchstart:function(b){if(W.preventDefault(b),L(b)){for(var G=this,n=G.$11b,N=G.getView(),I=N.children,D=0;D<I.length;D++){var c=I[D],Z=c.$24b,a=c.$25b;if(Z&&Z.contains(b.target))return n.scrollUp(c),G.$28b=e(function(){G.$29b=v(function(){n.scrollUp(c)},100)},500),m(G,b),void 0;if(a&&a.contains(b.target))return n.scrollDown(c),G.$28b=e(function(){G.$29b=v(function(){n.scrollDown(c)},100)},500),m(G,b),void 0}G.$30b=u(b)}},handle_mousedown:function(C){this.handle_touchstart(C)},handle_touchend:function(B){if(L(B)){var x=this,r=x.$30b,X=c(B)?{x:J(B).pageX,y:J(B).pageY}:{x:B.pageX,y:B.pageY};if(!r||K(r,X)>1)return delete x.$30b,void 0;for(var e=x.getView(),C=x.$11b,O=B.target,t=g,$=g,j=C._items,R=e.$26b,h=0;h<R.length;h++)if($=R[h],$.contains(O)){t=$.getAttribute("data-id");break}if(t&&j){var d=C.$17b(j,function(c){return c._id===t});if(d){var W=!1;d.disabled instanceof Function?W=d.disabled.call(C,d):d.disabled===!0&&(W=!0),W||(d.items?c(B)&&x.$36b($,!0):C.$1b(d,B))}}delete x.$30b}},$36b:function(B,U){if(!I()){var r,K=this,P=K.$11b,m=K.getView(),v=P.$20b||m.children[0],g=P.$19b,$=m.$26b,b=m.children,H=B.target,t=m.getBoundingClientRect(),w=W.getWindowInfo(),c=w.width,F=w.height,n=function(U){for(var r=0;r<b.length;r++){var a=b[r],i=new RegExp(U+"$"),g=a[Y];if(g&&(i.test(g)||g.indexOf(U+" ")>=0))return a}},D=function(V){for(var D=0;D<$.length;D++){var j=$[D],Z=new RegExp(V+"$"),O=j[Y];if(O&&(Z.test(O)||O.indexOf(V+" ")>=0))return j}},j=function($){var k=D("menu-item"+$.$45b),e=k.getBoundingClientRect(),U=e.top-t.top,a=e.left-t.left;V($,O,U+A),V($,i,a+e.width+A);var C=$.getBoundingClientRect(),Z=C.top,B=C.left,v=C.height,m=C.width,I=Z+v+2,P=B+m+2;I>F&&V($,O,U+F-I+A),P>c&&V($,i,a-m+A)};if(U)r=B;else{if("mouseover"===B.type){for(var X=0;X<$.length;X++){var L=$[X];if(L.contains(H)){r=L;break}}if(!r&&g){var Z=g.parentNode,J=n("submenu"+g.getAttribute("data-id"));(J&&J.contains(H)||Z&&Z.contains(H))&&(r=g)}}else if("mouseout"===B.type){for(var o=!1,k=B.relatedTarget,X=0;X<b.length;X++){var f=b[X];if("hidden"!==f.style.visibility&&f.contains(k)){o=!0;break}}if(o)return}!r&&v&&(r=D("menu-item"+(v.$45b||"NaN")))}if(r!=g){if(g)for(var T=g;T;){if(T[Y]=T[Y].replace(" menu-item-hover",""),T[Y].indexOf("disabled")<0){var x=P.getItemByProperty("_id",T.getAttribute("data-id"));null!=x.background?x.background instanceof Function?V(T,"background-color",x.background.call(P,x)):V(T,"background-color",x.background):V(T,"background-color",W.contextMenuBackground),V(T,"color",W.contextMenuLabelColor)}var R=n("submenu"+T.getAttribute("data-id"));R&&V(R,z,"hidden");var E=T.parentNode;T=D("menu-item"+(E.$45b||"NaN"))}if(r){for(var N=r,G=[];N;){N[Y]+=" menu-item-hover",N[Y].indexOf("disabled")<0&&(V(N,"background-color",W.contextMenuHoverBackground),V(N,"color",W.contextMenuHoverLabelColor));var C=n("submenu"+N.getAttribute("data-id"));C&&(V(C,z,"visible"),G.push(C));var E=N.parentNode;N=D("menu-item"+(E.$45b||"NaN"))}G.reverse(),G.forEach(function(I){j(I)})}}P.$19b=r,P.$20b=r?r.parentNode:m.children[0]}},handle_mouseup:function(y){this.handle_touchend(y)},handleWindowTouchEnd:function(){var T=this;T.$28b!=g&&(E(T.$28b),delete T.$28b),T.$29b!=g&&(b(T.$29b),delete T.$29b),delete T.$34b,delete T.$30b,delete T.$35b},handleWindowMouseUp:function(M){this.handleWindowTouchEnd(M)},handle_mousemove:function(C){this.handle_touchmove(C)},handle_touchmove:function(s){if(!I()&&L(s)){for(var n=this,f=n.getView().children,j=g,d=0;d<f.length;d++){var o=f[d];if(o.contains(s.target)){j=o;break}}var B=n.$30b,A=c(s)?{x:J(s).pageX,y:J(s).pageY}:{x:s.pageX,y:s.pageY};j&&B&&K(B,A)>2&&(m(n,s),n.$34b=j,n.$35b=j.$18b)}},handleWindowTouchMove:function($){$.preventDefault();var X=this,K=X.$11b,p=X.$34b,z=X.$35b,g=X.$30b;if(g&&p){var n=c($)?{x:J($).pageX,y:J($).pageY}:{x:$.pageX,y:$.pageY},E=n.y-g.y;E>0?K.scrollUp(p,p.$18b-(z-E)):K.scrollDown(p,z-E-p.$18b)}},handleWindowMouseMove:function(M){this.handleWindowTouchMove(M)},$10b:function(h,W){h.preventDefault();for(var U=this,C=U.getView().children,X=g,i=0;i<C.length;i++){var x=C[i];if(x.contains(h.target)){X=x;break}}if(X){var Y=this.$11b,u=Y.getRowHeight();Math.abs(W)>.05&&(W>0?Y.scrollUp(X,W*u):0>W&&Y.scrollDown(X,-W*u))}},handle_mousewheel:function(T){this.$10b(T,T.wheelDelta/40)},handle_DOMMouseScroll:function(y){this.$10b(y,-y.detail)},$44b:function(A){this.getView().contains(A.target)||this.$11b.hide()},$41b:function(M){W.preventDefault(M)},$4b:function(i,K){var a=this.$11b;if(K=K||a._items,K&&K.length&&i.keyCode){var W=[i.keyCode];i.shiftKey&&W.push(16),i.ctrlKey&&W.push(17),i.altKey&&W.push(18),/mac/.test(N.navigator?N.navigator.userAgent.toLowerCase():"")?i.metaKey&&W.push(17):i.metaKey&&W.push(91),W.sort();var C=W.join(),j=a.$17b(K,function(n){if(n.key){var m=n.key.slice(0);return m.sort(),C===m.join()}});if(j){j.preventDefault!==!1&&i.preventDefault();var y=!1;j.disabled instanceof Function?y=j.disabled.call(a,j):j.disabled===!0&&(y=!0),y||a.$1b(j,i)}}},$39b:function(Z){this.$32b=u(Z)},$38b:function(H){if(W.preventDefault(H),!L(H)){var U=this;U._showContextMenu=t(H),U._showContextMenu||(U.$31b=u(H),U.$33b=e(function(){U._showContextMenu=!0,delete U.$33b},600))}},$40b:function(I){var V=this;V._showContextMenu&&(t(I)?V.$11b.show(I):V.$31b&&(V.$32b?K(V.$31b,V.$32b)<10&&V.$11b.show(I):V.$11b.show(I))),V.$33b!=g&&(E(V.$33b),delete V.$33b),delete V.$31b,delete V.$32b}}),s.widget.ContextMenu=function(c){var M=this,X=M._view=q.createView(null,M);X[Y]="ht-widget-contextmenu",M.setItems(c),M.$13b=new d(M),V(X,"font",W.contextMenuLabelFont),V(X,f,P),V(X,"cursor","default"),V(X,"-webkit-"+h,C),V(X,"-moz-"+h,C),V(X,"-ms-"+h,C),V(X,h,C),V(X,"box-sizing","border-box"),V(X,"-moz-box-sizing","border-box"),W.baseZIndex!=g&&V(X,"z-index",F(W.baseZIndex)+2+""),M.$3b=function(I){M.$13b.$4b(I)}},T("ContextMenu",n,{$16b:g,$5b:0,_items:g,$21b:g,_enableGlobalKey:!1,ms_v:1,enableGlobalKey:function(){var r=this,o=r._enableGlobalKey;o===!1&&(p(a(),"keydown",r.$3b),r._enableGlobalKey=!0)},disableGlobalKey:function(){this._enableGlobalKey=!1,o(a(),"keydown",this.$3b)},setItems:function(y){this._items=y},getItems:function(){return this._items},getVisibleFunc:function(){return this.$16b},setVisibleFunc:function(F){this.$16b=F},setLabelMaxWidth:function(P){this.$43b=P},$1b:function(s,G){var V=this;if("check"===s.type)s.selected=!s.selected;else if("radio"===s.type){var b=s.groupId;V.$17b(V._items,function(h){h.groupId===b&&(h.selected=!1)}),s.selected=!0}if(V.hide(),s.action)s.action.apply(s.scope||V,[s,G]);else if(s.href){var v=s.linkTarget||"_self";N.open(s.href,v)}},getItemById:function(G){return this.getItemByProperty("id",G)},setItemVisible:function(F,U){var q=this.getItemById(F);q&&(q.visible=U)},getItemByProperty:function(_,B,j){var O=this;if(j=j||O._items,!j||0===j.length)return g;var W=O.$17b(j,function(y){return y[_]===B});return W||g},scrollUp:function(d,V){var N=this;if(V=V==g?20:V,V=F(V),0!==V){var R=0;d.$18b>V&&(R=d.$18b-V),N.$42b(d,R),d.scrollTop=R,d.$18b=R}},scrollDown:function(b,c){var i=this;if(c=c==g?20:c,c=F(c),0!==c){var R=b.$22b,I=b.$23b,z=R-I;I+b.$18b+c<R&&(z=b.$18b+c),i.$42b(b,z),b.scrollTop=z,b.$18b=z}},$42b:function(o,w){w=w==g?o.$18b:w;var U=o.$24b,t=o.$25b;U&&(V(U,"top",w+A),0==w?V(U,_,C):V(U,_,"block")),t&&(V(t,"bottom",-w+A),w==o.$22b-o.$23b?V(t,_,C):V(t,_,"block"))},getRowHeight:function(){return this._view.querySelector(".menu-item").offsetHeight},$17b:function(T,v){for(var L=0;L<T.length;L++){var Y=T[L];if(v(Y))return Y;if(Y.items){var p=this.$17b(Y.items,v);if(p)return p}}},$2b:function(N,d){for(var n=this,v=0;v<N.length;v++){n.$5b++;var m=N[v];if(m.visible!==!1)if(W.isFunction(m.visible)&&m.visible()===!1)this._clearItemId(m);else if(!n.$16b||n.$16b.call(n,m)){var p=Z("li"),K=n.$5b+"";if(V(p,"white-space","nowrap"),V(p,_,"block"),"separator"===m||m.separator===!0){var M=R();M[Y]="separator",V(M,w,W.contextMenuSeparatorWidth+A),V(M,"background",W.contextMenuSeparatorColor),y(p,M)}else{m._id=K,p.setAttribute("data-id",K);var c=Z("span"),Q=Z("span"),X=U(),I=R();if(V(c,_,"inline-block"),V(c,w,"1.2em"),V(Q,_,"inline-block"),V(Q,w,"1.2em"),V(Q,"line-height","1.2em"),X[Y]="prefix",V(X,_,"inline-block"),V(X,S,"1em"),V(X,w,"1em"),V(X,"vertical-align","middle"),V(X,D,"0 0.2em"),"check"===m.type&&m.selected?X[Y]+=" check-prefix":"radio"===m.type&&m.selected&&(X[Y]+=" radio-prefix"),y(p,X),m.icon){var L=U();L[Y]="contextmenu-item-icon",V(L,_,"inline-block"),V(L,w,"1.2em"),V(L,S,"1.2em"),V(L,"margin-right","0.2em"),V(L,"float","left"),L.$50b=m.icon,L._item=m,y(c,L)}if(Q[x]=m.label,y(c,Q),y(p,c),I[Y]="suffix",V(I,_,"inline-block"),V(I,"margin-left","1em"),V(I,"margin-right","0.4em"),V(I,"text-align","right"),V(I,"font-size","75%"),m.items&&(I[x]=W.contextMenuSubmenuMark),m.suffix&&(I[x]=m.suffix),y(p,I),p[Y]="menu-item menu-item"+K,null!=m.background?m.background instanceof Function?V(p,"background-color",m.background.call(n,m)):V(p,"background-color",m.background):V(p,"background-color",W.contextMenuBackground),V(p,"color",W.contextMenuLabelColor),V(p,H,"3px 0"),m.disabled instanceof Function){var h=m.disabled.call(n,m);h&&(p[Y]+=" disabled",V(p,"color",W.contextMenuDisabledLabelColor))}else m.disabled&&(p[Y]+=" disabled",V(p,"color",W.contextMenuDisabledLabelColor));if(m.items){n.$21b||(n.$21b=new s.List);var C=Z("ul");C[Y]="submenu"+K,C.$45b=K,V(C,z,"hidden"),V(C,f,P),y(n._view,C),n.$21b.add(C),n.$2b(m.items,C)}}y(d,p)}else this._clearItemId(m);else this._clearItemId(m)}},rebuild:function(){var K=this,$=K._items,Y=K._view;if(Y&&(Y[x]="",K.$21b=g,K.$5b=0,K.$19b=g,K.$20b=g,Y.$26b=g,$&&0!==$.length)){var b=Z("ul",K._r);y(Y,b),K.$2b($,b)}},addTo:function(h){if(h){var $=this,u=$.$13b;$.$12b=h,$.$9b=function(z){u.$44b(z)};var Z=$.$6b=function(p){u.$38b(p)},w=$.$7b=function(m){u.$39b(m)},N=$.$8b=function(c){u.$40b(c)};W.mockTouch&&(p(h,"touchstart",Z,!0),p(h,"touchmove",w),p(h,"touchend",N)),p(h,"mousedown",Z,!0),p(h,"mousemove",w),p(h,"mouseup",N),$.$27b=function(m){u.$41b(m)},p(h,"contextmenu",$.$27b)}},showOnView:function(V,f,m){V=V.getView?V.getView():V;var $=W.getWindowInfo(),I=V.getBoundingClientRect();this.show(I.left+$.left+f,I.top+$.top+m)},show:function(h,l,I){var m=this,I=I==g?!0:!1,b=m._view;if(b){if(m.invalidate(),1===arguments.length){var Q=h;if(c(Q)){var k=J(Q);h=k.pageX,l=k.pageY}else h=Q.pageX,l=Q.pageY}var v=W.getWindowInfo(),U=v.width,L=v.height,z=v.left,F=v.top,K={pageX:h,pageY:l,clientX:h-z,clientY:l-F,target:1,originEvent:Q},D=K.clientX,n=K.clientY,H=function(Q){Q.style.height=L-6+A;var u=R(),l=R(),s=function(l){V(l,f,P),V(l,"text-align","center"),V(l,S,"100%"),V(l,"font-size",10+A),V(l,"padding","2px 0"),V(l,"border","0px solid "+W.contextMenuScrollerBorderColor),V(l,"background-color",W.contextMenuScrollerColor1),l.style.backgroundImage="-webkit-linear-gradient(top, "+W.contextMenuScrollerColor1+", "+W.contextMenuScrollerColor2+")",l.style.backgroundImage="linear-gradient(to bottom, "+W.contextMenuScrollerColor1+", "+W.contextMenuScrollerColor2+")"};u[Y]="menu-arrow-item menu-arrow-item-top",l[Y]="menu-arrow-item menu-arrow-item-bottom",s(u),V(u,"top",M),V(u,"left",M),V(u,"border-bottom-width",1+A),u[x]="▲",s(l),V(l,"bottom",M),V(l,"left",M),V(l,"border-top-width",1+A),l[x]="▼",Q.$24b=u,Q.$25b=l,Q.$18b=Q.scrollTop,Q.$22b=Q.scrollHeight,Q.$23b=Q.clientHeight,y(Q,u),y(Q,l),m.$42b(Q)};m.beforeShow&&m.beforeShow(K);var o=m._items;if(o&&(Q&&Q.preventDefault(),o.length)){m.rebuild();var t=b.$26b=j(b,".menu-item");if(t.length){W.appendToScreen(b);var X=b.children[0];X.offsetHeight>L&&H(X);var N=n+(I?1:0),$=D+(I?1:0),G=function(Y){for(var f=0,Q=0,R=0,U=m.$43b;R<Y.children.length;R++){var B=Y.children[R];if(B.getAttribute("data-id")){var s=B.children[1],p=B.children[2],F=s.children;if(U){var t=F[0];F.length>1&&(t=F[1]),t.offsetWidth>U&&(t[x]="<marquee scrollamount='3'>"+t[x]+"</marquee>",t.children[0].style.verticalAlign="text-bottom",V(t,S,U+A),V(t,_,"inline-block"))}var c=s.offsetWidth,P=p.offsetWidth;c>f&&(f=c),P>Q&&(Q=P)}}for(R=0;R<Y.children.length;R++){var B=Y.children[R];if(B.getAttribute("data-id")){var s=B.children[1],p=B.children[2],u=s.children[0],G=s.children[1];!G&&u.style.width&&V(u,S,f+A),V(s,S,f+A),V(p,S,Q+A)}}};G(X);var T=n+3+b.offsetHeight,B=D+3+b.offsetWidth;T>L?V(b,O,N-(T-L)+F+A):V(b,O,N+F+A),B>U?V(b,i,$-(B-U)+z+A):V(b,i,$+z+A);var r=m.$21b;r&&r.each(function(t){G(t),t.offsetHeight>L&&H(t)}),m.$9b&&(W.mockTouch&&p(a(),"touchstart",m.$9b,!0),p(a(),"mousedown",m.$9b,!0)),m.afterShow&&m.afterShow(K),m.$47b()}}}},isShowing:function(){return this._view?this._view.parentNode!=g:!1},getRelatedView:function(){return this.$12b},hide:function(){var m=this,b=m._view;b&&b.parentNode&&($(b.parentNode,b),W.mockTouch&&o(a(),"touchstart",m.$9b,!0),o(a(),"mousedown",m.$9b,!0),m.afterHide&&m.afterHide())},dispose:function(){var A=this,B=A.$12b,q=A._view;q&&(this.hide(),A.disableGlobalKey(),B&&(W.mockTouch&&(o(B,"touchstart",A.$6b,!0),o(B,"touchmove",A.$7b),o(B,"touchend",A.$8b)),o(B,"mousedown",A.$6b,!0),o(B,"mousemove",A.$7b),o(B,"mouseup",A.$8b),o(B,"contextmenu",A.$27b)),A._view=A._items=A.$21b=A.$19b=A.$12b=A.beforeShow=A.afterShow=A.afterHide=A.$9b=A.$3b=A.$6b=A.$7b=A.$8b=A.$27b=g)},$46b:function(X,P,m,s,i){var A=q.initContext(X);q.translateAndScale(A,0,0,1),A.clearRect(0,0,m,s),W.drawStretchImage(A,W.getImage(P),"fill",0,0,m,s,i,this),A.restore()},$47b:function(){var z,y,v,U=this,u=U._view;if(U.isShowing()){var b=j(u,".check-prefix");for(v=0;v<b.length;v++){var m=b[v];z=m.clientWidth,y=m.clientHeight,m.$48b=z,m.$49b=y,q.setCanvas(m,z,y)}var J=j(u,".radio-prefix");for(v=0;v<J.length;v++){var C=J[v];z=C.clientWidth,y=C.clientHeight,C.$48b=z,C.$49b=y,q.setCanvas(C,z,y)}var h=j(u,".contextmenu-item-icon");for(v=0;v<h.length;v++){var H=h[v];z=H.clientWidth,y=H.clientHeight,H.$48b=z,H.$49b=y,q.setCanvas(H,z,y)}}},validateImpl:function(){var t,e,r,A=this,f=A._view;if(A.isShowing()){var Q=j(f,".check-prefix");for(r=0;r<Q.length;r++){var y=Q[r];t=y.$48b,e=y.$49b,t&&e&&A.$46b(y,W.contextMenuCheckIcon,t,e)}var Z=j(f,".radio-prefix");for(r=0;r<Z.length;r++){var w=Z[r];t=w.$48b,e=w.$49b,t&&e&&A.$46b(w,W.contextMenuRadioIcon,t,e)}var i=j(f,".contextmenu-item-icon");for(r=0;r<i.length;r++){var l=i[r];t=l.$48b,e=l.$49b,t&&e&&A.$46b(l,W.getImage(l.$50b),t,e,l._item)}}},_clearItemId:function(s){var T=this;delete s._id,s.items&&s.items.forEach(function(Z){T._clearItemId(Z)})}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);
!function(h){"use strict";var C="ht",G=h[C],K=G.Default,O=Math,E=(O.PI,O.sin,O.cos,O.atan2,O.sqrt,O.max),c=O.floor,Z=(O.round,O.ceil),k=G.Shape,m=(G.Edge,G.List),g=G.Style,H=G.graph,A=K.getInternal(),x=A.ui(),w=null,$="prototype",s=h.clearInterval,L=h.setInterval,P=function(I){var B=I.data,W=this.dm();if(B&&"add"===I.kind){var l=W.$1c,J=B instanceof k?"shape.":"edge.";l&&B.s(J+"dash.flow")&&l.indexOf(B)<0&&l.push(B)}"clear"===I.kind&&(W.$1c=[])},d=function(w){var G=w.property,K=w.data,d=w.newValue,B=this.dm().$1c,X=K instanceof k?"s:shape.dash.flow":"s:edge.dash.flow";if(B&&G===X)if(d)B.indexOf(K)<0&&B.push(K);else for(var x=B.length,$=0;x>$;$++)if(B[$]===K){B.splice($,1);break}},S=H.GraphView[$],l=x.EdgeUI[$],Q=x.ShapeUI[$],v=Q._80o,y=l._80o,W=G.DataModel[$],e=W.prepareRemove,o=S.setDataModel;g["edge.dash.flow.step"]==w&&(g["edge.dash.flow.step"]=3),g["shape.dash.flow.step"]==w&&(g["shape.dash.flow.step"]=3),W.prepareRemove=function(D){e.call(this,D);var A=D._dataModel,E=A.$1c;if(E)for(var G=E.length,t=0;G>t;t++)if(E[t]===D){E.splice(t,1);break}},S.setDataModel=function(y){var S=this,u=S._dataModel;if(u!==y){u&&(u.umm(P,S),u.umd(d,S),u.$1c=[]),y.mm(P,S),y.md(d,S);var e=y.$1c=[];y.each(function(W){var F=W instanceof k?"shape.":"edge.";W.s(F+"dash.flow")&&e.indexOf(W)<0&&e.push(W)}),o.call(S,y)}},S.setDashFlowInterval=function(m){var Z=this,N=Z.$2c;Z.$2c=m,Z.fp("dashFlowInterval",N,m),Z.$3c!=w&&(s(Z.$3c),delete Z.$3c,Z.enableDashFlow(m))},S.getDashFlowInterval=function(){return this.$2c},S.$4c=function(){var N,F,D,d=this,U=d.tx(),o=d.ty(),p=d._zoom,s=d.getWidth(),V=d.getHeight(),u={x:-U/p,y:-o/p,width:s/p,height:V/p},n=d.dm().$1c,G=d._56I,Q=new m;if(n.forEach(function(A){G[A.getId()]&&(N=d.getDataUI(A),N&&(D=N._79o(),D&&Q.add(D)))}),0!==Q.size()&&(Q.each(function(A){K.intersectsRect(u,A)&&(F=K.unionRect(F,A))}),F&&(F&&(K.grow(F,E(1,1/p)),F.x=c(F.x*p)/p,F.y=c(F.y*p)/p,F.width=Z(F.width*p)/p,F.height=Z(F.height*p)/p,F=K.intersection(u,F)),F))){var X=d._canvas.getContext("2d");X.save(),X.lineCap=K.lineCap,X.lineJoin=K.lineJoin;var v=K.devicePixelRatio,R=F.x,e=F.y,$=F.width,Y=F.height;R=Math.floor((R*p+U)*v),e=Math.floor((e*p+o)*v),$=Math.ceil($*p*v)+1,Y=Math.ceil(Y*p*v)+1,F.x=(R/v-U)/p,F.y=(e/v-o)/p,F.width=$/v/p,F.height=Y/v/p,X.beginPath(),X.rect(R,e,$,Y),X.clip(),X.clearRect(R,e,$,Y),A.translateAndScale(X,U,o,p),d.$5c(X,F),X.restore()}},S.$5c=function(G,m){var w,k,M=this;M._93db(G),M.each(function(E){M._56I[E._id]&&(w=M.getDataUI(E),w&&(k=w._79o(),(!m||K.intersectsRect(m,k))&&(w.$7c=!0,w._42(G),delete w.$7c)))}),M._92db(G)},S.enableDashFlow=function(S){var n=this;n.$3c==w&&(n.$3c=L(function(){n.$4c()},S||n.$2c||50))},S.disableDashFlow=function(){var X=this;s(X.$3c),delete X.$3c};var n=function(){var v=this,O=v._data,T=O instanceof k?"shape.":"edge.",W=O.s(T+"dash.pattern"),Y=O.s(T+"dash.flow.reverse");if(W&&O.s(T+"dash")&&O.s(T+"dash.flow")&&v.$7c){var Q=v.s(T+"dash.offset")||0,j=O.s(T+"dash.flow.step"),p=O.getStyleMap(),y=0;W.forEach(function(C){y+=C}),Y&&(j=-j),Q-=j,Q%=y,p||(O._styleMap=p={}),p[T+"dash.offset"]=Q}};l._80o=function(D){y.call(this,D),n.call(this)},Q._80o=function(R){v.call(this,R),n.call(this)}}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);
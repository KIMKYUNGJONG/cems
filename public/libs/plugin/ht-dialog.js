!function(r,f){"use strict";var t="ht",E=r[t],V="px",W="left",s="top",T="bottom",D="right",w="innerHTML",U="className",m="",q="width",B="height",P="string",K="position",O="absolute",I="0",c="opacity",S="background",R=E.Default,e=R.getInternal(),i=E.Color,X=R.animate,j=R.isTouchable,p=R.isTouchEvent,J=null,N=(Math.sqrt,r.parseInt),l=r.setTimeout,y=(Math.round,i.titleIconBackground),d=function(A){return typeof A===P||A instanceof String},F=function(){return document},Z=function(h){return F().createElement(h)},h=function(){var z=Z("div");return z.tabIndex=-1,z.style.outline="none",z},Q=function(){return Z("canvas")},n=function(g,Z){Y(g,"-webkit-transform",Z),Y(g,"-ms-transform",Z),Y(g,"transform",Z)},Y=function(C,T,V){C.style.setProperty(T,V,J)},v=function(V,P,X){R.def(E.widget[V],P,X)},b=function(d,j){d.appendChild(j)},H=function(){return F().documentElement},u=function(){return H().clientWidth},G=function(){return H().clientHeight},g=e.addEventListener,a=e.removeEventListener,$=function(L){var I=L.touches[0];return I?I:L.changedTouches[0]};e.addMethod(R,{dialogCloseIcon:{width:100,height:100,comps:[{type:"shape",points:[10,10,90,90],segments:[1,2],borderWidth:8,borderColor:y},{type:"shape",points:[90,10,10,90],segments:[1,2],borderWidth:8,borderColor:y}]},dialogMaximizeIcon:{width:100,height:100,comps:[{type:"rect",rect:[10,15,80,75],borderWidth:6,borderColor:y},{type:"rect",rect:[10,10,80,20],background:y}]},dialogRestoreIcon:{width:100,height:100,comps:[{type:"rect",rect:[10,34,56,56],borderWidth:8,borderColor:y},{type:"rect",rect:[10,34,56,14],background:y},{type:"rect",rect:[34,10,56,14],background:y},{type:"rect",rect:[82,10,8,56],background:y},{type:"rect",rect:[66,62,24,8],background:y}]},dialogTitleLabelColor:R.labelSelectColor,dialogTitleLabelFont:(j?"18":"14")+"px arial, sans-serif",dialogContentLabelFont:R.labelFont,dialogTitleBackground:i.titleBackground,dialogHeaderBackground:i.headerBackground,dialogButtonBackground:"#1ABC9C",dialogButtonSelectBackground:"#16A085",dialogButtonLabelColor:"#fff"},!0);var z=function(f){var B=this;B.$1d=f,B.addListeners()};R.def(z,f,{ms_listener:1,getView:function(){return this.$1d.getView()},clear:function(){delete this.$2d,delete this.$3d,delete this.$4d,delete this.$5d},handle_touchstart:function(F){var e=this,y=e.$1d,Y=y.$6d,w=y._config,Z=y.$7d,u=F,T=F.target;if(Z.contains(T)||R.preventDefault(F),R.isLeftButton(F)){p(F)&&(u=$(F));var r=e.$8d={x:u.pageX,y:u.pageY};e.$9d={x:r.x,y:r.y},!w.maximized&&w.draggable&&Y.contains(T)&&(e.$4d=!0,R.startDragging(e,F)),e.handle_mousemove(F)&&(e.$2d=!0,R.startDragging(e,F)),Z.contains(F.target)||y.$41d.focus()}},handle_mousedown:function(T){this.handle_touchstart(T)},handle_touchend:function(X){if(R.isLeftButton(X)&&!this.$5d&&!this.$3d){var I=this,o=I.$1d,e=X.target,y=o._config,U=o.$18d,G=o.$16d;for(y.closable&&U.contains(e)&&o.hide(),y.maximizable&&G.contains(e)&&(y.maximized?o.restore():o.maximize());e&&(e.className||"").indexOf("dialog-button")<0;)e=e.parentNode;e&&e.buttonItem&&o.action&&o.action(e.buttonItem,X),delete I.$8d,delete I.$9d}},handle_mouseup:function(H){this.handle_touchend(H)},handleWindowTouchEnd:function(A){var B=this,E=B.$1d,t=E.$10d;B.$2d&&B.$3d?t.fire({kind:"endResize",target:E,originEvent:A}):B.$4d&&B.$5d&&t.fire({kind:"endMove",target:E,originEvent:A}),this.clear()},handleWindowMouseUp:function(t){this.handleWindowTouchEnd(t)},handle_mousemove:function(D){var N=this.$1d._config;if(N.maximized)return!1;if("w"!==N.resizeMode&&"h"!==N.resizeMode&&"wh"!==N.resizeMode)return!1;var C=this,Q=C.getView(),Z=Q.querySelector(".resize-area"),v=Z.getBoundingClientRect(),S={x:v.left,y:v.top,width:v.width,height:v.height};D=p(D)?$(D):D;var X=D.clientX,L=D.clientY,o={x:X,y:L};return R.containsPoint(S,o)?(Y(Q,"cursor","nwse-resize"),!0):(Y(Q,"cursor",m),void 0)},handleWindowTouchMove:function(e){e.preventDefault();var Q=e;p(e)&&(Q=$(e));var D=this,v=D.$8d,f=D.$9d;if(!(f.x==v.x&&f.y==v.y&&R.getDistance(f,{x:Q.pageX,y:Q.pageY})<=1)){var I=D.$1d,d=I._config,b=I.$21d,E=d.resizeMode||"wh",z=Q.pageX-v.x,B=Q.pageY-v.y;if(D.$2d){var X=b.offsetWidth,K=b.offsetHeight,Z=X+z,U=K+B;if(Z=Math.max(Z,50),U=Math.max(U,50),"center"===d.position||d.position==J){var n={},l=b.getBoundingClientRect();n.x=l.left,n.y=l.top,d.position=n}"w"===E?(I.setSize(Z,K),v.x+=Z-X):"h"===E?(I.setSize(X,U),v.y+=U-K):"wh"===E&&(I.setSize(Z,U),v.x+=Z-X,v.y+=U-K),D.$3d?I.$10d.fire({kind:"betweenResize",target:I,originEvent:e}):(D.$3d=!0,I.$10d.fire({kind:"beginResize",target:I,originEvent:e}))}else if(D.$4d){var m=b.getBoundingClientRect(),q=m.width,w=m.height,P=u(),C=G(),L=N(b.style.left)||0,H=N(b.style.top)||0,y=L+z,S=H+B,h=I.adjustPosition({x:y,y:S},{width:q,height:w},{width:P,height:C});h&&(y=h.x,S=h.y);var A=y-L,a=S-H;Y(b,W,y+V),Y(b,s,S+V),v.x+=A,v.y+=a,d.position={x:y,y:S},D.$5d?I.$10d.fire({kind:"betweenMove",target:I,originEvent:e}):(D.$5d=!0,I.$10d.fire({kind:"beginMove",target:I,originEvent:e}))}}},handleWindowMouseMove:function(L){this.handleWindowTouchMove(L)},handleWindowResize:function(){var e=this,F=e,T=F._config,z=F.$21d,j=u(),Q=G(),$=T.width,O=T.height,X=T.position||"center";T.maximized?(Y(z,q,j+V),Y(z,B,Q+V),Y(z,s,I),Y(z,W,I)):(Y(z,q,$+V),Y(z,B,O+V),"center"===X?(Y(z,W,(j-$)/2+V),Y(z,s,(Q-O)/2+V)):(Y(z,W,X.x+V),Y(z,s,X.y+V))),F.iv()},handle_mousewheel:function(E){E.stopPropagation()},handle_DOMMouseScroll:function(K){K.stopPropagation()}}),E.widget.Dialog=function(i){var k=this,y=k._view=e.createView(null,k);y[U]="ht-widget-dialog",Y(y,K,O),Y(y,s,I),Y(y,T,I),Y(y,W,I),Y(y,D,I),Y(y,q,"auto"),Y(y,B,"auto"),R.baseZIndex!=J&&Y(y,"z-index",R.baseZIndex+"");var X=k.$11d=new z(k);k.bindingHandleWindowResize=X.handleWindowResize.bind(k),k.$10d=new E.Notifier,i&&k.setConfig(i)},v("Dialog",f,{ms_v:1,ms_fire:1,_modal:!0,setTitle:function(c){this._config.title=c,this.getView().querySelector(".dialog-container-title span").innerHTML=c},clearNodes:function(L){if(L)for(;L.firstChild;)L.removeChild(L.firstChild)},$31d:function(){var N=this,n=N.$6d=h(),G=N._config,i=N.$12d=N.$13d();n[U]="dialog-container-title",Y(n,"cursor","default"),Y(n,"white-space","nowrap"),Y(n,"overflow","hidden"),Y(n,"font",R.dialogTitleLabelFont),Y(n,S,G.titleBackground||R.dialogTitleBackground),Y(n,"color",G.titleColor||R.dialogTitleLabelColor);var O=Z("span"),p=N.$25d();if(G.titleAlign&&Y(n,"text-align",G.titleAlign),G.titleIcon){var g=N.$14d=N.$15d();b(n,g)}if(G.title&&G.title.trim&&(G.title=G.title.trim()),O[w]=G.title||"&nbsp;",b(n,O),G.maximizable){var s=N.$16d=N.$17d();b(i,s)}if(G.closable){var r=N.$18d=N.$19d();b(i,r)}return b(n,i),Y(n,"display","block"),Y(n,"line-height",p+V),n},$13d:function(){var n=h();return Y(n,K,O),Y(n,W,I),Y(n,D,5+V),Y(n,s,I),Y(n,T,I),Y(n,"text-align",D),Y(n,"white-space","nowrap"),n[U]="dialog-title-controls",n},$20d:function(){var D=this.$21d=h(),v=this._config,F=v.borderWidth;return Y(D,K,"fixed"),Y(D,"box-shadow","rgba(0, 0, 0, 0.2) 0px 5px 10px 0px"),Y(D,"padding",I+" "+F+V+" "+F+V+" "+F+V),Y(D,"box-sizing","border-box"),Y(D,"-moz-box-sizing","border-box"),D[U]="dialog-container",Y(D,S,v.titleBackground||R.dialogTitleBackground),D},$22d:function(){var p,Z=this,g=Z._config,k=Z.$7d=h(),I=g.content,n=0,L=g.contentPadding||0;g.buttons!=J&&g.buttons.length>0&&(n=32),d(I)?k[w]=I:I.getView?(p=I.getView(),b(k,p)):(p=I,b(k,p)),Y(k,K,O),Y(k,"font",R.dialogContentLabelFont),E.Default.appendToScreen(k);var r=k.offsetWidth+1,x=k.offsetHeight,_=Z.$25d();return g.width==J&&(g.width=r+10+2*L),g.height==J&&(g.height=x+_+n+5+2*L),E.Default.removeHTML(k),p&&(Y(p,"box-sizing","border-box"),Y(p,"-moz-box-sizing","border-box"),Y(p,q,"100%"),Y(p,B,"100%")),k[U]="dialog-content",Y(k,s,_+L+V),Y(k,T,n+L+V),Y(k,W,L+V),Y(k,D,L+V),Y(k,"overflow","hidden"),k},getOverlayDiv:function(){return this.$41d},$23d:function(){if(this.$41d)return this.$41d;var t=this.$41d=h();return t[U]="dialog-overlay",Y(t,K,O),Y(t,s,I),Y(t,T,I),Y(t,W,I),Y(t,D,I),Y(t,S,"rgba(235, 235, 235, 0.7)"),t},_config:J,setSize:function(P,x){var n=this,$=n._config;$&&($.width=P,$.height=x,n.isShowing()&&(n.bindingHandleWindowResize(),n.iv()))},getConfig:function(){return this._config},$24d:function(){var D=this._config,x=D.titleIconSize||16;return j&&(x*=1.2),x},$25d:function(){var O=this._config,S=O.titleHeight||R.widgetTitleHeight;return S},$26d:function(b){Y(b,"cursor","pointer"),Y(b,"display","inline-block"),Y(b,"margin-right",(j?8:4)+V),Y(b,"vertical-align",s)},$27d:function(){var r=this.$30d=h(),n=10;return j&&(n=20),Y(r,q,n+V),Y(r,B,n+V),Y(r,K,O),Y(r,T,I),Y(r,D,I),r[U]="resize-area",r},$15d:function(){var I=this,h=Q();h[U]="dialog-title-control dialog-title-control-icon";var J=I.$25d(),$=I.$24d();return I.$26d(h),e.setCanvas(h,$,J),h},$17d:function(){var u=Q();u[U]="dialog-title-control dialog-title-control-maximize";var o=this.$25d(),R=this.$24d();return this.$26d(u),e.setCanvas(u,R,o),u},$19d:function(){var z=Q();z[U]="dialog-title-control dialog-title-control-close";var g=this.$25d(),b=this.$24d();return this.$26d(z),e.setCanvas(z,b,g),z},$28d:function(){var v=h();return Y(v,S,R.dialogContentBackground||"white"),Y(v,q,"100%"),Y(v,B,"100%"),Y(v,K,"relative"),v},$29d:function(){var l=this,$=h();Y($,"line-height",32+V),Y($,K,O),Y($,T,I),Y($,W,I),Y($,"white-space","nowrap"),Y($,"overflow","hidden"),Y($,D,I),Y($,S,R.dialogHeaderBackground),$[U]="dialog-container-buttons";var t=this._config,Z=t.buttonsAlign||D,n=0;return Y($,"text-align",Z),l.$42d=[],t.buttons.forEach(function(O){var r={};for(var _ in O)r[_]=O[_];O.background||(r.background=R.dialogButtonBackground),O.selectBackground||(r.selectBackground=R.dialogButtonSelectBackground),O.labelColor||(r.labelColor=R.dialogButtonLabelColor);var k=R.createObject(E.widget.Button,r),a=k.getView();a[U]="dialog-button "+O.className,a.buttonItem=O,l.$42d.push(k),Y(a,K,"relative"),Y(a,"display","inline-block"),Y(a,"text-align",W),Y(a,"height",24+V);var i=j?10:5;Z===W||Z===D?Y(a,"margin-"+Z,i+V):0===n||Y(a,"margin-"+W,i+V),Y(a,"vertical-align","middle");var J=R.getTextSize(k.getLabelFont(),O.label).width+10;k.onClicked=function(T){O.action&&O.action.call(l,O,T)},Y(a,q,J+V),b($,k.getView()),n++}),$},setConfig:function(n){if(n){var B=this,s=B._view;B._config=n,B.action=n.action,B.clearNodes(s),n.borderWidth==J&&(n.borderWidth=5);var t=B.$23d(),c=B.$28d(),C=B.$31d(),V=B.$22d(),e=B.$20d(),G=B.$30d=B.$27d();if(b(s,t),b(s,e),b(e,c),b(c,C),b(c,V),n.buttons!=J&&n.buttons.length>0){var l=B.$29d();b(c,l)}b(e,G),n.maximized?(n.maximized=!1,B.bindingHandleWindowResize(),B.maximize(!0)):B.bindingHandleWindowResize(),B.isShowing()&&B.iv()}},hide:function(){var D=this,F=D.$21d,m=D.$41d,L=D._view;L[U]="ht-widget-dialog",X(F).duration(200).scale(.7).set(c,I).end(function(){D.onHidden&&D.onHidden(),E.Default.removeHTML(L),D.$10d.fire({kind:"hide",target:D})}),X(m).duration(200).set(c,I).end(),a(r,"resize",D.bindingHandleWindowResize)},isShowing:function(){return!!this._view.parentNode},setModal:function(v){this._modal=v;var x=this.$23d();x.style.display=v?"block":"none";var J=this._view;Y(J,q,v?"auto":I),Y(J,B,v?"auto":I)},isModal:function(){return this._modal},$32d:function(){var X=this,G=X._config,Z=X.$21d;n(Z,m),X.iv(),G.maximized?X.$10d.fire({kind:"maximize",target:X}):X.$10d.fire({kind:"restore",target:X})},maximize:function(p){var k=this,E=k.$21d,C=k._config;if(!C.maximized){C.maximized=!0,k.$33d(),k.$16d[U]="dialog-title-control dialog-title-control-minimize";var O=C.width,Q=C.height,Y=N(E.style.left)||0,h=N(E.style.top)||0;k.$36d=O,k.$37d=Q,k.$34d=Y,k.$35d=h;var e,r=p?0:200,g=this._view.parentNode;e=g&&g!==document.body?this._view.parentNode.getBoundingClientRect():R.getWindowInfo(),X(E).duration(r).set(W,e.left+V).set(s,e.top+V).set(q,e.width+V).set(B,e.height+V).end(function(){k.$32d()})}},restore:function(){var n=this,A=n.$34d,$=n.$35d,Q=n.$36d,T=n.$37d,z=n._config;if(z.maximized&&(z.maximized=!1,n.$33d(),n.$16d[U]="dialog-title-control dialog-title-control-maximize",n.isShowing()&&A!=J&&$!=J&&Q!=J&&T!=J)){var d=n.$21d;X(d).duration(200).set(W,A+V).set(s,$+V).set(q,Q+V).set(B,T+V).end(function(){n.$32d()})}delete n.$34d,delete n.$35d,delete n.$36d,delete n.$37d},show:function(b){var W=this,t=W._view,v=W._config,y=W.$21d,K=W.$41d;b=b||v.parentDOM,v&&v.zIndex!=J&&Y(t,"z-index",v.zIndex+m),b?E.Default.appendChild(b,t):E.Default.appendToScreen(t),n(y,"scale(0.7)"),Y(y,c,I),W.iv(),W.validate(),W._view[U]+=" dialog-show",l(function(){X(y).duration(200).scale(1).set(c,"1").end(function(){Y(y,q,y.clientWidth+V),Y(y,B,y.clientHeight+V),W.onShown&&W.onShown(),W.$10d.fire({kind:"show",target:W});var M=v&&v.content;M&&M.iv&&M.iv()}),X(K).duration(200).set(c,"1").end(),g(r,"resize",W.bindingHandleWindowResize)},30)},setPosition:function(p){var j=this.$21d;j.style.left=p.x+"px",j.style.top=p.y+"px"},addEventListener:function(k,S,x){this.$10d.add(k,S,x)},removeEventListener:function(h,P){this.$10d.remove(h,P)},$38d:function(Q,N,F,L){var E=e.initContext(Q);e.translateAndScale(E,0,0,1),E.clearRect(0,0,F,F);var C=(F-L)/2;R.drawStretchImage(E,R.getImage(N),"fill",0,C,L,L),E.restore()},$33d:function(){var n=this,o=n._config,z=n.$16d,b=o.maximized?R.dialogRestoreIcon:R.dialogMaximizeIcon;if(z&&b){var e=n.$25d(),I=n.$24d();n.$38d(z,R.getImage(b),e,I)}},$39d:function(){var o=this,s=o._config,N=o.$14d,u=s.titleIcon;if(N&&u){var M=o.$25d(),O=o.$24d();o.$38d(N,R.getImage(u),M,O)}},$40d:function(){var J=this,W=J.$18d,j=R.dialogCloseIcon;if(W&&j){var D=J.$25d(),G=J.$24d();J.$38d(W,R.getImage(j),D,G)}},invalidate:function(V){var U=this,g=U.$42d;U._68I||(U._68I=1,R.callLater(U.validate,U,J,V),U.onInvalidated&&U.onInvalidated(),U.fireViewEvent("invalidate"));var A=U._config.content;A.invalidate&&A.invalidate(),g&&g.forEach(function(Q){Q.iv()})},validateImpl:function(){var Q=this;Q.$40d(),Q.$33d(),Q.$39d();var Y=Q._config.content;Y.initView&&(Y.setX(0),Y.setY(0),Y.setWidth(Q.$7d.clientWidth),Y.setHeight(Q.$7d.clientHeight))},adjustPosition:function(Z,k,D){var l=k.width,$=k.height,A=D.width,R=D.height,o=Z.x,X=Z.y,f=this._config,x=f.minDragSize||20;return"inside"===f.dragMode?(o+l>A&&(o=A-l),X+$>R&&(X=R-$),0>o&&(o=0),0>X&&(X=0)):(null==f.dragMode||"none"===f.dragMode)&&(-l+x>o&&(o=-l+x),o>A-x&&(o=A-x),X>R-x&&(X=R-x),0>X&&(X=0)),{x:o,y:X}}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);
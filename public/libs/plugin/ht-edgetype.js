!function(r){"use strict";var S="ht",D=r[S],h=Math,n=h.max,Y=h.min,p=h.abs,u=h.atan2,c=(h.cos,h.sin,h.ceil),Z=D.Default,x=Z.getInternal(),z=D.List,q=x.Mat,Q=x.getNodeRect,G=x.intersectionLineRect,j=Z.getDistance,L=Z.setEdgeType,T="left",F="right",J="top",l="bottom",V="edge.type",s="edge.gap",f="edge.center",$="edge.extend",H=function(E,x){return Q(E,x).width},g=function(S,A){return Q(S,A).height},y=function(I,R){return x.getEdgeHostPosition(I,R,"source")},W=function(y,p){return x.getEdgeHostPosition(y,p,"target")},e=function(T,j){var C=T.s(V),D=T.getEdgeGroup();if(D){var z=0;if(D.eachSiblingEdge(function(Q){j.isVisible(Q)&&Q.s(V)==C&&z++}),z>1)return T.s(s)*(z-1)/2}return 0},w=function(S,v){var p=S.s(V),x=S.isLooped();if(!S.getEdgeGroup())return x?S.s(s):0;var I,r=0,d=0,l=0;return S.getEdgeGroup().getSiblings().each(function(G){G.each(function(z){if(z._40I===S._40I&&z.s(V)==p&&v.isVisible(z)){var Q=z.s(s);I?(d+=l/2+Q/2,l=Q):(I=z,l=Q),z===S&&(r=d)}})}),x?d-r+l:r-d/2},R=function(l,m){var i=m.s("edge.corner.radius");return Z.toRoundedCorner(l,i)};x.addMethod(D.Style,{"edge.ripple.elevation":-20,"edge.ripple.size":1,"edge.ripple.both":!1,"edge.ripple.straight":!1,"edge.ripple.length":-1,"edge.corner.radius":-1,"edge.ortho":.5,"edge.flex":20,"edge.extend":20},!0),L("boundary",function(k,R,m,P){P||(R=-R);var U,M=y(m,k),V=W(m,k),d=Q(m,k._40I),$=Q(m,k._41I),I=new q(u(V.y-M.y,V.x-M.x)),L=j(M,V),l=M.x,D=M.y;return U=I.tf(0,R),M={x:U.x+l,y:U.y+D},U=I.tf(L,R),V={x:U.x+l,y:U.y+D},U=G(M,V,d),U&&(M={x:U[0],y:U[1]}),U=G(M,V,$),U&&(V={x:U[0],y:U[1]}),{points:new z([M,V])}}),L("ripple",function(H,S,h,i){i||(S=-S);var X=y(h,H),p=W(h,H),l=j(X,p),P=Y(H.s("edge.offset"),l/2),Z=H.s("edge.ripple.size"),E=H.s("edge.ripple.length"),F=H.s("edge.ripple.both"),G=H.s(f),B=H.s("edge.ripple.elevation"),v=new z,r=H.s("edge.ripple.straight")?null:new z,e=new q(u(p.y-X.y,p.x-X.x));i||(B=-B),l-=2*P,E>0&&(Z=c(l/E));var T=l/Z;r&&r.add(1);for(var D=0;Z>D;D++)r&&r.add(3),0===D?v.add({x:P+T*D,y:G?0:S}):v.add({x:P+T*D,y:S}),v.add({x:P+T*D+T/2,y:B+S}),F&&(B=-B);for(v.add({x:P+l,y:G?0:S}),D=0;D<v.size();D++){var b=e.tf(v.get(D));b.x+=X.x,b.y+=X.y,v.set(D,b)}return{points:v,segments:r}}),L("h.v",function(x,e,Y){e=w(x,Y);var P=new z,L=x.s(f),k=y(Y,x),n=k.x,V=k.y,B=W(Y,x),O=B.x,U=B.y,t=x._40I instanceof D.Edge,X=x._41I instanceof D.Edge,J=0,q=0,I=O-n,E=U-V;return L||(J=t?0:H(Y,x._40I)/2,q=X?0:g(Y,x._41I)/2),I>=0&&0>=E?(P.add({x:n+J,y:V+e}),P.add({x:O+e,y:V+e}),P.add({x:O+e,y:U+q})):0>=I&&E>=0?(P.add({x:n-J,y:V+e}),P.add({x:O+e,y:V+e}),P.add({x:O+e,y:U-q})):I>=0&&E>=0?(P.add({x:n+J,y:V+e}),P.add({x:O-e,y:V+e}),P.add({x:O-e,y:U-q})):(P.add({x:n-J,y:V+e}),P.add({x:O-e,y:V+e}),P.add({x:O-e,y:U+q})),R(P,x)}),L("v.h",function(V,Q,e){Q=w(V,e);var r=new z,p=V.s(f),K=y(e,V),q=K.x,u=K.y,U=W(e,V),d=U.x,B=U.y,m=V._40I instanceof D.Edge,t=V._41I instanceof D.Edge,I=0,P=0,S=d-q,F=B-u;return p||(I=t?0:H(e,V._41I)/2,P=m?0:g(e,V._40I)/2),S>=0&&0>=F?(r.add({x:q+Q,y:u-P}),r.add({x:q+Q,y:B+Q}),r.add({x:d-I,y:B+Q})):0>=S&&F>=0?(r.add({x:q+Q,y:u+P}),r.add({x:q+Q,y:B+Q}),r.add({x:d+I,y:B+Q})):S>=0&&F>=0?(r.add({x:q-Q,y:u+P}),r.add({x:q-Q,y:B+Q}),r.add({x:d-I,y:B+Q})):(r.add({x:q-Q,y:u-P}),r.add({x:q-Q,y:B+Q}),r.add({x:d+I,y:B+Q})),R(r,V)}),L("ortho",function(s,a,P){var x=new z,o=s.s(f),Y=s.s("edge.ortho"),G=s._40I,X=s._41I,J=y(P,s),Z=J.x,j=J.y,O=W(P,s),T=O.x,h=O.y,K=T-Z,w=h-j,t=G instanceof D.Edge,c=X instanceof D.Edge,V=o||t?0:H(P,G)/2,M=o||t?0:g(P,G)/2,C=o||c?0:H(P,X)/2,v=o||c?0:g(P,X)/2,S=(K-(V+C)*(K>0?1:-1))*Y,A=(w-(M+v)*(w>0?1:-1))*Y;return p(K)<p(w)?K>=0&&0>=w?(x.add({x:Z+a,y:j-M}),x.add({x:Z+a,y:j+A+a-M}),x.add({x:T+a,y:j+A+a-M}),x.add({x:T+a,y:h+v})):0>=K&&w>=0?(x.add({x:Z+a,y:j+M}),x.add({x:Z+a,y:j+A+a+M}),x.add({x:T+a,y:j+A+a+M}),x.add({x:T+a,y:h-v})):K>=0&&w>=0?(x.add({x:Z+a,y:j+M}),x.add({x:Z+a,y:j+A-a+M}),x.add({x:T+a,y:j+A-a+M}),x.add({x:T+a,y:h-v})):(x.add({x:Z+a,y:j-M}),x.add({x:Z+a,y:j+A-a-M}),x.add({x:T+a,y:j+A-a-M}),x.add({x:T+a,y:h+v})):K>=0&&0>=w?(x.add({x:Z+V,y:j+a}),x.add({x:Z+S+a+V,y:j+a}),x.add({x:Z+S+a+V,y:h+a}),x.add({x:T-C,y:h+a})):0>=K&&w>=0?(x.add({x:Z-V,y:j+a}),x.add({x:Z+S+a-V,y:j+a}),x.add({x:Z+S+a-V,y:h+a}),x.add({x:T+C,y:h+a})):K>=0&&w>=0?(x.add({x:Z+V,y:j+a}),x.add({x:Z+S-a+V,y:j+a}),x.add({x:Z+S-a+V,y:h+a}),x.add({x:T-C,y:h+a})):(x.add({x:Z-V,y:j+a}),x.add({x:Z+S-a-V,y:j+a}),x.add({x:Z+S-a-V,y:h+a}),x.add({x:T+C,y:h+a})),R(x,s)}),L("flex",function($,b,d){var T=new z,B=$.s("edge.flex")+e($,d),P=$.s(f),x=$._40I,M=$._41I,s=y(d,$),v=s.x,q=s.y,V=W(d,$),j=V.x,N=V.y,F=x instanceof D.Edge,L=M instanceof D.Edge,t=j-v,i=N-q,h=P||F?0:H(d,x)/2,u=P||F?0:g(d,x)/2,l=P||L?0:H(d,M)/2,k=P||L?0:g(d,M)/2,Q=t>0?B:-B,c=i>0?B:-B;return p(t)<p(i)?t>=0&&0>=i?(T.add({x:v+b,y:q-u}),T.add({x:v+b,y:q+c+b-u}),T.add({x:j+b,y:N-c+b+k}),T.add({x:j+b,y:N+k})):0>=t&&i>=0?(T.add({x:v+b,y:q+u}),T.add({x:v+b,y:q+c+b+u}),T.add({x:j+b,y:N-c+b-k}),T.add({x:j+b,y:N-k})):t>=0&&i>=0?(T.add({x:v+b,y:q+u}),T.add({x:v+b,y:q+c-b+u}),T.add({x:j+b,y:N-c-b-k}),T.add({x:j+b,y:N-k})):(T.add({x:v+b,y:q-u}),T.add({x:v+b,y:q+c-b-u}),T.add({x:j+b,y:N-c-b+k}),T.add({x:j+b,y:N+k})):t>=0&&0>=i?(T.add({x:v+h,y:q+b}),T.add({x:v+Q+b+h,y:q+b}),T.add({x:j-Q+b-l,y:N+b}),T.add({x:j-l,y:N+b})):0>=t&&i>=0?(T.add({x:v-h,y:q+b}),T.add({x:v+Q+b-h,y:q+b}),T.add({x:j-Q+b+l,y:N+b}),T.add({x:j+l,y:N+b})):t>=0&&i>=0?(T.add({x:v+h,y:q+b}),T.add({x:v+Q-b+h,y:q+b}),T.add({x:j-Q-b-l,y:N+b}),T.add({x:j-l,y:N+b})):(T.add({x:v-h,y:q+b}),T.add({x:v+Q-b-h,y:q+b}),T.add({x:j-Q-b+l,y:N+b}),T.add({x:j+l,y:N+b})),R(T,$)}),L("extend.east",function(X,h,d){var k=new z,E=X.s($)+e(X,d),S=X.s(f),O=y(d,X),F=X._40I instanceof D.Edge,p=X._41I instanceof D.Edge,C=O.x+(S||F?0:H(d,X._40I)/2),v=O.y,V=W(d,X),P=V.x+(S||p?0:H(d,X._41I)/2),I=V.y,Y=n(C,P)+E;return v>I?(k.add({x:C,y:v+h}),k.add({x:Y+h,y:v+h}),k.add({x:Y+h,y:I-h}),k.add({x:P,y:I-h})):(k.add({x:C,y:v-h}),k.add({x:Y+h,y:v-h}),k.add({x:Y+h,y:I+h}),k.add({x:P,y:I+h})),R(k,X)}),L("extend.west",function(C,h,t){var A=new z,b=C.s($)+e(C,t),S=C.s(f),p=C._40I instanceof D.Edge,w=C._41I instanceof D.Edge,F=y(t,C),u=F.x-(S||p?0:H(t,C._40I)/2),l=F.y,n=W(t,C),P=n.x-(S||w?0:H(t,C._41I)/2),i=n.y,I=Y(u,P)-b;return l>i?(A.add({x:u,y:l+h}),A.add({x:I-h,y:l+h}),A.add({x:I-h,y:i-h}),A.add({x:P,y:i-h})):(A.add({x:u,y:l-h}),A.add({x:I-h,y:l-h}),A.add({x:I-h,y:i+h}),A.add({x:P,y:i+h})),R(A,C)}),L("extend.north",function(n,L,o){var Q=new z,q=n.s($)+e(n,o),t=n.s(f),i=n._40I instanceof D.Edge,G=n._41I instanceof D.Edge,j=y(o,n),w=j.x,Z=j.y-(t||i?0:g(o,n._40I)/2),X=W(o,n),N=X.x,k=X.y-(t||G?0:g(o,n._41I)/2),O=Y(Z,k)-q;return w>N?(Q.add({y:Z,x:w+L}),Q.add({y:O-L,x:w+L}),Q.add({y:O-L,x:N-L}),Q.add({y:k,x:N-L})):(Q.add({y:Z,x:w-L}),Q.add({y:O-L,x:w-L}),Q.add({y:O-L,x:N+L}),Q.add({y:k,x:N+L})),R(Q,n)}),L("extend.south",function(Y,i,m){var V=new z,t=Y.s($)+e(Y,m),T=Y.s(f),x=Y._40I instanceof D.Edge,v=Y._41I instanceof D.Edge,C=y(m,Y),X=C.x,G=C.y+(T||x?0:g(m,Y._40I)/2),u=W(m,Y),H=u.x,Z=u.y+(T||v?0:g(m,Y._41I)/2),r=n(G,Z)+t;return X>H?(V.add({y:G,x:X+i}),V.add({y:r+i,x:X+i}),V.add({y:r+i,x:H-i}),V.add({y:Z,x:H-i})):(V.add({y:G,x:X-i}),V.add({y:r+i,x:X-i}),V.add({y:r+i,x:H+i}),V.add({y:Z,x:H+i})),R(V,Y)});var C=function(c,X,r,G,W){if(G.sort(function(R,g){var z=R.getSourceAgent()===X?R.getTargetAgent():R.getSourceAgent(),N=g.getSourceAgent()===X?g.getTargetAgent():g.getSourceAgent(),m=z.p(),H=N.p();if(r===T||r===F){if(m.y>H.y)return 1;if(m.y<H.y)return-1}else{if(m.x>H.x)return 1;if(m.x<H.x)return-1}return Z.sortFunc(R.getId(),g.getId())}),W){for(var S,v,n,V=c.getSourceAgent(),D=c.getTargetAgent(),B=0;B<G.size();B++){var t=G.get(B);t.getSourceAgent()===V&&t.getTargetAgent()===D||t.getTargetAgent()===V&&t.getSourceAgent()===D?(v||(v=new z),v.add(t,0)):v?(n||(n=new z),n.add(t)):(S||(S=new z),S.add(t))}G.clear(),S&&G.addAll(S),v&&G.addAll(v),n&&G.addAll(n)}var L=G.indexOf(c),y=G.size(),k=c.s(s);return{side:r,index:L,size:y,offset:-k*(y-1)/2+k*L}},m=function(n,H,T,R,p){var I=H.s(V);return C(H,T,R,T.getAgentEdges().toList(function(k){return n.isVisible(k)&&k.s(V)===I}),p)},A=function(o,g){var c=o.getSourceAgent()===g?o.getTargetAgent():o.getSourceAgent(),V=g.p(),k=c.p(),i=k.x-V.x,Z=k.y-V.y;return i>0&&p(Z)<=i?F:0>i&&p(Z)<=-i?T:Z>0&&p(i)<=Z?l:J},K=function(d,M,j){var W=M.s(V),v=A(M,j);return C(M,j,v,j.getAgentEdges().toList(function(r){return d.isVisible(r)&&r.s(V)===W&&A(r,j)===v}))},O=function(j,X){var o=j.getSourceAgent()===X,d=o?j.getTargetAgent():j.getSourceAgent(),$=X.p(),E=d.p();return o?$.y>E.y?J:l:$.x<E.x?F:T},N=function(Y,A,k){var f=A.s(V),t=O(A,k);return C(A,k,t,k.getAgentEdges().toList(function(v){return Y.isVisible(v)&&v.s(V)===f&&O(v,k)===t}),t===F||t===l)},P=function(I,x){var D=I.getSourceAgent()===x,Y=D?I.getTargetAgent():I.getSourceAgent(),y=x.p(),E=Y.p();return D?y.x<E.x?F:T:y.y>E.y?J:l},E=function(E,o,W){var O=o.s(V),K=P(o,W);return C(o,W,K,W.getAgentEdges().toList(function(v){return E.isVisible(v)&&v.s(V)===O&&P(v,W)===K}),K===F||K===l)},v=function(x,v,U){var L=x.getSourceAgent(),Y=x.getTargetAgent(),G=L.getId()>Y.getId(),Z=G?Y:L,p=G?L:Y,c=Z.p(),h=p.p(),X=U(v,x,Z),t=U(v,x,p),y=x.s(f),W=y?0:H(v,Z)/2,o=y?0:H(v,p)/2,I=y?0:g(v,Z)/2,M=y?0:g(v,p)/2,S=X.offset,N=t.offset,k=X.side,e=t.side,s=new z;return k===J?(s.add({x:c.x+S,y:c.y-I}),s.add({x:c.x+S,y:h.y+N}),e===T?s.add({x:h.x-o,y:h.y+N}):s.add({x:h.x+o,y:h.y+N})):k===l?(s.add({x:c.x+S,y:c.y+I}),s.add({x:c.x+S,y:h.y+N}),e===T?s.add({x:h.x-o,y:h.y+N}):s.add({x:h.x+o,y:h.y+N})):k===T?(s.add({x:c.x-W,y:c.y+S}),s.add({x:h.x+N,y:c.y+S}),e===l?s.add({x:h.x+N,y:h.y+M}):s.add({x:h.x+N,y:h.y-M})):k===F&&(s.add({x:c.x+W,y:c.y+S}),s.add({x:h.x+N,y:c.y+S}),e===l?s.add({x:h.x+N,y:h.y+M}):s.add({x:h.x+N,y:h.y-M})),G&&s.reverse(),R(s,x)};L("ortho2",function(S,V,h){var q,t,n=S.s(f),k=S.s("edge.ortho"),y=S.getSourceAgent(),N=S.getTargetAgent(),O=y.getId()>N.getId(),v=O?N:y,Y=O?y:N,P=v.p(),x=Y.p(),G=K(h,S,v),C=K(h,S,Y),W=n?0:H(h,v)/2,w=n?0:g(h,v)/2,s=n?0:H(h,Y)/2,d=n?0:g(h,Y)/2,D=new z,e=G.offset,j=C.offset,p=G.side;return p===F?(q=x.y>P.y?-e:e,t=P.x+W+(x.x-s-P.x-W)*k,D.add({x:P.x+W,y:P.y+e}),D.add({x:t+q,y:P.y+e}),D.add({x:t+q,y:x.y+j}),D.add({x:x.x-s,y:x.y+j})):p===T?(q=x.y>P.y?-e:e,t=P.x-W-(P.x-W-x.x-s)*k,D.add({x:P.x-W,y:P.y+e}),D.add({x:t-q,y:P.y+e}),D.add({x:t-q,y:x.y+j}),D.add({x:x.x+s,y:x.y+j})):p===l?(q=x.x>P.x?-e:e,t=P.y+w+(x.y-d-P.y-w)*k,D.add({x:P.x+e,y:P.y+w}),D.add({x:P.x+e,y:t+q}),D.add({x:x.x+j,y:t+q}),D.add({x:x.x+j,y:x.y-d})):p===J&&(q=x.x>P.x?-e:e,t=P.y-w-(P.y-w-x.y-d)*k,D.add({x:P.x+e,y:P.y-w}),D.add({x:P.x+e,y:t-q}),D.add({x:x.x+j,y:t-q}),D.add({x:x.x+j,y:x.y+d})),O&&D.reverse(),R(D,S)},!0),L("flex2",function(Q,h,p){var S,w=Q.getSourceAgent(),O=Q.getTargetAgent(),A=w.getId()>O.getId(),U=A?O:w,v=A?w:O,j=U.p(),X=v.p(),L=K(p,Q,U),Y=K(p,Q,v),o=Q.s(f),d=Q.s("edge.flex")+(L.size-1)/2*Q.s(s),$=o?0:H(p,U)/2,i=o?0:g(p,U)/2,N=o?0:H(p,v)/2,G=o?0:g(p,v)/2,x=new z,B=L.offset,W=Y.offset,C=L.side;return C===F?(S=X.y>j.y?-B:B,x.add({x:j.x+$,y:j.y+B}),x.add({x:j.x+$+d+S,y:j.y+B}),x.add({x:X.x-N-d+S,y:X.y+W}),x.add({x:X.x-N,y:X.y+W})):C===T?(S=X.y>j.y?-B:B,x.add({x:j.x-$,y:j.y+B}),x.add({x:j.x-$-d-S,y:j.y+B}),x.add({x:X.x+N+d-S,y:X.y+W}),x.add({x:X.x+N,y:X.y+W})):C===l?(S=X.x>j.x?-B:B,x.add({x:j.x+B,y:j.y+i}),x.add({x:j.x+B,y:j.y+i+d+S}),x.add({x:X.x+W,y:X.y-G-d+S}),x.add({x:X.x+W,y:X.y-G})):C===J&&(S=X.x>j.x?-B:B,x.add({x:j.x+B,y:j.y-i}),x.add({x:j.x+B,y:j.y-i-d-S}),x.add({x:X.x+W,y:X.y+G+d-S}),x.add({x:X.x+W,y:X.y+G})),A&&x.reverse(),R(x,Q)},!0),L("extend.north2",function(N,S,H){var D=N.getSourceAgent(),M=N.getTargetAgent(),a=D.getId()>M.getId(),l=a?M:D,T=a?D:M,v=l.p(),r=T.p(),V=m(H,N,l,J),p=m(H,N,T,J,!0),k=N.s(f),d=k?0:g(H,l)/2,o=k?0:g(H,T)/2,n=V.offset,G=p.offset,U=N.s($)+(V.size-1)/2*N.s(s),_=Y(v.y-d,r.y-o)-U+(v.x<r.x?n:-n),c=new z;return c.add({x:v.x+n,y:v.y-d}),c.add({x:v.x+n,y:_}),c.add({x:r.x+G,y:_}),c.add({x:r.x+G,y:r.y-o}),a&&c.reverse(),R(c,N)},!0),L("extend.south2",function(K,G,t){var U=K.getSourceAgent(),M=K.getTargetAgent(),O=U.getId()>M.getId(),v=O?M:U,C=O?U:M,u=v.p(),V=C.p(),I=m(t,K,v,l),h=m(t,K,C,l,!0),L=K.s(f),d=L?0:g(t,v)/2,E=L?0:g(t,C)/2,k=I.offset,r=h.offset,W=K.s($)+(I.size-1)/2*K.s(s),H=n(u.y+d,V.y+E)+W+(u.x>V.x?k:-k),o=new z;return o.add({x:u.x+k,y:u.y+d}),o.add({x:u.x+k,y:H}),o.add({x:V.x+r,y:H}),o.add({x:V.x+r,y:V.y+E}),O&&o.reverse(),R(o,K)},!0),L("extend.west2",function(I,T,X){var o=I.getSourceAgent(),O=I.getTargetAgent(),g=o.getId()>O.getId(),x=g?O:o,h=g?o:O,v=x.p(),P=h.p(),t=m(X,I,x,J),K=m(X,I,h,J,!0),C=I.s(f),Z=C?0:H(X,x)/2,p=C?0:H(X,h)/2,E=t.offset,M=K.offset,U=I.s($)+(t.size-1)/2*I.s(s),u=Y(v.x-Z,P.x-p)-U+(v.y<P.y?E:-E),r=new z;return r.add({x:v.x-Z,y:v.y+E}),r.add({x:u,y:v.y+E}),r.add({x:u,y:P.y+M}),r.add({x:P.x-p,y:P.y+M}),g&&r.reverse(),R(r,I)},!0),L("extend.east2",function(T,q,y){var Q=T.getSourceAgent(),F=T.getTargetAgent(),A=Q.getId()>F.getId(),C=A?F:Q,b=A?Q:F,p=C.p(),t=b.p(),B=m(y,T,C,J),P=m(y,T,b,J,!0),e=T.s(f),Z=e?0:H(y,C)/2,d=e?0:H(y,b)/2,x=B.offset,G=P.offset,W=T.s($)+(B.size-1)/2*T.s(s),S=n(p.x+Z,t.x+d)+W+(p.y>t.y?x:-x),X=new z;return X.add({x:p.x+Z,y:p.y+x}),X.add({x:S,y:p.y+x}),X.add({x:S,y:t.y+G}),X.add({x:t.x+d,y:t.y+G}),A&&X.reverse(),R(X,T)},!0),L("v.h2",function(n,b,t){return v(n,t,N)},!0),L("h.v2",function(W,T,Q){return v(W,Q,E)},!0)}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);
!function(g,q){"use strict";var v="ht",B=g[v],o="innerHTML",n="className",z=null,w="px",H=B.Default,L=H.getInternal(),b="0",A=function(){return document},R=function(P){return A().createElement(P)},T=function(){return R("canvas")},f=function(R,f,V){R.style.setProperty(f,V,z)},$=function(Z,C,g){H.def(B.widget[Z],C,g)},X=function(z,o){z.appendChild(o)},j=function(Y,F){Y.removeChild(F)},U=L.addEventListener,c=L.removeEventListener,P=H.isTouchable,Y=H.isTouchEvent;L.addMethod(H,{menuLabelFont:(P?"16":"13")+"px arial, sans-serif",menuLabelColor:"#000",menuBackground:"#F0EFEE",menuHoverBackground:"#648BFE",menuHoverLabelColor:"#fff",menuSeparatorWidth:1,menuSeparatorColor:"#999"},!0),B.widget.Menu=function(q){var t=this,u=t._view=L.createView(null,t),d=t.$1g=new B.widget.ContextMenu,F=R("ul");d._r=!0,d._view[n]+=" ht-widget-dropdownmenu",u[n]="ht-widget-menu",F[n]="header",f(u,"margin",b),f(u,"padding",b),f(u,"background",H.menuBackground),f(u,"-webkit-user-select","none"),f(u,"-moz-user-select","none"),f(u,"user-select","none"),f(u,"text-align","left"),f(u,"border-bottom",H.menuSeparatorWidth+"px solid "+H.menuSeparatorColor),f(u,"cursor","default"),f(u,"overflow","auto"),f(u,"white-space","nowrap"),f(u,"font",H.menuLabelFont),f(u,"color",H.menuLabelColor),f(u,"box-sizing","border-box"),f(u,"-moz-box-sizing","border-box"),f(F,"list-style","none"),f(F,"margin",b),f(F,"padding",b),f(F,"display","inline-block"),X(u,F),t.setItems(q),t.$2g=function(W){t.$3g(W)},t.$4g=function(Z){t.$5g(Z)},t.$6g=function(Y){t.$7g(Y)},t.$8g=function(o){t.$9g(o)},t.$9b=function(h){t.$10g(h)},t._autoShow=!0,t.setAutoShow(!1),d.afterHide=function(){t.$11g()},d.afterShow=function(){t.$12g()},c(A(),"keydown",d.$3b),t.$3b=function(q){t.$13g(q)},t.invalidate()},$("Menu",q,{_items:z,$14g:H.menuHoverBackground,$15g:H.menuHoverLabelColor,$16g:{},_enableGlobalKey:!1,ms_v:1,$21g:"smallicons",$22g:0,$23g:0,$24g:"left",getDropDownMenu:function(){return this.$1g},setLayout:function(T){var _=this;if(_.$21g=T,_.setItems(_._items),"largeicons"===T){for(var v=_._view.querySelectorAll(".header-item"),y=0,e=0;e<v.length;e++){var i=v[e];y=Math.max(y,i.clientWidth)}for(var e=0;e<v.length;e++){var i=v[e];f(i,"min-width",y+w)}}this.invalidate()},getLayout:function(){return this.$21g},setHeaderItemHGap:function(y){this.$22g=y;for(var g=this._view.querySelectorAll(".header-item"),K=0;K<g.length;K++){var u=g[K];f(u,"margin-left",y+w),f(u,"margin-right",y+w)}},getHeaderItemHGap:function(){return this.$22g},setHeaderItemVGap:function(I){this.$23g=I;for(var g=this._view.querySelectorAll(".header-item"),R=0;R<g.length;R++){var J=g[R];f(J,"margin-top",I+w),f(J,"margin-bottom",I+w)}},getHeaderItemVGap:function(){return this.$24g},setHeaderItemAlign:function(H){this.$24g=H,f(this._view,"text-align",H)},getHeaderItemAlign:function(){return this.$23g},enableGlobalKey:function(){var Q=this,s=Q._enableGlobalKey;s===!1&&(U(A(),"keydown",Q.$3b),Q._enableGlobalKey=!0)},disableGlobalKey:function(){this._enableGlobalKey=!1,c(A(),"keydown",this.$3b)},setHoverBackground:function(P){this.$14g=P},setHoverColor:function(E){this.$15g=E},setItems:function(B){var m=this,x=m._view,v=m.$21g;if(m._items=B,x.children[0][o]="",m.$16g={},B&&B.length){for(var i=x.children[0],y=0,u=A().createDocumentFragment();y<B.length;y++){var $=B[y],C=R("li"),E=R("span");if($.icon){var e=T();e[n]="menu-item-icon","smallicons"===v?(f(e,"height","1.2em"),f(e,"width","1.2em"),f(e,"vertical-align","middle")):(f(e,"height","32px"),f(e,"width","32px"),f(e,"display","block"),f(e,"margin","0 auto")),e.$20g=$.icon,X(C,e)}C[n]="header-item",f(C,"display","inline-block"),f(C,"vertical-align","top"),f(C,"padding","0 1.2em"),f(C,"line-height","1.8em"),"largeicons"===v&&f(C,"text-align","center"),f(C,"background-color","rgba(0,0,0,0)"),C.setAttribute("data-index",y),m.$16g[y]=$.items,E[o]=$.label,"iconsonly"!==v&&X(C,E),X(u,C)}X(i,u)}},showDropdownMenu:function(h){var F=this,M=F.$16g[h],x=F.$1g,U=F._view.children[0].children[h],A=F.$17g;if(U&&U!==A){A&&F.hideDropdownMenu();var R=U.getBoundingClientRect(),X=H.getWindowInfo();F.$17g=U,x.setItems(M),x.show(R.left+X.left,R.top+R.height+X.top,!1)}},hideDropdownMenu:function(){this.$1g.hide()},getItemByProperty:function(W,r){var Q=this,p=Q._items;return p&&0!==p.length?Q.$1g.getItemByProperty(W,r,p):z},$12g:function(){var a=this,d=a.$17g;d.style.background=a.$14g,d.style.color=a.$15g,a._autoShow||U(A(),P?"touchstart":"mousedown",a.$9b)},$11g:function(){var I=this,H=I.$17g;H&&(H.style.background="",H.style.color="",I.$17g=z),c(A(),P?"touchstart":"mousedown",I.$9b)},$10g:function(I){var v=this,h=v._view,u=v.$1g,H=h.children[0];!A().body.contains(h)||H.contains(I.target)||u._view.contains(I.target)||v.hideDropdownMenu()},$13g:function(O){var U=this,X=U.$1g;A().body.contains(U._view)&&X.$13b.$4b.call(X.$13b,O,U._items)},setAutoShow:function(F){var v=this,w=v.$1g,r=v._view;v._autoShow!==F&&(v._autoShow?(c(r,"mouseover",v.$2g),c(r,"mouseout",v.$4g),c(w._view,"mouseout",v.$4g),P||(U(r,"mouseover",v.$8g),U(r,"mouseout",v.$8g)),U(r,P?"touchstart":"mousedown",v.$6g)):(c(r,"mouseover",v.$8g),c(r,"mouseout",v.$8g),c(r,P?"touchstart":"mousedown",v.$6g),c(A(),P?"touchstart":"mousedown",v.$9b),P||(U(r,"mouseover",v.$2g),U(r,"mouseout",v.$4g),U(w._view,"mouseout",v.$4g))),v._autoShow=F)},$3g:function(X){var D=this,q=D._view.children[0],l=X.target;if(q!==l&&q.contains(l)){for(;"header-item"!==l[n];)l=l.parentNode;D.showDropdownMenu(l.getAttribute("data-index"))}},$5g:function(f){var z=this,c=z._view.children[0],M=z.$1g,$=f.target,P=f.relatedTarget;!c.contains($)&&!M._view.contains($)||c.contains(P)||M._view.contains(P)||z.hideDropdownMenu()},$7g:function(p){p.preventDefault();var I=this,P=I._view.children[0],u=I.$1g,$=p.target;if(H.isLeftButton(p)&&P!==$&&P.contains($))if(Y(p)){for(;"header-item"!==$[n];)$=$.parentNode;var r=$.getAttribute("data-index"),u=I.$1g,f=I._view.children[0].children[r],d=I.$17g;u.isShowing()&&I.hideDropdownMenu(),f!==d&&I.showDropdownMenu(r)}else if(u.isShowing())I.hideDropdownMenu();else{for(;"header-item"!==$[n];)$=$.parentNode;I.showDropdownMenu($.getAttribute("data-index"))}},$9g:function(P){var w=this,x=w._view,H=w.$1g,r=P.target;if(x.contains(r)){for(var g=x.querySelectorAll(".header-item"),y=z,c=0;c<g.length;c++){var X=g[c];X.style.background="",X.style.color="","mouseover"===P.type?X.contains(r)&&(y=X):"mouseout"===P.type&&H.isShowing()&&w.$17g===X&&(y=X)}H.isShowing()&&(y||(y=w.$17g),w.showDropdownMenu(y.getAttribute("data-index"))),y&&(y.style.background=w.$14g,y.style.color=w.$15g)}},getShowingMenuIndex:function(){var $=this.$17g;return $?$.getAttribute("data-index"):-1},addTo:function(m){var D=this,l=D._view;X(m,l),D.invalidate()},dispose:function(){var S=this,n=S._view,x=S.$1g;n&&(S._autoShow?(c(n,"mouseover",S.$2g),c(n,"mouseout",S.$4g),c(x._view,"mouseout",S.$4g)):(c(n,"mouseover",S.$8g),c(n,"mouseout",S.$8g),c(n,P?"touchstart":"mousedown",S.$6g),c(A(),P?"touchstart":"mousedown",S.$9b)),c(A(),"keydown",S.$3b),x.dispose(),n.parentNode&&j(n.parentNode,n),S._view=S.$1g=S.$16g=S._items=S.$17g=S.$2g=S.$4g=S.$6g=S.$8g=S.$9b=S.$3b=z)},$19g:function(x,q,Q,J){var i=L.initContext(x);L.translateAndScale(i,0,0,1),i.clearRect(0,0,Q,J),H.drawStretchImage(i,H.getImage(q),"fill",0,0,Q,J),i.restore()},validateImpl:function(){var l,O,k,M=this,x=M._view,V=x.querySelectorAll(".menu-item-icon");for(k=0;k<V.length;k++){var P=V[k];l=P.clientWidth,O=P.clientHeight,l&&O&&(L.setCanvas(P,l,O),M.$19g(P,H.getImage(P.$20g),l,O))}}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);
!function(V,s){"use strict";var A="ht",z=A+".graph.",R=V[A],C=R.graph,i=R.Default,F=R.Color,o=null,T="px",e=i.getInternal(),K=e.getPinchDist,G=i.preventDefault,l=i.getTouchCount,M=i.startDragging;e.addMethod(i,{overviewBackground:F.widgetBackground,overviewMaskBackground:F.transparent,overviewContentBorderColor:F.widgetBorder,overviewContentBackground:F.background},!0),C.Overview=function(y){var B=this,p=B._view=e.createView(1,B);B._canvas=e.createCanvas(p),p.style.background=i.overviewBackground,p.appendChild(B._mask=e.createDiv()),B.setGraphView(y),B.addListeners()},i.def(z+"Overview",s,{ms_v:1,ms_fire:1,ms_listener:1,ms_ac:["maskBackground","contentBorderColor","contentBackground","autoUpdate","fixToRect"],_autoUpdate:!0,_fixToRect:!1,_rate:1,_scrollRect:{x:0,y:0,width:0,height:0},_maskBackground:i.overviewMaskBackground,_contentBorderColor:i.overviewContentBorderColor,_contentBackground:i.overviewContentBackground,getGraphView:function(){return this.gv},setGraphView:function(V){var n=this;if(n.gv!==V){var w=n.gv;n.gv=V,w&&(w.removeViewListener(n.handleGraphViewChanged,n),w.ump(n.handleGraphViewPropertyChanged,n)),V&&(V.addViewListener(n.handleGraphViewChanged,n),V.mp(n.handleGraphViewPropertyChanged,n)),n.fp("graphView",w,V),n.redraw()}},getCanvas:function(){return this._canvas},getMask:function(){return this._mask},dispose:function(){this.setGraphView(null)},onPropertyChanged:function(){this.redraw()},handleGraphViewChanged:function(U){this._autoUpdate&&"validate"===U.kind&&this.redraw()},handleGraphViewPropertyChanged:function(P){("canvasBackground"===P.property||this.getFixToRect()&&("zoom"===P.property||"translateX"===P.property||"translateY"===P.property))&&this.redraw()},redraw:function(){var e=this;e._redraw||(e._redraw=1,e.iv(50))},validateImpl:function(){var W=this,V=W.gv,D=W._canvas,Q=W.getWidth(),R=W.getHeight(),p=W._redraw;if(V){var k=W._mask,v=k.style,Y=V.getViewRect(),A=this.getFixToRect(),I=A?"boolean"==typeof A?V.getContentRect():A:V.getScrollRect(),j=I.x,q=I.y,$=I.width,U=I.height,y=W._rate=Math.max($/Q,U/R),E=W._x=(Q-$/y)/2,F=W._y=(R-U/y)/2;if(0!==Y.width&&0!==Y.height||W.hasRetry||(i.callLater(W.iv,W,o),W.hasRetry=!0),(Q!==D.clientWidth||R!==D.clientHeight)&&(e.setCanvas(D,Q,R),p=1),e.isSameRect(I,W._scrollRect)||(W._scrollRect=I,p=1),p){var b=e.initContext(D),r=V.getDataModel(),w=r.getBackground()||W._contentBackground,M=W._contentBorderColor,S=i.devicePixelRatio;b.clearRect(0,0,Q*S,R*S);var P=r.getBackground()&&r.a("width")>0&&r.a("height")>0;w&&!P&&e.fillRect(b,E*S,F*S,$/y*S,U/y*S,w),e.translateAndScale(b,-j/y+E,-q/y+F,1/y),V._42(b),b.restore(),M&&e.drawBorder(b,M,E*S,F*S,$/y*S,U/y*S)}v.background=W._maskBackground,v.left=E+(Y.x-j)/y+T,v.top=F+(Y.y-q)/y+T,v.width=Y.width/y+T,v.height=Y.height/y+T,W._redraw=null}else if(p){var b=e.initContext(D);b.clearRect(0,0,Q,R),b.restore(),W._redraw=null}},center:function(j){var v=this,Y=v.gv;if(Y){var W=Y._zoom,g=Y._29I,J=v._rate,s=v._scrollRect,d=i.getLogicalPoint(j,v._canvas),E=s.x+(d.x-v._x)*J,o=s.y+(d.y-v._y)*J;Y.setTranslate((g.width/2-E)*W,(g.height/2-o)*W)}},handle_mousedown:function(u){this.handle_touchstart(u)},handleWindowMouseUp:function(G){this.handleWindowTouchEnd(G)},handleWindowMouseMove:function(V){this.handleWindowTouchMove(V)},handle_mousewheel:function(w){this.handleScroll(w,w.wheelDelta)},handle_DOMMouseScroll:function(q){2===q.axis&&this.handleScroll(q,-q.detail)},handleScroll:function(g,S){if(G(g),this.gv){var C=this.gv;S>0?C.scrollZoomIn():0>S&&C.scrollZoomOut()}},handle_touchstart:function(F){if(G(F),this.gv&&i.isLeftButton(F)){var X=this,$=X.gv,L=l(F);1===L?i.isDoubleClick(F)&&$.isResettable()?$.reset():(X.center(F),M(X,F)):2===L&&(X._dist=K(F),M(X,F))}},handleWindowTouchEnd:function(){delete this._dist},handleWindowTouchMove:function(y){if(this.gv){var b=this,z=b._dist,$=l(y);1===$?b.center(y):2===$&&z!=o&&b.gv.handlePinch(o,K(y),z)}}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);
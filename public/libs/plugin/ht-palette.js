!function(i,$,p){"use strict";var m="px",N="0",l="innerHTML",Q="className",U=ht.Default,_=ht.Color,s=ht.Node,F="position",v="top",u="left",B=U.animate,k=U.getInternal(),L="width",N="0",X="none",h="max-height",S="font",T="background",a="border-box",Y="user-select",z="box-sizing",V="overflow",W=U.isTouchable,E=U.isTouchEvent,k=U.getInternal(),G=_.titleIconBackground,e=U.scrollBarInteractiveSize,H=/msie 9/.test(i.navigator?i.navigator.userAgent.toLowerCase():""),x=null,D=function(){return document},A=function(Y){return D().createElement(Y)},P=function(){return A("div")},o=function(){var m=P(),B=m.style;return B.msTouchAction=X,B.cursor="default",W&&B.setProperty("-webkit-tap-highlight-color","rgba(0, 0, 0, 0)",x),B.position="absolute",B.left=N,B.top=N,m},I=function(){return A("canvas")},q=function(){return document.body},n=function(A,g,f){A.style.setProperty(g,f,x)},j=function(x,l){x.style.removeProperty(l)},J=function(m,P,Q){U.def(ht.widget[m],P,Q)},r=function(T,x){T.appendChild(x)},w=function(g,$){g.removeChild($)},t=k.addEventListener;k.removeEventListener,k.addMethod(U,{paletteExpandIcon:{width:16,height:16,comps:[{type:"triangle",rect:[4,4,10,8],background:G,rotation:3.14}]},paletteCollapseIcon:{width:16,height:16,comps:[{type:"triangle",rect:[4,4,10,8],background:G}]},paletteTitleLabelColor:U.labelSelectColor,paletteTitleLabelFont:U.labelFont,paletteContentLabelFont:U.labelFont,paletteContentLabelColor:"#777",paletteContentBackground:"#fff",paletteTitleHeight:U.widgetTitleHeight,paletteTitleBackground:_.titleBackground,paletteTitleHoverBackground:_.titleBackground,paletteSeparatorWidth:1,paletteSeparatorColor:p,paletteItemHoverBorderColor:_.highlight,paletteItemSelectBackground:_.highlight},!0);var g=".palette-item:hover{border: 1px solid "+U.paletteItemHoverBorderColor+" !important}"+" .palette-header:hover{background: "+U.paletteTitleHoverBackground+" !important}",c=document.createElement("style");W||(c.styleSheet?c.styleSheet.cssText=g:c.appendChild(D().createTextNode(g))),D().getElementsByTagName("head")[0].appendChild(c);var R=function(O){var E=this;E.$22h=O,E.addListeners()};U.def(R,$,{ms_listener:1,getView:function(){return this.$22h.getView()},$26h:function(){var F=this;F.$36h&&q().removeChild(F.$36h),F.$23h=F.$24h=F.$25h=F.$35h=F.$36h=x},handle_touchstart:function(h){for(var q,t=this,E=t.$22h,B=h.target,n=E.sm(),S=E.dm(),N="palette-header",z="palette-header-tool",x="palette-item",C=!1,s=!1,j=!1;B&&(B[Q]||"").indexOf(N)<0&&(B[Q]||"").indexOf(x)<0;)B=B.parentNode;if(B&&B[Q].indexOf(z)>=0?C=!0:B&&B[Q].indexOf(N)>=0?j=!0:B&&B[Q].indexOf(x)>=0&&(s=!0),U.isLeftButton(h))if(t.$27h(h))t.$24h=U.getClientPoint(h),t.$25h=E.ty();else if(C){U.preventDefault(h),q=B.parentNode.$11h;var F=S.getDataById(q),r=F.s("tools")[B.toolIndex];r.action&&r.action.call(E)}else if(j){U.preventDefault(h),q=B.$11h;var F=S.getDataById(q);F.isExpanded()?F.setExpanded(!1):F.setExpanded(!0)}else if(s){q=B.$11h;var u=S.getDataById(q);n.ss(u),E.handleDragAndDrop&&(U.preventDefault(h),u.s("draggable")&&(E.handleDragAndDrop(h,"prepare"),t.$35h=0)),u.s("draggable")||(U.preventDefault(h),t.$24h=U.getClientPoint(h),t.$25h=E.ty())}else U.preventDefault(h),t.$24h=U.getClientPoint(h),t.$25h=E.ty();else t.$26h(h)},handle_mousedown:function(u){this.handle_touchstart(u)},handle_mousewheel:function(l){this.handleScroll(l,l.wheelDelta/40,l.wheelDelta!==l.wheelDeltaX)},handle_DOMMouseScroll:function($){this.handleScroll($,-$.detail,1)},handleScroll:function(k,u,M){var A=this.$22h;U.preventDefault(k),M&&A._41o()&&A.ty(A.ty()+20*u)},handle_mouseup:function(q){this.handle_touchend(q)},handle_touchend:function(Z){var O=this;O.$37h(Z),O.$26h(Z)},handleWindowMouseUp:function(c){this.handleWindowTouchEnd(c)},handleWindowTouchEnd:function(h){var m=this;m.$37h(h),m.$26h(h)},$37h:function(Y){var g=this,c=g.$22h;2===g.$35h&&(g.$35h=3,c.handleDragAndDrop(Y,"end"))},handleWindowMouseMove:function(M){this.handleWindowTouchMove(M)},handleWindowTouchMove:function(X){var c=this,N=c.$22h,Y=c.$23h,r=c.$24h,g=c.$25h,p=U.getClientPoint(X),Q=N._29I,S=c.$36h;if(1===c.$35h||2===c.$35h){if(c.$35h=2,N.handleDragAndDrop(X,"between"),E(X)){var A=X.touches[0];X=A?A:X.changedTouches[0]}S.style.left=X.pageX-parseInt(S.width)/2+m,S.style.top=X.pageY-parseInt(S.height)/2+m}else"p"===Y?N.ty(g+p.y-r.y):"v"===Y&&N.ty(g+(r.y-p.y)/Q.height*N._59I)},handle_mousemove:function(c){this.handle_touchmove(c)},handle_touchmove:function(p){if(!U.isDragging()&&U.isLeftButton(p)){var w=this,d=w.$22h,H=w.$27h(p);if(w.$24h){if(!w.$23h){if(U.getDistance(U.getClientPoint(p),w.$24h)<2)return;w.$23h=H?"v":"p",U.startDragging(w,p)}}else if(H)d._43o();else if(0===w.$35h){if(w.$35h=1,d.handleDragAndDrop(p,"begin"),U.startDragging(w,p),E(p)){var I=p.touches[0];p=I?I:p.changedTouches[0]}var D=w.$36h=new Image,B=d.$10h[d.sm().ld().getId()].querySelector(".image-box"),Y=parseInt(B.style.width),g=parseInt(B.style.height);D.draggable=!1,D.src=B.toDataURL(),D.width=Y,D.height=g,D.style.position="absolute",D.style.left=p.pageX-Y/2+m,D.style.top=p.pageY-g/2+m,q().appendChild(D)}}},$27h:function(W){var a=this.$22h,V=a.getView(),O=V.getBoundingClientRect(),v=a._29I,q=W.clientX-O.left+V.scrollLeft;return a._41o()&&v.x+v.width-q<e}}),ht.widget.Palette=function(y){var K=this,w=K._view=k.createView(null,K);K.$9h={},K.$10h={},K.$4h={},K._29I={x:0,y:0,width:0,height:0},K._59I=0,K.dm(y?y:new ht.DataModel),w[Q]="ht-widget-palette",K.$29h=new R(K),n(w,T,U.paletteContentBackground),n(w,V,"auto"),n(w,z,a),n(w,"-moz-"+z,a),n(w,"-webkit-"+Y,X),n(w,"-moz-"+Y,X),n(w,"-ms-"+Y,X),n(w,Y,X),n(w,"position","absolute"),n(w,"overflow","hidden"),r(w,K._79O=o()),t(w,"dragstart",function(T){T.dataTransfer&&(T.dataTransfer.setData("Text","nodeid:"+T.target.$11h),T.dataTransfer.effectAllowed="all",K.$29h.$26h())})},J("Palette",$,{ms_v:1,ms_fire:1,ms_dm:1,ms_sm:1,ms_vs:1,ms_bnb:1,ms_ac:["itemImageWidth","itemImageHeight","itemImagePadding","itemMargin","layout","autoHideScrollBar","scrollBarSize","scrollBarColor"],$30h:0,_itemImagePadding:4,_itemImageWidth:70,_itemImageHeight:50,_itemMargin:10,_layout:"largeicons",_autoHideScrollBar:U.autoHideScrollBar,_scrollBarSize:U.scrollBarSize,_scrollBarColor:U.scrollBarColor,getViewRect:function(){return this._29I},ty:function(K){return K==x?this.getTranslateY():(this.setTranslateY(K),void 0)},setTranslateY:function(Q){if(this.$32h==x){var W=this,H=W.$33h(Q),$=W.$30h;W.$30h=H,W.fp("translateY",$,H)}},getTranslateY:function(){return this.$30h},setLayout:function(J){var V,n,k=this,O=k._layout;k._layout=J,"smallicons"===J?V=n=20:"iconsonly"===J?V=n=50:(V=70,n=50),k.setItemImageWidth(V),k.setItemImageHeight(n),k.setItemImagePadding(4),k.fp("layout",O,J)},getDataAt:function(E){for(var y=E.target;y&&y.$11h==x;)y=y.parentNode;return y&&y.$11h!=x?this.getDataModel().getDataById(y.$11h):void 0},$20h:function(){var l=16;return W&&(l*=1.2),l},$19h:function(){return U.paletteTitleHeight},$18h:function(){var _=U.paletteSeparatorWidth,G=U.paletteTitleBackground,b=U.paletteSeparatorColor||U.brighter(G);return _+m+" solid "+b},$17h:function(I){n(I,"cursor","pointer"),n(I,"display","inline-block"),n(I,"margin-right",(W?8:4)+m),n(I,"vertical-align",v)},$1h:function(o){var w=this,i=P(),J=P(),W=A("span");i[Q]="palette-header",n(i,F,"relative"),n(i,T,U.paletteTitleBackground),n(i,"color",U.paletteTitleLabelColor),n(i,v,N),n(i,z,a),n(i,"-moz-"+z,a),n(i,"padding","0 5px 0 0"),n(i,"border-top",w.$18h()),n(i,L,"100%"),n(i,"cursor","pointer"),n(i,"white-space","nowrap"),n(i,V,"hidden"),n(i,S,U.paletteTitleLabelFont),n(i,"line-height",w.$19h()+m),i.$11h=o.getId();var B=I(),f=w.$19h(),C=w.$20h();w.$17h(B),k.setCanvas(B,C,f),r(i,B);var s=o.s("tools");if(s)for(var M=0;M<s.length;M++){var p=I();w.$17h(p),k.setCanvas(p,C,f),p[Q]="palette-header-tool palette-header-tool"+o.getId()+"-"+M,p.style.position="absolute",p.style.right=(C+10)*M+"px",p.toolIndex=M,r(i,p)}return B[Q]="palette-toggle-icon-"+o.getId(),J[Q]="palette-content",n(J,"max-height",0+m),n(J,S,U.paletteContentLabelFont),n(J,V,"hidden"),J.$11h=o.getId(),w.$9h[o.getId()]=J,W[l]=o.getName(),n(W,S,U.paletteTitleLabelFont),r(i,B),r(i,W),[i,J]},$2h:function(V){var b=this,C=b._layout,z=H&&V.s("draggable")?A("a"):P(),Z=I(),N=P(),a=V.getName()||"",B=V.s("title")||V.getToolTip()||a,h=b._itemMargin;Z[Q]="image-box";var E=b.getItemImageWidth(),f=b.getItemImageHeight();return k.setCanvas(Z,E,f),r(z,Z),N[l]=a,N[Q]="label-box","iconsonly"!==C&&r(z,N),z[Q]="palette-item",n(z,"vertical-align",v),n(z,"cursor","pointer"),n(z,"border-radius",5+m),n(z,"border","1px solid transparent"),n(z,"text-align","center"),n(z,"display","inline-block"),n(z,"margin-left",h+m),n(z,"margin-top",h+m),n(z,"color",U.paletteContentLabelColor),"smallicons"===C?(n(Z,"vertical-align","middle"),n(z,"margin-left",2+m),n(z,"margin-top",2+m),n(z,"padding",2+m),n(z,"text-align",u),n(N,"display","inline-block"),n(N,"min-width",b.$21h+b._itemMargin+m)):"largeicons"===C&&(n(N,"max-width",E+m),n(N,"overflow","hidden")),z.$11h=V.getId(),B&&(z.title=B),V.s("draggable")&&!b.handleDragAndDrop&&(H?(z.href="#",n(z,"text-decoration",X)):z.draggable="true"),z},$16h:function(b,E,x,l){var K=k.initContext(b);k.translateAndScale(K,0,0,1),K.clearRect(0,0,x,x);var V=(x-l)/2;U.drawStretchImage(K,U.getImage(E),"fill",0,V,l,l),K.restore()},$15h:function(B){var m=this,z=B.getId(),D=m._view.querySelector(".palette-toggle-icon-"+z),r=B.isExpanded()?U.paletteCollapseIcon:U.paletteExpandIcon;if(D&&r){var S=m.$19h(),t=m.$20h();m.$16h(D,r,S,t)}},_drawToolsIcon:function(B){var W=this,I=B.s("tools");if(I)for(var P=0;P<I.length;P++){var G=W._view.querySelector(".palette-header-tool"+B.getId()+"-"+P),T=I[P].icon,o=W.$19h(),j=W.$20h();W.$16h(G,T,o,j)}},$14h:function(d){var q=this,J=d.getId(),o=q.$10h[J].querySelector(".image-box"),l=d.getImage(),f=d.s("image.stretch");if(o&&l){var W=k.initContext(o),e=q.getItemImagePadding();e="smallicons"===q._layout?e/2:e;var A=q.getItemImageWidth()-2*e,m=q.getItemImageHeight()-2*e;k.translateAndScale(W,0,0,1),W.clearRect(0,0,A,m),U.drawStretchImage(W,U.getImage(l),f,e,e,A,m,d,q,q.getBodyColor(d)),W.restore()}},validateImpl:function(){var n,o,g,M=this,$=M.$9h,k=M._layout,E=M.$10h,c=M.$4h,Y=M._view,S=M.dm();if(M.$13h&&(delete M.$13h,c={},S.each(function(u){c[u.getId()]=u})),"smallicons"===k)for(var P in c){var e=c[P];if(e instanceof s){var L=e.getName()||"",D=U.getTextSize(U.paletteContentLabelFont,L).width;M.$21h!=x&&M.$21h>D||(M.$21h=D)}}for(var P in c){g=c[P];var I,R;if(S.contains(g)){if(g instanceof ht.Group){var q,y=M.$1h(g),p=E[g.getId()];p&&(q=p.nextSibling,w(Y,q),w(Y,p)),o=S.getSiblings(g).indexOf(g);var O=Y.children[2*o]||M._79O;O&&O.parentNode?(Y.insertBefore(y[0],O),Y.insertBefore(q||y[1],O)):(Y.appendChild(y[0]),Y.appendChild(q||y[1])),E[g.getId()]=y[0],n=$[g.getId()]=q||y[1],R=g.$12h;var J=g.s("promptText");R||(g.$12h=A("div"),g.$12h[l]=J||"",R=g.$12h),0===g.getChildren().size()?n.contains(R)||r(n,R):n.contains(R)&&w(n,R)}else if(I=g.getParent()){var X=M.$2h(g),H=E[g.getId()];n=$[I.getId()],H&&w(H.parentNode,H),o=S.getSiblings(g).indexOf(g);var G=n.children[o];G?n.insertBefore(X,G):r(n,X),E[g.getId()]=X,M.$14h(g)}}else{var u=E[g.getId()],T=u.parentNode;if(g instanceof ht.Group){var v=u.nextSibling;w(Y,u),w(Y,v),delete $[g.getId()]}else w(T,u),0===T.children.length&&(I=S.getDataById(T.$11h),I&&(R=I.$12h,R&&!T.contains(R)&&r(T,R)));delete E[g.getId()]}}M.$4h={};var z=function(){var g=M._59I,L=0;M.$32h!=x&&(clearInterval(M.$32h),L=0,delete M.$32h),M.$32h=setInterval(function(){M.$31h(),g===M._59I?(L++,L>=2&&(clearInterval(M.$32h),delete M.$32h)):(L=0,g=M._59I)},30)};for(var b in $)if(n=$[b],g=S.getDataById($[b].$11h),M.$15h(g),M._drawToolsIcon(g),g.isExpanded()){if(n.style.maxHeight===0+m){var V=n.scrollHeight+M._itemMargin+m;B(n).duration(200).set(h,V).set("padding-bottom",M._itemMargin+m).end(function(){return function(){z()}}(V))}else n.style.maxHeight=n.scrollHeight+m;n.style.paddingBottom=M._itemMargin+m}else n.style.maxHeight!==0+m&&B(n).duration(200).set(h,N).set("padding-bottom",N).end(function(){return function(){z()}}(n));M.$28h(),M.$31h()},$31h:function(){for(var p=this,$=p._view,K=0,N=$.children,I=0;I<N.length;I++){var R=N[I];R.className&&R.className.indexOf("palette-")>=0&&(K+=R.offsetHeight)}p._59I=K,p.$30h=p.$33h(p.ty());var o=p.ty();$.scrollTop=-o,p._29I={x:0,y:-o,width:$.clientWidth,height:$.clientHeight},n(p._79O,v,-o+m),p._93I()},$33h:function(H){var W=this,I=W._29I.height-W._59I;return I>H&&(H=I),H>0?0:Math.round(H)},redraw:function(){this.$13h||(this.$13h=1,this.iv())},onPropertyChanged:function(y){["autoHideScrollBar","scrollBarSize","scrollBarColor","translateY"].indexOf(y.property)<0&&this.redraw(),"translateY"===y.property&&(this.iv(),this._43o())},findDataByName:function(n){for(var I=this.dm().getDatas(),o=0;o<I.size();o++){var T=I.get(o);if(T.getName()===n)return T}},setDataModel:function(l){var $=this,L=$._dataModel,W=$._selectionModel;L!==l&&(L&&(L.umm($.$6h,$),L.umd($.$8h,$),L.umh($.$7h,$),W||L.sm().ums($.$28h,$)),$._dataModel=l,l.mm($.$6h,$),l.md($.$8h,$),l.mh($.$7h,$),W?W._21I(l):l.sm().ms($.$28h,$),$.sm().setSelectionMode("single"),$.fp("dataModel",L,l))},$6h:function(R){var F=this,w=F._view,_=R.data,d=F.$4h;"add"===R.kind?d[_.getId()]=_:"remove"===R.kind?d[_.getId()]=_:"clear"===R.kind&&(F.$10h={},F.$9h={},F.$4h={},w[l]=""),F.iv()},$7h:function(U){var y=this,g=U.data;y.$4h[g.getId()]=g,y.iv()},$8h:function(B){var V=this,b=B.data,y=B.property;"expanded"===y?V.iv():(V.$4h[b.getId()]=b,V.iv())},$28h:function(){var K,e=this,$=e.sm(),H="palette-item",d=$.ld();this.dm().each(function(_){K=e.$10h[_.getId()],K&&K[Q].indexOf(H)>=0&&(_===d?n(K,T,U.paletteItemSelectBackground):j(K,T))})}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);
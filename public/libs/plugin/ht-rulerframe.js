!function(F,C){"use strict";var i="position",p="absolute",m="relative",l="px",Y="left",$="right",V="top",M="bottom",K="display",I="none",g="block",s=ht.Default,y=s.getInternal(),W=Math.floor,j=Math.ceil,S=Math.PI,R=null,J=F.parseInt,O=function(P){return P.getContext("2d")},P=function(){return document},A=function(e){return P().createElement(e)},U=function(){return A("canvas")},N=function(E,W,w){E.style.setProperty(W,w,R)},b=function(D,C,H){s.def(ht.widget[D],C,H)},T=function(B,m){B.appendChild(m)},L=function(j,T){j.removeChild(T)},y=s.getInternal(),c=y.addEventListener,u=y.removeEventListener;ht.widget.RulerFrame=function(C){var G=this,R=G._view=y.createView(null,G),B=G.$1k=U(),P=G.$2k=U(),l=G.$3k=U(),d=G.$4k=U();G._defaultRulerConfig={size:20,borderWidth:1,borderStyle:"solid",borderColor:"#888",defaultMajorTickSpacing:50,minMajorTickSpacing:10,minPhysicalMajorTickSpacing:40,maxPhysicalMajorTickSpacing:100,tickSpacingAdaptable:!0,majorTickTextFont:"12px Arial",majorTickTextColor:"#666",majorTickColor:"#888",minorTickColor:"#ccc",background:"rgba(0,0,0,0)",guideColor:"rgb(0, 173, 239)",guideWidth:2,guideVisible:!1,guideTipVisible:!1,guideTipBorderColor:"#666",guideTipTextColor:"#666",guideTipTextFont:"12px Arial",guideTipBackground:"#fff"},G._topRulerConfig={visible:!0},G._rightRulerConfig={visible:!1},G._bottomRulerConfig={visible:!1},G._leftRulerConfig={visible:!0},T(R,B),T(R,l),T(R,P),T(R,d),N(R,i,m),N(R,"box-sizing","border-box"),N(R,"-moz-box-sizing","border-box"),N(B,i,p),N(P,i,p),N(l,i,p),N(d,i,p),G.$14k=function(){G.$13k=1,G.iv()},G.$15k=function(d){if(G._topRulerConfig.guideVisible||G._rightRulerConfig.guideVisible||G._bottomRulerConfig.guideVisible||G._leftRulerConfig.guideVisible||G._defaultRulerConfig.guideVisible||(G._topRulerConfig.guideTipVisible||G._rightRulerConfig.guideTipVisible||G._bottomRulerConfig.guideTipVisible||G._leftRulerConfig.guideTipVisible||G._defaultRulerConfig.guideTipVisible)&&G._component){var W=R.getBoundingClientRect();G.$16k={x:d.clientX-W.left,y:d.clientY-W.top},G.$5k()}},G.setComponent(C)},b("RulerFrame",C,{ms_v:1,ms_fire:1,ms_ac:["defaultRulerConfig","topRulerConfig","rightRulerConfig","bottomRulerConfig","leftRulerConfig","component"],setComponent:function(j){var w=this,J=w._component,V=w.getView();if(V){if(w._component=j,w.fp("component",J,j),J){var G=w.getComponentView(J);L(V,G),u(V,"mousemove",w.$15k),w.removeComponentPropertyChangeListener(J,w.$14k)}if(j){var I=w.getComponentView(j);T(V,I),N(I,i,p),c(V,"mousemove",w.$15k),w.addComponentPropertyChangeListener(j,w.$14k)}}},addComponentPropertyChangeListener:function(S,p){S&&S.mp&&S.mp(p)},removeComponentPropertyChangeListener:function(Q,$){Q&&Q.ump&&Q.ump($)},getComponentHZoom:function(j){return j&&j.getZoom?j.getZoom():1},getComponentVZoom:function(I){return I&&I.getZoom?I.getZoom():1},getComponentViewRect:function(e){return e&&e.getViewRect?e.getViewRect():void 0},getComponentView:function(q){return q&&q.getView?q.getView():q},invalidateComponent:function(P){P&&P.iv&&P.iv()},validateComponent:function(u){u&&u.validate&&u.validate()},$7k:function(l,M,i,d,k,A,X,e,V,o,c,r){if(M.visible){var s=this._defaultRulerConfig,L="borderStyle",a="borderColor",n="borderWidth",S="background",U=M[L]||s[L],H=M[a]||s[a],h=M[n]||s[n],Y=M.size!=R?M.size:s.size,C=M[S]||s[S],$=Y+h,F=this.$6k(h,U,H,l,i,k,$,X,e,V,o,c,r);N(l,k,"0px"),A?y.setCanvas(l,d-F,Y):y.setCanvas(l,Y,d-F),N(l,"background",C),N(l,K,g)}else N(l,K,I),N(this.getComponentView(this._component),k,"0px")},$6k:function(O,z,I,g,u,L,S,A,K,n,_,P,a){var p=0;return N(g,u,O+"px "+z+" "+I),N(this.getComponentView(this._component),L,S+l),A?(N(g,K,n+l),p+=n):N(g,K,"0px"),_?(N(g,P,a+l),p+=a):N(g,P,"0px"),p},validateImpl:function(){var e=this,d=e._component,I=e.$1k,Z=e.$2k,a=e.$3k,o=e.$4k,r=e._view,w=e._defaultRulerConfig,Q=e._topRulerConfig,v=e._rightRulerConfig,K=e._bottomRulerConfig,x=e._leftRulerConfig,f=w.size;if(r&&d){var i=Q.size!=R?Q.size:f,b=v.size!=R?v.size:f,p=K.size!=R?K.size:f,H=x.size!=R?x.size:f;e.$7k(I,Q,"border-bottom",r.offsetWidth,V,!0,x.visible,Y,H,v.visible,$,b),e.$7k(Z,v,"border-left",r.offsetHeight,$,!1,Q.visible,V,i,K.visible,M,p),e.$7k(a,K,"border-top",r.offsetWidth,M,!0,x.visible,Y,H,v.visible,$,b),e.$7k(o,x,"border-right",r.offsetHeight,Y,!1,Q.visible,V,i,K.visible,M,p),e.$13k?delete e.$13k:e.invalidateComponent(d),e.validateComponent(d),e.$5k()}},$5k:function(){function Y(o,x,f,K,P,J){if(x.visible){var W=O(o),s=x[G]||X,i=x[S]!=R?x[S]:B,m=x[C]||z,w=x[H]||h,Y=x.size!=R?x.size:_,ro=x[j]||g,Cj=x[U]||V,vg=x[y]||d,Kf=x[u]!=R?x[u]:b,cl=x[F]!=R?x[F]:t,Qq=x[N]!=R?x[N]:r,_r=x[T]!=R?x[T]:D,fh=x[E]!=R?x[E]:Z,gp=x[k]!=R?x[k]:$,jc=x[p]||tk,np=x[n]||sb;i&&(s=I[J]=I.$8k(I[J]||s,x[A]||q,x[v]||e,K?a:L,Cj)),f.call(I,W,M,c,Q,l,Y,K?a:L,s,m,w,P,ro,vg);var um=I.$16k;(Kf||cl)&&um&&(K?I.$9k(W,um.x,Y,jc,np,Kf,cl,Qq,_r,fh,gp):I.$10k(W,um.y,Y,jc,np,Kf,cl,Qq,_r,fh,gp,P))}}var I=this,s=I.$1k,W=I.$2k,i=I.$3k,x=I.$4k,J=I._topRulerConfig,m=I._rightRulerConfig,o=I._bottomRulerConfig,w=I._leftRulerConfig,P=I._defaultRulerConfig,K=I._component,f=I.getComponentViewRect(K),a=I.getComponentHZoom(K),L=I.getComponentVZoom(K),M=f.x*a,Q=M+f.width*a,c=f.y*L,l=c+f.height*L,_=I._defaultRulerConfig.size,G="defaultMajorTickSpacing",A="maxPhysicalMajorTickSpacing",v="minPhysicalMajorTickSpacing",S="tickSpacingAdaptable",C="majorTickTextFont",H="majorTickTextColor",j="majorTickColor",y="minorTickColor",u="guideVisible",F="guideTipVisible",N="guideTipBorderColor",T="guideTipTextColor",E="guideTipTextFont",k="guideTipBackground",p="guideColor",n="guideWidth",U="minMajorTickSpacing",X=P[G],q=P[A],e=P[v],B=P[S],z=P[C],h=P[H],g=P[j],V=P[U],d=P[y],b=P[u],t=P[F],r=P[N],D=P[T],Z=P[E],$=P[k],tk=P[p],sb=P[n];I._view&&K&&(Y(s,J,I.$11k,!0,!1,"_currentTopMajorTickSpacing"),Y(W,m,I.$12k,!1,!0,"_currentRightMajorTickSpacing"),Y(i,o,I.$11k,!0,!0,"_currentBottomMajorTickSpacing"),Y(x,w,I.$12k,!1,!1,"_currenLeftMajorTickSpacing"))},$8k:function(L,A,Q,y,J){return Q>L*y?L=W(A/y/J)*J:L*y>A&&(L=j(Q/y/J)*J),L},getHTipText:function(e){var m=this,k=m._component,z=0,M=m._view.getBoundingClientRect();return k.lp?z=J(k.lp({x:e.x+M.left,y:e.y}).x):z-=J(this.getComponentView(k).style.left)||0,z},$9k:function(j,a,p,P,L,G,u,A,l,D,m){var o=this,c=o._component;j.save(),y.translateAndScale(j,0,0,1);var s=a-(J(this.getComponentView(c).style.left)||0),U=0;if(a=o.getHTipText(o.$16k),G&&(j.beginPath(),j.fillStyle=P,j.rect(s,U,L,p),j.fill()),u){j.beginPath(),j.textAlign="center",j.textBaseline="middle",j.font=D;var H=j.measureText(a).width+6;j.fillStyle=m,j.rect(s-H/2,U,H,p),j.fill(),j.strokeStyle=A,j.stroke(),j.beginPath(),j.fillStyle=l,j.fillText(a,s,U+p/2)}j.restore()},getVTipText:function(X){var j=this,Z=j._component,n=0,d=j._view.getBoundingClientRect();return Z.lp?n=J(Z.lp({x:X.x,y:X.y+d.top}).y):n-=J(this.getComponentView(Z).style.top)||0,n},formatScaleText:function(x){return Math.round(x)},$10k:function(g,G,O,h,R,q,H,Z,I,M,e,U){var s=this,i=s._component;g.save(),y.translateAndScale(g,0,0,1);var V=O/2,f=G-(J(this.getComponentView(i).style.top)||0);if(G=s.getVTipText(s.$16k),q&&(g.beginPath(),g.fillStyle=h,g.rect(V-O/2,f,O,R),g.fill()),H){g.translate(V,f),g.rotate((U?90:-90)*S/180),g.translate(-V,-f),g.beginPath(),g.textAlign="center",g.textBaseline="middle",g.font=M;var Y=g.measureText(G).width+6;g.fillStyle=e,g.rect(V-Y/2,f-O/2,Y,O),g.fill(),g.strokeStyle=Z,g.stroke(),g.fillStyle=I,g.fillText(G,V,f)}g.restore()},$11k:function(r,H,N,T,w,a,S,L,c,b,p,O,Q){r.save(),N=0;var B=H,G=T,U=(B+G)/2;H=0,T=G-B,y.translateAndScale(r,0,0,1);var k=0,$=0,I=J(a/2),i=a-I,u=p?0:I,e=L*S,x=e/10;H-=e,T+=e,r.clearRect(H,0,T-H,a),r.beginPath(),r.fillStyle=Q;var F=W(U/x)*x-B;for(k=F;T>k;k+=x)r.rect(k,N+u,1,i);for(k=F;k>H;k-=x)r.rect(k,N+u,1,i);for(r.fill(),u=p?0:1,r.beginPath(),r.fillStyle=O,F=W(U/e)*e-B,k=F;T>k;k+=e)r.rect(k,N+u,1,a-1);for(k=F;k>H;k-=e)r.rect(k,N+u,1,a-1);r.fill();var m=J(/\d+px/.exec(c)[0]),M=(m||10)/2;r.textBaseline="middle",u=p?a-M-2:M+2,r.beginPath(),r.fillStyle=b,r.font=c;var K=W(U/e)*e/S;for(k=F,$=K;T>k;k+=e,$+=L){var h=this.getHScaleText?this.getHScaleText(k):$;r.fillText(this.formatScaleText(h),k+2,N+u)}for(k=F,$=K;k>H;k-=e,$-=L){var h=this.getHScaleText?this.getHScaleText(k):$;r.fillText(this.formatScaleText(h),k+2,N+u)}r.restore()},$12k:function(x,V,I,N,T,n,f,i,a,l,p,G,A){function $(W,o,t,M,Y,P){Y=F.getVScaleText?F.getVScaleText(t):Y,Y=F.formatScaleText(Y),x.translate(W+o,t),x.rotate(-M),x.translate(-W-o,-t),x.fillText(Y,W+o+(P?2:1),t),x.translate(W+o,t),x.rotate(M),x.translate(-W-o,-t)}x.save(),V=0;var b=I,_=T,B=(b+_)/2;I=0,T=_-b,y.translateAndScale(x,0,0,1);var w=0,F=this,t=0,e=J(n/2),k=n-e,M=p?0:e,Q=i*f,s=Q/10;I-=Q,T+=Q,x.clearRect(V,0,n,T-I),x.beginPath(),x.fillStyle=A;var j=W(B/s)*s-b;for(w=j;T>w;w+=s)x.rect(V+M,w,k,1);for(w=j;w>I;w-=s)x.rect(V+M,w,k,1);for(x.fill(),M=p?0:1,x.beginPath(),x.fillStyle=G,j=W(B/Q)*Q-b,w=j;T>w;w+=Q)x.rect(V+M,w,n-1,1);for(w=j;w>I;w-=Q)x.rect(V+M,w,n-1,1);x.fill();var E=J(/\d+px/.exec(a)[0]),o=(E||10)/2,v=90*S/180;x.textBaseline="middle",M=p?n-o:o+2,v=p?-v:v,x.beginPath(),x.fillStyle=l,x.font=a;var q=W(B/Q)*Q/f;for(w=j,t=q;T>w;w+=Q,t+=i)$(V,M,w,v,t,p);for(w=j,t=q;w>I;w-=Q,t-=i)$(V,M,w,v,t,p);x.restore()},onPropertyChanged:function(){this.iv()},dispose:function(){var t=this,m=t._component,g=t._view;m&&t.removeComponentPropertyChangeListener(m,t.$14k),g&&(u(g,"mousemove",t.$15k),L(g.parentNode,g),t._view=null)}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);